!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var n,a,i,r,o=[],u=!0,l=!1;try{if(i=(s=s.call(t)).next,0===e){if(Object(s)!==s)return;u=!1}else for(;!(u=(n=i.call(s)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=s.return&&(r=s.return(),Object(r)!==r))return}finally{if(l)throw a}}return o}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,s,n){return s=i(s),function(e,s){if(s&&("object"==t(s)||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,a()?Reflect.construct(s,n||[],i(e).constructor):s.apply(e,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function u(t,e){var s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=l(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,o=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return r=t.done,t},e:function(t){o=!0,i=t},f:function(){try{r||null==s.return||s.return()}finally{if(o)throw i}}}}function l(t,e){if(t){if("string"==typeof t)return h(t,e);var s={}.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,n=Array(e);s<e;s++)n[s]=t[s];return n}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function f(t,e,s){return e&&g(t.prototype,e),s&&g(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(e){var s=function(e,s){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,s||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(e,"string");return"symbol"==t(s)?s:s+""}System.register(["./main-legacy-Dqqf-TLO.js"],(function(a,i){"use strict";var o;return{setters:[function(t){o=t.b2}],execute:function(){var i,l,h,g,d,v,m,y,p,b,k,w,P,M,D,T,I,A,C,S,B,E,R,N,O,L,W,V,_,F,j,H=function(){function t(e,s,n){c(this,t),this.alias=e,this.value=s,this.type=n}return f(t,null,[{key:"fromRawData",value:function(e,s){var n=s.find((function(t){return t.alias===e.alias}));if(!n)return console.warn('No definition found for variable alias "'.concat(e.alias,"\", defaulting to 'unknown'")),new t(e.alias,e.value,"unknown");var a=t.parseValue(e.value,n.type);return new t(e.alias,a,n.type)}},{key:"parseValue",value:function(t,e){switch(e){case"S":case"PR":return String(t);case"A":case"D":case"R":case"T":return Number(t);case"I":return parseInt(t);case"B":return"true"===t.toLocaleLowerCase()||"1"===t;default:return console.warn('unhandled type "'.concat(e,'", returning raw value')),t}}},{key:"parseVariables",value:function(e,s){var n,a={},i=u(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=t.fromRawData(r,s);a[o.alias]=o.value}}catch(l){i.e(l)}finally{i.f()}return a}},{key:"parseTypedVariables",value:function(e){if(!e)return null;var s,n={},a={},i=u(e.variables);try{for(i.s();!(s=i.n()).done;){var r=s.value;a[r.alias]=t.parseValue(r.value,r.type)}}catch(o){i.e(o)}finally{i.f()}return n[e.name]=a,n}},{key:"parseTypedVariablesArray",value:function(t){if(!t)return null;var e,s={},n=u(t);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=this.parseTypedVariables(a);i&&i[a.name]&&(s[a.name]=i[a.name])}}catch(r){n.e(r)}finally{n.f()}return s}}])}(),U=function(){function t(e,s,n,a,i,r,o,u,l,h){c(this,t),this.swoodVersion=e,this.schemaVersion=s,this.name=n,this.projectPath=a,this.reportPath=i,this.createdDate=r,this.createdBy=o,this.documents=u,this.messages=l,this.variables=h}return f(t,null,[{key:"fromProjectRaw",value:function(e,s){var n=H.parseVariables(e.variables,s);return t.reportPath=e.reportPath,new t(e.reportVersion,e.schemaVersion,e.projectName,e.projectPath,e.reportPath,e.createdDate,e.createdBy,G.fromDocumentsRaw(e.documents),e.messages,n)}}])}();(i=U).reportPath="",i.getReportPath=function(){return i.reportPath};var G=f((function t(e,s,n,a,i,r,o,u,l,h){c(this,t),this.name=e,this.type=s,this.docType=n,this.processingStatus=a,this.absoluteURI=i,this.relativeURI=r,this.hidden=o,this.storageType=u,this.exists=l,this.objType=h}));(l=G).fromDocumentRaw=function(t){var e,s="",n="file:///"+U.getReportPath().replace(/\\/g,"/")+"/",a=t.absoluteURI;return a.startsWith(n)&&(s=a.slice(n.length)),new l(null!==(e=t.documentName)&&void 0!==e?e:"",t.type,t.docType,t.processingStatus,t.absoluteURI,s,t.hidden,t.storageType,t.exists,t.objType)},l.fromDocumentsRaw=function(t){var e,s=[],n=u(null!=t?t:[]);try{for(n.s();!(e=n.n()).done;){var a=e.value;s.push(l.fromDocumentRaw(a))}}catch(i){n.e(i)}finally{n.f()}return s};var x=function(){function t(e,s,n,a,i,r,o,u,l,h){c(this,t),this.key=e,this.messages=s,this.variables=n,this.heritedVariables=a,this.typedObjectVariables=i,this.refPrograms=r,this.refParts=o,this.refAssemblies=u,this.documents=l,this.swcps=h,this.programs=[],this.parts=[],this.assemblies=[]}return f(t,null,[{key:"fromAssemblyRaw",value:function(e,s){var n=H.parseVariables(e.variables,s),a=H.parseTypedVariablesArray(e.heritedVariables),i=H.parseTypedVariables(e.typedObjectVariables);return new t(e.ID,e.messages,n,a,i,e.programs,e.parts,e.assemblies,G.fromDocumentsRaw(e.documents),e.swcps)}}])}(),Z=function(){return f((function t(){c(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){this.instances.set(t,e)}},{key:"get",value:function(t){return this.instances.get(t)}},{key:"getAll",value:function(){return Array.from(this.instances.values())}},{key:"getTotalInstances",value:function(){return this.instances.size}}])}(),Q=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t.assemblies);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,x.fromAssemblyRaw(n,t.variableDefinitions.assemblies))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Z),q=f((function t(e,s){c(this,t),this.articles=e,this.cost=s}));(h=q).fromToolRaw=function(t){return new h(t.articles,t.cost)};var Y=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){return this.addInstance("0",q.fromToolRaw(t.costing)),this}}])}(Z),z=function(){function t(e,s,n,a,i,r){c(this,t),this.key=e,this.panel=s,this.refMaterial=n,this.variables=a,this.documents=i,this.messages=r}return f(t,null,[{key:"fromEdgebandRaw",value:function(e,s){var n=H.parseVariables(e.variables,s);return new t(e.ID,e.panel,e.edgebandMaterial,n,G.fromDocumentsRaw(e.documents),e.messages)}}])}(),K=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t.edgebands);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,z.fromEdgebandRaw(n,t.variableDefinitions.edgebands))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Z),X=function(){function t(e,s){c(this,t),this.key=e,this.variables=s}return f(t,null,[{key:"fromEdgebandMaterialRaw",value:function(e,s){var n=H.parseVariables(e.variables,s);return new t(e.ID,n)}}])}(),$=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=u(null!==(e=t.edgebandMaterials)&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.addInstance(a.ID,X.fromEdgebandMaterialRaw(a,t.variableDefinitions.edgebandMaterials))}}catch(i){n.e(i)}finally{n.f()}return this}}])}(Z),J=f((function t(e,s,n,a){c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a}));(g=J).fromMaterialRaw=function(t,e){var s=H.parseVariables(t.variables,e);return new g(t.ID,t.messages,G.fromDocumentsRaw(t.documents),s)};var tt=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=u(null!==(e=t.materials)&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.addInstance(a.ID,J.fromMaterialRaw(a,t.variableDefinitions.materials))}}catch(i){n.e(i)}finally{n.f()}return this}}])}(Z),et=function(){function t(e,s,n,a,i,r,o,u,l){c(this,t),this.key=e,this.name=s,this.refPrograms=n,this.refStocks=a,this.refProcessZones=i,this.refEdgeband=r,this.messages=o,this.documents=u,this.variables=l,this.programs=[],this.stocks=[],this.edgebands=[]}return f(t,null,[{key:"fromPanelRaw",value:function(e,s){var n=H.parseVariables(e.variables,s);return new t(e.ID,e.name,e.programs,e.stocks,e.processZones,e.edgebands,e.messages,G.fromDocumentsRaw(e.documents),n)}}])}(),st=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=u(null!==(e=t.panels)&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.addInstance(a.ID,et.fromPanelRaw(a,t.variableDefinitions.panels))}}catch(i){n.e(i)}finally{n.f()}return this}}])}(Z),nt=function(){function t(e,s,n,a){c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a}return f(t,null,[{key:"fromPanelProcessRaw",value:function(e,s){var n=H.parseVariables(e.variables,s);return new t(e.ID,e.messages,G.fromDocumentsRaw(e.documents),n)}}])}(),at=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){if(!t.panelProcesses)return this;var e,s=u(t.panelProcesses);try{for(s.s();!(e=s.n()).done;){var n,a=e.value;this.addInstance(a.ID,nt.fromPanelProcessRaw(a,null!==(n=t.variableDefinitions.panelProcesses)&&void 0!==n?n:[]))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),it=function(){function t(e,s,n,a,i,r){c(this,t),this.key=e,this.refPanel=s,this.refPanelProcess=n,this.messages=a,this.documents=i,this.variables=r}return f(t,null,[{key:"fromProcessZoneRaw",value:function(e,s){var n=H.parseVariables(e.variables,s);return new t(e.ID,e.panel,e.panelProcess,e.messages,G.fromDocumentsRaw(e.documents),n)}}])}(),rt=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){if(!t.processZones)return this;var e,s=u(t.processZones);try{for(s.s();!(e=s.n()).done;){var n,a=e.value;this.addInstance(a.ID,it.fromProcessZoneRaw(a,null!==(n=t.variableDefinitions.processZones)&&void 0!==n?n:[]))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),ot=function(){function t(e,s,n,a,i,r,o,u,l,h,g){c(this,t),this.key=e,this.refPrograms=s,this.refStocks=n,this.refPanel=a,this.bodyCount=i,this.messages=r,this.variables=o,this.heritedVariables=u,this.typedObjectVariables=l,this.documents=h,this.swcps=g,this.programs=[],this.stocks=[]}return f(t,null,[{key:"fromPartRaw",value:function(e,s){var n=H.parseVariables(e.variables,s),a=H.parseTypedVariablesArray(e.heritedVariables),i=H.parseTypedVariables(e.typedObjectVariables);return new t(e.ID,e.programs,e.stocks,e.panel,e.bodyCount,e.messages,n,a,i,G.fromDocumentsRaw(e.documents),e.swcps)}}])}(),ut=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t.parts);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,ot.fromPartRaw(n,t.variableDefinitions.parts))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Z),lt=function(){function t(e,s,n,a,i,r,o){c(this,t),this.key=e,this.refTools=s,this.programParts=n,this.nestingBoard=a,this.messages=i,this.documents=r,this.variables=o,this.tools=[]}return f(t,null,[{key:"fromProgramRaw",value:function(e,s){var n=H.parseVariables(e.variables,s);return new t(e.ID,e.tools,e.programParts,e.nestingBoard,e.messages,G.fromDocumentsRaw(e.documents),n)}}])}(),ht=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t.programs);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,lt.fromProgramRaw(n,t.variableDefinitions.programs))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Z),ct=function(){function t(e,s,n,a,i,r){c(this,t),this.key=e,this.part=s,this.program=n,this.documents=a,this.messages=i,this.variables=r}return f(t,null,[{key:"fromProgramPartRaw",value:function(e,s){var n=H.parseVariables(e.variables,s);return new t(e.ID,e.part,e.program,G.fromDocumentsRaw(e.documents),e.messages,n)}}])}(),gt=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t.programParts);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,ct.fromProgramPartRaw(n,t.variableDefinitions.programParts))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Z),ft=function(){function t(e,s,n,a){c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a}return f(t,null,[{key:"fromSpindleRaw",value:function(e,s){var n=H.parseVariables(e.variables,s);return new t(e.ID,e.messages,G.fromDocumentsRaw(e.documents),n)}}])}(),dt=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){if(!t.spindles)return this;var e,s=u(t.spindles);try{for(s.s();!(e=s.n()).done;){var n,a=e.value;this.addInstance(a.ID,ft.fromSpindleRaw(a,null!==(n=t.variableDefinitions.spindles)&&void 0!==n?n:[]))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(Z),vt=f((function t(e,s,n,a,i,r){c(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r}));(d=vt).fromStockRaw=function(t,e){var s=H.parseVariables(t.variables,e);return new d(t.ID,t.part,t.material,t.messages,G.fromDocumentsRaw(t.documents),s)};var mt=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t.stocks);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.ID,vt.fromStockRaw(n,t.variableDefinitions.stocks))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Z),yt=function(){function t(e,s,n,a){c(this,t),this.key=e,this.variables=s,this.messages=n,this.documents=a}return f(t,null,[{key:"fromToolRaw",value:function(e,s){var n=H.parseVariables(e.variables,s);return new t(e.ID,n,e.messages,G.fromDocumentsRaw(e.documents))}}])}(),pt=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=u(null!==(e=t.tools)&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.addInstance(a.ID,yt.fromToolRaw(a,t.variableDefinitions.tools))}}catch(i){n.e(i)}finally{n.f()}return this}}])}(Z),bt=function(){return f((function t(){c(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){var s=this.instances.get(t);s?s.push(e):this.instances.set(t,[e])}},{key:"addInstances",value:function(t,e,s){var n,a=u(t.typedObjects);try{for(a.s();!(n=a.n()).done;){var i=n.value,r=e.get(i);if(r){var o,l=u(r.variables.TOTYPES.split(";"));try{for(l.s();!(o=l.n()).done;){var h=o.value;this.addInstance(h,r)}}catch(v){l.e(v)}finally{l.f()}}var c=s.get(i);if(c){var g,f=u(c.variables.TOTYPES.split(";"));try{for(f.s();!(g=f.n()).done;){var d=g.value;this.addInstance(d,c)}}catch(v){f.e(v)}finally{f.f()}}}}catch(v){a.e(v)}finally{a.f()}return this}},{key:"getInstancesById",value:function(t){return this.instances.get(t)||null}},{key:"getAll",value:function(){return this.instances}}])}(),kt=function(){function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p,b,k,w,P,M,D,T,I,A,C,S,B,E,R){c(this,t),this.database=e,this.projectData=s,this.panelsData=n,this.stocksData=a,this.partsData=i,this.assembliesData=r,this.edgebandsData=o,this.edgebandMaterialsData=u,this.materialsData=l,this.programsData=h,this.programPartsData=g,this.toolsData=f,this.spindlesData=d,this.costsData=v,this.typedObjectsData=m,this.panelProcessesData=y,this.processZonesData=p,this.panelDataManager=b,this.stockDataManager=k,this.partDataManager=w,this.assemblyDataManager=P,this.edgebandDataManager=M,this.edgebandMaterialDataManager=D,this.materialDataManager=T,this.programDataManager=I,this.programPartDataManager=A,this.toolDataManager=C,this.spindleDataManager=S,this.costDataManager=B,this.panelProcessDataManager=E,this.processZoneDataManager=R}return f(t,[{key:"relateData",value:function(){return this.assignDataToEdgebands(),this.assignDataToStocks(),this.assignDataToPanels(),this.assignDataToAssemblies(),this.assignSubAssemblies(),this.assignDataToParts(),this}},{key:"assignDataToEdgebands",value:function(){var t,e=u(this.edgebandDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.edgebandMaterialDataManager.get(s.refMaterial)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToStocks",value:function(){var t,e=u(this.stockDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value,n=this.materialDataManager.get(s.refMaterial);s.material=n}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToPanels",value:function(){var t,e=u(this.panelDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,a=u(n.refStocks);try{for(a.s();!(s=a.n()).done;){var i=s.value,r=this.stockDataManager.get(i);r&&(n.stocks.push(r),"CORE"===r.variables.ST_N&&(n.material=r.material))}}catch(y){a.e(y)}finally{a.f()}var o,l=u(n.refEdgeband);try{for(l.s();!(o=l.n()).done;){var h=o.value,c=this.edgebandDataManager.get(h);c&&n.edgebands.push(c)}}catch(y){l.e(y)}finally{l.f()}var g,f=u(n.refPrograms);try{for(f.s();!(g=f.n()).done;){var d=g.value,v=this.programDataManager.get(d);v&&n.programs.push(v)}}catch(y){f.e(y)}finally{f.f()}var m=this.partDataManager.get(n.key);m&&(n.part=m)}}catch(y){e.e(y)}finally{e.f()}}},{key:"assignDataToAssemblies",value:function(){var t,e=u(this.assemblyDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,a=u(n.refParts);try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=this.partDataManager.get(r);o&&(null===(i=n.parts)||void 0===i||i.push(o))}}catch(d){a.e(d)}finally{a.f()}var l,h=u(n.refPrograms);try{for(h.s();!(l=h.n()).done;){var c,g=l.value,f=this.programDataManager.get(g);f&&(null===(c=n.programs)||void 0===c||c.push(f))}}catch(d){h.e(d)}finally{h.f()}}}catch(d){e.e(d)}finally{e.f()}}},{key:"assignSubAssemblies",value:function(){var t,e=u(this.assemblyDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,a=u(n.refAssemblies);try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=this.assemblyDataManager.get(r);o&&(null===(i=n.assemblies)||void 0===i||i.push(o))}}catch(l){a.e(l)}finally{a.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToParts",value:function(){var t,e=u(this.partDataManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value;n.panel=n.refPanel?this.panelDataManager.get(n.refPanel):void 0;var a,i=u(null!==(s=n.refStocks)&&void 0!==s?s:[]);try{for(i.s();!(a=i.n()).done;){var r=a.value,o=this.stockDataManager.get(r);o&&n.stocks.push(o)}}catch(f){i.e(f)}finally{i.f()}var l,h=u(n.refPrograms);try{for(h.s();!(l=h.n()).done;){var c=l.value,g=this.programDataManager.get(c);g&&(n.programs.push(g),g.part=n)}}catch(f){h.e(f)}finally{h.f()}}}catch(f){e.e(f)}finally{e.f()}}}],[{key:"createFromRawData",value:function(e){var s=U.fromProjectRaw(e,e.variableDefinitions.report),n=(new st).addInstances(e),a=(new mt).addInstances(e),i=(new ut).addInstances(e),r=(new Q).addInstances(e),o=(new K).addInstances(e),u=(new $).addInstances(e),l=(new tt).addInstances(e),h=(new ht).addInstances(e),c=(new gt).addInstances(e),g=(new pt).addInstances(e),f=(new dt).addInstances(e),d=(new Y).addInstances(e),v=(new bt).addInstances(e,i,r),m=(new at).addInstances(e),y=(new rt).addInstances(e);return new t(e,s,n.getAll(),a.getAll(),i.getAll(),r.getAll(),o.getAll(),u.getAll(),l.getAll(),h.getAll(),c.getAll(),g.getAll(),f.getAll(),d.getAll(),v.getAll(),m.getAll(),y.getAll(),n,a,i,r,o,u,l,h,c,g,f,d,m,y).relateData()}}])}(),wt=function(){return f((function t(){c(this,t),this.instances=new Map}),[{key:"add",value:function(t,e){this.instances.set(t,e)}},{key:"get",value:function(t){var e=this.instances.get(t);return e||console.error("".concat(this.constructor.name," - unable to find instance: ").concat(t)),e}},{key:"getAll",value:function(){return Array.from(this.instances.values())}},{key:"getTotalInstances",value:function(){return this.instances.size}}])}(),Pt=function(){return f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p,b){c(this,t),this.key=e,this.messages=s,this.variables=n,this.heritedVariables=a,this.typedObjectVariables=i,this.refPrograms=r,this.refParts=o,this.refAssemblies=u,this.documents=l,this.swcps=h,this.name=g,this.description=f,this.configuration=d,this.quantity=v,this.height=m,this.width=y,this.depth=p,this.images=b,this.programs=[],this.parts=[],this.assemblies=[]}),null,[{key:"fromAssemblyBusiness",value:function(t){return t.createViewModel()}}])}(),Mt=f((function t(e,s,n,a,i,r,o,u){c(this,t),this.type=e,this.typeDescription=s,this.description=n,this.message=a,this.messageType=i,this.item=r,this.category=o,this.url=u}));(v=Mt).fromMessageRaw=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new v(t.type,t.typeDesc,t.desc,t.message,t.messageType,e,s,n)},v.fromMessagesRaw=function(t){var e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[],r=u(null!=t?t:[]);try{for(r.s();!(e=r.n()).done;){var o=e.value;i.push(v.fromMessageRaw(o,s,n,a))}}catch(l){r.e(l)}finally{r.f()}return i};var Dt=function(){return f((function t(e){c(this,t),this.documents=e}),[{key:"getImages",value:function(){var t,e,s={},n=u(null!==(t=this.documents)&&void 0!==t?t:[]);try{for(n.s();!(e=n.n()).done;){var a=e.value;if("IMAGE"===a.docType){var i=a.absoluteURI,r=i.substring(i.indexOf("images"));null!==a.name&&(s[a.name]=r)}}}catch(o){n.e(o)}finally{n.f()}return s}}])}(),Tt=function(){return f((function t(e,s,n,a,i,r,o,u,l,h){var g=this;c(this,t),this.key=e,this.messages=s,this.variables=n,this.heritedVariables=a,this.typedObjectVariables=i,this.refPrograms=r,this.refParts=o,this.refAssemblies=u,this.documents=l,this.swcps=h,this.programs=[],this.parts=[],this.assemblies=[],this.getName=function(){return g.variables.NAME},this.getDescription=function(){return g.variables.Description},this.getConfiguration=function(){return g.variables.CONF},this.getQuantity=function(){return g.variables.NB},this.getHeight=function(){return g.variables.Height},this.getWidth=function(){return g.variables.Width},this.getDepth=function(){return g.variables.Depth},this.getImages=function(){return new Dt(g.documents).getImages()}}),[{key:"createViewModel",value:function(){return new Pt(this.key,Mt.fromMessagesRaw(this.messages,this.getName(),"Assembly"),this.variables,this.heritedVariables,this.typedObjectVariables,this.refPrograms,this.refParts,this.refAssemblies,this.documents,this.swcps,this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth(),this.getImages())}}])}();(m=Tt).fromAssemblyData=function(t){return new m(t.key,t.messages,t.variables,t.heritedVariables,t.typedObjectVariables,t.refPrograms,t.refParts,t.refAssemblies,t.documents,t.swcps)};var It=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).addPrograms=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a,i=s.value,r=u(i.refPrograms);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=e.get(o);l&&i.programs.push(l)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){n.e(h)}finally{n.f()}},t.addParts=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a,i=s.value,r=u(i.refParts);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=e.get(o);l&&i.parts.push(l)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){n.e(h)}finally{n.f()}},t.addAssemblies=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a,i=s.value,r=u(i.refAssemblies);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=e.get(o);l&&i.assemblies.push(l)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){n.e(h)}finally{n.f()}},t}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Tt.fromAssemblyData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),At=function(){return f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p,b){c(this,t),this.swoodVersion=e,this.schemaVersion=s,this.name=n,this.projectPath=a,this.reportPath=i,this.createdDate=r,this.createdBy=o,this.documents=u,this.messages=l,this.variables=h,this.isDesign=g,this.isCam=f,this.isNesting=d,this.images=v,this.pdfs=m,this.configuration=y,this.description=p,this.reportVersion=b}),null,[{key:"fromProjectBusiness",value:function(t){return t.createViewModel()}}])}(),Ct=function(){return f((function t(e){c(this,t),this.documents=e}),[{key:"getDocuments",value:function(){var t,e,s={},n=u(null!==(t=this.documents)&&void 0!==t?t:[]);try{for(n.s();!(e=n.n()).done;){var a=e.value;null!==a.name&&(s[a.name]=a)}}catch(i){n.e(i)}finally{n.f()}return s}}])}(),St=function(){return f((function t(e){c(this,t),this.documents=e}),[{key:"getPDFs",value:function(){var t,e,s={},n=u(null!==(t=this.documents)&&void 0!==t?t:[]);try{for(n.s();!(e=n.n()).done;){var a=e.value;"DRAWING2PDF"===a.docType&&a.exists&&null!==a.name&&(s[a.name]=a.relativeURI)}}catch(i){n.e(i)}finally{n.f()}return s}}])}(),Bt=function(){return f((function t(e,s,n,a,i,r,o,u,l,h){var g=this;c(this,t),this.swoodVersion=e,this.schemaVersion=s,this.name=n,this.projectPath=a,this.reportPath=i,this.createdDate=r,this.createdBy=o,this.documents=u,this.messages=l,this.variables=h,this.getIsDesign=function(){var t;return null!==(t=g.variables.REPORT_ISUSINGDESIGN)&&void 0!==t&&t},this.getIsCam=function(){var t;return null!==(t=g.variables.REPORT_ISUSINGCAM)&&void 0!==t&&t},this.getIsNesting=function(){var t;return null!==(t=g.variables.REPORT_ISNESTINGPROJECT)&&void 0!==t&&t},this.getImages=function(){return new Dt(g.documents).getImages()},this.getPDFs=function(){return new St(g.documents).getPDFs()},this.getDocuments=function(){return new Ct(g.documents).getDocuments()},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=g.component)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getDescription=function(){var t,e;return null!==(t=null===(e=g.component)||void 0===e?void 0:e.getDescription())&&void 0!==t?t:""},this.getReportVersion=function(){var t;return null!==(t=g.variables.ReportVersion)&&void 0!==t?t:"0.0.0"}}),[{key:"createViewModel",value:function(){return new At(this.swoodVersion,this.schemaVersion,this.name,this.projectPath,this.reportPath,this.createdDate,this.createdBy,this.getDocuments(),Mt.fromMessagesRaw(this.messages,this.name,"Project"),this.variables,this.getIsDesign(),this.getIsCam(),this.getIsNesting(),this.getImages(),this.getPDFs(),this.getConfiguration(),this.getDescription(),this.getReportVersion())}}])}();(y=Bt).fromProjectData=function(t){return new y(t.swoodVersion,t.schemaVersion,t.name,t.projectPath,t.reportPath,t.createdDate,t.createdBy,t.documents,t.messages,t.variables)};var Et=f((function t(e,s){c(this,t),this.articles=e,this.cost=s}));(p=Et).fromCostData=function(t){return new p(t.articles,t.cost)};var Rt=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){return this.add("0",Et.fromCostData(t[0])),this}}])}(wt),Nt=function(){return f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p){c(this,t),this.key=e,this.refPanel=s,this.refMaterial=n,this.variables=a,this.documents=i,this.messages=r,this.name=o,this.quantity=u,this.length=l,this.lengthStock=h,this.width=g,this.thickness=f,this.extension=d,this.position=v,this.isCurved=m,this.isPaint=y,this.cost=p}),null,[{key:"fromEdgebandBusiness",value:function(t){return t.createViewModel()}}])}();(b=Nt).createCombinedEdgeband=function(t,e,s){return new b(t.key,t.refPanel,t.refMaterial,t.variables,t.documents,t.messages,e,s,t.length,t.lengthStock,t.width,t.thickness,t.extension,t.position,t.isCurved,t.isPaint,t.cost)};var Ot=function(){return f((function t(e,s,n,a,i,r){var o=this;c(this,t),this.key=e,this.refPanel=s,this.refMaterial=n,this.variables=a,this.documents=i,this.messages=r,this.getName=function(){var t;return null!==(t=o.variables.EB_N)&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=o.panel)||void 0===e?void 0:e.getThickness())&&void 0!==t?t:0},this.getLength=function(){return o.variables.EB_L},this.getLengthStock=function(){return o.variables.EB_LSTOCK},this.getWidth=function(){var t,e;return null!==(t=null===(e=o.panel)||void 0===e?void 0:e.getThickness())&&void 0!==t?t:0},this.getThickness=function(){var t,e;return null!==(t=null===(e=o.material)||void 0===e?void 0:e.getThickness())&&void 0!==t?t:0},this.getExtension=function(){var t,e;return null!==(t=null===(e=o.material)||void 0===e?void 0:e.getExtension())&&void 0!==t?t:0},this.getPosition=function(){return o.variables.EB_STOCKPOSITION},this.getIsCurved=function(){var t;return null!==(t=o.variables.EB_ISCURVED)&&void 0!==t&&t},this.getIsPaint=function(){var t,e;return null!==(t=null===(e=o.material)||void 0===e?void 0:e.getIsPaint())&&void 0!==t&&t},this.getCost=function(){var t,e,s=(o.getLength()+o.getExtension())/1e3,n=s*(null!==(t=null===(e=o.material)||void 0===e?void 0:e.getCostUnit())&&void 0!==t?t:0);return o.material?o.material.quantity+=s:console.warn("edgeband material not defined for ".concat(o.getName())),n}}),[{key:"createViewModel",value:function(){return new Nt(this.key,this.refPanel,this.refMaterial,this.variables,this.documents,Mt.fromMessagesRaw(this.messages,this.getName(),"Edgeband"),this.getName(),this.getQuantity(),this.getLength(),this.getLengthStock(),this.getWidth(),this.getThickness(),this.getExtension(),this.getPosition(),this.getIsCurved(),this.getIsPaint(),this.getCost())}}])}();(k=Ot).fromEdgebandData=function(t){return new k(t.key,t.panel,t.refMaterial,t.variables,t.documents,t.messages)};var Lt=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).addMaterials=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a=s.value,i=e.get(a.refMaterial);i&&(a.material=i)}}catch(r){n.e(r)}finally{n.f()}},t}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Ot.fromEdgebandData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),Wt=function(){return f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d){c(this,t),this.key=e,this.variables=s,this.name=n,this.description=a,this.reference=i,this.thickness=r,this.extension=o,this.isPaint=u,this.cost=l,this.costUnit=h,this.costType=g,this.quantity=f,this.unitOfMeasure=d}),null,[{key:"fromEdgebandMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),Vt=f((function t(e,s,n){var a=this;c(this,t),this.key=e,this.variables=s,this.quantity=n,this.createViewModel=function(){return new Wt(a.key,a.variables,a.getName(),a.getDescription(),a.getReference(),a.getThickness(),a.getExtension(),a.getIsPaint(),a.getCost(),a.getCostUnit(),2,a.quantity,"m")},this.getName=function(){var t;return null!==(t=a.variables.EBMAT_C)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=a.variables.EBMAT_D)&&void 0!==t?t:""},this.getReference=function(){var t;return null!==(t=a.variables.EBMAT_REF)&&void 0!==t?t:""},this.getCostUnit=function(){return a.variables.EBMAT_UCOST},this.getThickness=function(){var t;return null!==(t=a.variables.EBMAT_T)&&void 0!==t?t:0},this.getIsPaint=function(){var t;return null!==(t=a.variables.PAINT)&&void 0!==t&&t},this.getExtension=function(){var t;return null!==(t=a.variables.EXTENSION)&&void 0!==t?t:0},this.getCost=function(){return a.quantity*a.getCostUnit()}}));(w=Vt).fromEdgebandMaterialData=function(t){return new w(t.key,t.variables,0)};var _t=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Vt.fromEdgebandMaterialData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),Ft=function(){return f((function t(){c(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){this.instances.set(t,e)}},{key:"get",value:function(t){return this.instances.get(t)}},{key:"getAll",value:function(){return Array.from(this.instances.values())}},{key:"getTotalInstances",value:function(){return this.instances.size}},{key:"groupBy",value:function(t){var e,s=new Map,n=u(this.getAll());try{for(n.s();!(e=n.n()).done;){var a=e.value,i=this.getNestedValue(a,t.toString());s.has(i)||s.set(i,[]),s.get(i).push(a)}}catch(r){n.e(r)}finally{n.f()}return s}},{key:"getNestedValue",value:function(t,e){return e.split(".").reduce((function(t,e){return null==t?void 0:t[e]}),t)}}])}(),jt=f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p,b,k,w,P,M,D){c(this,t),this.key=e,this.messages=s,this.heritedVariables=n,this.typedObjectVariables=a,this.refParts=i,this.refAssemblies=r,this.documents=o,this.swcps=u,this.variables=l,this.id=h,this.name=g,this.description=f,this.configuration=d,this.quantity=v,this.height=m,this.width=y,this.depth=p,this.url=b,this.images=k,this.pdfs=w,this.cost=P,this.costPanels=M,this.costHardware=D,this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[]}));jt.fromFrameBusiness=function(t){return t.createViewModel()};var Ht=function(){return f((function t(e,s,n,a,i,r,o,l,h){var g=this;c(this,t),this.key=e,this.messages=s,this.heritedVariables=n,this.typedObjectVariables=a,this.refParts=i,this.refAssemblies=r,this.documents=o,this.swcps=l,this.variables=h,this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.hardware=[],this.weldments=[],this.getID=function(){return g.variables.ID},this.getName=function(){return g.variables.NAME},this.getDescription=function(){return g.variables.Description},this.getConfiguration=function(){return g.variables.CONF},this.getQuantity=function(){return g.variables.NB},this.getHeight=function(){return g.variables.Height},this.getWidth=function(){return g.variables.Width},this.getDepth=function(){return g.variables.Depth},this.getImages=function(){return new Dt(g.documents).getImages()},this.getPDFs=function(){return new St(g.documents).getPDFs()},this.getDocuments=function(){return new Ct(g.documents).getDocuments()},this.getUrl=function(){return"frames/".concat(g.key)},this.getCostPanels=function(){var t,e=0,s=u(g.panels);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCostHardware=function(){var t,e=0,s=u(g.hardware);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCost=function(){return g.getCostPanels()+g.getCostHardware()}}),[{key:"createViewModel",value:function(){return new jt(this.key,Mt.fromMessagesRaw(this.messages,this.getName(),"Frame",this.getUrl()),this.heritedVariables,this.typedObjectVariables,this.refParts,this.refAssemblies,this.getDocuments(),this.swcps,this.variables,this.getID(),this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getHeight(),this.getWidth(),this.getDepth(),this.getUrl(),this.getImages(),this.getPDFs(),this.getCost(),this.getCostPanels(),this.getCostHardware())}}])}();(P=Ht).fromAssemblyPartBusiness=function(t){return new P(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,"refParts"in t?t.refParts:[],"refAssemblies"in t?t.refAssemblies:[],t.documents,t.swcps,t.variables)};var Ut=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).FrameTypedObjectName="FRAME",t}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=u(null!==(e=t.getInstancesByName(this.FrameTypedObjectName))&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.addInstance(a.key,Ht.fromAssemblyPartBusiness(a))}}catch(i){n.e(i)}finally{n.f()}return this}}])}(Ft),Gt=f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p,b,k){c(this,t),this.key=e,this.messages=s,this.heritedVariables=n,this.typedObjectVariables=a,this.refPrograms=i,this.refParts=r,this.refAssemblies=o,this.documents=u,this.swcps=l,this.variables=h,this.name=g,this.description=f,this.configuration=d,this.quantity=v,this.length=m,this.url=y,this.images=p,this.cost=b,this.costUnit=k,this.parts=[],this.assemblies=[],this.panels=[],this.programs=[]}));Gt.fromHardwareBusiness=function(t){return t.createViewModel()};var xt=f((function t(e,s,n,a,i,r,o,u,l,h){var g=this;c(this,t),this.key=e,this.messages=s,this.heritedVariables=n,this.typedObjectVariables=a,this.refPrograms=i,this.refParts=r,this.refAssemblies=o,this.documents=u,this.swcps=l,this.variables=h,this.parts=[],this.assemblies=[],this.panels=[],this.programs=[],this.createViewModel=function(){return new Gt(g.key,Mt.fromMessagesRaw(g.messages,g.getName(),"Hardware"),g.heritedVariables,g.typedObjectVariables,g.refPrograms,g.refParts,g.refAssemblies,g.documents,g.swcps,g.variables,g.getName(),g.getDescription(),g.getConfiguration(),g.getQuantity(),g.getLength(),"",g.getImages(),g.getCost(),g.getCostUnit())},this.getName=function(){return g.variables.NAME},this.getDescription=function(){return g.variables.Description},this.getConfiguration=function(){return g.variables.CONF},this.getQuantity=function(){return g.variables.NB},this.getLength=function(){return g.variables.Length},this.getImages=function(){return new Dt(g.documents).getImages()},this.getCost=function(){return g.getCostUnit()*g.getQuantity()},this.getCostUnit=function(){var t,e;return null!==(t=null===(e=g.typedObjectVariables)||void 0===e||null===(e=e.HARDWARE)||void 0===e?void 0:e.Cost)&&void 0!==t?t:0}}));(M=xt).fromAssemblyPartBusiness=function(t){return new M(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,t.refPrograms,"refParts"in t?t.refParts:[],"refAssemblies"in t?t.refAssemblies:[],t.documents,t.swcps,t.variables)};var Zt=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).HardwareTypedObjectName="HARDWARE",t}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=u(null!==(e=t.getInstancesByName(this.HardwareTypedObjectName))&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.addInstance(a.key,xt.fromAssemblyPartBusiness(a))}}catch(i){n.e(i)}finally{n.f()}return this}}])}(Ft),Qt=f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d){c(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r,this.name=o,this.description=u,this.quantity=l,this.length=h,this.width=g,this.thickness=f,this.cost=d}));(D=Qt).fromLaminateBusiness=function(t){return t.createViewModel()},D.createCombinedLaminate=function(t,e,s){return new D(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables,e,t.description,s,t.length,t.width,t.thickness,t.cost)};var qt=function(){return f((function t(e,s,n,a,i,r,o){var u=this;c(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r,this.settings=o,this.createViewModel=function(){return new Qt(u.key,u.refPart,u.refMaterial,Mt.fromMessagesRaw(u.messages,u.getName(),"Laminate"),u.documents,u.variables,u.getName(),u.getDescription(),u.getQuantity(),u.getLength(),u.getWidth(),u.getThickness(),u.getCost())},this.getName=function(){return u.variables.ST_N},this.getDescription=function(){return u.variables.ST_DESC},this.getQuantity=function(){var t;return null===(t=u.part)||void 0===t?void 0:t.variables.NB},this.getSwoodLength=function(){return u.variables.ST_L},this.getSwoodWidth=function(){return u.variables.ST_W},this.getThickness=function(){return u.variables.ST_T},this.getHasGrain=function(){var t,e;return null!==(t=null===(e=u.material)||void 0===e?void 0:e.getHasGrain())&&void 0!==t&&t},this.getLength=function(){return u.getLongest(u.getSwoodLength(),u.getSwoodWidth(),u.getHasGrain()).length},this.getWidth=function(){return u.getLongest(u.getSwoodLength(),u.getSwoodWidth(),u.getHasGrain()).width},this.getVolume=function(){return u.getLength()*u.getWidth()*u.getThickness()/1e9},this.getSurface=function(){return u.getLength()*u.getWidth()/1e6},this.getCost=function(){if(!u.material)return console.warn("material not defined for ".concat(u.getName())),0;var t=0,e=0;switch(u.material.getCostType()){case 0:e=u.getVolume(),t=u.material.getCostUnit()*e;break;case 1:e=u.getSurface(),t=u.material.getCostUnit()*e;break;case 2:t=u.material.getCostUnit()*u.getLength()/1e3;break;case 3:t=e=u.material.getCostUnit();break;default:return 0}return u.material.quantity+=e*u.getQuantity(),t}}),[{key:"getLongest",value:function(t,e,s){return this.settings.LengthLongestEdge?s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}:{length:t,width:e}}}])}();(T=qt).fromStockData=function(t,e){return new T(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables,e)};var Yt=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t,e){var s,n=u(t);try{for(n.s();!(s=n.n()).done;){var a,i=s.value;1===(null===(a=i.material)||void 0===a?void 0:a.variables.MAT_TYPE)&&this.add(i.key,qt.fromStockData(i,e))}}catch(r){n.e(r)}finally{n.f()}return this}}])}(wt),zt=function(){return f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v){c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.name=i,this.description=r,this.thickness=o,this.hasGrain=u,this.cost=l,this.costUnit=h,this.costType=g,this.quantity=f,this.type=d,this.unitOfMeasure=v}),null,[{key:"fromMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),Kt=f((function t(e,s,n,a,i){var r=this;c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.quantity=i,this.createViewModel=function(){return new zt(r.key,Mt.fromMessagesRaw(r.messages,r.getName(),"Material"),r.documents,r.variables,r.getName(),r.getDescription(),r.getThickness(),r.getHasGrain(),r.getCost(),r.getCostUnit(),r.getCostType(),r.quantity,r.getType(),r.getUnitOfMeasure())},this.getName=function(){var t;return null!==(t=r.variables.MAT_NAME)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=r.variables.MAT_DESC)&&void 0!==t?t:""},this.getCostUnit=function(){var t;return null!==(t=r.variables.MAT_UCOST)&&void 0!==t?t:0},this.getCostType=function(){var t;return null!==(t=r.variables.MAT_COSTTYPE)&&void 0!==t?t:0},this.getHasGrain=function(){var t;return null!==(t=r.variables.MAT_WITHGRAIN)&&void 0!==t&&t},this.getThickness=function(){var t;return null!==(t=r.variables.MAT_T)&&void 0!==t?t:0},this.getBoardLength=function(){var t;return null!==(t=r.variables.BOARD_LENGTH)&&void 0!==t?t:0},this.getBoardWidth=function(){var t;return null!==(t=r.variables.BOARD_WIDTH)&&void 0!==t?t:0},this.getUnitOfMeasure=function(){switch(r.getCostType()){case 0:return"m³";case 1:return"m²";case 2:return"m";case 3:return"unit";default:return"unknown"}},this.getCost=function(){return r.quantity*r.getCostUnit()},this.getType=function(){var t;return null!==(t=r.variables.MAT_TYPE)&&void 0!==t?t:0},this.getIsWeldment=function(){var t;return null!==(t=r.variables.WELDMENT)&&void 0!==t&&t}}));(I=Kt).fromMaterialData=function(t){return new I(t.key,t.messages,t.documents,t.variables,0)};var Xt=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Kt.fromMaterialData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),$t=function(t,e){return function(s,n){for(var a in t){var i=s[t[a].Property],r=n[t[a].Property];if(Jt(i)&&(i=new Date(i)),Jt(r)&&(r=new Date(r)),0!=s.combineId&&"Name"==t[a].Property&&(i=e.CombinedPanelName+" "+s.combineId+" - "+s.Name),0!=n.combineId&&"Name"==t[a].Property&&(r=e.CombinedPanelName+" "+n.combineId+" - "+n.Name),s.Multibody&&"Name"==t[a].Property&&(0==s.Quantity?i=s.ParentFrame+" - "+s.Name:0!=s.Quantity&&(i=s.Quantity>1?s.ParentFrame+" - "+s.WeldmentFolder+" - "+s.Name:s.ParentFrame+" - "+s.WeldmentFolder)),n.Multibody&&"Name"==t[a].Property&&(0==n.Quantity?r=n.ParentFrame+" - "+n.Name:0!=n.Quantity&&(r=n.Quantity>1?n.ParentFrame+" - "+n.WeldmentFolder+" - "+n.Name:n.ParentFrame+" - "+n.WeldmentFolder)),s.hasOwnProperty("CombinedList")&&s.CombinedList.sort($t(t,e)),n.hasOwnProperty("CombinedList")&&n.CombinedList.sort($t(t,e)),"string"==typeof i){var o=i.localeCompare(r,"en",{numeric:!0});if(0!=o)return o*t[a].Type}else{if(i>r)return 1*t[a].Type;if(i<r)return-1*t[a].Type}}return 1}};function Jt(t){if("string"!=typeof t)return!1;var e=t.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(e){var s=parseInt(e[1],10),n=parseInt(e[2],10)-1,a=parseInt(e[3],10),i=new Date(a,n,s);return i.getFullYear()===a&&i.getMonth()===n&&i.getDate()===s}var r=new Date(t);return!isNaN(r.getTime())&&t===r.toISOString().split("T")[0]}var te=function(t,e){var s,n,a=[],i="",r=u(t.edgebands);try{for(r.s();!(s=r.n()).done;){var o,l=s.value;a.push(null===(o=l.material)||void 0===o?void 0:o.getName())}}catch(P){r.e(P)}finally{r.f()}var h,c=u(a=(n=a).filter((function(t,e){return n.indexOf(t)===e})));try{for(c.s();!(h=c.n()).done;){i+=h.value+", "}}catch(P){c.e(P)}finally{c.f()}i=i.slice(0,-2),null!=t.edgebands&&t.edgebands.sort($t([{Property:"Order",Type:1}],e));var g,f=[],d=u(t.edgebands);try{for(d.s();!(g=d.n()).done;){var v=g.value;v.getIsPaint()||v.getIsCurved()?!v.getIsPaint()&&v.getIsCurved()&&f.push("C"):v.getLengthStock()===t.getLengthStock()?t.getLengthStock()>t.getWidthStock()?f.push("L"):f.push("S"):v.getLengthStock()==t.getWidthStock()?t.getLengthStock()>t.getWidthStock()?f.push("S"):f.push("L"):(console.warn("Unable to categorise EB in: "+t.name),f.push("U"))}}catch(P){d.e(P)}finally{d.f()}for(var m="",y=0;y<f.length;y++){for(var p=1;f[y]==f[y+1];)p++,y++;m+=p+f[y],y!=f.length-1&&(m+=e.EBStringSeparator)}f.sort(),e.EBStringReverse&&f.reverse();for(var b="",k=0;k<f.length;k++){for(var w=1;f[k]===f[k+1];)w++,k++;b+=w+f[k],k!=f.length-1&&(b+=e.EBStringSeparator)}return{EBString:b,EBStringOrder:m,EdgingListString:i}},ee=function(){return f((function t(e,s,n,a,i,r,o,l,h,g){var f=this;c(this,t),this.key=e,this.name=s,this.refPrograms=n,this.refStocks=a,this.refProcessZones=i,this.refEdgebands=r,this.messages=o,this.documents=l,this.variables=h,this.settings=g,this.programs=[],this.stocks=[],this.edgebands=[],this.laminates=[],this.processZones=[],this.getID=function(){var t,e;return null!==(t=null===(e=f.part)||void 0===e?void 0:e.variables.ID)&&void 0!==t?t:""},this.getDescription=function(){var t,e;return null!==(t=null===(e=f.part)||void 0===e?void 0:e.getDescription())&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=f.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=f.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getCombineId=function(){var t,e;return null!==(t=null===(e=f.part)||void 0===e?void 0:e.getCombinedId())&&void 0!==t?t:0},this.getSwoodLength=function(){return f.variables.PAN_L},this.getSwoodWidth=function(){return f.variables.PAN_W},this.getSwoodThickness=function(){return f.variables.PAN_T},this.getSwoodLengthWithEdgeband=function(){return f.variables.PAN_LWEB},this.getSwoodWidthWithEdgeband=function(){return f.variables.PAN_WWEB},this.getSwoodThicknessWithLaminate=function(){return f.variables.PAN_TWL},this.getSwoodLengthWithoutEdgeband=function(){return f.variables.PAN_LWOEB},this.getSwoodWidthWithoutEdgeband=function(){return f.variables.PAN_WWOEB},this.getSwoodThicknessWithoutLaminate=function(){return f.variables.PAN_TWOL},this.getSwoodLengthStock=function(){return f.variables.PAN_STL},this.getSwoodWidthStock=function(){return f.variables.PAN_STW},this.getSwoodThicknessStock=function(){return f.variables.PAN_STT},this.getLength=function(){return f.getLongest(f.getSwoodLength(),f.getSwoodWidth(),f.getHasGrain()).length},this.getWidth=function(){return f.getLongest(f.getSwoodLength(),f.getSwoodWidth(),f.getHasGrain()).width},this.getThickness=function(){return f.getSwoodThickness()},this.getHasEdgebands=function(){return f.edgebands.length>0},this.getHasLaminates=function(){return f.laminates.length>0},this.getHasPrograms=function(){return f.programs.length>0},this.getHasProcessZones=function(){return f.processZones.length>0},this.getListEdgebandMaterials=function(){return te(f,f.settings).EdgingListString},this.getEdgingCode=function(){return te(f,f.settings).EBString},this.getEdgingCodeOrder=function(){return te(f,f.settings).EBStringOrder},this.getLengthWithEdgeband=function(){return f.getLongest(f.getSwoodLengthWithEdgeband(),f.getSwoodWidthWithEdgeband(),f.getHasGrain()).length},this.getWidthWithEdgeband=function(){return f.getLongest(f.getSwoodLengthWithEdgeband(),f.getSwoodLengthWithEdgeband(),f.getHasGrain()).width},this.getThicknessWithLaminate=function(){return f.getSwoodThicknessWithLaminate()},this.getLengthWithoutEdgeband=function(){return f.getLongest(f.getSwoodLengthWithoutEdgeband(),f.getSwoodWidthWithoutEdgeband(),f.getHasGrain()).length},this.getWidthWithoutEdgeband=function(){return f.getLongest(f.getSwoodLengthWithoutEdgeband(),f.getSwoodWidthWithoutEdgeband(),f.getHasGrain()).width},this.getThicknessWithoutLaminate=function(){return f.getSwoodThicknessWithoutLaminate()},this.getLengthStock=function(){return f.getLongest(f.getSwoodLengthStock(),f.getSwoodWidthStock(),f.getHasGrain()).length},this.getWidthStock=function(){return f.getLongest(f.getSwoodLengthStock(),f.getSwoodWidthStock(),f.getHasGrain()).width},this.getThicknessStock=function(){return f.getSwoodThicknessStock()},this.getVolume=function(){return f.getLength()*f.getWidth()*f.getThickness()/1e9},this.getSurface=function(){return f.getLength()*f.getWidth()/1e6},this.getUrl=function(){return"panels/".concat(f.key)},this.getImages=function(){return new Dt(f.documents).getImages()},this.getPDFs=function(){return new St(f.documents).getPDFs()},this.getDocuments=function(){return new Ct(f.documents).getDocuments()},this.getCost=function(){return f.getCostCore()+f.getCostEdgebands()+f.getCostLaminates()+f.getCostProcessZones()},this.getCostCore=function(){if(!f.material)return console.warn("material not defined for ".concat(f.name)),0;var t=0,e=0;switch(f.material.getCostType()){case 0:e=f.getVolume(),t=f.material.getCostUnit()*e;break;case 1:e=f.getSurface(),t=f.material.getCostUnit()*e;break;case 2:e=f.getLength()/1e3,t=f.material.getCostUnit()*e;break;case 3:e=f.getQuantity(),t=f.material.getCostUnit()*e;break;default:return 0}return f.material.quantity+=e*f.getQuantity(),t},this.getCostEdgebands=function(){var t,e=0,s=u(f.edgebands);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCostLaminates=function(){var t,e=0,s=u(f.laminates);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCostPrograms=function(){var t,e=0,s=u(f.programs);try{for(s.s();!(t=s.n()).done;){e+=t.value.getCost()}}catch(n){s.e(n)}finally{s.f()}return e},this.getCostProcessZone=function(t){if(!t.panelProcess)return console.warn("panelProcess not defined for ".concat(f.name)),0;var e=t.panelProcess.getCostUnit(),s=0,n=0;switch(t.getCostType()){case 0:n=e*(s=f.getVolume());break;case 1:n=e*(s=f.getSurface());break;case 2:n=e*(s=f.getLength()/1e3);break;case 3:n=e*(s=f.getQuantity());break;default:return 0}return t.panelProcess.quantity+=s,n},this.getCostProcessZones=function(){var t,e=0,s=u(f.processZones);try{for(s.s();!(t=s.n()).done;){var n=t.value;e+=f.getCostProcessZone(n)}}catch(a){s.e(a)}finally{s.f()}return e},this.getBoard=function(){var t,e,s,n;return{length:null!==(t=null===(e=f.material)||void 0===e?void 0:e.getBoardLength())&&void 0!==t?t:0,width:null!==(s=null===(n=f.material)||void 0===n?void 0:n.getBoardWidth())&&void 0!==s?s:0}}}),[{key:"createViewModel",value:function(){return new o(this.key,this.name,this.refPrograms,this.refStocks,this.refProcessZones,this.refEdgebands,Mt.fromMessagesRaw(this.messages,this.name,"Panel",this.getUrl()),this.variables,this.getDocuments(),this.getID(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getLengthWithEdgeband(),this.getWidthWithEdgeband(),this.getThicknessWithLaminate(),this.getLengthWithoutEdgeband(),this.getWidthWithoutEdgeband(),this.getThicknessWithoutLaminate(),this.getLengthStock(),this.getWidthStock(),this.getThicknessStock(),this.getHasGrain(),this.getHasEdgebands(),this.getHasLaminates(),this.getHasPrograms(),this.getHasProcessZones(),this.getListEdgebandMaterials(),this.getEdgingCode(),this.getEdgingCodeOrder(),this.getVolume(),this.getNameHead(),this.getNameTail(),this.getBoard(),this.getUrl(),this.getImages(),this.getPDFs(),this.getCost(),this.getCostCore(),this.getCostEdgebands(),this.getCostLaminates(),this.getCostPrograms(),this.getCostProcessZones(),this.getCombineId(),this.settings)}},{key:"createCombinedViewModel",value:function(){return new o("Combined Panel ".concat(this.getCombineId()),"Combined Panel ".concat(this.getCombineId()),this.refPrograms,this.refStocks,this.refProcessZones,this.refEdgebands,Mt.fromMessagesRaw(this.messages,"Panel"),this.variables,this.getDocuments(),this.getID(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getLengthWithEdgeband(),this.getWidthWithEdgeband(),this.getThicknessWithLaminate(),this.getLengthWithoutEdgeband(),this.getWidthWithoutEdgeband(),this.getThicknessWithoutLaminate(),this.getLengthStock(),this.getWidthStock(),this.getThicknessStock(),this.getHasGrain(),this.getHasEdgebands(),this.getHasLaminates(),this.getHasPrograms(),this.getHasProcessZones(),this.getListEdgebandMaterials(),this.getEdgingCode(),this.getEdgingCodeOrder(),this.getVolume(),this.getNameHead(),this.getNameTail(),this.getBoard(),this.getUrl(),this.getImages(),this.getPDFs(),this.getCost(),this.getCostCore(),this.getCostEdgebands(),this.getCostLaminates(),this.getCostPrograms(),this.getCostProcessZones(),this.getCombineId(),this.settings)}},{key:"getLongest",value:function(t,e,s){return this.settings.LengthLongestEdge?s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}:{length:t,width:e}}},{key:"getCoreStock",value:function(){var t,e=u(this.stocks);try{for(e.s();!(t=e.n()).done;){var s=t.value;if("CORE"===s.variables.ST_N)return s}}catch(n){e.e(n)}finally{e.f()}}},{key:"getHasGrain",value:function(){var t,e,s=this.getCoreStock();return!!s&&(null!==(t=null===(e=s.material)||void 0===e?void 0:e.getHasGrain())&&void 0!==t&&t)}},{key:"getNameTail",value:function(){var t=this.name.lastIndexOf("_");return-1===t?this.name:this.name.substring(t+1,this.name.length)}},{key:"getNameHead",value:function(){var t=this.name.indexOf("_");return-1===t?this.name:this.name.substring(0,t)}}])}();(A=ee).fromPanelData=function(t,e){return new A(t.key,t.name,t.refPrograms,t.refStocks,t.refProcessZones,t.refEdgeband,t.messages,t.documents,t.variables,e)};var se=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).addStocks=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a,i=s.value,r=u(i.refStocks);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=e.get(o);l&&(i.stocks.push(l),"CORE"===l.variables.ST_N&&(i.material=l.material))}}catch(h){r.e(h)}finally{r.f()}}}catch(h){n.e(h)}finally{n.f()}},t.addPrograms=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a,i=s.value,r=u(i.refPrograms);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=e.get(o);l&&(i.programs.push(l),l.panel=i)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){n.e(h)}finally{n.f()}},t.addEdgebands=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a,i=s.value,r=u(i.refEdgebands);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=e.get(o);l&&(i.edgebands.push(l),l.panel=i)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){n.e(h)}finally{n.f()}},t.addLaminates=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a,i=s.value,r=u(i.refStocks);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=e.get(o);l&&(i.laminates.push(l),l.panel=i)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){n.e(h)}finally{n.f()}},t}return r(e,t),f(e,[{key:"addInstances",value:function(t,e){var s,n=u(t);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.add(a.key,ee.fromPanelData(a,e))}}catch(i){n.e(i)}finally{n.f()}return this}}])}(wt),ne=function(){return f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p,b,k){c(this,t),this.key=e,this.refPrograms=s,this.refStocks=n,this.refPanel=a,this.bodyCount=i,this.messages=r,this.variables=o,this.heritedVariables=u,this.typedObjectVariables=l,this.documents=h,this.swcps=g,this.name=f,this.description=d,this.configuration=v,this.quantity=m,this.height=y,this.width=p,this.depth=b,this.images=k,this.programs=[],this.stocks=[]}),null,[{key:"fromPartBusiness",value:function(t){return t.createViewModel()}}])}(),ae=function(){return f((function t(e,s,n,a,i,r,o,u,l,h,g){var f=this;c(this,t),this.key=e,this.refPrograms=s,this.refStocks=n,this.refPanel=a,this.bodyCount=i,this.messages=r,this.variables=o,this.heritedVariables=u,this.typedObjectVariables=l,this.documents=h,this.swcps=g,this.programs=[],this.stocks=[],this.getName=function(){var t;return null!==(t=f.variables.NAME)&&void 0!==t?t:""},this.getDescription=function(){return f.variables.Description},this.getConfiguration=function(){var t;return null!==(t=f.variables.CONF)&&void 0!==t?t:""},this.getQuantity=function(){var t;return null!==(t=f.variables.NB)&&void 0!==t?t:0},this.getImages=function(){return new Dt(f.documents).getImages()},this.getCombinedId=function(){var t;return null!==(t=f.variables.CombineID)&&void 0!==t?t:0}}),[{key:"createViewModel",value:function(){return new ne(this.key,this.refPrograms,this.refStocks,this.refPanel,this.bodyCount,Mt.fromMessagesRaw(this.messages,this.getName(),"Part"),this.variables,this.heritedVariables,this.typedObjectVariables,this.documents,this.swcps,this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),0,0,0,this.getImages())}}])}();(C=ae).fromPartData=function(t){return new C(t.key,t.refPrograms,t.refStocks,t.refPanel,t.bodyCount,t.messages,t.variables,t.heritedVariables,t.typedObjectVariables,t.documents,t.swcps)};var ie=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).addStocks=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a,i,r=s.value,o=u(null!==(a=r.refStocks)&&void 0!==a?a:[]);try{for(o.s();!(i=o.n()).done;){var l=i.value,h=e.get(l);h&&(r.stocks.push(h),h.part=r)}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}},t.addPrograms=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a,i=s.value,r=u(i.refPrograms);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=e.get(o);l&&(i.programs.push(l),l.part=i)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){n.e(h)}finally{n.f()}},t}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,ae.fromPartData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),re=f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p,b,k,w,P,M){c(this,t),this.key=e,this.refTools=s,this.programParts=n,this.nestingBoard=a,this.variables=i,this.messages=r,this.documents=o,this.name=u,this.description=l,this.configuration=h,this.quantity=g,this.length=f,this.width=d,this.thickness=v,this.url=m,this.cost=y,this.costHour=p,this.time=b,this.machine=k,this.images=w,this.programFilepath=P,this.programFile=M,this.tools=[]}));re.fromProgramBusiness=function(t){return t.createViewModel()};var oe=function(){return f((function t(e,s,n,a,i,r,o){var u=this;c(this,t),this.key=e,this.refTools=s,this.programParts=n,this.nestingBoard=a,this.variables=i,this.messages=r,this.documents=o,this.tools=[],this.getName=function(){return u.variables.PROG_PHASENAME},this.getDescription=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.getDescription())&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=u.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getLength=function(){var t;return null!==(t=u.variables.PROGBX)&&void 0!==t?t:0},this.getWidth=function(){var t;return null!==(t=u.variables.PROGBY)&&void 0!==t?t:0},this.getThickness=function(){var t;return null!==(t=u.variables.PROGBZ)&&void 0!==t?t:0},this.getUrl=function(){return"programs/".concat(u.key)},this.getImages=function(){return new Dt(u.documents).getImages()},this.getCostHour=function(){var t;return null!==(t=u.variables.PROGMAC_HOURCOST)&&void 0!==t?t:0},this.getTotalTime=function(){var t;return null!==(t=u.variables.PROGTPS)&&void 0!==t?t:0},this.getCost=function(){return u.getCostHour()*u.getTotalTime()/3600},this.getMachine=function(){var t;return null!==(t=u.variables.PROGMAC)&&void 0!==t?t:""},this.getProgramFilepath=function(){var t;return null!==(t=u.variables.PROGPATH)&&void 0!==t?t:""},this.getProgramFile=function(){var t=u.documents.find((function(t){return"PROGRAM"===t.objType&&null===t.type&&null===t.docType}));return t||console.warn("unable to find program file for program: ".concat(u.getName())),t}}),[{key:"createViewModel",value:function(){return new re(this.key,this.refTools,this.programParts,this.nestingBoard,this.variables,Mt.fromMessagesRaw(this.messages,this.getName(),"Program",this.getUrl()),this.documents,this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getWidth(),this.getThickness(),this.getUrl(),this.getCost(),this.getCostHour(),this.getTotalTime(),this.getMachine(),this.getImages(),this.getProgramFilepath(),this.getProgramFile())}}])}();(S=oe).fromProgramData=function(t){return new S(t.key,t.refTools,t.programParts,t.nestingBoard,t.variables,t.messages,t.documents)};var ue=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.nestingBoard||this.add(n.key,oe.fromProgramData(n))}}catch(a){s.e(a)}finally{s.f()}return this}},{key:"addTools",value:function(t){var e,s=u(this.getAll());try{for(s.s();!(e=s.n()).done;){var n,a=e.value,i=u(a.refTools);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=t.get(r);o&&a.tools.push(o)}}catch(l){i.e(l)}finally{i.f()}}}catch(l){s.e(l)}finally{s.f()}}}])}(wt),le=f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d){c(this,t),this.key=e,this.refPart=s,this.refProgram=n,this.documents=a,this.messages=i,this.variables=r,this.name=o,this.description=u,this.configuration=l,this.quantity=h,this.programPartId=g,this.angle=f,this.parent=d}));le.fromProgramPartBusiness=function(t){return t.createViewModel()};var he=function(){return f((function t(e,s,n,a,i,r){var o=this;c(this,t),this.key=e,this.refPart=s,this.refProgram=n,this.documents=a,this.messages=i,this.variables=r,this.getName=function(){var t;return null===(t=o.panel)||void 0===t?void 0:t.name},this.getDescription=function(){return o.variables.PROGPART_NPARENTINDEX},this.getConfiguration=function(){return o.variables.PROGPART_NPARENTINDEX},this.getQuantity=function(){return 0},this.getProgramPartId=function(){return o.variables.PROGPART_ID},this.getAngle=function(){return o.variables.PROGPART_NANGLE},this.getParentIndex=function(){return o.variables.PROGPART_NPARENTINDEX},this.getParentName=function(){return o.variables.PROGPART_NPARENTNAME},this.getParentPath=function(){return o.variables.PROGPART_NPARENTPATH},this.getParentConfiguration=function(){return o.variables.PROGPART_NPARENTCONFIG}}),[{key:"createViewModel",value:function(){return new le(this.key,this.refPart,this.refProgram,this.documents,Mt.fromMessagesRaw(this.messages,this.getName(),"Program Part"),this.variables,this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getProgramPartId(),this.getAngle(),{index:this.getParentIndex(),name:this.getParentName(),configuration:this.getParentConfiguration(),filepath:this.getParentPath()})}}])}();(B=he).fromProgramPartData=function(t){return new B(t.key,t.part,t.program,t.documents,t.messages,t.variables)};var ce=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,he.fromProgramPartData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),ge=f((function t(e,s,n,a){c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a}));(E=ge).fromSpindleData=function(t){return new E(t.key,t.messages,t.documents,t.variables)};var fe=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,ge.fromSpindleData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),de=(R=f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d){c(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r,this.name=o,this.description=u,this.configuration=l,this.quantity=h,this.length=g,this.width=f,this.thickness=d})),R.fromStockBusiness=function(t){return t.createViewModel()},R.createCombinedStock=function(t,e,s){return new R(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables,e,t.description,t.configuration,s,t.length,t.width,t.thickness)},R),ve=f((function t(e,s,n,a,i,r){var o=this;c(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r,this.createViewModel=function(){return new de(o.key,o.refPart,o.refMaterial,Mt.fromMessagesRaw(o.messages,o.getName(),"Stock"),o.documents,o.variables,o.getName(),o.getDescription(),o.getConfiguration(),o.getQuantity(),o.getLength(),o.getWidth(),o.getThickness())},this.getName=function(){var t,e;return null!==(t=null===(e=o.panel)||void 0===e?void 0:e.name)&&void 0!==t?t:""},this.getDescription=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getDescription())&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getQuantity=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getLength=function(){return o.variables.ST_L},this.getWidth=function(){return o.variables.ST_W},this.getThickness=function(){return o.variables.ST_T}}));(N=ve).fromStockData=function(t){return new N(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables)};var me=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).addMaterials=function(e){var s,n=u(t.getAll());try{for(n.s();!(s=n.n()).done;){var a=s.value,i=e.get(a.refMaterial);i&&(a.material=i)}}catch(r){n.e(r)}finally{n.f()}},t}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,ve.fromStockData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),ye=f((function t(e,s,n,a,i,r,o,u){c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.name=i,this.reference=r,this.number=o,this.diameter=u}));ye.fromToolBusiness=function(t){return t.createViewModel()};var pe=function(){function t(e,s,n,a){var i=this;c(this,t),this.key=e,this.variables=s,this.messages=n,this.documents=a,this.createViewModel=function(){return new ye(i.key,Mt.fromMessagesRaw(i.messages,i.getName(),"Tool"),i.documents,i.variables,i.getName(),i.getReference(),i.getNumber(),i.getDiameter())},this.getName=function(){return i.variables.TOOL_NAME},this.getReference=function(){return i.variables.TOOL_REFERENCE},this.getNumber=function(){return i.variables.TOOL_DIAM},this.getDiameter=function(){return i.variables.TOOL_NUMBER}}return f(t,null,[{key:"fromToolData",value:function(e){return new t(e.key,e.variables,e.messages,e.documents)}}])}(),be=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,pe.fromToolData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),ke=function(){return f((function t(){c(this,t),this.instances=new Map}),[{key:"addInstance",value:function(t,e){var s=this.instances.get(t);s?s.push(e):this.instances.set(t,[e])}},{key:"addInstances",value:function(t,e,s){var n,a=u(t.typedObjects);try{for(a.s();!(n=a.n()).done;){var i=n.value,r=e.get(i);if(r){var o,l=u(r.variables.TOTYPES.split(";"));try{for(l.s();!(o=l.n()).done;){var h=o.value;this.addInstance(h,r)}}catch(v){l.e(v)}finally{l.f()}}var c=s.get(i);if(c){var g,f=u(c.variables.TOTYPES.split(";"));try{for(f.s();!(g=f.n()).done;){var d=g.value;this.addInstance(d,c)}}catch(v){f.e(v)}finally{f.f()}}}}catch(v){a.e(v)}finally{a.f()}return this}},{key:"getInstancesByName",value:function(t){return this.instances.get(t)||void 0}},{key:"getAll",value:function(){return this.instances}}])}(),we=f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p,b,k,w){c(this,t),this.key=e,this.refTools=s,this.refProgramParts=n,this.nestingBoard=a,this.variables=i,this.messages=r,this.documents=o,this.name=u,this.quantity=l,this.programFilename=h,this.programFilepath=g,this.comments=f,this.totalParts=d,this.totalOffcuts=v,this.machine=m,this.length=y,this.width=p,this.thickness=b,this.url=k,this.images=w,this.tools=[],this.programParts=[]}));we.fromProgramBusiness=function(t){return t.createViewModel()};var Pe=function(){return f((function t(e,s,n,a,i,r,o){var u=this;c(this,t),this.key=e,this.refTools=s,this.programParts=n,this.nestingBoard=a,this.variables=i,this.messages=r,this.documents=o,this.getName=function(){return u.variables.PROG_PHASENAME},this.getQuantity=function(){return u.variables.PROG_NSHEETQTY},this.getProgramFilename=function(){return u.variables.PROGCFGFILE},this.getProgramFilepath=function(){return u.variables.PROGCFGPATH},this.getProgramComment=function(){return u.variables.PROGCOMMENT},this.getTotalParts=function(){return u.variables.PROG_PARTCOUNT},this.getTotalOffcuts=function(){return u.variables.PROG_OFFCUTCOUNT},this.getMachine=function(){return u.variables.PROGMAC},this.getLength=function(){return u.variables.PROGBX},this.getWidth=function(){return u.variables.PROGBY},this.getThickness=function(){return u.variables.PROGBZ},this.getUrl=function(){return"sheets/".concat(u.key)},this.getImages=function(){return new Dt(u.documents).getImages()}}),[{key:"createViewModel",value:function(){return new we(this.key,this.refTools,this.programParts,this.nestingBoard,this.variables,Mt.fromMessagesRaw(this.messages,this.getName(),"Sheet",this.getUrl()),this.documents,this.getName(),this.getQuantity(),this.getProgramFilename(),this.getProgramFilepath(),this.getProgramComment(),this.getTotalParts(),this.getTotalOffcuts(),this.getMachine(),this.getLength(),this.getWidth(),this.getThickness(),this.getUrl(),this.getImages())}}])}();(O=Pe).fromProgramData=function(t){return new O(t.key,t.refTools,t.programParts,t.nestingBoard,t.variables,t.messages,t.documents)};var Me=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.nestingBoard&&this.add(n.key,Pe.fromProgramData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),De=f((function t(e,s,n,a,i,r,o,u,l,h,g,f){c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.name=i,this.description=r,this.quantity=o,this.thickness=u,this.category=l,this.cost=h,this.costUnit=g,this.costType=f}));De.fromPanelProcessBusiness=function(t){return t.createViewModel()};var Te=function(){function t(e,s,n,a,i){var r=this;c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.quantity=i,this.createViewModel=function(){return new De(r.key,Mt.fromMessagesRaw(r.messages,r.getName(),"Panel Process"),r.documents,r.variables,r.getName(),r.getDescription(),r.quantity,r.getThickness(),r.getCategory(),r.getCost(),r.getCostUnit(),r.getCostType())},this.getName=function(){return r.variables.PROC_NAME},this.getDescription=function(){return r.variables.PROC_DESC},this.getThickness=function(){return r.variables.PROC_THICKNESS},this.getCategory=function(){return r.variables.PROC_CAT},this.getCostUnit=function(){return r.variables.PROC_UCOST},this.getCost=function(){return r.quantity*r.getCostUnit()},this.getCostType=function(){return r.variables.PROC_COSTTYPE}}return f(t,null,[{key:"fromPanelProcessData",value:function(e){return new t(e.key,e.messages,e.documents,e.variables,0)}}])}(),Ie=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Te.fromPanelProcessData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),Ae=f((function t(e,s,n,a,i,r,o,u,l,h,g){c(this,t),this.key=e,this.refPanel=s,this.refPanelProcess=n,this.messages=a,this.documents=i,this.variables=r,this.name=o,this.quantity=u,this.unitOfMeasure=l,this.cost=h,this.mask=g}));Ae.fromProcessZoneBusiness=function(t){return t.createViewModel()};var Ce=function(){function t(e,s,n,a,i,r){var o=this;c(this,t),this.key=e,this.refPanel=s,this.refPanelProcess=n,this.messages=a,this.documents=i,this.variables=r,this.createViewModel=function(){return new Ae(o.key,o.refPanel,o.refPanelProcess,Mt.fromMessagesRaw(o.messages,o.getName(),"Process Zone"),o.documents,o.variables,o.getName(),o.getQuantity(),o.getUnitOfMeasure(),o.getCost(),o.getMask())},this.getName=function(){return o.variables.PROC_ZONENAME},this.getQuantity=function(){return o.variables.PROC_ZONE_QTT},this.getUnitOfMeasure=function(){return o.variables.PROC_ZONE_QTT_UNIT},this.getCost=function(){return o.variables.PROC_ZONE_COST},this.getMask=function(){return o.variables.PROC_ZONEMASK},this.getCostUnit=function(){return o.panelProcess?o.panelProcess.getCostUnit():0},this.getCostType=function(){return o.panelProcess?o.panelProcess.getCostType():0}}return f(t,null,[{key:"fromProcessZoneData",value:function(e){return new t(e.key,e.refPanel,e.refPanelProcess,e.messages,e.documents,e.variables)}}])}(),Se=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.add(n.key,Ce.fromProcessZoneData(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(wt),Be=function(){return f((function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p){var b=this;c(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r,this.name=o,this.description=u,this.configuration=l,this.quantity=h,this.length=g,this.lengthTotal=f,this.width=d,this.thickness=v,this.angle1=m,this.angle2=y,this.cutlist=p,this.addChildren=function(t){b.children||(b.children=[]),b.children.push(t)}}),null,[{key:"fromWeldmentBusiness",value:function(t){return t.createViewModel()}},{key:"fromWeldmentBusinessChild",value:function(t){return t.createViewModelChild()}}])}(),Ee=function(){return f((function t(e,s,n,a,i,r){var o=this;c(this,t),this.key=e,this.refPart=s,this.refMaterial=n,this.messages=a,this.documents=i,this.variables=r,this.getName=function(){var t;return null!==(t=o.variables.ST_N)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=o.variables.MBS_Description)&&void 0!==t?t:""},this.getConfiguration=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getConfiguration())&&void 0!==t?t:""},this.getPartQuantity=function(){var t,e;return null!==(t=null===(e=o.part)||void 0===e?void 0:e.getQuantity())&&void 0!==t?t:0},this.getQuantity=function(){var t;return null!==(t=o.variables.MBS_Quantity)&&void 0!==t?t:0*o.getPartQuantity()},this.getLength=function(){return o.variables.MBS_Length},this.getLengthTotal=function(){return o.variables.MBS_TotalLength},this.getWidth=function(){return o.variables.ST_W},this.getThickness=function(){return o.variables.ST_T},this.getAngle1=function(){var t;return null!==(t=o.variables.MBS_Angle1)&&void 0!==t?t:""},this.getAngle2=function(){var t;return null!==(t=o.variables.MBS_Angle2)&&void 0!==t?t:""},this.getCutlist=function(){var t;return null!==(t=o.variables.MBS_Cutlist)&&void 0!==t?t:""}}),[{key:"createViewModel",value:function(){return new Be(this.key,this.refPart,this.refMaterial,Mt.fromMessagesRaw(this.messages,this.getName(),"Weldment"),this.documents,this.variables,this.getCutlist(),this.getDescription(),this.getConfiguration(),this.getQuantity(),this.getLength(),this.getLengthTotal(),this.getWidth(),this.getThickness(),this.getAngle1(),this.getAngle2(),this.getCutlist())}},{key:"createViewModelChild",value:function(){return new Be(this.key,this.refPart,this.refMaterial,Mt.fromMessagesRaw(this.messages,this.getName(),"Weldment"),this.documents,this.variables,this.getName(),this.getDescription(),this.getConfiguration(),1,this.getLength(),this.getLengthTotal(),this.getWidth(),this.getThickness(),this.getAngle1(),this.getAngle2(),this.getCutlist())}}])}();(L=Ee).fromStockData=function(t){return new L(t.key,t.refPart,t.refMaterial,t.messages,t.documents,t.variables)};var Re=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n,a=e.value;null!==(n=a.material)&&void 0!==n&&n.variables.WELDMENT&&this.add(a.key,Ee.fromStockData(a))}}catch(i){s.e(i)}finally{s.f()}return this}}])}(wt),Ne=function(){return f((function t(e,s,n,a,i,r,o,u,l,h,g,f){c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a,this.name=i,this.description=r,this.cost=o,this.costUnit=u,this.costType=l,this.quantity=h,this.type=g,this.unitOfMeasure=f}),null,[{key:"fromMaterialBusiness",value:function(t){return t.createViewModel()}}])}(),Oe=f((function t(e,s,n,a,i,r){var o=this;c(this,t),this.key=e,this.description=s,this.messages=n,this.documents=a,this.variables=i,this.quantity=r,this.createViewModel=function(){return new Ne(o.key,Mt.fromMessagesRaw(o.messages,o.getName(),"Weldment Material"),o.documents,o.variables,o.getName(),o.description,o.getCost(),o.getCostUnit(),o.getCostType(),o.quantity,o.getType(),o.getUnitOfMeasure())},this.getName=function(){var t;return null!==(t=o.variables.MAT_NAME)&&void 0!==t?t:""},this.getDescription=function(){var t;return null!==(t=o.variables.MAT_DESC)&&void 0!==t?t:""},this.getCostUnit=function(){var t;return null!==(t=o.variables.MAT_UCOST)&&void 0!==t?t:0},this.getCostType=function(){var t;return null!==(t=o.variables.MAT_COSTTYPE)&&void 0!==t?t:0},this.getBoardLength=function(){var t;return null!==(t=o.variables.BOARD_LENGTH)&&void 0!==t?t:0},this.getBoardWidth=function(){var t;return null!==(t=o.variables.BOARD_WIDTH)&&void 0!==t?t:0},this.getUnitOfMeasure=function(){switch(o.getCostType()){case 0:return"m³";case 1:return"m²";case 2:return"m";case 3:return"unit";default:return"unknown"}},this.getCost=function(){return o.quantity*o.getCostUnit()},this.getType=function(){var t;return null!==(t=o.variables.MAT_TYPE)&&void 0!==t?t:0},this.getIsWeldment=function(){var t;return null!==(t=o.variables.WELDMENT)&&void 0!==t&&t}}));(W=Oe).fromMaterialData=function(t,e){return new W("".concat(t.key,"-").concat(e.getDescription()," "),e.getDescription(),t.messages,t.documents,t.variables,e.getLengthTotal()/1e3)};var Le=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t,e){var s,n=u(e);try{for(n.s();!(s=n.n()).done;){var a=s.value,i=t.get(a.refMaterial);if(i&&i.getIsWeldment()){var r=Oe.fromMaterialData(i,a);this.add(r.key,r)}}}catch(o){n.e(o)}finally{n.f()}return this}}])}(wt),We=f((function t(e,s,n,a,i,r,o,u,l){c(this,t),this.key=e,this.messages=s,this.documents=n,this.swcps=a,this.variables=i,this.name=r,this.description=o,this.configuration=u,this.quantity=l}));We.fromExcludedBusiness=function(t){return t.createViewModel()};var Ve=function(){return f((function t(e,s,n,a,i,r,o,u,l){var h=this;c(this,t),this.key=e,this.messages=s,this.heritedVariables=n,this.typedObjectVariables=a,this.refParts=i,this.refAssemblies=r,this.documents=o,this.swcps=u,this.variables=l,this.parts=[],this.assemblies=[],this.getName=function(){return h.variables.NAME},this.getDescription=function(){return h.variables.Description},this.getConfiguration=function(){return h.variables.CONF},this.getQuantity=function(){return h.variables.NB}}),[{key:"createViewModel",value:function(){return new We(this.key,Mt.fromMessagesRaw(this.messages,this.getName(),"Excluded"),this.documents,this.swcps,this.variables,this.getName(),this.getDescription(),this.getConfiguration(),this.getQuantity())}}])}();(V=Ve).fromAssemblyPartBusiness=function(t){return new V(t.key,t.messages,t.heritedVariables,t.typedObjectVariables,"refParts"in t?t.refParts:[],"refAssemblies"in t?t.refAssemblies:[],t.documents,t.swcps,t.variables)};var _e=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).FrameTypedObjectName="EXCLUDED",t}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s,n=u(null!==(e=t.getInstancesByName(this.FrameTypedObjectName))&&void 0!==e?e:[]);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.addInstance(a.key,Ve.fromAssemblyPartBusiness(a))}}catch(i){n.e(i)}finally{n.f()}return this}}])}(Ft),Fe=function(){function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p,b,k,w,P,M,D,T,I,A,C,S,B,E,R,N,O,L,W,V,_,F,j,H,U,G,x,Z,Q,q){c(this,t),this.database=e,this.settings=s,this.projectBusiness=n,this.panelsBusiness=a,this.stocksBusiness=i,this.laminatesBusiness=r,this.partsBusiness=o,this.assembliesBusiness=u,this.edgebandsBusiness=l,this.edgebandMaterialsBusiness=h,this.materialsBusiness=g,this.weldmentMaterialsBusiness=f,this.programsBusiness=d,this.sheetBusiness=v,this.programPartsBusiness=m,this.toolsBusiness=y,this.spindlesBusiness=p,this.costsBusiness=b,this.typedObjectsBusiness=k,this.framesBusiness=w,this.hardwaresBusiness=P,this.excludedItemsBusiness=M,this.panelProcessesBusiness=D,this.processZonesBusiness=T,this.weldmentsBusiness=I,this.panelBusinessManager=A,this.stockBusinessManager=C,this.laminateBusinessManager=S,this.partBusinessManager=B,this.assemblyBusinessManager=E,this.edgebandBusinessManager=R,this.edgebandMaterialBusinessManager=N,this.materialBusinessManager=O,this.weldmentMaterialBusinessManager=L,this.programBusinessManager=W,this.sheetBusinessManager=V,this.programPartBusinessManager=_,this.toolBusinessManager=F,this.spindleBusinessManager=j,this.costBusinessManager=H,this.frameBusinessManager=U,this.hardwareBusinessManager=G,this.excludedBusinessManager=x,this.panelProcessBusinessManager=Z,this.processZoneBusinessManager=Q,this.weldmentBusinessManager=q}return f(t,[{key:"relateData",value:function(){return this.assignDataToProject(),this.assignDataToEdgebands(),this.assignDataToStocks(),this.assignDataToWeldments(),this.assignDataToLaminates(),this.assignDataToPanels(),this.assignDataToAssemblies(),this.assignSubAssemblies(),this.assignDataToFrames(),this.assignDataToParts(),this.assignDataToProgramParts(),this.assignDataToProcessZones(),this}},{key:"assignDataToProject",value:function(){var t,e=u(this.assemblyBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;if(this.projectBusiness.name===s.getName())return void(this.projectBusiness.component=s)}}catch(r){e.e(r)}finally{e.f()}var n,a=u(this.partBusinessManager.getAll());try{for(a.s();!(n=a.n()).done;){var i=n.value;if(this.projectBusiness.name===i.getName())return void(this.projectBusiness.component=i)}}catch(r){a.e(r)}finally{a.f()}}},{key:"assignDataToEdgebands",value:function(){var t,e=u(this.edgebandBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.edgebandMaterialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPanel),s.panel=this.panelBusinessManager.get(s.refPanel)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToStocks",value:function(){var t,e=u(this.stockBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPart),s.panel=this.panelBusinessManager.get(s.refPart)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToWeldments",value:function(){var t,e=u(this.weldmentBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.weldmentMaterialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPart)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToLaminates",value:function(){var t,e=u(this.laminateBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialBusinessManager.get(s.refMaterial),s.part=this.partBusinessManager.get(s.refPart),s.panel=this.panelBusinessManager.get(s.refPart)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToPanels",value:function(){var t,e=u(this.panelBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.project=this.projectBusiness;var n=this.partBusinessManager.get(s.key);n&&(s.part=n);var a,i=u(s.refStocks);try{for(i.s();!(a=i.n()).done;){var r=a.value,o=this.stockBusinessManager.get(r);o&&(s.stocks.push(o),"CORE"===o.variables.ST_N&&(s.material=o.material));var l=this.laminateBusinessManager.get(r);l&&s.laminates.push(l)}}catch(P){i.e(P)}finally{i.f()}var h,c=u(s.refEdgebands);try{for(c.s();!(h=c.n()).done;){var g=h.value,f=this.edgebandBusinessManager.get(g);f&&s.edgebands.push(f)}}catch(P){c.e(P)}finally{c.f()}var d,v=u(s.refPrograms);try{for(v.s();!(d=v.n()).done;){var m=d.value,y=this.programBusinessManager.get(m);y&&s.programs.push(y)}}catch(P){v.e(P)}finally{v.f()}var p,b=u(s.refProcessZones);try{for(b.s();!(p=b.n()).done;){var k=p.value,w=this.processZoneBusinessManager.get(k);w&&s.processZones.push(w)}}catch(P){b.e(P)}finally{b.f()}}}catch(P){e.e(P)}finally{e.f()}}},{key:"assignDataToAssemblies",value:function(){var t,e=u(this.assemblyBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,a=u(n.refParts);try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=this.partBusinessManager.get(r);o&&(null===(i=n.parts)||void 0===i||i.push(o))}}catch(d){a.e(d)}finally{a.f()}var l,h=u(n.refPrograms);try{for(h.s();!(l=h.n()).done;){var c,g=l.value,f=this.programBusinessManager.get(g);f&&(null===(c=n.programs)||void 0===c||c.push(f))}}catch(d){h.e(d)}finally{h.f()}}}catch(d){e.e(d)}finally{e.f()}}},{key:"assignSubAssemblies",value:function(){var t,e=u(this.assemblyBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,a=u(n.refAssemblies);try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=this.assemblyBusinessManager.get(r);o&&(null===(i=n.assemblies)||void 0===i||i.push(o))}}catch(l){a.e(l)}finally{a.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToFrames",value:function(){var t,e=u(this.frameBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,a=u(n.refParts);try{for(a.s();!(s=a.n()).done;){var i,r=s.value,o=this.partBusinessManager.get(r);o&&(null===(i=n.parts)||void 0===i||i.push(o));var l=this.panelBusinessManager.get(r);if(l){var h;null===(h=n.panels)||void 0===h||h.push(l);var c,g=u(l.programs);try{for(g.s();!(c=g.n()).done;){var f=c.value;n.programs.push(f)}}catch(k){g.e(k)}finally{g.f()}}var d=this.hardwareBusinessManager.get(r);d&&n.hardware.push(d)}}catch(k){a.e(k)}finally{a.f()}var v,m=u(n.refAssemblies);try{for(m.s();!(v=m.n()).done;){var y=v.value,p=this.assemblyBusinessManager.get(y);p&&n.assemblies.push(p);var b=this.hardwareBusinessManager.get(y);b&&n.hardware.push(b)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){e.e(k)}finally{e.f()}}},{key:"assignDataToParts",value:function(){var t,e=u(this.partBusinessManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value;n.panel=n.refPanel?this.panelBusinessManager.get(n.refPanel):void 0;var a,i=u(null!==(s=n.refStocks)&&void 0!==s?s:[]);try{for(i.s();!(a=i.n()).done;){var r=a.value,o=this.stockBusinessManager.get(r);o&&n.stocks.push(o)}}catch(f){i.e(f)}finally{i.f()}var l,h=u(n.refPrograms);try{for(h.s();!(l=h.n()).done;){var c=l.value,g=this.programBusinessManager.get(c);g&&(n.programs.push(g),g.part=n)}}catch(f){h.e(f)}finally{h.f()}}}catch(f){e.e(f)}finally{e.f()}}},{key:"assignDataToProgramParts",value:function(){var t,e=u(this.programPartsBusiness);try{for(e.s();!(t=e.n()).done;){var s=t.value,n=this.panelBusinessManager.get(s.refPart);s.panel=null!=n?n:void 0}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToProcessZones",value:function(){var t,e=u(this.processZonesBusiness);try{for(e.s();!(t=e.n()).done;){var s=t.value,n=this.panelProcessBusinessManager.get(s.refPanelProcess);s.panelProcess=n}}catch(a){e.e(a)}finally{e.f()}}}],[{key:"createFromRawDataNew",value:function(e,s){var n=kt.createFromRawData(e),a=Bt.fromProjectData(n.projectData),i=new Xt;i.addInstances(n.materialsData);var r=new be;r.addInstances(n.toolsData);var o=new ue;o.addInstances(n.programsData),o.addTools(r);var u=new me;u.addInstances(n.stocksData),u.addMaterials(i);var l=new ie;l.addInstances(n.partsData),l.addStocks(u),l.addPrograms(o);var h=new It;h.addInstances(n.assembliesData),h.addPrograms(o),h.addParts(l),h.addAssemblies(h);var c=new Yt;c.addInstances(n.stocksData,s);var g=new _t;g.addInstances(n.edgebandMaterialsData);var f=new Lt;f.addInstances(n.edgebandsData),f.addMaterials(g);var d=(new Me).addInstances(n.programsData),v=(new ce).addInstances(n.programPartsData),m=(new fe).addInstances(n.spindlesData),y=(new Rt).addInstances(n.costsData),p=(new ke).addInstances(e,l,h),b=(new Ut).addInstances(p),k=(new Zt).addInstances(p),w=(new _e).addInstances(p),P=(new Ie).addInstances(n.panelProcessesData),M=(new Se).addInstances(n.processZonesData),D=(new Re).addInstances(n.stocksData),T=(new Le).addInstances(i,D.getAll()),I=new se;return I.addInstances(n.panelsData,s),I.addStocks(u),I.addEdgebands(f),I.addLaminates(c),I.addPrograms(o),new t(e,s,a,I.getAll(),u.getAll(),c.getAll(),l.getAll(),h.getAll(),f.getAll(),g.getAll(),i.getAll(),T.getAll(),o.getAll(),d.getAll(),v.getAll(),r.getAll(),m.getAll(),y.getAll(),p.getAll(),b.getAll(),k.getAll(),w.getAll(),P.getAll(),M.getAll(),D.getAll(),I,u,c,l,h,f,g,i,T,o,d,v,r,m,y,b,k,w,P,M,D)}},{key:"createFromRawData",value:function(e,s){var n=kt.createFromRawData(e),a=Bt.fromProjectData(n.projectData),i=(new Xt).addInstances(n.materialsData),r=(new ue).addInstances(n.programsData),o=(new ie).addInstances(n.partsData),u=(new It).addInstances(n.assembliesData),l=(new se).addInstances(n.panelsData,s),h=(new me).addInstances(n.stocksData),c=(new Yt).addInstances(n.stocksData,s),g=(new Lt).addInstances(n.edgebandsData),f=(new _t).addInstances(n.edgebandMaterialsData),d=(new Me).addInstances(n.programsData),v=(new ce).addInstances(n.programPartsData),m=(new be).addInstances(n.toolsData),y=(new fe).addInstances(n.spindlesData),p=(new Rt).addInstances(n.costsData),b=(new ke).addInstances(e,o,u),k=(new Ut).addInstances(b),w=(new Zt).addInstances(b),P=(new _e).addInstances(b),M=(new Ie).addInstances(n.panelProcessesData),D=(new Se).addInstances(n.processZonesData),T=(new Re).addInstances(n.stocksData),I=(new Le).addInstances(i,T.getAll());return new t(e,s,a,l.getAll(),h.getAll(),c.getAll(),o.getAll(),u.getAll(),g.getAll(),f.getAll(),i.getAll(),I.getAll(),r.getAll(),d.getAll(),v.getAll(),m.getAll(),y.getAll(),p.getAll(),b.getAll(),k.getAll(),w.getAll(),P.getAll(),M.getAll(),D.getAll(),T.getAll(),l,h,c,o,u,g,f,i,I,r,d,v,m,y,p,k,w,P,M,D,T).relateData()}}])}(),je=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Pt.fromAssemblyBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),He=function(){function t(e,s){c(this,t),this.articles=e,this.cost=s}return f(t,null,[{key:"fromCostBusiness",value:function(e){return new t(e.articles,e.cost)}}])}(),Ue=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){return this.addInstance("0",He.fromCostBusiness(t[0])),this}}])}(Ft),Ge=f((function t(e){c(this,t),this.cuts=[],this.length=e.length,this.width=e.width,this.cutDirection=e.cutDirection,this.coordinate=e.cutCoordinate,this.stockLeft=e.stockLeft?e.stockLeft:null,this.stockRight=e.stockRight?e.stockRight:null})),xe=function(){return f((function t(e,s){c(this,t),this.cutterThickness=0,this.cuts=[],this.trims=[],this.waste=[],this.name=e.name,this.key=e.name,this.material=e.material,this.stock=e.stock,this.length=e.stock.length,this.width=e.stock.width,this.cutterThickness=2*e.stock.cutterThickness,this.panels=s,this.url="cutting-pattern-details/".concat(this.name)}),[{key:"getCuts",value:function(t){return t||(t=this.stock),this.cuts.push(new Ge(t)),t.stockLeft&&this.getCuts(t.stockLeft),t.stockRight&&this.getCuts(t.stockRight),this.cuts}},{key:"getItems",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],n=u(this.getFlattenedTreeStructure(e));try{for(n.s();!(t=n.n()).done;){var a=t.value;a.type&&s.push(a)}}catch(i){n.e(i)}finally{n.f()}return s}},{key:"getPanels",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],n=u(this.getFlattenedTreeStructure(e));try{for(n.s();!(t=n.n()).done;){var a=t.value;"item"===a.type&&s.push(a)}}catch(i){n.e(i)}finally{n.f()}return s}},{key:"getTrims",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],n=u(this.getFlattenedTreeStructure(e));try{for(n.s();!(t=n.n()).done;){var a=t.value;"trimming"!==a.type&&"padding"!==a.type||s.push(a)}}catch(i){n.e(i)}finally{n.f()}return s}},{key:"getWaste",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=[],n=u(this.getFlattenedTreeStructure(e));try{for(n.s();!(t=n.n()).done;){var a=t.value;"waste"===a.type&&s.push(a)}}catch(i){n.e(i)}finally{n.f()}return s}},{key:"getTreeStructure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.stock.getTreeStructure();return t&&this.reverseChildren(e),this.assignIndexes(e)}},{key:"getFlattenedTreeStructure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getTreeStructure(t),s=[];return this.flattenTree(e,s),s}},{key:"getTotalArea",value:function(t){var e=this.length*this.width/1e6;return t?parseFloat(e.toFixed(2)):e}},{key:"getPanelArea",value:function(t){var e,s=0,n=u(this.getPanels());try{for(n.s();!(e=n.n()).done;){var a=e.value;s+=a.length*a.width}}catch(r){n.e(r)}finally{n.f()}var i=s/1e6;return t?parseFloat(i.toFixed(2)):i}},{key:"getPanelAreaPercentage",value:function(t){var e=this.getPanelArea()/this.getTotalArea()*100;return t?parseFloat(e.toFixed(2)):e}},{key:"getWasteArea",value:function(t){var e,s=0,n=u(this.getWaste());try{for(n.s();!(e=n.n()).done;){var a=e.value;s+=a.length*a.width}}catch(r){n.e(r)}finally{n.f()}var i=s/1e6;return t?parseFloat(i.toFixed(2)):i}},{key:"getWasteAreaPercentage",value:function(t){var e=this.getWasteArea()/this.getTotalArea()*100;return t?parseFloat(e.toFixed(2)):e}},{key:"getTrimArea",value:function(t){var e,s=0,n=u(this.getTrims());try{for(n.s();!(e=n.n()).done;){var a=e.value;s+=a.length*a.width}}catch(r){n.e(r)}finally{n.f()}var i=s/1e6;return t?parseFloat(i.toFixed(2)):i}},{key:"getTrimAreaPercentage",value:function(t){var e=this.getTrimArea()/this.getTotalArea()*100;return t?parseFloat(e.toFixed(2)):e}},{key:"getFirstTrimSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stock;return"trimming"===t.type||"padding"===t.type?t.parent.cutCoordinate:t.stockLeft?this.getFirstTrimSize(t.stockLeft):t.stockRight?this.getFirstTrimSize(t.stockRight):void 0}},{key:"getThickness",value:function(){var t,e=this.getPanels()[0].name,s=u(this.panels);try{for(s.s();!(t=s.n()).done;){var n=t.value;if(n.name===e)return n.thickness}}catch(a){s.e(a)}finally{s.f()}return 0}},{key:"getProcessedPanels",value:function(){var t,e=this,s=[],n=u(this.getPanels());try{var a=function(){var n=t.value,a=e.panels.find((function(t){return t.name===n.name}));a&&s.push(a)};for(n.s();!(t=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}return s}},{key:"getProcessedPanelField",value:function(t,e){var s=this.panels.find((function(e){return e.name===t}));if(s){var n=s[e];if("number"==typeof n)return n.toString();if("string"==typeof n)return n}return""}},{key:"assignIndexes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{index:0,panelIndex:0};t.index=e.index++,"item"===t.type&&(t.indexPanel=e.panelIndex++);var s,n=u(t.children);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.assignIndexes(a,e)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"flattenTree",value:function(t,e){if(e.push(t),t.children){var s,n=u(t.children);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.flattenTree(a,e)}}catch(i){n.e(i)}finally{n.f()}}}},{key:"reverseChildren",value:function(t){if(t.children){t.children.reverse();var e,s=u(t.children);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.reverseChildren(n)}}catch(a){s.e(a)}finally{s.f()}}}}])}(),Ze=f((function t(e){var s,n;c(this,t),this.indexParent=-1,this.children=[],this.cuts=[],this.parent=null,this.quantity=1,this.stock=e,this.type=e.type,this.length=e.length,this.width=e.width,this.grain=e.grain,this.cutDirection=e.cutDirection,this.cutterThickness=e.cutterThickness,this.name=null!==(s=null!==(n=e.name)&&void 0!==n?n:e.type)&&void 0!==s?s:"group",this.cutCoordinate=e.cutCoordinate,this.x=e.x,this.y=e.y,this.parent=e.parent?new t(e.parent):null})),Qe=function(){return f((function t(e){var s,n;c(this,t),this.parent=null,this.index=0,this.indexPanel=0,this.indexParent=-1,this.children=[],this.cuts=[],this.stock=e,this.type=e.type,this.length=e.length,this.width=e.width,this.grain=e.grain,this.cutDirection=e.cutDirection,this.cutterThickness=e.cutterThickness,this.name=null!==(s=null!==(n=e.name)&&void 0!==n?n:e.type)&&void 0!==s?s:"group",this.cutCoordinate=e.cutCoordinate,this.x=e.x,this.y=e.y,this.parent=e.parent?new t(e.parent):null}),[{key:"getTrimSide",value:function(t){var e,s=u(this.children);try{for(s.s();!(e=s.n()).done;){var n=e.value;if("trimming"===n.type||"padding"===n.type){if("length"===t&&"V"===this.cutDirection)return this.cutCoordinate;if("width"===t&&"H"===this.cutDirection)return this.cutCoordinate}}}catch(a){s.e(a)}finally{s.f()}return 0}},{key:"getGroupedNodes",value:function(){var t,e=[],s=u(this.children);try{for(s.s();!(t=s.n()).done;){var n=t.value,a=new Ze(n.stock);this.isPreviousEqual(a,e[e.length-1])?e[e.length-1].quantity++:e.push(a)}}catch(i){s.e(i)}finally{s.f()}return e}},{key:"isPreviousEqual",value:function(t,e){return!!e&&(t.length===e.length&&t.width===e.width&&t.type===e.type)}}])}(),qe=function(){return f((function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;c(this,t),this.type=e.type,this.length=1e3*e.length,this.width=1e3*e.width,this.cutDirection=e.cut,this.name=""!=e["panel-name"]?e["panel-name"]:null,this.cutCoordinate=1e3*e["cut-coordinate"],this.grain=e["grain-direction"],this.cutterThickness=2*e["cut-half-thickness"]*1e3,this.parent=s,this.x=n,this.y=a;var i=0,r=0,o=0,u=0;"V"===e.cut&&(o=this.x+this.cutCoordinate+this.cutterThickness,u=this.y,i=this.x,r=this.y),"H"===e.cut&&(o=this.x,u=this.y+this.cutCoordinate+this.cutterThickness,i=this.x,r=this.y),this.stockLeft=e["left-stock"]?new t(e["left-stock"],this,i,r):null,this.stockRight=e["right-stock"]?new t(e["right-stock"],this,o,u):null}),[{key:"getTreeStructure",value:function(){var t=new Qe(this),e=this.findChildren(t,this.stockLeft),n=this.findChildren(t,this.stockRight);t.children=[].concat(s(e),s(n));var a=new Ge(this),i=this.findCuts(a,this.stockLeft),r=this.findCuts(a,this.stockRight);return t.cuts=[].concat(s(i),s(r)),t}},{key:"findChildren",value:function(t,e){if(!e)return[];var n=new Qe(e);if(n.indexParent=t.index,null===e.type){if(t.cutDirection===e.cutDirection){var a=this.findChildren(t,e.stockLeft),i=this.findChildren(t,e.stockRight);return[].concat(s(a),s(i))}var r=this.findChildren(n,e.stockLeft),o=this.findChildren(n,e.stockRight);n.children=[].concat(s(r),s(o))}return[n]}},{key:"findCuts",value:function(t,e){if(!e)return[];var n=new Ge(e);if(null===e.type){if(t.cutDirection===e.cutDirection){var a=this.findCuts(t,e.stockLeft),i=this.findCuts(t,e.stockRight);return[].concat(s(a),s(i))}var r=this.findCuts(n,e.stockLeft),o=this.findCuts(n,e.stockRight);n.cuts=[].concat(s(r),s(o))}return[n]}}])}(),Ye=f((function t(e,s){var n;c(this,t),this.boards=[];var a,i=u(null!==(n=e.stocks)&&void 0!==n?n:[]);try{for(i.s();!(a=i.n()).done;){var r=a.value,o=new xe({name:"Board ".concat((++t.boardIndex).toString()),material:e.material,stock:new qe(r)},s);this.boards.push(o)}}catch(l){i.e(l)}finally{i.f()}}));Ye.boardIndex=0;var ze=f((function t(e,s){c(this,t),this.boards=[];var n,a=u(e.cuttingPattern);try{for(a.s();!(n=a.n()).done;){var i,r=n.value,o=u(new Ye(r,s).boards);try{for(o.s();!(i=o.n()).done;){var l=i.value;this.boards.push(l)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}})),Ke=function(){return f((function t(){c(this,t),this.boards=[]}),[{key:"createFromData",value:function(t,e){var s=new ze(t,e);return this.boards=s.boards,this}}])}(),Xe=function(t){function s(){var t;return c(this,s),(t=n(this,s,arguments)).getGroupKey=function(t){var e;return"".concat(t.length,"_").concat(t.width,"_").concat(t.thickness,"_").concat(null===(e=t.material)||void 0===e?void 0:e.name)},t.getAllCombined=function(){var s,n=new Map,a=u(t.instances.values());try{for(a.s();!(s=a.n()).done;){var i=s.value,r=t.getGroupKey(i);n.has(r)||n.set(r,[]),n.get(r).push(i)}}catch(y){a.e(y)}finally{a.f()}var o,l=new Map,h=1,c=u(n);try{for(c.s();!(o=c.n()).done;){var g=e(o.value,2)[1];if(1===g.length){var f=g[0];l.set(f.name,f)}else{var d=g[0],v=g.reduce((function(t,e){return t+e.quantity}),0),m=Nt.createCombinedEdgeband(d,"Combined Edgeband ".concat(h++),v);m.children=g,m.part=d.part,m.panel=d.panel,m.material=d.material,l.set(m.name,m)}}}catch(y){c.e(y)}finally{c.f()}return Array.from(l.values())},t}return r(s,t),f(s,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Nt.fromEdgebandBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),$e=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Wt.fromEdgebandMaterialBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),Je=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).FrameTypedObjectName="EXCLUDED",t}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,We.fromExcludedBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),ts=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).FrameTypedObjectName="FRAME",t}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,jt.fromFrameBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),es=function(t){function e(){var t;return c(this,e),(t=n(this,e,arguments)).FrameTypedObjectName="HARDWARE",t}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Gt.fromHardwareBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),ss=function(){function t(){c(this,t)}return f(t,null,[{key:"makeLabels",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];return e.forEach((function(e){s&&e.children&&0!==e.children.length?e.children.forEach((function(e){t.pushCombinedLabel(e,n)})):t.pushLabel(e,n)})),n}},{key:"pushCombinedLabel",value:function(t,e){for(var s=0;s<t.quantity;s++){var n=this.clone(t);n.instance=s+1,0!==n.combineId&&(n.name="Combined Panel ".concat(n.combineId)),e.push(n)}}},{key:"pushLabel",value:function(t,e){for(var s=0;s<t.quantity;s++){var n=this.clone(t);n.instance=s+1,e.push(n)}}},{key:"clone",value:function(t){return Object.assign(Object.create(Object.getPrototypeOf(t)),t)}}])}();(_=ss).deepCopy=function(e){if(null==e)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map((function(t){return _.deepCopy(t)}));if("object"===t(e)){var s={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=e[n];s[n]=_.deepCopy(a)}return s}return e};var ns=function(t){function s(){var t;return c(this,s),(t=n(this,s,arguments)).combinedInstances=new Map,t.getLongest=function(t,e,s){return s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}},t.getGroupKey=function(e){var s,n,a,i,r,o=t.getLongest(e.length,e.width,null!==(s=null===(n=e.material)||void 0===n?void 0:n.hasGrain)&&void 0!==s&&s),u=o.length,l=o.width;return"".concat(u,"_").concat(l,"_").concat(e.thickness,"_").concat(null!==(a=null===(i=e.material)||void 0===i?void 0:i.hasGrain)&&void 0!==a&&a,"_").concat(null===(r=e.material)||void 0===r?void 0:r.name)},t.getAllCombined=function(){var s,n=new Map,a=u(t.instances.values());try{for(a.s();!(s=a.n()).done;){var i=s.value,r=t.getGroupKey(i);n.has(r)||n.set(r,[]),n.get(r).push(i)}}catch(y){a.e(y)}finally{a.f()}var o,l=new Map,h=1,c=u(n);try{for(c.s();!(o=c.n()).done;){var g=e(o.value,2)[1];if(1===g.length){var f=g[0];l.set(f.name,f)}else{var d=g[0],v=g.reduce((function(t,e){return t+e.quantity}),0),m=Qt.createCombinedLaminate(d,"Combined Laminate ".concat(h++),v);m.children=g,m.part=d.part,m.panel=d.panel,m.material=d.material,l.set(m.name,m)}}}catch(y){c.e(y)}finally{c.f()}return Array.from(l.values())},t}return r(s,t),f(s,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Qt.fromLaminateBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),as=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.getIsWeldment()||this.addInstance(n.key,zt.fromMaterialBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),is=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t,e){var s,n=u(e);try{for(n.s();!(s=n.n()).done;){var a=s.value;this.addInstance("".concat(t,"-").concat(a.messageType),a)}}catch(i){n.e(i)}finally{n.f()}return this}},{key:"processMessages",value:function(t,e,s,n,a,i,r,o,u,l,h,c,g){this.processProjectMessages(t),this.processSourceMessages(e),this.processSourceMessages(s),this.processSourceMessages(n),this.processSourceMessages(a),this.processSourceMessages(i),this.processSourceMessages(r),this.processSourceMessages(o),this.processSourceMessages(u),this.processSourceMessages(l),this.processSourceMessages(h),this.processSourceMessages(c),this.processSourceMessages(g),this.processPanelMessages(e)}},{key:"processSourceMessages",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstances(n.key,n.messages)}}catch(a){s.e(a)}finally{s.f()}}},{key:"processProjectMessages",value:function(t){this.addInstances(t.name,t.messages)}},{key:"processPanelMessages",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.processPanelSize(n),this.processPanelLength(n),this.processPanelWidth(n)}}catch(a){s.e(a)}finally{s.f()}}},{key:"processPanelSize",value:function(t){if(!1===t.hasGrain&&t.board.length>0&&t.board.width>0){var e=t.lengthStock<=t.board.length&&t.widthStock<=t.board.width,s=t.lengthStock<=t.board.width&&t.widthStock<=t.board.length;if(!e&&!s){var n=new Mt("ERROR","Error","size out of range. Panel Size: ".concat(t.lengthStock," x ").concat(t.widthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),"size out of range. Panel Size: ".concat(t.lengthStock," x ").concat(t.widthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),t.name,t.name,"Panel",t.url);this.addInstance("".concat(t.key,"-").concat(n.message),n),t.messages.push(n)}}}},{key:"processPanelLength",value:function(t){if(t.board.length<t.lengthStock&&t.board.length>0&&t.hasGrain){var e=new Mt("ERROR","Error","length out of range. Length: ".concat(t.lengthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),"length out of range. Length: ".concat(t.lengthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),t.name,t.name,"Panel",t.url);this.addInstance("".concat(t.key,"-").concat(e.message),e),t.messages.push(e)}}},{key:"processPanelWidth",value:function(t){if(t.board.width<t.widthStock&&t.board.width>0&&t.hasGrain){var e=new Mt("ERROR","Error","width out of range. Width: ".concat(t.widthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),"width out of range. Width: ".concat(t.widthStock," | Board: ").concat(t.board.length," x ").concat(t.board.width),t.name,t.name,"Panel",t.url);this.addInstance("".concat(t.key,"-").concat(e.message),e),t.messages.push(e)}}}])}(Ft),rs=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;if(0===n.getCombineId())this.addInstance(n.key,n.createViewModel());else{var a="Combined Panel ".concat(n.getCombineId()),i=this.instances.get(a);if(i){var r=n.createViewModel();i.addChildren(r),i.quantity+=r.quantity}else{var o=n.createCombinedViewModel();o.addChildren(n.createViewModel()),this.addInstance(o.key,o)}}}}catch(l){s.e(l)}finally{s.f()}return this}},{key:"get",value:function(t){var e=this.instances.get(t);if(e)return e;var s,n=u(this.instances.values());try{for(n.s();!(s=n.n()).done;){var a,i,r=s.value,o=u(null!==(a=r.children)&&void 0!==a?a:[]);try{for(o.s();!(i=o.n()).done;){if(i.value.key===t)return r}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}}}])}(Ft),os=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,n.createViewModel())}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),us=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,ne.fromPartBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),ls=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,n.createViewModel())}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),hs=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.nestingBoard||this.addInstance(n.key,re.fromProgramBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),cs=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,le.fromProgramPartBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),gs=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.nestingBoard&&this.addInstance(n.key,we.fromProgramBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),fs=f((function t(e,s,n,a){c(this,t),this.key=e,this.messages=s,this.documents=n,this.variables=a}));(F=fs).fromSpindleBusiness=function(t){return new F(t.key,Mt.fromMessagesRaw(t.messages,t.key,"Spindle",""),t.documents,t.variables)};var ds=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){if(!t)return this;var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,fs.fromSpindleBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),vs=function(t){function s(){var t;return c(this,s),(t=n(this,s,arguments)).combinedInstances=new Map,t.getLongest=function(t,e,s){return s?{length:t,width:e}:e>t?{width:e,length:t}:{length:t,width:e}},t.getGroupKey=function(e){var s,n,a,i,r,o=t.getLongest(e.length,e.width,null!==(s=null===(n=e.material)||void 0===n?void 0:n.hasGrain)&&void 0!==s&&s),u=o.length,l=o.width;return"".concat(u,"_").concat(l,"_").concat(e.thickness,"_").concat(null!==(a=null===(i=e.material)||void 0===i?void 0:i.hasGrain)&&void 0!==a&&a,"_").concat(null===(r=e.material)||void 0===r?void 0:r.name)},t.getAllNOTINUSEBREAKINGMATERIALS=function(){var s,n=new Map,a=u(t.instances.values());try{for(a.s();!(s=a.n()).done;){var i=s.value,r=t.getGroupKey(i);n.has(r)||n.set(r,[]),n.get(r).push(i)}}catch(y){a.e(y)}finally{a.f()}var o,l=new Map,h=1,c=u(n);try{for(c.s();!(o=c.n()).done;){var g=e(o.value,2)[1];if(1===g.length){var f=g[0];l.set(f.name,f)}else{var d=g[0],v=g.reduce((function(t,e){return t+e.quantity}),0),m=de.createCombinedStock(d,"Combined Stock ".concat(h++),v);m.children=g,m.part=d.part,m.panel=d.panel,m.material=d.material,l.set(m.name,m)}}}catch(y){c.e(y)}finally{c.f()}return Array.from(l.values())},t}return r(s,t),f(s,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n,a,i=e.value;null!==(n=i.material)&&void 0!==n&&n.getIsWeldment()||0===(null===(a=i.material)||void 0===a?void 0:a.getType())&&this.addInstance(i.key,de.fromStockBusiness(i))}}catch(r){s.e(r)}finally{s.f()}return this}}])}(Ft),ms=function(){return f((function t(){var e=this;c(this,t),this.materials=new Map,this.laminates=new Map,this.edgebands=new Map,this.hardware=new Map,this.programs=new Map,this.weldments=new Map,this.panelProcesses=new Map,this.getMaterials=function(){return Array.from(e.materials.values())},this.getEdgebands=function(){return Array.from(e.edgebands.values())},this.getWeldments=function(){return Array.from(e.weldments.values())},this.getLaminates=function(){return Array.from(e.laminates.values())},this.getHardware=function(){return Array.from(e.hardware.values())},this.getPrograms=function(){return Array.from(e.programs.values())},this.getPanelProcesses=function(){return Array.from(e.panelProcesses.values())},this.getMaterialsCost=function(){var t,s=0,n=u(e.getMaterials());try{for(n.s();!(t=n.n()).done;){s+=t.value.cost}}catch(a){n.e(a)}finally{n.f()}return s},this.getLaminatesCost=function(){var t,s=0,n=u(e.getLaminates());try{for(n.s();!(t=n.n()).done;){s+=t.value.cost}}catch(a){n.e(a)}finally{n.f()}return s},this.getEdgebandsCost=function(){var t,s=0,n=u(e.getEdgebands());try{for(n.s();!(t=n.n()).done;){s+=t.value.cost}}catch(a){n.e(a)}finally{n.f()}return s},this.getProgramsCost=function(){var t,s=0,n=u(e.getPrograms());try{for(n.s();!(t=n.n()).done;){s+=t.value.cost}}catch(a){n.e(a)}finally{n.f()}return s},this.getHardwareCost=function(){var t,s=0,n=u(e.getHardware());try{for(n.s();!(t=n.n()).done;){s+=t.value.cost}}catch(a){n.e(a)}finally{n.f()}return s},this.getPanelProcessesCost=function(){var t,s=0,n=u(e.getPanelProcesses());try{for(n.s();!(t=n.n()).done;){s+=t.value.cost}}catch(a){n.e(a)}finally{n.f()}return s},this.getWeldmentsCost=function(){var t,s=0,n=u(e.getWeldments());try{for(n.s();!(t=n.n()).done;){s+=t.value.cost}}catch(a){n.e(a)}finally{n.f()}return s},this.getTotal=function(){return e.getMaterialsCost()+e.getEdgebandsCost()+e.getLaminatesCost()+e.getProgramsCost()+e.getHardwareCost()+e.getPanelProcessesCost()+e.getWeldmentsCost()}}),[{key:"addMaterials",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;1===n.type&&this.laminates.set(n.key,n),0===n.type&&this.materials.set(n.key,n)}}catch(a){s.e(a)}finally{s.f()}}},{key:"addWeldmentMaterials",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.weldments.set(n.key,n)}}catch(a){s.e(a)}finally{s.f()}}},{key:"addEdgebands",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.edgebands.set(n.key,n)}}catch(a){s.e(a)}finally{s.f()}}},{key:"addHardware",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.hardware.set(n.key,n)}}catch(a){s.e(a)}finally{s.f()}}},{key:"addPrograms",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.programs.set(n.key,n)}}catch(a){s.e(a)}finally{s.f()}}},{key:"addPanelProcesses",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.panelProcesses.set(n.key,n)}}catch(a){s.e(a)}finally{s.f()}}}])}(),ys=function(){function t(e,s,n,a,i,r,o,u){c(this,t),this.materials=e,this.laminates=s,this.edgebands=n,this.weldments=a,this.programs=i,this.hardware=r,this.panelProcesses=o,this.cost=u}return f(t,null,[{key:"createFromData",value:function(e,s,n,a,i,r){var o=new ms;return o.addMaterials(e),o.addWeldmentMaterials(s),o.addEdgebands(n),o.addPrograms(a),o.addHardware(i),o.addPanelProcesses(r),new t(o.getMaterials(),o.getLaminates(),o.getEdgebands(),o.getWeldments(),o.getPrograms(),o.getHardware(),o.getPanelProcesses(),{materials:o.getMaterialsCost(),edgebands:o.getEdgebandsCost(),laminates:o.getLaminatesCost(),programs:o.getProgramsCost(),hardware:o.getHardwareCost(),panelProcesses:o.getPanelProcessesCost(),weldments:o.getWeldmentsCost(),total:o.getTotal()})}}])}(),ps=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,ye.fromToolBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),bs=f((function t(){var e=this;c(this,t),this.instances=new Map,this.addInstance=function(t,s){var n=e.instances.get(t);n?n.push(s):e.instances.set(t,[s])},this.addInstances=function(t,s,n){var a,i=u(t.typedObjects);try{for(i.s();!(a=i.n()).done;){var r=a.value,o=s.get(r);if(o){var l,h=u(o.variables.TOTYPES.split(";"));try{for(h.s();!(l=h.n()).done;){var c=l.value;e.addInstance(c,o)}}catch(m){h.e(m)}finally{h.f()}}var g=n.get(r);if(g){var f,d=u(g.variables.TOTYPES.split(";"));try{for(d.s();!(f=d.n()).done;){var v=f.value;e.addInstance(v,g)}}catch(m){d.e(m)}finally{d.f()}}}}catch(m){i.e(m)}finally{i.f()}return e},this.getInstancesByName=function(t){return e.instances.get(t)||void 0},this.getAll=function(){return Object.fromEntries(e.instances)}})),ks=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value,a=n.getCutlist(),i=this.instances.get(a);if(i)i.addChildren(Be.fromWeldmentBusinessChild(n));else{var r=Be.fromWeldmentBusiness(n);r.addChildren(Be.fromWeldmentBusinessChild(n)),this.addInstance(a,r)}}}catch(o){s.e(o)}finally{s.f()}return this}},{key:"get",value:function(t){var e=this.instances.get(t);if(e)return e;var s,n=u(this.instances.values());try{for(n.s();!(s=n.n()).done;){var a,i,r=u(null!==(a=s.value.children)&&void 0!==a?a:[]);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.key===t)return o}}catch(l){r.e(l)}finally{r.f()}}}catch(l){n.e(l)}finally{n.f()}}},{key:"getFromRefPart",value:function(t){for(var e=[],s=0,n=Array.from(this.instances.values());s<n.length;s++){var a=n[s];a.refPart===t&&e.push(a)}return e}}])}(Ft),ws=function(t){function e(){return c(this,e),n(this,e,arguments)}return r(e,t),f(e,[{key:"addInstances",value:function(t){var e,s=u(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.addInstance(n.key,Ne.fromMaterialBusiness(n))}}catch(a){s.e(a)}finally{s.f()}return this}}])}(Ft),Ps=function(){function t(e,s,n,a,i,r,o,u,l,h,g,f,d,v,m,y,p,b,k,w,P,M,D,T,I,A,C,S,B,E,R,N,O,L,W,V,_,F,j,H,U,G,x,Z,Q,q,Y,z,K,X,$,J,tt){var et=this;c(this,t),this.database=e,this.settings=s,this.project=n,this.panels=a,this.stocks=i,this.parts=r,this.assemblies=o,this.edgebands=u,this.edgebandMaterials=l,this.laminates=h,this.materials=g,this.weldmentMaterials=f,this.programs=d,this.sheets=v,this.programParts=m,this.tools=y,this.spindles=p,this.costs=b,this.messages=k,this.typedObjects=w,this.frames=P,this.hardware=M,this.excludedItems=D,this.panelProcesses=T,this.processZones=I,this.weldments=A,this.labelsPanels=C,this.labelsFrames=S,this.summary=B,this.panelManager=E,this.stockManager=R,this.partManager=N,this.assemblyManager=O,this.edgebandManager=L,this.edgebandMaterialManager=W,this.laminateManager=V,this.materialManager=_,this.weldmentMaterialManager=F,this.programManager=j,this.sheetManager=H,this.programPartManager=U,this.toolManager=G,this.spindleManager=x,this.costManager=Z,this.messageManager=Q,this.typedObjectManager=q,this.frameManager=Y,this.hardwareManager=z,this.cuttingPatternManager=K,this.panelProcessManager=X,this.processZoneManager=$,this.weldmentManager=J,this.labelManager=tt,this.relateData=function(){return et.assignDataToEdgebands(),et.assignDataToStocks(),et.assignDataToWeldments(),et.assignDataToLaminates(),et.assignDataToPanels(),et.assignDataToAssemblies(),et.assignSubAssemblies(),et.assignDataToFrames(),et.assignDataToParts(),et.assignDataToSheets(),et.assignDataToPrograms(),et.assignDataToProgramParts(),et.assignDataToProcessZones(),et}}return f(t,[{key:"assignDataToEdgebands",value:function(){var t,e=u(this.edgebandManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.edgebandMaterialManager.get(s.refMaterial),s.part=this.partManager.get(s.refPanel),s.panel=this.panelManager.get(s.refPanel)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToStocks",value:function(){var t,e=u(this.stocks);try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialManager.get(s.refMaterial),s.part=this.partManager.get(s.refPart),s.panel=this.panelManager.get(s.refPart)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToWeldments",value:function(){var t,e=u(this.weldments);try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialManager.get(s.refMaterial),s.part=this.partManager.get(s.refPart)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToLaminates",value:function(){var t,e=u(this.laminateManager.getAll());try{for(e.s();!(t=e.n()).done;){var s=t.value;s.material=this.materialManager.get(s.refMaterial),s.part=this.partManager.get(s.refPart),s.panel=this.panelManager.get(s.refPart)}}catch(n){e.e(n)}finally{e.f()}}},{key:"assignDataToPanels",value:function(){var t,e=u(this.panelManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value;this.assignDataToPanel(n);var a,i=u(null!==(s=n.children)&&void 0!==s?s:[]);try{for(i.s();!(a=i.n()).done;){var r=a.value;this.assignDataToPanel(r)}}catch(o){i.e(o)}finally{i.f()}}}catch(o){e.e(o)}finally{e.f()}}},{key:"assignDataToPanel",value:function(t){t.project=this.project;var e=this.partManager.get(t.key);e&&(t.part=e);var s,n=u(t.refStocks);try{for(n.s();!(s=n.n()).done;){var a,i=s.value,r=this.stockManager.get(i);if(r)t.stocks.push(r),r.material||console.log("material not found for stock",r.key,"in panel",t.key),"CORE"===r.variables.ST_N?t.material=r.material:0===(null===(a=r.material)||void 0===a?void 0:a.type)&&t.layers.push(r);var o=this.laminateManager.get(i);o&&(t.laminates.push(o),"TOP"===o.name&&(t.laminateTop=o),"BOTTOM"===o.name&&(t.laminateBottom=o))}}catch(w){n.e(w)}finally{n.f()}var l,h=u(t.refEdgeband);try{for(h.s();!(l=h.n()).done;){var c=l.value,g=this.edgebandManager.get(c);g&&(t.edgebands.push(g),"F"===g.position&&(t.edgebandFront=g),"B"===g.position&&(t.edgebandBack=g),"L"===g.position&&(t.edgebandLeft=g),"R"===g.position&&(t.edgebandRight=g))}}catch(w){h.e(w)}finally{h.f()}var f,d=u(t.refPrograms);try{for(d.s();!(f=d.n()).done;){var v=f.value,m=this.programManager.get(v);m&&(t.programs.push(m),m.panel=t,m.material=t.material,e&&(m.part=e))}}catch(w){d.e(w)}finally{d.f()}var y,p=u(t.refProcessZones);try{for(p.s();!(y=p.n()).done;){var b=y.value,k=this.processZoneManager.get(b);k&&t.processZones.push(k)}}catch(w){p.e(w)}finally{p.f()}}},{key:"assignDataToAssemblies",value:function(){var t,e=u(this.assemblyManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,a=u(n.refParts);try{for(a.s();!(s=a.n()).done;){var i=s.value,r=this.partManager.get(i);r&&n.parts.push(r)}}catch(g){a.e(g)}finally{a.f()}var o,l=u(n.refPrograms);try{for(l.s();!(o=l.n()).done;){var h=o.value,c=this.programManager.get(h);c&&n.programs.push(c)}}catch(g){l.e(g)}finally{l.f()}}}catch(g){e.e(g)}finally{e.f()}}},{key:"assignSubAssemblies",value:function(){var t,e=u(this.assemblyManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value,a=u(n.refAssemblies);try{for(a.s();!(s=a.n()).done;){var i=s.value,r=this.assemblyManager.get(i);r&&n.assemblies.push(r)}}catch(o){a.e(o)}finally{a.f()}}}catch(o){e.e(o)}finally{e.f()}}},{key:"assignDataToFrames",value:function(){var t,e=u(this.frameManager.getAll());try{for(e.s();!(t=e.n()).done;){var n,a=t.value,i=u(a.refParts);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=this.partManager.get(r);if(o){var l;null===(l=a.parts)||void 0===l||l.push(o);var h=this.weldmentManager.getFromRefPart(r);h&&(a.weldments=s(h))}var c=this.panelManager.get(r);if(c){var g;null===(g=a.panels)||void 0===g||g.push(c);var f,d=u(c.programs);try{for(d.s();!(f=d.n()).done;){var v=f.value;a.programs.push(v)}}catch(P){d.e(P)}finally{d.f()}}else console.warn("Panel not found for refPart: ".concat(r," in frame: ").concat(a.name));var m=this.hardwareManager.get(r);m&&a.hardware.push(m)}}catch(P){i.e(P)}finally{i.f()}var y,p=u(a.refAssemblies);try{for(p.s();!(y=p.n()).done;){var b=y.value,k=this.assemblyManager.get(b);k&&a.assemblies.push(k);var w=this.hardwareManager.get(b);w&&a.hardware.push(w)}}catch(P){p.e(P)}finally{p.f()}}}catch(P){e.e(P)}finally{e.f()}}},{key:"assignDataToParts",value:function(){var t,e=u(this.partManager.getAll());try{for(e.s();!(t=e.n()).done;){var s,n=t.value;n.panel=n.refPanel?this.panelManager.get(n.refPanel):void 0;var a,i=u(null!==(s=n.refStocks)&&void 0!==s?s:[]);try{for(i.s();!(a=i.n()).done;){var r=a.value,o=this.stockManager.get(r);o&&n.stocks.push(o)}}catch(f){i.e(f)}finally{i.f()}var l,h=u(n.refPrograms);try{for(h.s();!(l=h.n()).done;){var c=l.value,g=this.programManager.get(c);g&&n.programs.push(g)}}catch(f){h.e(f)}finally{h.f()}}}catch(f){e.e(f)}finally{e.f()}}},{key:"assignDataToSheets",value:function(){var t,e=u(this.sheets);try{for(e.s();!(t=e.n()).done;){var s,n,a,i=t.value,r=u(null!==(s=i.refProgramParts)&&void 0!==s?s:[]);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=this.programPartManager.get(o);l&&i.programParts.push(l)}}catch(d){r.e(d)}finally{r.f()}var h,c=u(null!==(n=i.refTools)&&void 0!==n?n:[]);try{for(c.s();!(h=c.n()).done;){var g=h.value,f=this.toolManager.get(g);f&&i.tools.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){e.e(d)}finally{e.f()}}},{key:"assignDataToPrograms",value:function(){var t,e=u(this.programs);try{for(e.s();!(t=e.n()).done;){var s,n,a=t.value,i=u(null!==(s=a.refTools)&&void 0!==s?s:[]);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=this.toolManager.get(r);o&&a.tools.push(o)}}catch(l){i.e(l)}finally{i.f()}}}catch(l){e.e(l)}finally{e.f()}}},{key:"assignDataToProgramParts",value:function(){var t,e=u(this.programParts);try{for(e.s();!(t=e.n()).done;){var s=t.value,n=this.panelManager.get(s.refPart);s.panel=n}}catch(a){e.e(a)}finally{e.f()}}},{key:"assignDataToProcessZones",value:function(){var t,e=u(this.processZones);try{for(e.s();!(t=e.n()).done;){var s=t.value,n=this.panelProcessManager.get(s.refPanelProcess);s.panelProcess=n}}catch(a){e.e(a)}finally{e.f()}}}],[{key:"createFromRawData",value:function(e,s){var n=Fe.createFromRawData(e,s),a=At.fromProjectBusiness(n.projectBusiness),i=(new rs).addInstances(n.panelsBusiness),r=(new vs).addInstances(n.stocksBusiness),o=(new us).addInstances(n.partsBusiness),u=(new je).addInstances(n.assembliesBusiness),l=(new Xe).addInstances(n.edgebandsBusiness),h=(new $e).addInstances(n.edgebandMaterialsBusiness),c=(new ns).addInstances(n.laminatesBusiness),g=(new as).addInstances(n.materialsBusiness),f=(new ws).addInstances(n.weldmentMaterialsBusiness),d=(new hs).addInstances(n.programsBusiness),v=(new gs).addInstances(n.sheetBusiness),m=(new cs).addInstances(n.programPartsBusiness),y=(new ps).addInstances(n.toolsBusiness),p=(new ds).addInstances(n.spindlesBusiness),b=(new Ue).addInstances(n.costsBusiness),k=new is,w=(new bs).addInstances(e,o,u),P=(new ts).addInstances(n.framesBusiness),M=(new es).addInstances(n.hardwaresBusiness),D=(new Je).addInstances(n.excludedItemsBusiness),T=(new Ke).createFromData(e,i.getAll()),I=(new os).addInstances(n.panelProcessesBusiness),A=(new ls).addInstances(n.processZonesBusiness),C=(new ks).addInstances(n.weldmentsBusiness),S=ss.makeLabels(i.getAll(),!0),B=ss.makeLabels(P.getAll()),E=ys.createFromData(g.getAll(),f.getAll(),h.getAll(),d.getAll(),M.getAll(),I.getAll());return k.processMessages(a,i.getAll(),r.getAll(),o.getAll(),u.getAll(),l.getAll(),c.getAll(),g.getAll(),d.getAll(),v.getAll(),m.getAll(),y.getAll(),p.getAll()),new t(e,s,a,i.getAll(),r.getAll(),o.getAll(),u.getAll(),l.getAll(),h.getAll(),c.getAll(),g.getAll(),f.getAll(),d.getAll(),v.getAll(),m.getAll(),y.getAll(),p.getAll(),b.getAll(),k.getAll(),w.getAll(),P.getAll(),M.getAll(),D.getAll(),I.getAll(),A.getAll(),C.getAll(),S,B,E,i,r,o,u,l,h,c,g,f,d,v,m,y,p,b,k,w,P,M,T,I,A,C,ss).relateData()}}])}();(j=Ps).createNullInstance=function(){var t=[];return new j({},{},{},t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,{},t,t,t,t,t,t,t,t,{},new rs,new vs,new us,new je,new Xe,new $e,new ns,new as,new ws,new hs,new gs,new cs,new ps,new ds,new Ue,new is,new bs,new ts,new es,new Ke,new os,new ls,new ks,ss)},a("default",Ps)}}}))}();

import{r as Re,i as Zr,k as el,s as tl,l as Zl,m as Ks,n as il,o as ui,p as eo,q as to,t as sl,j as je,v as al,w as nl,x as ae,y as h,z as Pe,A as I,D as gn,E as io,G as rl,H as so,I as ao,J as Q,K as ll,L as E,M as Vt,S as yt,O as b,Q as w,U as G,V as y,W as q,X as ot,Y as Tt,Z as A,$ as $e,a0 as ii,a1 as Ri,a2 as sa,a3 as nt,a4 as Ci,a5 as ye,a6 as Ie,a7 as Dt,a8 as Si,a9 as fe,aa as V,ab as bt,ac as Nt,ad as M,ae as Ee,af as ft,ag as zs,ah as is,ai as ri,aj as Wt,ak as St,al as dt,am as Pi,an as Z,ao as ol,ap as Ct,aq as ni,ar as yn,as as hl,at as no,au as Xa,av as ro,aw as ul,ax as lo,T as cl,c as bn,g as oo,ay as ho,B as uo,R as co}from"./main-C2vc3o58.js";import{X as po,T as Cn,v as fo}from"./Table-D878PMKE.js";import{S as vo}from"./SearchInput-BsV9SoqE.js";import{S as pl}from"./Stack-B5Tr4YGz.js";function mo(u){return Re.Children.toArray(u).filter(a=>Re.isValidElement(a))}function go(u){return el("MuiToggleButton",u)}const Ei=Zr("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),dl=Re.createContext({}),fl=Re.createContext(void 0);function yo(u,a){return a===void 0||u===void 0?!1:Array.isArray(a)?a.includes(u):u===a}const bo=u=>{const{classes:a,fullWidth:e,selected:t,disabled:i,size:s,color:n}=u,r={root:["root",t&&"selected",i&&"disabled",e&&"fullWidth","size".concat(Ks(s)),n]};return nl(r,go,a)},Co=tl(Zl,{name:"MuiToggleButton",slot:"Root",overridesResolver:(u,a)=>{const{ownerState:e}=u;return[a.root,a["size".concat(Ks(e.size))]]}})(il(({theme:u})=>({...u.typography.button,borderRadius:(u.vars||u).shape.borderRadius,padding:11,border:"1px solid ".concat((u.vars||u).palette.divider),color:(u.vars||u).palette.action.active,["&.".concat(Ei.disabled)]:{color:(u.vars||u).palette.action.disabled,border:"1px solid ".concat((u.vars||u).palette.action.disabledBackground)},"&:hover":{textDecoration:"none",backgroundColor:u.vars?"rgba(".concat(u.vars.palette.text.primaryChannel," / ").concat(u.vars.palette.action.hoverOpacity,")"):ui(u.palette.text.primary,u.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{["&.".concat(Ei.selected)]:{color:(u.vars||u).palette.text.primary,backgroundColor:u.vars?"rgba(".concat(u.vars.palette.text.primaryChannel," / ").concat(u.vars.palette.action.selectedOpacity,")"):ui(u.palette.text.primary,u.palette.action.selectedOpacity),"&:hover":{backgroundColor:u.vars?"rgba(".concat(u.vars.palette.text.primaryChannel," / calc(").concat(u.vars.palette.action.selectedOpacity," + ").concat(u.vars.palette.action.hoverOpacity,"))"):ui(u.palette.text.primary,u.palette.action.selectedOpacity+u.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:u.vars?"rgba(".concat(u.vars.palette.text.primaryChannel," / ").concat(u.vars.palette.action.selectedOpacity,")"):ui(u.palette.text.primary,u.palette.action.selectedOpacity)}}}}},...Object.entries(u.palette).filter(eo()).map(([a])=>({props:{color:a},style:{["&.".concat(Ei.selected)]:{color:(u.vars||u).palette[a].main,backgroundColor:u.vars?"rgba(".concat(u.vars.palette[a].mainChannel," / ").concat(u.vars.palette.action.selectedOpacity,")"):ui(u.palette[a].main,u.palette.action.selectedOpacity),"&:hover":{backgroundColor:u.vars?"rgba(".concat(u.vars.palette[a].mainChannel," / calc(").concat(u.vars.palette.action.selectedOpacity," + ").concat(u.vars.palette.action.hoverOpacity,"))"):ui(u.palette[a].main,u.palette.action.selectedOpacity+u.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:u.vars?"rgba(".concat(u.vars.palette[a].mainChannel," / ").concat(u.vars.palette.action.selectedOpacity,")"):ui(u.palette[a].main,u.palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:u.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:u.typography.pxToRem(15)}}]}))),So=Re.forwardRef(function(a,e){const{value:t,...i}=Re.useContext(dl),s=Re.useContext(fl),n=to({...i,selected:yo(a.value,t)},a),r=sl({props:n,name:"MuiToggleButton"}),{children:l,className:o,color:c="standard",disabled:p=!1,disableFocusRipple:d=!1,fullWidth:f=!1,onChange:v,onClick:g,selected:m,size:C="medium",value:k,...T}=r,x={...r,color:c,disabled:p,disableFocusRipple:d,fullWidth:f,size:C},L=bo(x),N=Y=>{g&&(g(Y,k),Y.defaultPrevented)||v&&v(Y,k)},R=s||"";return je.jsx(Co,{className:al(i.className,L.root,o,R),disabled:p,focusRipple:!d,ref:e,onClick:N,onChange:v,value:k,ownerState:x,"aria-pressed":m,...T,children:l})});function Eo(u){return el("MuiToggleButtonGroup",u)}const Ge=Zr("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),xo=u=>{const{classes:a,orientation:e,fullWidth:t,disabled:i}=u,s={root:["root",e,t&&"fullWidth"],grouped:["grouped","grouped".concat(Ks(e)),i&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return nl(s,Eo,a)},Ao=tl("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(u,a)=>{const{ownerState:e}=u;return[{["& .".concat(Ge.grouped)]:a.grouped},{["& .".concat(Ge.grouped)]:a["grouped".concat(Ks(e.orientation))]},{["& .".concat(Ge.firstButton)]:a.firstButton},{["& .".concat(Ge.lastButton)]:a.lastButton},{["& .".concat(Ge.middleButton)]:a.middleButton},a.root,e.orientation==="vertical"&&a.vertical,e.fullWidth&&a.fullWidth]}})(il(({theme:u})=>({display:"inline-flex",borderRadius:(u.vars||u).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",["& .".concat(Ge.grouped)]:{["&.".concat(Ge.selected," + .").concat(Ge.grouped,".").concat(Ge.selected)]:{borderTop:0,marginTop:0}},["& .".concat(Ge.firstButton,",& .").concat(Ge.middleButton)]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},["& .".concat(Ge.lastButton,",& .").concat(Ge.middleButton)]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},["& .".concat(Ge.lastButton,".").concat(Ei.disabled,",& .").concat(Ge.middleButton,".").concat(Ei.disabled)]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{["& .".concat(Ge.grouped)]:{["&.".concat(Ge.selected," + .").concat(Ge.grouped,".").concat(Ge.selected)]:{borderLeft:0,marginLeft:0}},["& .".concat(Ge.firstButton,",& .").concat(Ge.middleButton)]:{borderTopRightRadius:0,borderBottomRightRadius:0},["& .".concat(Ge.lastButton,",& .").concat(Ge.middleButton)]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},["& .".concat(Ge.lastButton,".").concat(Ei.disabled,",& .").concat(Ge.middleButton,".").concat(Ei.disabled)]:{borderLeft:"1px solid transparent"}}}]}))),ko=Re.forwardRef(function(a,e){const t=sl({props:a,name:"MuiToggleButtonGroup"}),{children:i,className:s,color:n="standard",disabled:r=!1,exclusive:l=!1,fullWidth:o=!1,onChange:c,orientation:p="horizontal",size:d="medium",value:f,...v}=t,g={...t,disabled:r,fullWidth:o,orientation:p,size:d},m=xo(g),C=Re.useCallback((R,Y)=>{if(!c)return;const Oe=f&&f.indexOf(Y);let xe;f&&Oe>=0?(xe=f.slice(),xe.splice(Oe,1)):xe=f?f.concat(Y):[Y],c(R,xe)},[c,f]),k=Re.useCallback((R,Y)=>{c&&c(R,f===Y?null:Y)},[c,f]),T=Re.useMemo(()=>({className:m.grouped,onChange:l?k:C,value:f,size:d,fullWidth:o,color:n,disabled:r}),[m.grouped,l,k,C,f,d,o,n,r]),x=mo(i),L=x.length,N=R=>{const Y=R===0,Oe=R===L-1;return Y&&Oe?"":Y?m.firstButton:Oe?m.lastButton:m.middleButton};return je.jsx(Ao,{role:"group",className:al(m.root,s),ref:e,ownerState:g,...v,children:je.jsx(dl.Provider,{value:T,children:x.map((R,Y)=>je.jsx(fl.Provider,{value:N(Y),children:R},Y))})})}),wo=({groupBy:u,handleToggle:a})=>{var n,r;const e=(r=(n=u.find(l=>l.default))==null?void 0:n.field)!=null?r:null,[t,i]=Re.useState(e);Re.useEffect(()=>{e!==null&&a(e)},[e,a]);const s=(l,o)=>{i(o),a(o)};return je.jsx(ko,{className:"no-print",color:"primary",size:"small",value:t,onChange:s,"aria-label":"group toggle",exclusive:!0,sx:{mb:1},children:u.map(l=>je.jsx(So,{value:l.field,"aria-label":l.field,sx:{textTransform:"none"},children:l.title},l.field))})};var To=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Do=["alt","className","disabled","form","id","readOnly","style","tabIndex","title","type","name","onClick","onFocus","onBlur"],Io=["accordion","tab","splitter"],Oo=/\]/,Lo=function(u){To(a,u);function a(){var e=u!==null&&u.apply(this,arguments)||this;return e.mountingState=!1,e.attrKeys=[],e.cachedTimeOut=0,e.isAppendCalled=!1,e.initRenderCalled=!1,e.isReactForeceUpdate=!1,e.isReact=!0,e.isshouldComponentUpdateCalled=!1,e.isCreated=!1,e}return a.prototype.componentDidMount=function(){this.refreshChild(!0),this.canDelayUpdate=Io.indexOf(this.getModuleName())!==-1,this.renderReactComponent(),this.portals&&this.portals.length&&(this.mountingState=!0,this.renderReactTemplates(),this.mountingState=!1)},a.prototype.componentDidUpdate=function(e){!this.isshouldComponentUpdateCalled&&this.initRenderCalled&&!this.isReactForeceUpdate&&e!==this.props&&(this.isshouldComponentUpdateCalled=!0,this.updateProperties(this.props,!1,e))},a.prototype.renderReactComponent=function(){var e=this.reactElement;e&&!this.isAppendCalled&&(this.isAppendCalled=!0,this.appendTo(e))},a.prototype.shouldComponentUpdate=function(e){return this.isshouldComponentUpdateCalled=!0,this.initRenderCalled?(this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(this.reactElement)),this.updateProperties(e),!0):(this.updateProperties(e,!0),!0)},a.prototype.updateProperties=function(e,t,i){for(var s=this,n=ae({},e),r=Object.keys(e),l=ae({},i||this.props),o=h(l.statelessTemplates)?h(this.statelessTemplateProps)?[]:this.statelessTemplateProps:l.statelessTemplates,c=0,p=r;c<p.length;c++){var d=p[c],f=d==="className";if(d!=="children")if(!f&&!h(this.htmlattributes[""+d])&&this.htmlattributes[""+d]!==n[""+d]&&(this.htmlattributes[""+d]=n[""+d]),this.compareValues(l[""+d],e[""+d]))delete n[""+d];else if(this.attrKeys.indexOf(d)!==-1)if(f){this.clsName=!0;for(var v=l[""+d].split(" "),g=0;g<v.length;g++)this.element.classList.remove(v[parseInt(g.toString(),10)]);for(var m=n[""+d].split(" "),C=0;C<m.length;C++)this.element.classList.add(m[parseInt(C.toString(),10)])}else d!=="disabled"&&!Object.prototype.hasOwnProperty.call(this.properties,d)&&delete n[""+d];else(d==="value"&&e[""+d]===this[""+d]||o.indexOf(d)>-1&&(d==="content"&&typeof n[""+d]=="function"||e[""+d].toString()===this[""+d].toString()))&&delete n[""+d]}n.children&&delete n.children,this.initRenderCalled&&(this.canDelayUpdate||l.delayUpdate)?setTimeout(function(){s.refreshProperties(n,e,t)}):this.refreshProperties(n,e,t)},a.prototype.refreshProperties=function(e,t,i){var s=h(this.props.statelessTemplates)?[]:this.props.statelessTemplates;Object.keys(e).length&&(i||this.processComplexTemplate(e,this),this.setProperties(e,i)),s.indexOf("directiveTemplates")===-1&&this.refreshChild(i,t)},a.prototype.processComplexTemplate=function(e,t){var i=t.complexTemplate;if(i){for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){var n=i[""+s];e[""+s]&&Pe(n,I(s,e),e)}}},a.prototype.getDefaultAttributes=function(){var e=this;this.isReact=!0;var t=Object.keys(this.props),i=["children","statelessTemplates","immediateRender","isLegacyTemplate","delayUpdate"];this.htmlattributes||(this.htmlattributes={}),this.attrKeys=Do.concat(this.controlAttributes||[]);for(var s=0,n=t;s<n.length;s++){var r=n[s];(r.indexOf("data-")!==-1||r.indexOf("aria-")!==-1||this.attrKeys.indexOf(r)!==-1||Object.keys(this.properties).indexOf(""+r)===-1&&i.indexOf(""+r)===-1)&&this.htmlattributes[""+r]!==this.props[""+r]&&(this.htmlattributes[""+r]=this.props[""+r])}if(!this.htmlattributes.ref){this.htmlattributes.ref=function(d){e.reactElement=d};var l=["autocomplete","combobox","dropdownlist","dropdowntree","multiselect","listbox","colorpicker","numerictextbox","textbox","smarttextarea","uploader","maskedtextbox","slider","datepicker","datetimepicker","daterangepicker","timepicker","checkbox","switch","radio","rating","textarea","multicolumncombobox"];l.indexOf(this.getModuleName())!==-1&&(this.htmlattributes.key=""+a.reactUid,a.reactUid++,this.type&&!this.htmlattributes.type&&(this.htmlattributes.type=this.multiline?"hidden":this.type),this.name&&!this.htmlattributes.name&&(this.htmlattributes.name=this.name))}if(this.clsName)for(var o=this.element.classList,c=this.htmlattributes.className,p=0;p<o.length;p++)c.indexOf(o[parseInt(p.toString(),10)])===-1&&(this.htmlattributes.className=this.htmlattributes.className+" "+o[parseInt(p.toString(),10)]);return this.htmlattributes},a.prototype.trigger=function(e,t,i){var s=this;if(this.isDestroyed!==!0&&this.modelObserver){if(Oo.test(e)){var n=I(e,this);n?(n.call(this,t),i&&i.call(this,t)):i&&i.call(this,t)}(e==="change"||e==="input")&&this.props.onChange&&t.event&&this.props.onChange.call(void 0,{syntheticEvent:t.event,nativeEvent:{text:t.value},value:t.value,target:this});var r=this.isProtectedOnChange;this.isProtectedOnChange=!1,e==="created"?setTimeout(function(){s.isCreated=!0,s.isDestroyed||s.modelObserver.notify(e,t,i)},10):this.modelObserver.notify(e,t,i),this.isProtectedOnChange=r}},a.prototype.compareValues=function(e,t){var i=typeof e,s=typeof t;if(i===s){if(e===t)return!0;if((!h(e)&&e.constructor)!==(!h(t)&&t.constructor))return!1;if(e instanceof Date||e instanceof RegExp||e instanceof String||e instanceof Number)return e.toString()===t.toString();if(gn(e)||Array.isArray(e)){var n=e,r=t;return gn(n)&&(n=[e],r=[t]),this.compareObjects(n,r).status}if(e.moduleName&&e.moduleName===t.moduleName&&(e.moduleName==="query"||e.moduleName==="datamanager")&&JSON.stringify(e)===JSON.stringify(t))return!0}return!1},a.prototype.compareObjects=function(e,t,i){var s=!0,n=e.length===t.length,r=[],l=h(this.templateProps)?[]:this.templateProps;if(n)for(var o=0,c=t.length;o<c;o++){var p={},d=e[parseInt(o.toString(),10)],f=t[parseInt(o.toString(),10)],v=Object.keys(f);if(v.length!==0)for(var g=0,m=v;g<m.length;g++){var C=m[g],k=d[""+C],T=f[""+C];if(C==="items"){for(var x=0;x<T.length;x++)if(this.getModuleName()==="richtexteditor"&&typeof T[parseInt(x.toString(),10)]=="object")return{status:!0}}if(this.getModuleName()==="grid"&&C==="field"&&(p[""+C]=T),!Object.prototype.hasOwnProperty.call(d,C)||!(l.length>0&&l.indexOf(""+C)===-1&&typeof T=="function"?this.compareValues(k.toString(),T.toString()):this.compareValues(k,T))){if(!i)return{status:!1};s=!1,p[""+C]=T}}else if(t[parseInt(o.toString(),10)]===e[parseInt(o.toString(),10)])s=!0;else{if(!i)return{status:!1};s=!1}this.getModuleName()==="grid"&&i==="columns"&&h(p.field)&&(p.field=void 0),Object.keys(p).length&&r.push({index:o,value:p,key:i})}else s=!1;return{status:s,changedProperties:r}},a.prototype.refreshChild=function(e,t){if(this.checkInjectedModules){for(var i=this.getInjectedModules()||[],s=this.getInjectedServices()||[],n=0,r=s;n<r.length;n++){var l=r[n];i.indexOf(l)===-1&&i.push(l)}this.injectedModules=i}if(this.directivekeys){var o=[],c="",p=this.validateChildren({},this.directivekeys,t||this.props);if(p&&Object.keys(p).length){if(!e&&this.skipRefresh)for(var d=0,f=this.skipRefresh;d<f.length;d++){var v=f[d];delete p[""+v]}if(this.prevProperties){for(var g=Object.keys(this.prevProperties),m=0;m<g.length;m++)if(c=g[parseInt(m.toString(),10)],!!Object.prototype.hasOwnProperty.call(p,c)){var C=this.compareObjects(this.prevProperties[""+c],p[""+c],c);if(C.status)delete p[""+c];else{C.changedProperties.length&&(o=o.concat(C.changedProperties));var k={};k[""+c]=p[""+c],this.prevProperties=ae(this.prevProperties,k)}}}else this.prevProperties=ae({},p,{},!0);if(o.length)if(this.getModuleName()==="grid"&&c==="columns")for(var T=0,x=this.columns;T<x.length;T++){var L=I("field",x[parseInt(T.toString(),10)]),N=I(T+".value.field",o);if(L===N){var R=I(o[parseInt(T.toString(),10)].key+"."+o[parseInt(T.toString(),10)].index,this);R&&R.setProperties?R.setProperties(o[parseInt(T.toString(),10)].value):ae(R,o[parseInt(T.toString(),10)].value)}else this.setProperties(p,e)}else for(var Y=0,Oe=o;Y<Oe.length;Y++){var xe=Oe[Y],R=I(xe.key+"."+xe.index,this);R&&R.setProperties?R.setProperties(xe.value):ae(R,xe.value)}else this.setProperties(p,e)}}},a.prototype.componentWillUnmount=function(){clearTimeout(this.cachedTimeOut);var e=["dropdowntree","checkbox"],t=e.indexOf(this.getModuleName())?!0:document.body.contains(this.element);this.initRenderCalled&&this.isAppendCalled&&this.element&&t&&!this.isDestroyed&&this.isCreated&&this.destroy(),io.offIntlEvents()},a.prototype.appendReactElement=function(e,t){var i=rl.createPortal(e,t);this.portals?this.portals.push(i):this.portals=[i]},a.prototype.renderReactTemplates=function(e){this.isReactForeceUpdate=!0,e?this.forceUpdate(e):this.forceUpdate(),this.isReactForeceUpdate=!1},a.prototype.clearTemplate=function(e,t,i){var s=this;e&&e.length?Array.prototype.forEach.call(e,function(n){if(s.portals.forEach(function(l){l.propName}),!h(t)&&s.portals[t]&&s.portals[t].propName===n)s.portals.splice(t,1);else for(var r=0;r<s.portals.length;r++)s.portals[parseInt(r.toString(),10)].propName===n&&(s.portals.splice(r,1),r--)}):this.portals=[],this.renderReactTemplates(i)},a.prototype.validateChildren=function(e,t,i){for(var s=!1,n=Re.Children.toArray(i.children),r=0,l=n;r<l.length;r++){var o=l[r],c=this.getChildType(o),p=t[""+c];if(c&&t){var d=this.getChildProps(Re.Children.toArray(o.props.children),p);d.length&&(s=!0,e[o.type.propertyName||c]=d)}}return s?e:null},a.prototype.getChildType=function(e){return e.type&&e.type.isDirective&&e.type.moduleName||""},a.prototype.getChildProps=function(e,t){for(var i=[],s=0,n=e;s<n.length;s++){var r=n[s],l=!1,o=void 0;typeof t=="string"?(l=!0,o=t):o=Object.keys(t)[0];var c=r.props,p=this.getChildType(r);if(p===o)if(l||!c.children){var d=ae({},c,{},!0);this.processComplexTemplate(d,r.type),i.push(d)}else{var f=this.validateChildren(ae({},c),t[""+o],c)||c;f.children&&delete f.children,this.processComplexTemplate(f,r.type),i.push(f)}}return i},a.prototype.getInjectedServices=function(){for(var e=Re.Children.toArray(this.props.children),t=0,i=e;t<i.length;t++){var s=i[t];if(s.type&&s.type.isService)return s.props.services}return[]},a.reactUid=1,a}(Re.Component);function No(u,a){a.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(t){t!=="isMounted"&&t!=="replaceState"&&t!=="render"&&(u.prototype[""+t]=e.prototype[""+t])})})}var Bo=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();(function(u){Bo(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return a.prototype.render=function(){return null},a.isDirective=!0,a})(Re.PureComponent);var Po=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();(function(u){Po(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return a.prototype.render=function(){return null},a.isService=!0,a})(Re.PureComponent);var Ro=so();function Mo(u,a){return typeof u=="string"||u.prototype&&u.prototype.CSPTemplate&&typeof u=="function"?Ro(u,a):function(e,t,i,s){var n=u,r=e;typeof n=="object"&&(n=u.template,r=ae({},e,u.data||{}));var l;s?l=s:l=document.createElement("div");var o=Re.createElement(n,r),c=rl.createPortal(o,l);if(c.propName=i,t.portals?t.portals.push(c):t.portals=[c],!s)return[l]}}ao({compile:Mo});function vl(u,a,e,t,i,s){var n=t;if(t.tagName===a){var r=I("ej2_instances",t);n=u("input",{attrs:{type:e}});for(var l=["change","cssClass","label","labelPosition","id"],o=0,c=t.attributes.length;o<c;o++)l.indexOf(t.attributes[o].nodeName)===-1&&n.setAttribute(t.attributes[o].nodeName,t.attributes[o].nodeValue);Q(t,{class:i}),t.appendChild(n),t.classList.add(s),t.classList.remove(s),Pe("ej2_instances",r,n),ll(t,"ej2_instances")}return n}function Fo(u){for(var a,e=u.childNodes,t=0;t<e.length;t++)if(a=e[t],a.nodeType===3)return a;return null}function an(u,a,e){e===void 0&&(e={});var t=u("div",{className:"e-checkbox-wrapper e-css"});e.cssClass&&E([t],e.cssClass.split(" ")),e.enableRtl&&t.classList.add("e-rtl");{var i=u("span",{className:"e-ripple-container"});Vt(i,{isCenterRipple:!0,duration:400}),t.appendChild(i)}var s=u("span",{className:"e-frame e-icons"});if(e.checked&&s.classList.add("e-check"),t.appendChild(s),e.label){var n=u("span",{className:"e-label"});e.disableHtmlEncode?n.textContent=e.label:n.innerHTML=e.label,t.appendChild(n)}return t}function xi(u,a){if(a){var e=document.createEvent("MouseEvents");e.initEvent(u.type,!1,!0),a.dispatchEvent(e)}}function Vo(u,a){u.element.getAttribute("ejs-for")&&a.appendChild(u.createElement("input",{attrs:{name:u.name||u.element.name,value:"false",type:"hidden"}}))}var Ho=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ht=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},Sn;(function(u){u.Left="Left",u.Right="Right",u.Top="Top",u.Bottom="Bottom"})(Sn||(Sn={}));var Bt={RTL:"e-rtl",BUTTON:"e-btn",PRIMARY:"e-primary",ICONBTN:"e-icon-btn"},ts=function(u){Ho(a,u);function a(e,t){return u.call(this,e,t)||this}return a.prototype.preRender=function(){},a.prototype.render=function(){this.initialize(),this.removeRippleEffect=Vt(this.element,{selector:"."+Bt.BUTTON}),this.renderComplete()},a.prototype.initialize=function(){this.cssClass&&E([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPrimary&&this.element.classList.add(Bt.PRIMARY);{if(this.content){var e=this.enableHtmlSanitizer?yt.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss()}this.enableRtl&&this.element.classList.add(Bt.RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},a.prototype.controlStatus=function(e){this.element.disabled=e},a.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),(this.iconPosition==="Top"||this.iconPosition==="Bottom")&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add(Bt.ICONBTN);var t=this.element.childNodes[0];t&&(this.iconPosition==="Left"||this.iconPosition==="Top")?this.element.insertBefore(e,t):this.element.appendChild(e)}},a.prototype.wireEvents=function(){this.isToggle&&b.add(this.element,"click",this.btnClickHandler,this)},a.prototype.unWireEvents=function(){this.isToggle&&b.remove(this.element,"click",this.btnClickHandler)},a.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},a.prototype.destroy=function(){var e=[Bt.PRIMARY,Bt.RTL,Bt.ICONBTN,"e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(/\s+/).filter(function(i){return i.length>0}))),u.prototype.destroy.call(this),w([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var t=this.element.querySelector("span.e-btn-icon");t&&G(t),this.unWireEvents()},a.prototype.getModuleName=function(){return"btn"},a.prototype.getPersistData=function(){return this.addOnPersist([])},a.Inject=function(){},a.prototype.onPropertyChanged=function(e,t){for(var i=this.element.querySelector("span.e-btn-icon"),s=0,n=Object.keys(e);s<n.length;s++){var r=n[s];switch(r){case"isPrimary":e.isPrimary?this.element.classList.add(Bt.PRIMARY):this.element.classList.remove(Bt.PRIMARY);break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":{i=this.element.querySelector("span.e-btn-icon"),i?e.iconCss?(i.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&(this.iconPosition==="Left"?i.classList.add("e-icon-left"):i.classList.add("e-icon-right"))):G(i):this.setIconCss();break}case"iconPosition":w([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),i=this.element.querySelector("span.e-btn-icon"),i&&G(i),this.setIconCss();break;case"cssClass":t.cssClass&&w([this.element],t.cssClass.split(/\s+/).filter(function(o){return o.length>0})),e.cssClass&&E([this.element],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Bt.RTL):this.element.classList.remove(Bt.RTL);break;case"content":{var l=Fo(this.element);l||this.element.classList.remove(Bt.ICONBTN),this.enableHtmlSanitizer&&(e.content=yt.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break}case"isToggle":e.isToggle?b.add(this.element,"click",this.btnClickHandler,this):(b.remove(this.element,"click",this.btnClickHandler),w([this.element],["e-active"]));break}}},a.prototype.click=function(){this.element.click()},a.prototype.focusIn=function(){this.element.focus()},Ht([y("Left")],a.prototype,"iconPosition",void 0),Ht([y("")],a.prototype,"iconCss",void 0),Ht([y(!1)],a.prototype,"disabled",void 0),Ht([y(!1)],a.prototype,"isPrimary",void 0),Ht([y("")],a.prototype,"cssClass",void 0),Ht([y("")],a.prototype,"content",void 0),Ht([y(!1)],a.prototype,"isToggle",void 0),Ht([y()],a.prototype,"locale",void 0),Ht([y(!0)],a.prototype,"enableHtmlSanitizer",void 0),Ht([q()],a.prototype,"created",void 0),a=Ht([ot],a),a}(Tt),Wo=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),It=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},aa="e-check",En="e-checkbox-disabled",Hi="e-frame",na="e-stop",ra="e-label",la="e-ripple-container",oa="e-rtl",ha="e-checkbox-wrapper",qo=["title","class","style","disabled","readonly","name","value","id","tabindex","aria-label","required"],zo=function(u){Wo(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.isFocused=!1,i.isMouseClick=!1,i.clickTriggered=!1,i.validCheck=!0,i.type="checkbox",i}return a.prototype.changeState=function(e,t,i){var s=this.getWrapper(),n=null;s&&(n=s.getElementsByClassName(Hi)[0]),e==="check"?(n&&(n.classList.remove(na),n.classList.add(aa)),this.element.checked=!0,(this.element.required||A(this.element,"form")&&A(this.element,"form").classList.contains("e-formvalidator"))&&this.validCheck&&!t&&i?(this.element.checked=!1,this.validCheck=!1):(this.element.required||A(this.element,"form")&&A(this.element,"form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):e==="uncheck"?(n&&w([n],[aa,na]),this.element.checked=!1,(this.element.required||A(this.element,"form")&&A(this.element,"form").classList.contains("e-formvalidator"))&&this.validCheck&&!t&&i?(this.element.checked=!0,this.validCheck=!1):(this.element.required||A(this.element,"form")&&A(this.element,"form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):(n&&(n.classList.remove(aa),n.classList.add(na)),this.element.indeterminate=!0,this.indeterminate=!0)},a.prototype.clickHandler=function(e){if(e.target.tagName==="INPUT"&&this.clickTriggered){this.changeState(this.checked?"check":"uncheck"),this.clickTriggered=!1;return}(e.target.tagName==="SPAN"||e.target.tagName==="LABEL"||A(e.target,".e-label"))&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck",!1,!0),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck",!1,!0),this.checked=!1):(this.changeState("check",!1,!0),this.checked=!0);var t={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",t),e.stopPropagation()},a.prototype.destroy=function(){var e=this,t=this.getWrapper();u.prototype.destroy.call(this),this.wrapper&&(t=this.wrapper,this.disabled||this.unWireEvents(),this.tagName==="INPUT"?(this.getWrapper()&&t.parentNode&&t.parentNode.insertBefore(this.element,t),G(t),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(i){e.element.removeAttribute(i)})):(["class"].forEach(function(i){t.removeAttribute(i)}),t.innerHTML="",this.element=t,this.refreshing&&(["e-control","e-checkbox","e-lib"].forEach(function(i){e.element.classList.add(i)}),Pe("ej2_instances",[this],this.element))))},a.prototype.focusHandler=function(){this.isFocused=!0},a.prototype.focusOutHandler=function(){var e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1},a.prototype.getModuleName=function(){return"checkbox"},a.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},a.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},a.prototype.getLabel=function(){return this.element?this.element.parentElement:null},a.prototype.initialize=function(){h(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.element.setAttribute("tabindex","0"),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&typeof this.value=="boolean"&&this.value===!0&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check",!0),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},a.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(ha)||(e=this.createElement("div",{className:ha}),this.element.parentNode&&this.element.parentNode.insertBefore(e,this.element));var t=this.createElement("label",{attrs:{for:this.htmlAttributes.id?this.htmlAttributes.id:this.element.id}}),i=this.createElement("span",{className:"e-icons "+Hi});e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(oa),this.cssClass&&E([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),e.appendChild(t),t.appendChild(this.element),Vo(this,t),t.appendChild(i),this.label&&this.setText(this.label)},a.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},a.prototype.labelMouseDownHandler=function(e){this.isMouseClick=!0;var t=this.getWrapper().getElementsByClassName(la)[0];xi(e,t)},a.prototype.labelMouseLeaveHandler=function(e){var t=this.getLabel().getElementsByClassName(la)[0];if(t){for(var i=t.querySelectorAll(".e-ripple-element"),s=i.length-1;s>0;s--)t.removeChild(t.childNodes[s]);xi(e,t)}},a.prototype.labelMouseUpHandler=function(e){this.isMouseClick=!0;var t=this.getWrapper().getElementsByClassName(la)[0];if(t){for(var i=t.querySelectorAll(".e-ripple-element"),s=0;s<i.length-1;s++)t.removeChild(t.childNodes[s]);xi(e,t)}},a.prototype.onPropertyChanged=function(e,t){for(var i=this.getWrapper(),s=0,n=Object.keys(e);s<n.length;s++){var r=n[s];switch(r){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove(En),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":t.cssClass&&w([i],t.cssClass.split(/\s+/).filter(function(c){return c.length>0})),e.cssClass&&E([i],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?i.classList.add(oa):i.classList.remove(oa);break;case"label":this.setText(e.label);break;case"labelPosition":{var l=i.getElementsByClassName(ra)[0],o=i.getElementsByTagName("label")[0];G(l),e.labelPosition==="After"?o.appendChild(l):o.insertBefore(l,i.getElementsByClassName(Hi)[0]);break}case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&typeof e.value=="object")break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper();break}}},a.prototype.preRender=function(){var e=this.element;this.tagName=this.element.tagName,e=vl(this.createElement,"EJS-CHECKBOX","checkbox",e,ha,"checkbox"),this.element=e,this.element.getAttribute("type")!=="checkbox"&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=$e("e-"+this.getModuleName()))},a.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},a.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(En),e.setAttribute("aria-disabled","true")},a.prototype.setText=function(e){var t=this.getWrapper();if(t){var i=t.getElementsByClassName(ra)[0];if(i)i.innerHTML=this.enableHtmlSanitizer?yt.sanitize(e):e;else{e=this.enableHtmlSanitizer?yt.sanitize(e):e,i=this.createElement("span",{className:ra,innerHTML:e});var s=t.getElementsByTagName("label")[0];this.labelPosition==="Before"?s.insertBefore(i,t.getElementsByClassName(Hi)[0]):s.appendChild(i)}}},a.prototype.changeHandler=function(e){e.stopPropagation()},a.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},a.prototype.unWireEvents=function(){var e=this.wrapper;b.remove(e,"click",this.clickHandler),b.remove(this.element,"keyup",this.keyUpHandler),b.remove(this.element,"focus",this.focusHandler),b.remove(this.element,"focusout",this.focusOutHandler);var t=e.getElementsByTagName("label")[0];t&&(b.remove(t,"mousedown",this.labelMouseDownHandler),b.remove(t,"mouseup",this.labelMouseUpHandler),b.remove(t,"mouseleave",this.labelMouseLeaveHandler));var i=A(this.element,"form");i&&b.remove(i,"reset",this.formResetHandler),this.tagName==="EJS-CHECKBOX"&&b.remove(this.element,"change",this.changeHandler)},a.prototype.wireEvents=function(){var e=this.getWrapper();b.add(e,"click",this.clickHandler,this),b.add(this.element,"keyup",this.keyUpHandler,this),b.add(this.element,"focus",this.focusHandler,this),b.add(this.element,"focusout",this.focusOutHandler,this);var t=e.getElementsByTagName("label")[0];b.add(t,"mousedown",this.labelMouseDownHandler,this),b.add(t,"mouseup",this.labelMouseUpHandler,this),b.add(t,"mouseleave",this.labelMouseLeaveHandler,this);var i=A(this.element,"form");i&&b.add(i,"reset",this.formResetHandler,this),this.tagName==="EJS-CHECKBOX"&&b.add(this.element,"change",this.changeHandler,this)},a.prototype.updateVueArrayModel=function(e){if(this.isVue&&typeof this.value=="object"){var t=this.element.value;if(t&&this.value)if(e)for(var i=0;i<this.value.length;i++)t===this.value[i]&&(this.changeState("check"),this.setProperties({checked:!0},!0));else{var s=this.value.indexOf(t);return this.checked?s<0&&this.value.push(t):s>-1&&this.value.splice(s,1),this.value}}return this.validCheck?this.element.checked:!this.element.checked},a.prototype.updateHtmlAttributeToWrapper=function(){if(!h(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e],s=this.getWrapper();if(qo.indexOf(i)>-1)if(i==="class")E([s],this.htmlAttributes[""+i].split(" "));else if(i==="title")s.setAttribute(i,this.htmlAttributes[""+i]);else if(i==="style"){var n=this.getWrapper().getElementsByClassName(Hi)[0];n.setAttribute(i,this.htmlAttributes[""+i])}else i==="disabled"?(this.htmlAttributes[""+i]==="true"&&this.setDisabled(),this.element.setAttribute(i,this.htmlAttributes[""+i])):this.element.setAttribute(i,this.htmlAttributes[""+i]);else s.setAttribute(i,this.htmlAttributes[""+i])}},a.prototype.click=function(){this.element.click()},a.prototype.focusIn=function(){this.element.focus()},It([q()],a.prototype,"change",void 0),It([q()],a.prototype,"created",void 0),It([y(!1)],a.prototype,"checked",void 0),It([y("")],a.prototype,"cssClass",void 0),It([y(!1)],a.prototype,"disabled",void 0),It([y(!1)],a.prototype,"indeterminate",void 0),It([y("")],a.prototype,"label",void 0),It([y("After")],a.prototype,"labelPosition",void 0),It([y("")],a.prototype,"name",void 0),It([y("")],a.prototype,"value",void 0),It([y(!0)],a.prototype,"enableHtmlSanitizer",void 0),It([y({})],a.prototype,"htmlAttributes",void 0),a=It([ot],a),a}(Tt),jo=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Pt=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},ua="e-label",ca="e-ripple-container",pa="e-rtl",da="e-radio-wrapper",Uo=["title","class","style","disabled","readonly","name","value","id"],xn=function(u){jo(a,u);function a(t,i){var s=u.call(this,t,i)||this;return s.isFocused=!1,s.type="radio",s}e=a,a.prototype.changeHandler=function(t){this.checked=!0,this.dataBind();var i=this.element.getAttribute("value");i=this.isVue&&i?this.element.value:this.value;var s=typeof this.value;this.isVue&&s==="boolean"&&(i=i==="true"),this.trigger("change",{value:i,event:t}),this.isAngular&&t.stopPropagation()},a.prototype.updateChange=function(){for(var t,i,s=this.getRadioGroup(),n=0;n<s.length;n++)t=s[n],t!==this.element&&(i=ii(t,e),i.checked=!1,this.tagName==="EJS-RADIOBUTTON"&&(i.angularValue=this.value))},a.prototype.destroy=function(){var t=this,i=this.wrapper;u.prototype.destroy.call(this),i&&(this.disabled||this.unWireEvents(),this.tagName==="INPUT"?(i.parentNode&&i.parentNode.insertBefore(this.element,i),G(i),this.element.checked=!1,["name","value","disabled"].forEach(function(s){t.element.removeAttribute(s)})):(["role","aria-checked","class"].forEach(function(s){i.removeAttribute(s)}),i.innerHTML="",this.element=this.wrapper,this.refreshing&&(["e-control","e-radio","e-lib"].forEach(function(s){t.element.classList.add(s)}),Pe("ej2_instances",[this],this.element))))},a.prototype.focusHandler=function(){this.isFocused=!0},a.prototype.focusOutHandler=function(){var t=this.getLabel();t&&t.classList.remove("e-focus")},a.prototype.getModuleName=function(){return"radio"},a.prototype.getSelectedValue=function(){for(var t,i=this.getRadioGroup(),s=0,n=i.length;s<n;s++)if(t=i[s],t.checked)return t.value;return""},a.prototype.getRadioGroup=function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')},a.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},a.prototype.getWrapper=function(){return this.element.parentElement?this.element.parentElement:null},a.prototype.getLabel=function(){return this.element.nextElementSibling?this.element.nextElementSibling:null},a.prototype.initialize=function(){h(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);var t=this.element.getAttribute("value"),i=typeof this.value;this.isVue&&i==="boolean"&&(t=t==="true"),(this.isVue?this.value&&i!=="boolean"&&!t:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()},a.prototype.initWrapper=function(){var t=this.element.parentElement;t.classList.contains(da)||(t=this.createElement("div",{className:da}),this.element.parentNode&&this.element.parentNode.insertBefore(t,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}});t.appendChild(this.element),t.appendChild(i),t.classList.add("e-wrapper"),this.enableRtl&&i.classList.add(pa),this.cssClass&&E([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.label&&this.setText(this.label)},a.prototype.keyUpHandler=function(){this.isFocused&&this.getLabel().classList.add("e-focus")},a.prototype.labelMouseDownHandler=function(t){var i=this.getLabel().getElementsByClassName(ca)[0];xi(t,i)},a.prototype.labelMouseLeaveHandler=function(t){var i=this.getLabel().getElementsByClassName(ca)[0];if(i){for(var s=i.querySelectorAll(".e-ripple-element"),n=s.length-1;n>0;n--)i.removeChild(i.childNodes[n]);xi(t,i)}},a.prototype.labelMouseUpHandler=function(t){var i=this.getLabel().getElementsByClassName(ca)[0];if(i){for(var s=i.querySelectorAll(".e-ripple-element"),n=s.length-1;n>0;n--)i.removeChild(i.childNodes[n]);xi(t,i)}},a.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&Q(this.element,{checked:"true"})},a.prototype.onPropertyChanged=function(t,i){for(var s=this.getWrapper(),n=this.getLabel(),r=0,l=Object.keys(t);r<l.length;r++){var o=l[r];switch(o){case"checked":t.checked&&this.updateChange(),this.element.checked=t.checked;break;case"disabled":t.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":i.cssClass&&w([s],i.cssClass.split(/\s+/).filter(function(p){return p.length>0})),t.cssClass&&E([s],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?n.classList.add(pa):n.classList.remove(pa);break;case"label":this.setText(t.label);break;case"labelPosition":t.labelPosition==="Before"?n.classList.add("e-right"):n.classList.remove("e-right");break;case"name":this.element.setAttribute("name",t.name);break;case"value":var c=typeof this.htmlAttributes.value;if(!h(this.htmlAttributes)&&(this.htmlAttributes.value||c==="boolean"&&!this.htmlAttributes.value))break;this.element.setAttribute("value",t.value);break;case"htmlAttributes":this.updateHtmlAttribute();break}}},a.prototype.preRender=function(){var t=this.element;if(this.formElement=A(this.element,"form"),this.tagName=this.element.tagName,t=vl(this.createElement,"EJS-RADIOBUTTON","radio",t,da,"radio"),this.element=t,this.element.getAttribute("type")!=="radio"&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=$e("e-"+this.getModuleName())),this.tagName==="EJS-RADIOBUTTON"){var i=this.element.getAttribute("formcontrolname");i&&(this.setProperties({name:i},!0),this.element.setAttribute("name",i))}},a.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()},a.prototype.setDisabled=function(){this.element.disabled=!0},a.prototype.setText=function(t){var i=this.getLabel(),s=i.getElementsByClassName(ua)[0];s?s.textContent=t:(t=this.enableHtmlSanitizer?yt.sanitize(t):t,s=this.createElement("span",{className:ua,innerHTML:t}),i.appendChild(s)),this.labelPosition==="Before"?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")},a.prototype.updateHtmlAttribute=function(){if(!h(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var s=i[t],n=this.element.parentElement;Uo.indexOf(s)>-1?s==="class"?E([n],this.htmlAttributes[""+s].replace(/\s+/g," ").trim().split(" ")):s==="title"||s==="style"?n.setAttribute(s,this.htmlAttributes[""+s]):this.element.setAttribute(s,this.htmlAttributes[""+s]):n.setAttribute(s,this.htmlAttributes[""+s])}},a.prototype.unWireEvents=function(){var t=this.wrapper;b.remove(this.element,"change",this.changeHandler),b.remove(this.element,"focus",this.focusHandler),b.remove(this.element,"focusout",this.focusOutHandler),b.remove(this.element,"keyup",this.keyUpHandler);var i=t.getElementsByTagName("label")[0];i&&(b.remove(i,"mousedown",this.labelMouseDownHandler),b.remove(i,"mouseup",this.labelMouseUpHandler),b.remove(i,"mouseleave",this.labelMouseLeaveHandler)),this.formElement&&b.remove(this.formElement,"reset",this.formResetHandler)},a.prototype.wireEvents=function(){var t=this.getLabel();b.add(this.element,"change",this.changeHandler,this),b.add(this.element,"keyup",this.keyUpHandler,this),b.add(this.element,"focus",this.focusHandler,this),b.add(this.element,"focusout",this.focusOutHandler,this);var i=t.getElementsByClassName(ua)[0];i&&(b.add(i,"mousedown",this.labelMouseDownHandler,this),b.add(i,"mouseup",this.labelMouseUpHandler,this),b.add(i,"mouseleave",this.labelMouseLeaveHandler,this)),this.formElement&&b.add(this.formElement,"reset",this.formResetHandler,this)},a.prototype.click=function(){this.element.click()},a.prototype.focusIn=function(){this.element.focus()};var e;return Pt([q()],a.prototype,"change",void 0),Pt([q()],a.prototype,"created",void 0),Pt([y(!1)],a.prototype,"checked",void 0),Pt([y("")],a.prototype,"cssClass",void 0),Pt([y(!1)],a.prototype,"disabled",void 0),Pt([y("")],a.prototype,"label",void 0),Pt([y("After")],a.prototype,"labelPosition",void 0),Pt([y("")],a.prototype,"name",void 0),Pt([y("")],a.prototype,"value",void 0),Pt([y(!0)],a.prototype,"enableHtmlSanitizer",void 0),Pt([y({})],a.prototype,"htmlAttributes",void 0),a=e=Pt([ot],a),a}(Tt),Ot="",Fs="",Wi="",tt=[],Go="e-active",js="";function qi(u,a,e,t,i,s,n,r,l){!s||Ot===""?Wi!==""?(Ot=Wi+String.fromCharCode(u),Wi=""):Ot+=String.fromCharCode(u):Ot===Fs&&(Wi=String.fromCharCode(u)),r?(setTimeout(function(){Wi=""},700),setTimeout(function(){Ot=""},3e3)):setTimeout(function(){Ot=""},1e3);var o;if(Ot=Ot.toLowerCase(),js===i&&Fs===Ot&&!l){for(var c=0;c<tt.length;c++){if(tt[c].classList.contains(Go)){o=c;break}if(n&&tt[c].textContent.toLowerCase()===n.toLowerCase()){o=c;break}}return o=o+1,r?tt[o]&&tt.length-1!==o?tt[o]:tt[tt.length]:tt[o]?tt[o]:tt[0]}else{var p=a,d=Ot.length,f=void 0,v=void 0;e=e?e+1:0;var c=e;tt=[];do c===p.length&&(c=-1),c===-1?o=0:o=c,v=p[o],f=v.innerText.toLowerCase(),f.substr(0,d)===Ot&&tt.push(p[o]),c++;while(c!==e);if(Fs=Ot,js=i,r){for(var g=!1,m=0;m<tt.length;m++)if(n&&tt[m].textContent.toLowerCase()===n.toLowerCase()){o=m,g=!0;break}return n&&g&&(o=o+1),tt[o]?tt[o]:tt[0]}return tt[0]}}function wi(u,a,e,t,i,s,n,r){var l=a;t=t!=null?t:!0;var o={item:null,index:null};if(u&&u.length){var c=u.length,p=t?u.toLocaleLowerCase():u;p=Yo(p);for(var d=function(m,C){var k=C[m],T;if(a&&i){var x=k,L=s.text.split(".");i.filter(function(R){Array.prototype.slice.call(L).forEach(function(Y){(n==="object"&&!R.isHeader&&x.textContent.toString().indexOf(R[Y])!==-1&&R[s.value]!=null&&x.getAttribute("data-value")===R[s.value].toString()||n==="string"&&x.textContent.toString().indexOf(R)!==-1)&&(T=n==="object"?R[Y]:R)})})}var N=i&&T?(t?T.toString().toLocaleLowerCase():T).replace(/^\s+|\s+$/g,""):(t?k.textContent.toLocaleLowerCase():k.textContent).replace(/^\s+|\s+$/g,"");if(e==="Equal"&&N===p||e==="StartsWith"&&N.substr(0,c)===p||e==="EndsWith"&&N.substr(N.length-p.length)===p||e==="Contains"&&new RegExp(p,"g").test(N))return o.item=k,o.index=m,{value:{item:k,index:m}}},f=0,v=l;f<v.length;f++){var g=d(f,v);if(typeof g=="object")return g.value}return o}return o}function Yo(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ko(u){js===u&&(js="",Fs="",Ot="",tt=[])}var ee=function(){function u(a){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="",typeof a=="string"?this.fromTable=a:a&&a instanceof Array&&(this.lookups=a),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return Object.defineProperty(u.prototype,"moduleName",{get:function(){return"query"},enumerable:!0,configurable:!0}),u.prototype.setKey=function(a){return this.key=a,this},u.prototype.using=function(a){return this.dataManager=a,this},u.prototype.execute=function(a,e,t,i){return a=a||this.dataManager,a?a.executeQuery(this,e,t,i):B.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},u.prototype.executeLocal=function(a){return a=a||this.dataManager,a?a.executeLocal(this):B.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},u.prototype.clone=function(){var a=new u;return a.queries=this.queries.slice(0),a.key=this.key,a.isChild=this.isChild,a.dataManager=this.dataManager,a.fromTable=this.fromTable,a.params=this.params.slice(0),a.expands=this.expands.slice(0),a.sortedColumns=this.sortedColumns.slice(0),a.groupedColumns=this.groupedColumns.slice(0),a.subQuerySelector=this.subQuerySelector,a.subQuery=this.subQuery,a.fKey=this.fKey,a.isCountRequired=this.isCountRequired,a.distincts=this.distincts.slice(0),a.lazyLoad=this.lazyLoad.slice(0),a},u.prototype.from=function(a){return this.fromTable=a,this},u.prototype.addParams=function(a,e){return typeof e=="function"?this.params.push({key:a,fn:e}):this.params.push({key:a,value:e}),this},u.prototype.distinct=function(a){return typeof a=="string"?this.distincts=[].slice.call([a],0):this.distincts=a.slice(0),this},u.prototype.expand=function(a){return typeof a=="string"?this.expands=[].slice.call([a],0):this.expands=a.slice(0),this},u.prototype.where=function(a,e,t,i,s,n){e=e?e.toLowerCase():null;var r=null;return typeof a=="string"?r=new be(a,e,t,i,s,n):a instanceof be&&(r=a),this.queries.push({fn:"onWhere",e:r}),this},u.prototype.search=function(a,e,t,i,s){typeof e=="string"&&(e=[e]),(!t||t==="none")&&(t="contains");var n=B.fnOperators[t];return this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:t,searchKey:a,ignoreCase:i,ignoreAccent:s,comparer:n}}),this},u.prototype.sortBy=function(a,e,t){return this.sortByForeignKey(a,e,t)},u.prototype.sortByForeignKey=function(a,e,t,i){var s=h(i)?"ascending":i,n,r;if(typeof a=="string"&&B.endsWith(a.toLowerCase()," desc")&&(a=a.replace(/ desc$/i,""),e="descending"),(!e||typeof e=="string")&&(s=e?e.toLowerCase():"ascending",e=B.fnSort(e)),t){n=u.filterQueries(this.queries,"onSortBy");for(var l=0;l<n.length;l++)if(r=n[l].e.fieldName,typeof r=="string"){if(r===a)return this}else if(r instanceof Array){for(var o=0;o<r.length;o++)if(r[o]===a||a.toLowerCase()===r[o]+" desc")return this}}return this.queries.push({fn:"onSortBy",e:{fieldName:a,comparer:e,direction:s}}),this},u.prototype.sortByDesc=function(a){return this.sortBy(a,"descending")},u.prototype.group=function(a,e,t){return this.sortBy(a,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:a,comparer:e||null,format:t||null}}),this},u.prototype.page=function(a,e){return this.queries.push({fn:"onPage",e:{pageIndex:a,pageSize:e}}),this},u.prototype.range=function(a,e){return this.queries.push({fn:"onRange",e:{start:a,end:e}}),this},u.prototype.take=function(a){return this.queries.push({fn:"onTake",e:{nos:a}}),this},u.prototype.skip=function(a){return this.queries.push({fn:"onSkip",e:{nos:a}}),this},u.prototype.select=function(a){return typeof a=="string"&&(a=[].slice.call([a],0)),this.queries.push({fn:"onSelect",e:{fieldNames:a}}),this},u.prototype.hierarchy=function(a,e){return this.subQuerySelector=e,this.subQuery=a,this},u.prototype.foreignKey=function(a){return this.fKey=a,this},u.prototype.requiresCount=function(){return this.isCountRequired=!0,this},u.prototype.aggregate=function(a,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:a}}),this},u.filterQueries=function(a,e){return a.filter(function(t){return t.fn===e})},u.filterQueryLists=function(a,e){for(var t=a.filter(function(n){return e.indexOf(n.fn)!==-1}),i={},s=0;s<t.length;s++)i[t[s].fn]||(i[t[s].fn]=t[s].e);return i},u}(),be=function(){function u(a,e,t,i,s,n){return i===void 0&&(i=!1),this.ignoreAccent=!1,this.isComplex=!1,typeof a=="string"?(this.field=a,this.operator=e.toLowerCase(),this.value=t,this.matchCase=n,this.ignoreCase=i,this.ignoreAccent=s,this.isComplex=!1,this.comparer=B.fnOperators.processOperator(this.operator)):(a instanceof u&&t instanceof u||t instanceof Array)&&(this.isComplex=!0,this.condition=e.toLowerCase(),this.predicates=[a],this.matchCase=a.matchCase,this.ignoreCase=a.ignoreCase,this.ignoreAccent=a.ignoreAccent,t instanceof Array?[].push.apply(this.predicates,t):this.predicates.push(t)),this}return u.and=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];return u.combinePredicates([].slice.call(a,0),"and")},u.prototype.and=function(a,e,t,i,s){return u.combine(this,a,e,t,"and",i,s)},u.or=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];return u.combinePredicates([].slice.call(a,0),"or")},u.prototype.or=function(a,e,t,i,s){return u.combine(this,a,e,t,"or",i,s)},u.ornot=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];return u.combinePredicates([].slice.call(a,0),"or not")},u.prototype.ornot=function(a,e,t,i,s){return u.combine(this,a,e,t,"ornot",i,s)},u.andnot=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];return u.combinePredicates([].slice.call(a,0),"and not")},u.prototype.andnot=function(a,e,t,i,s){return u.combine(this,a,e,t,"andnot",i,s)},u.fromJson=function(a){if(a instanceof Array){for(var e=[],t=0,i=a.length;t<i;t++)e.push(this.fromJSONData(a[t]));return e}var s=a;return this.fromJSONData(s)},u.prototype.validate=function(a){var e=this.predicates?this.predicates:[],t,i;if(!this.isComplex&&this.comparer)return this.condition&&this.condition.indexOf("not")!==-1?(this.condition=this.condition.split("not")[0]===""?void 0:this.condition.split("not")[0],!this.comparer.call(this,B.getObject(this.field,a),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,B.getObject(this.field,a),this.value,this.ignoreCase,this.ignoreAccent);this.condition&&this.condition.indexOf("not")!==-1?i=this.condition.indexOf("and")!==-1:i=this.condition==="and";for(var s=0;s<e.length;s++)if(s>0&&this.condition&&this.condition.indexOf("not")!==-1&&(e[s].condition=e[s].condition?e[s].condition+"not":"not"),t=e[s].validate(a),i){if(!t)return!1}else if(t)return!0;return i},u.prototype.toJson=function(){var a,e;if(this.isComplex){a=[],e=this.predicates;for(var t=0;t<e.length;t++)a.push(e[t].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:a,matchCase:this.matchCase}},u.combinePredicates=function(a,e){if(a.length===1){if(!(a[0]instanceof Array))return a[0];a=a[0]}return new u(a[0],e,a.slice(1))},u.combine=function(a,e,t,i,s,n,r){return e instanceof u?u[s](a,e):typeof e=="string"?u[s](a,new u(e,t,i,n,r)):B.throwError("Predicate - "+s+" : invalid arguments")},u.fromJSONData=function(a){for(var e=a.predicates||[],t=e.length,i=[],s,n=0;n<t;n++)i.push(this.fromJSONData(e[n]));return a.isComplex?s=new u(i[0],a.condition,i.slice(1)):s=new u(a.field,a.operator,a.value,a.ignoreCase,a.ignoreAccent),s},u}(),An={GroupGuid:"{271bbba0-1ee7}"},B=function(){function u(){}return u.getValue=function(a,e){return typeof a=="function"?a.call(e||{}):a},u.endsWith=function(a,e){return a.slice&&a.slice(-e.length)===e},u.notEndsWith=function(a,e){return a.slice&&a.slice(-e.length)!==e},u.startsWith=function(a,e){return a.slice(0,e.length)===e},u.notStartsWith=function(a,e){return a.slice(0,e.length)!==e},u.wildCard=function(a,e){var t,i;if(e.indexOf("[")!==-1&&(e=e.split("[").join("[[]")),e.indexOf("(")!==-1&&(e=e.split("(").join("[(]")),e.indexOf(")")!==-1&&(e=e.split(")").join("[)]")),e.indexOf("\\")!==-1&&(e=e.split("\\").join("[\\\\]")),e.indexOf("*")!==-1){e.charAt(0)!=="*"&&(e="^"+e),e.charAt(e.length-1)!=="*"&&(e=e+"$"),t=e.split("*");for(var s=0;s<t.length;s++)t[s].indexOf(".")===-1?t[s]=t[s]+".*":t[s]=t[s]+"*";e=t.join("")}(e.indexOf("%3f")!==-1||e.indexOf("?")!==-1)&&(i=e.indexOf("%3f")!==-1?e.split("%3f"):e.split("?"),e=i.join("."));var n=new RegExp(e,"g");return n.test(a)},u.like=function(a,e){return e.indexOf("%")!==-1?e.charAt(0)==="%"&&e.lastIndexOf("%")<2?(e=e.substring(1,e.length),u.startsWith(u.toLowerCase(a),u.toLowerCase(e))):e.charAt(e.length-1)==="%"&&e.indexOf("%")>e.length-3?(e=e.substring(0,e.length-1),u.endsWith(u.toLowerCase(a),u.toLowerCase(e))):(e.lastIndexOf("%")!==e.indexOf("%")&&e.lastIndexOf("%")>e.indexOf("%")+1&&(e=e.substring(e.indexOf("%")+1,e.lastIndexOf("%"))),a.indexOf(e)!==-1):!1},u.fnSort=function(a){return a=a?u.toLowerCase(a):"ascending",a==="ascending"?this.fnAscending:this.fnDescending},u.fnAscending=function(a,e){return h(a)&&h(e)?0:e==null?-1:typeof a=="string"?a.localeCompare(e):a==null?1:a-e},u.fnDescending=function(a,e){return h(a)&&h(e)?0:e==null?1:typeof a=="string"?a.localeCompare(e)*-1:a==null?-1:e-a},u.extractFields=function(a,e){for(var t={},i=0;i<e.length;i++)t=this.setValue(e[i],this.getObject(e[i],a),t);return t},u.select=function(a,e){for(var t=[],i=0;i<a.length;i++)t.push(this.extractFields(a[i],e));return t},u.group=function(a,e,t,i,s,n,r){i=i||1;var l=a,o="GroupGuid";if(l.GroupGuid===An[o]){for(var c=function(T){if(h(s))l[T].items=p.group(l[T].items,e,t,l.level+1,null,n,r),l[T].count=l[T].items.length;else{var x=-1,L=s.filter(function(N){return N.key===l[T].key});x=s.indexOf(L[0]),l[T].items=p.group(l[T].items,e,t,l.level+1,s[x].items,n,r),l[T].count=s[x].count}},p=this,d=0;d<l.length;d++)c(d);return l.childLevels+=1,l}var f={},v=[];v.GroupGuid=An[o],v.level=i,v.childLevels=0,v.records=l;for(var g=function(T){var x=m.getVal(l,T,e);if(h(n)||(x=n(x,e)),!f[x]&&(f[x]={key:x,count:0,items:[],aggregates:{},field:e},v.push(f[x]),!h(s))){var L=s.filter(function(N){return N.key===f[x].key});f[x].count=L[0].count}f[x].count=h(s)?f[x].count+=1:f[x].count,(!r||r&&t.length)&&f[x].items.push(l[T])},m=this,C=0;C<l.length;C++)g(C);if(t&&t.length)for(var k=function(T){for(var x={},L=void 0,N=t,R=0;R<t.length;R++)if(L=u.aggregates[t[R].type],h(s))L&&(x[N[R].field+" - "+N[R].type]=L(v[T].items,N[R].field));else{var Y=s.filter(function(Oe){return Oe.key===v[T].key});L&&(x[N[R].field+" - "+N[R].type]=L(Y[0].items,N[R].field))}v[T].aggregates=x},C=0;C<v.length;C++)k(C);if(r&&v.length&&t.length)for(var C=0;C<v.length;C++)v[C].items=[];return l.length&&v||l},u.buildHierarchy=function(a,e,t,i,s){var n,r={},l;for(i.result&&(i=i.result),i.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),n=0;n<i.length;n++){var o=this.getObject(a,i[n]);l=r[o]||(r[o]=[]),l.push(i[n])}for(n=0;n<t.length;n++){var o=this.getObject(s||a,t[n]);t[n][e]=r[o]}},u.getFieldList=function(a,e,t){if(t===void 0&&(t=""),e==null)return this.getFieldList(a,[],t);for(var i=a,s=Object.keys(a),n=0,r=s;n<r.length;n++){var l=r[n];typeof i[l]=="object"&&!(i[l]instanceof Array)?this.getFieldList(i[l],e,t+l+"."):e.push(t+l)}return e},u.getObject=function(a,e){if(!a)return e;if(e){if(a.indexOf(".")===-1)if(h(e[a])){var t=a.charAt(0).toLowerCase()+a.slice(1),i=a.charAt(0).toUpperCase()+a.slice(1);return h(e[t])?h(e[i])?null:e[i]:e[t]}else return e[a];for(var s=e,n=a.split("."),r=0;r<n.length&&s!=null;r++){if(s=s[n[r]],s===void 0){var l=n[r].charAt(0).toUpperCase()+n[r].slice(1);s=e[l]||e[l.charAt(0).toLowerCase()+l.slice(1)]||null}e=s}return s}},u.setValue=function(a,e,t){var i=a.toString().split("."),s=t||{},n=s,r,l=i.length,o;for(r=0;r<l;r++)o=i[r],r+1===l?n[o]=e===void 0?void 0:e:h(n[o])&&(n[o]={}),n=n[o];return s},u.sort=function(a,e,t){var i=this;return a.length<=1?a:a.slice().sort(function(s,n){return t(i.getVal([s],0,e),i.getVal([n],0,e),s,n)})},u.ignoreDiacritics=function(a){if(typeof a!="string")return a;var e=a.split(""),t=e.map(function(i){return i in u.diacritics?u.diacritics[i]:i});return t.join("")},u.ignoreDiacriticsForArrays=function(a){return Array.isArray(a)?a.map(function(e){return u.ignoreDiacritics(e)}):[]},u.merge=function(a,e,t,i){for(var s=[],n;a.length>0||e.length>0;)a.length>0&&e.length>0?i?n=i(this.getVal(a,0,t),this.getVal(e,0,t),a[0],e[0])<=0?a:e:n=a[0][t]<a[0][t]?a:e:n=a.length>0?a:e,s.push(n.shift());return s},u.getVal=function(a,e,t){return t?this.getObject(t,a[e]):a[e]},u.toLowerCase=function(a){return h(a)?"":typeof a=="string"?a.toLowerCase():a instanceof Date?a.toString().toLowerCase():a.toString()},u.callAdaptorFunction=function(a,e,t,i){if(e in a){var s=a[e](t,i);h(s)||(t=s)}return t},u.getAddParams=function(a,e,t){var i={};return u.callAdaptorFunction(a,"addParams",{dm:e,query:t,params:t?t.params:[],reqParams:i}),i},u.isPlainObject=function(a){return!!a&&a.constructor===Object},u.isCors=function(){var a=null,e="XMLHttpRequest";try{a=new window[e]}catch(t){}return!!a&&"withCredentials"in a},u.getGuid=function(a){var e="0123456789abcdef",t;return(a||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(i,s){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),t=n[0]%16|0}else t=Math.random()*16|0;return e[s===19?t&3|8:t]})},u.isNull=function(a){return a==null},u.getItemFromComparer=function(a,e,t){var i,s,n,r=0,l=typeof u.getVal(a,0,e)=="string";if(a.length)for(;h(i)&&r<a.length;)i=u.getVal(a,r,e),n=a[r++];for(;r<a.length;r++)s=u.getVal(a,r,e),!h(s)&&(l&&(i=+i,s=+s),t(i,s)>0&&(i=s,n=a[r]));return n},u.distinct=function(a,e,t){t=h(t)?!1:t;var i=[],s,n={};return a.forEach(function(r,l){s=typeof a[l]=="object"?u.getVal(a,l,e):a[l],s in n||(i.push(t?a[l]:s),n[s]=1)}),i},u.processData=function(a,e){var t=this.prepareQuery(a),i=new P(e);a.requiresCounts&&t.requiresCount();var s=i.executeLocal(t),n={result:a.requiresCounts?s.result:s,count:s.count,aggregates:JSON.stringify(s.aggregates)};return a.requiresCounts?n:s},u.prepareQuery=function(a){var e=this,t=new ee;if(a.select&&t.select(a.select),a.where){var i=u.parse.parseJson(a.where);i.filter(function(n){if(h(n.condition))t.where(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent);else{var r=[];n.field?r.push(new be(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent)):r=r.concat(e.getPredicate(n.predicates)),n.condition==="or"?t.where(be.or(r)):n.condition==="and"&&t.where(be.and(r))}})}if(a.search){var s=u.parse.parseJson(a.search);s.filter(function(n){return t.search(n.key,n.fields,n.operator,n.ignoreCase,n.ignoreAccent)})}return a.aggregates&&a.aggregates.filter(function(n){return t.aggregate(n.type,n.field)}),a.sorted&&a.sorted.filter(function(n){return t.sortBy(n.name,n.direction)}),a.skip&&t.skip(a.skip),a.take&&t.take(a.take),a.group&&a.group.filter(function(n){return t.group(n)}),t},u.getPredicate=function(a){for(var e=[],t=0;t<a.length;t++){var i=a[t];if(i.field)e.push(new be(i.field,i.operator,i.value,i.ignoreCase,i.ignoreAccent));else{for(var s=[],n=this.getPredicate(i.predicates),r=0,l=Object.keys(n);r<l.length;r++){var o=l[r];s.push(n[o])}e.push(i.condition==="or"?be.or(s):be.and(s))}}return e},u.serverTimezoneOffset=null,u.timeZoneHandling=!0,u.throwError=function(a){try{throw new Error(a)}catch(e){throw e.message+"\n"+e.stack}},u.aggregates={sum:function(a,e){for(var t=0,i,s=typeof u.getVal(a,0,e)!="number",n=0;n<a.length;n++)i=u.getVal(a,n,e),!isNaN(i)&&i!==null&&(s&&(i=+i),t+=i);return t},average:function(a,e){return u.aggregates.sum(a,e)/a.length},min:function(a,e){var t;return typeof e=="function"&&(t=e,e=null),u.getObject(e,u.getItemFromComparer(a,e,t||u.fnAscending))},max:function(a,e){var t;return typeof e=="function"&&(t=e,e=null),u.getObject(e,u.getItemFromComparer(a,e,t||u.fnDescending))},truecount:function(a,e){return new P(a).executeLocal(new ee().where(e,"equal",!0,!0)).length},falsecount:function(a,e){return new P(a).executeLocal(new ee().where(e,"equal",!1,!0)).length},count:function(a,e){return a.length}},u.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},u.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},u.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},u.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},u.diacritics={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B","Ƀ":"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D","Ꝺ":"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F","Ꝼ":"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J","Ɉ":"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M","Ɱ":"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N","Ƞ":"N",Ɲ:"N","Ꞑ":"N","Ꞥ":"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O","Ꝋ":"O","Ꝍ":"O",Ƣ:"OI","Ꝏ":"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q",Ｑ:"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S",Ｓ:"S","ẞ":"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U","Ʉ":"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W","Ⱳ":"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a","ⱥ":"a",ɐ:"a","ꜳ":"aa",æ:"ae",ǽ:"ae",ǣ:"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d","ꝺ":"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e","ɇ":"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f","ꝼ":"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h","ⱨ":"h","ⱶ":"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j","ɉ":"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n","ꞑ":"n","ꞥ":"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o","ꝋ":"o","ꝍ":"o",ɵ:"o",ƣ:"oi",ȣ:"ou","ꝏ":"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q",ｑ:"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r","ɍ":"r",ɽ:"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s","ȿ":"s","ꞩ":"s","ꞅ":"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v","ꝟ":"v",ʌ:"v","ꝡ":"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w","ⱳ":"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y","ɏ":"y","ỿ":"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z","ɀ":"z","ⱬ":"z","ꝣ":"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"},u.fnOperators={equal:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacritics(e)),t?u.toLowerCase(a)===u.toLowerCase(e):a===e},notequal:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacritics(e)),!u.fnOperators.equal(a,e,t)},lessthan:function(a,e,t){return t?u.toLowerCase(a)<u.toLowerCase(e):(h(a)&&(a=void 0),a<e)},greaterthan:function(a,e,t){return t?u.toLowerCase(a)>u.toLowerCase(e):a>e},lessthanorequal:function(a,e,t){return t?u.toLowerCase(a)<=u.toLowerCase(e):(h(a)&&(a=void 0),a<=e)},greaterthanorequal:function(a,e,t){return t?u.toLowerCase(a)>=u.toLowerCase(e):(h(a)&&(a=void 0),a>=e)},contains:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacritics(e)),t?!h(a)&&!h(e)&&u.toLowerCase(a).indexOf(u.toLowerCase(e))!==-1:!h(a)&&!h(e)&&a.toString().indexOf(e)!==-1},doesnotcontain:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacritics(e)),t?!h(a)&&!h(e)&&u.toLowerCase(a).indexOf(u.toLowerCase(e))===-1:!h(a)&&!h(e)&&a.toString().indexOf(e)===-1},isnotnull:function(a){return a!=null},isnull:function(a){return a==null},startswith:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacritics(e)),t?a&&e&&u.startsWith(u.toLowerCase(a),u.toLowerCase(e)):a&&e&&u.startsWith(a,e)},doesnotstartwith:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacritics(e)),t?a&&e&&u.notStartsWith(u.toLowerCase(a),u.toLowerCase(e)):a&&e&&u.notStartsWith(a,e)},like:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacritics(e)),t?a&&e&&u.like(u.toLowerCase(a),u.toLowerCase(e)):a&&e&&u.like(a,e)},isempty:function(a){return a===void 0||a===""},isnotempty:function(a){return a!==void 0&&a!==""},wildcard:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacritics(e)),t?(a||typeof a=="boolean")&&e&&typeof a!="object"&&u.wildCard(u.toLowerCase(a),u.toLowerCase(e)):(a||typeof a=="boolean")&&e&&u.wildCard(a,e)},endswith:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacritics(e)),t?a&&e&&u.endsWith(u.toLowerCase(a),u.toLowerCase(e)):a&&e&&u.endsWith(a,e)},doesnotendwith:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacritics(e)),t?a&&e&&u.notEndsWith(u.toLowerCase(a),u.toLowerCase(e)):a&&e&&u.notEndsWith(a,e)},processSymbols:function(a){var e=u.operatorSymbols[a];if(e){var t=u.fnOperators[e];return t}return u.throwError("Query - Process Operator : Invalid operator")},processOperator:function(a){var e=u.fnOperators[a];return e||u.fnOperators.processSymbols(a)},in:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacriticsForArrays(e)),t?!h(a)&&e&&e.length>0&&e.map(function(s){return u.toLowerCase(s)}).indexOf(u.toLowerCase(a))>-1:a instanceof Date?!h(a)&&e&&e.length>0&&Array.isArray(e)&&e.some(function(s){return s instanceof Date&&s.getTime()===a.getTime()}):!h(a)&&e&&e.length>0&&e.indexOf(a)>-1},notin:function(a,e,t,i){return i&&(a=u.ignoreDiacritics(a),e=u.ignoreDiacriticsForArrays(e)),t?!h(a)&&e&&e.length>0&&e.map(function(s){return u.toLowerCase(s)}).indexOf(u.toLowerCase(a))===-1:a instanceof Date?!h(a)&&e&&e.length>0&&Array.isArray(e)&&e.every(function(s){return!(s instanceof Date)||s.getTime()!==a.getTime()}):!h(a)&&e&&e.length>0&&e.indexOf(a)===-1}},u.parse={parseJson:function(a){return typeof a=="string"&&(/^[\s]*\[|^[\s]*\{(.)+:/g.test(a)||a.indexOf('"')===-1)?a=JSON.parse(a,u.parse.jsonReviver):a instanceof Array?u.parse.iterateAndReviveArray(a):typeof a=="object"&&a!==null&&u.parse.iterateAndReviveJson(a),a},iterateAndReviveArray:function(a){for(var e=0;e<a.length;e++)typeof a[e]=="object"&&a[e]!==null?u.parse.iterateAndReviveJson(a[e]):typeof a[e]=="string"&&(!/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(a[e])||a[e].toString().indexOf('"')===-1)?a[e]=u.parse.jsonReviver("",a[e]):a[e]=u.parse.parseJson(a[e])},iterateAndReviveJson:function(a){for(var e,t=Object.keys(a),i=0,s=t;i<s.length;i++){var n=s[i];u.startsWith(n,"__")||(e=a[n],typeof e=="object"?e instanceof Array?u.parse.iterateAndReviveArray(e):e&&u.parse.iterateAndReviveJson(e):a[n]=u.parse.jsonReviver(a[n],e))}},jsonReviver:function(a,e){if(typeof e=="string"){var t=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e),i=u.timeZoneHandling?u.serverTimezoneOffset:null;if(t)return u.dateParse.toTimeZone(new Date(parseInt(t[1],10)),i,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var s=e.indexOf("Z")>-1||e.indexOf("z")>-1,n=e.split(/[^0-9.]/);if(s){if(n[5].indexOf(".")>-1){var r=n[5].split(".");n[5]=r[0],n[6]=new Date(e).getUTCMilliseconds().toString()}else n[6]="00";e=u.dateParse.toTimeZone(new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5]?n[5]:"00",10),parseInt(n[6],10)),u.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5]?n[5]:"00",10)),o=parseInt(n[6],10),c=parseInt(n[7],10);if(isNaN(o)&&isNaN(c))return l;e.indexOf("+")>-1?l.setHours(l.getHours()-o,l.getMinutes()-c):l.setHours(l.getHours()+o,l.getMinutes()+c),e=u.dateParse.toTimeZone(l,u.serverTimezoneOffset,!1)}u.serverTimezoneOffset==null&&(e=u.dateParse.addSelfOffset(e))}}return e},isJson:function(a){return typeof a[0]=="string"?a:u.parse.parseJson(a)},isGuid:function(a){var e=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i,t=e.exec(a);return t!=null},replacer:function(a,e){return u.isPlainObject(a)?u.parse.jsonReplacer(a,e):a instanceof Array?u.parse.arrayReplacer(a):a instanceof Date?u.parse.jsonReplacer({val:a},e).val:a},jsonReplacer:function(a,e){for(var t,i=Object.keys(a),s=0,n=i;s<n.length;s++){var r=n[s];if(t=a[r],t instanceof Date){var l=t;u.serverTimezoneOffset==null?a[r]=u.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+u.serverTimezoneOffset*36e5),a[r]=u.dateParse.toTimeZone(u.dateParse.addSelfOffset(l),null).toJSON())}}return a},arrayReplacer:function(a){for(var e=0;e<a.length;e++)u.isPlainObject(a[e])?a[e]=u.parse.jsonReplacer(a[e]):a[e]instanceof Date&&(a[e]=u.parse.jsonReplacer({date:a[e]}).date);return a},jsonDateReplacer:function(a,e){if(a==="value"&&e){if(typeof e=="string"){var t=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e);if(t)e=u.dateParse.toTimeZone(new Date(parseInt(t[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var i=e.split(/[^0-9]/);e=u.dateParse.toTimeZone(new Date(parseInt(i[0],10),parseInt(i[1],10)-1,parseInt(i[2],10),parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10)),null,!0)}}if(e instanceof Date)return e=u.dateParse.addSelfOffset(e),u.serverTimezoneOffset===null?u.dateParse.toTimeZone(u.dateParse.addSelfOffset(e),null).toJSON():(e=u.dateParse.toTimeZone(e,e.getTimezoneOffset()/60-u.serverTimezoneOffset,!1),e.toJSON())}return e}},u.dateParse={addSelfOffset:function(a){return new Date(+a-a.getTimezoneOffset()*6e4)},toUTC:function(a){return new Date(+a+a.getTimezoneOffset()*6e4)},toTimeZone:function(a,e,t){if(e===null)return a;var i=t?u.dateParse.toUTC(a):a;return new Date(+i-e*36e5)},toLocalTime:function(a){var e=a,t=-e.getTimezoneOffset(),i=t>=0?"+":"-",s=function(r){var l=Math.floor(Math.abs(r));return(l<10?"0":"")+l},n=e.getFullYear()+"-"+s(e.getMonth()+1)+"-"+s(e.getDate())+"T"+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds())+i+s(t/60)+":"+s(t%60);return n}},u}(),Yt=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_o={GroupGuid:"{271bbba0-1ee7}"},ml=function(){function u(a){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=u,this.dataSource=a,this.pvt={}}return u.prototype.processResponse=function(a,e,t,i){return a},u}(),Us=function(u){Yt(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return a.prototype.processQuery=function(e,t){for(var i=e.dataSource.json.slice(0),s=i.length,n=!0,r,l,o={},c=0,p=[],d=[],f,v=0;v<t.lazyLoad.length;v++)c++,o[t.lazyLoad[v].key]=t.lazyLoad[v].value;var g={},m=!1;if(t.lazyLoad.length){for(var v=0;v<t.queries.length;v++)if(l=t.queries[v],l.fn==="onGroup"&&!h(l.e.format)){m=!0;break}}for(var v=0;v<t.queries.length;v++){if(l=t.queries[v],(l.fn==="onPage"||l.fn==="onGroup"||l.fn==="onSortBy"&&!m)&&t.lazyLoad.length){l.fn==="onGroup"&&p.push(l.e),l.fn==="onPage"&&(f=l.e),l.fn==="onSortBy"&&d.unshift(l.e);continue}r=this[l.fn].call(this,i,l.e,t),l.fn==="onAggregates"?g[l.e.field+" - "+l.e.type]=r:i=r!==void 0?r:i,(l.fn==="onPage"||l.fn==="onSkip"||l.fn==="onTake"||l.fn==="onRange")&&(n=!1),n&&(s=i.length)}if(c){var C={query:t,lazyLoad:o,result:i,group:p,page:f,sort:d},k=this.lazyLoadGroup(C);i=k.result,s=k.count}return t.isCountRequired&&(i={result:i,count:s,aggregates:g}),i},a.prototype.lazyLoadGroup=function(e){var t=0,i=this.getAggregate(e.query),s=e.result;if(h(e.lazyLoad.onDemandGroupInfo)){var c=e.group[0].fieldName;s=B.group(s,c,i,null,null,e.group[0].comparer,!0),t=s.length;var o=s;if(e.sort.length){var p=e.sort.length>1?e.sort.filter(function(f){return f.fieldName===c})[0]:e.sort[0];s=this.onSortBy(s,p,e.query,!0)}e.page&&(s=this.onPage(s,e.page,e.query)),this.formGroupResult(s,o)}else{for(var n=e.lazyLoad.onDemandGroupInfo,r=n.where.length-1;r>=0;r--)s=this.onWhere(s,n.where[r]);if(e.group.length!==n.level){var l=e.group[n.level].fieldName;s=B.group(s,l,i,null,null,e.group[n.level].comparer,!0),e.sort.length&&(s=this.onSortBy(s,e.sort[parseInt(n.level.toString(),10)],e.query,!0))}else for(var r=e.sort.length-1;r>=n.level;r--)s=this.onSortBy(s,e.sort[parseInt(r.toString(),10)],e.query,!1);t=s.length;var o=s;s=s.slice(n.skip),s=s.slice(0,n.take),e.group.length!==n.level&&this.formGroupResult(s,o)}return{result:s,count:t}},a.prototype.formGroupResult=function(e,t){if(e.length&&t.length){var i="GroupGuid",s="childLevels",n="level",r="records";e[i]=t[i],e[s]=t[s],e[n]=t[n],e[r]=t[r]}return e},a.prototype.getAggregate=function(e){var t=ee.filterQueries(e.queries,"onAggregates"),i=[];if(t.length)for(var s=void 0,n=0;n<t.length;n++)s=t[n].e,i.push({type:s.type,field:B.getValue(s.field,e)});return i},a.prototype.batchRequest=function(e,t,i){var s,n=t.deletedRecords.length;for(s=0;s<t.addedRecords.length;s++)this.insert(e,t.addedRecords[s]);for(s=0;s<t.changedRecords.length;s++)this.update(e,i.key,t.changedRecords[s]);for(s=0;s<n;s++)this.remove(e,i.key,t.deletedRecords[s]);return t},a.prototype.onWhere=function(e,t){return!e||!e.length?e:e.filter(function(i){if(t)return t.validate(i)})},a.prototype.onAggregates=function(e,t){var i=B.aggregates[t.type];return!e||!i||e.length===0?null:i(e,t.field)},a.prototype.onSearch=function(e,t){return!e||!e.length?e:(t.fieldNames.length===0&&B.getFieldList(e[0],t.fieldNames),e.filter(function(i){for(var s=0;s<t.fieldNames.length;s++)if(t.comparer.call(i,B.getObject(t.fieldNames[s],i),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1}))},a.prototype.onSortBy=function(e,t,i,s){if(!e||!e.length)return e;var n,r=B.getValue(t.fieldName,i);if(!r)return e.sort(t.comparer);if(r instanceof Array){r=r.slice(0);for(var l=r.length-1;l>=0;l--)r[l]&&(n=t.comparer,B.endsWith(r[l]," desc")&&(n=B.fnSort("descending"),r[l]=r[l].replace(" desc","")),e=B.sort(e,r[l],n));return e}return B.sort(e,s?"key":r,t.comparer)},a.prototype.onGroup=function(e,t,i){if(!e||!e.length)return e;var s=this.getAggregate(i);return B.group(e,B.getValue(t.fieldName,i),s,null,null,t.comparer)},a.prototype.onPage=function(e,t,i){var s=B.getValue(t.pageSize,i),n=(B.getValue(t.pageIndex,i)-1)*s,r=n+s;return!e||!e.length?e:e.slice(n,r)},a.prototype.onRange=function(e,t){return!e||!e.length?e:e.slice(B.getValue(t.start),B.getValue(t.end))},a.prototype.onTake=function(e,t){return!e||!e.length?e:e.slice(0,B.getValue(t.nos))},a.prototype.onSkip=function(e,t){return!e||!e.length?e:e.slice(B.getValue(t.nos))},a.prototype.onSelect=function(e,t){return!e||!e.length?e:B.select(e,B.getValue(t.fieldNames))},a.prototype.insert=function(e,t,i,s,n){return h(n)?e.dataSource.json.push(t):e.dataSource.json.splice(n,0,t)},a.prototype.remove=function(e,t,i,s){var n=e.dataSource.json,r;for(typeof i=="object"&&!(i instanceof Date)&&(i=B.getObject(t,i)),r=0;r<n.length&&B.getObject(t,n[r])!==i;r++);return r!==n.length?n.splice(r,1):null},a.prototype.update=function(e,t,i,s){var n=e.dataSource.json,r,l;for(h(t)||(l=I(t,i)),r=0;r<n.length&&!(!h(t)&&I(t,n[r])===l);r++);return r<n.length?Ri(n[r],i):null},a}(ml),Ai=function(u){Yt(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return a.prototype.processQuery=function(e,t,i){var s=this.getQueryRequest(t),n=ee.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=t.params,l=e.dataSource.url,o,c,p=null,d=this.options,f={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in n?(o=n.onPage,c=B.getValue(o.pageIndex,t),p=B.getValue(o.pageSize,t),c=(c-1)*p):"onRange"in n&&(o=n.onRange,c=o.start,p=o.end-o.start);for(var v=0;v<s.sorts.length;v++)o=B.getValue(s.sorts[v].e.fieldName,t),f.sorts.push(B.callAdaptorFunction(this,"onEachSort",{name:o,direction:s.sorts[v].e.direction},t));i&&(o=this.getFiltersFrom(i,t),o&&f.filters.push(B.callAdaptorFunction(this,"onEachWhere",o.toJson(),t)));for(var v=0;v<s.filters.length;v++){var g=B.callAdaptorFunction(this,"onEachWhere",s.filters[v].e.toJson(),t);this.getModuleName&&this.getModuleName()==="ODataV4Adaptor"&&!h(s.filters[v].e.key)&&s.filters.length>1&&(g="("+g+")"),f.filters.push(g);for(var m=typeof f.filters[v]=="object"?Object.keys(f.filters[v]):[],C=0,k=m;C<k.length;C++){var T=k[C];B.isNull(f[T])&&delete f[T]}}for(var v=0;v<s.searches.length;v++)o=s.searches[v].e,f.searches.push(B.callAdaptorFunction(this,"onEachSearch",{fields:o.fieldNames,operator:o.operator,key:o.searchKey,ignoreCase:o.ignoreCase,ignoreAccent:o.ignoreAccent},t));for(var v=0;v<s.groups.length;v++)f.groups.push(B.getValue(s.groups[v].e.fieldName,t));for(var v=0;v<s.aggregates.length;v++)o=s.aggregates[v].e,f.aggregates.push({type:o.type,field:B.getValue(o.field,t)});var x={};if(this.getRequestQuery(d,t,n,f,x),B.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:r,reqParams:x}),t.lazyLoad.length)for(var v=0;v<t.lazyLoad.length;v++)x[t.lazyLoad[v].key]=t.lazyLoad[v].value;for(var L=Object.keys(x),N=0,R=L;N<R.length;N++){var T=R[N];(B.isNull(x[T])||x[T]===""||x[T].length===0)&&delete x[T]}!(d.skip in x&&d.take in x)&&p!==null&&(x[d.skip]=B.callAdaptorFunction(this,"onSkip",c,t),x[d.take]=B.callAdaptorFunction(this,"onTake",p,t));var Y=this.pvt;return this.pvt={},this.options.requestType==="json"?{data:JSON.stringify(x,B.parse.jsonDateReplacer),url:l,pvtData:Y,type:"POST",contentType:"application/json; charset=utf-8"}:(o=this.convertToQueryString(x,t,e),o=(e.dataSource.url.indexOf("?")!==-1?"&":"/")+o,{type:"GET",url:o.length?l.replace(/\/*$/,o):l,pvtData:Y})},a.prototype.getRequestQuery=function(e,t,i,s,n){var r="param",l=n;l[e.from]=t.fromTable,e.apply&&t.distincts.length&&(l[e.apply]="onDistinct"in this?B.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(l[e.expand]="onExpand"in this&&"onSelect"in i?B.callAdaptorFunction(this,"onExpand",{selects:B.getValue(i.onSelect.fieldNames,t),expands:t.expands},t):t.expands),l[e.select]="onSelect"in i&&!t.distincts.length?B.callAdaptorFunction(this,"onSelect",B.getValue(i.onSelect.fieldNames,t),t):"",l[e.count]=t.isCountRequired?B.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",l[e.search]=s.searches.length?B.callAdaptorFunction(this,"onSearch",s.searches,t):"",l[e.skip]="onSkip"in i?B.callAdaptorFunction(this,"onSkip",B.getValue(i.onSkip.nos,t),t):"",l[e.take]="onTake"in i?B.callAdaptorFunction(this,"onTake",B.getValue(i.onTake.nos,t),t):"",l[e.where]=s.filters.length||s.searches.length?B.callAdaptorFunction(this,"onWhere",s.filters,t):"",l[e.sortBy]=s.sorts.length?B.callAdaptorFunction(this,"onSortBy",s.sorts,t):"",l[e.group]=s.groups.length?B.callAdaptorFunction(this,"onGroup",s.groups,t):"",l[e.aggregates]=s.aggregates.length?B.callAdaptorFunction(this,"onAggregates",s.aggregates,t):"",l[r]=[]},a.prototype.convertToQueryString=function(e,t,i){return""},a.prototype.processResponse=function(e,t,i,s,n,r){if(s&&s.headers.get("Content-Type")&&s.headers.get("Content-Type").indexOf("application/json")!==-1){var l=B.timeZoneHandling;t&&!t.timeZoneHandling&&(B.timeZoneHandling=!1),t.enableCache||(e=B.parse.parseJson(e)),B.timeZoneHandling=l}var o=n,c=o.pvtData||{},p=e?e.groupDs:[];if(s&&s.headers.get("Content-Type")&&s.headers.get("Content-Type").indexOf("xml")!==-1)return i.isCountRequired?{result:[],count:0}:[];var d=JSON.parse(o.data);if(d&&d.action==="batch"&&e&&e.addedRecords&&!h(r))return r.addedRecords=e.addedRecords,r;e&&e.d&&(e=e.d);var f={};e&&"count"in e&&(f.count=e.count),f.result=e&&e.result?e.result:e;var v=!1;if(Array.isArray(e.result)&&e.result.length){var g="key",m="value",C="level";if(h(e.result[0][g])||(f.result=this.formRemoteGroupedData(f.result,1,c.groups.length-1)),i&&i.lazyLoad.length&&c.groups.length){for(var k=0;k<i.lazyLoad.length;k++)if(i.lazyLoad[k][g]==="onDemandGroupInfo"){var T=i.lazyLoad[k][m][C];c.groups.length===T&&(v=!0)}}}return v||this.getAggregateResult(c,e,f,p,i),B.isNull(f.count)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},a.prototype.formRemoteGroupedData=function(e,t,i){for(var s=0;s<e.length;s++)e[s].items.length&&Object.keys(e[s].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[s].items,t+1,i-1);var n="GroupGuid",r="childLevels",l="level",o="records";return e[n]=_o[n],e[l]=t,e[r]=i,e[o]=e[0].items.length?this.getGroupedRecords(e,!h(e[0].items[o])):[],e},a.prototype.getGroupedRecords=function(e,t){for(var i=[],s="records",n=0;n<e.length;n++)if(t)i=i.concat(e[n].items[s]);else for(var r=0;r<e[n].items.length;r++)i.push(e[n].items[r]);return i},a.prototype.onGroup=function(e){return this.pvt.groups=e,e},a.prototype.onAggregates=function(e){this.pvt.aggregates=e},a.prototype.batchRequest=function(e,t,i,s,n){var r,l;return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(ae({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i[r],key:i[l]},B.getAddParams(this,e,s)))}},a.prototype.beforeSend=function(e,t,i){},a.prototype.insert=function(e,t,i,s){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ae({},{value:t,table:i,action:"insert"},B.getAddParams(this,e,s)))}},a.prototype.remove=function(e,t,i,s,n){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ae({},{key:i,keyColumn:t,table:s,action:"remove"},B.getAddParams(this,e,n)))}},a.prototype.update=function(e,t,i,s,n){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ae({},{value:i,action:"update",keyColumn:t,key:B.getObject(t,i),table:s},B.getAddParams(this,e,n)))}},a.prototype.getFiltersFrom=function(e,t){var i=t.fKey,s,n=i,r=t.key,l=[];typeof e[0]!="object"&&(n=null);for(var o=0;o<e.length;o++)typeof e[0]=="object"?s=B.getObject(r||n,e[o]):s=e[o],l.push(new be(i,"equal",s));return be.or(l)},a.prototype.getAggregateResult=function(e,t,i,s,n){var r=t;if(t&&t.result&&(r=t.result),e&&e.aggregates&&e.aggregates.length){var l=e.aggregates,o=void 0,c=r,p={};t.aggregate&&(c=t.aggregate);for(var d=0;d<l.length;d++)o=B.aggregates[l[d].type],o&&(p[l[d].field+" - "+l[d].type]=o(c,l[d].field));i.aggregates=p}var f="key",v=Array.isArray(t.result)&&t.result.length&&!h(t.result[0][f]);if(e&&e.groups&&e.groups.length&&!v){for(var g=e.groups,d=0;d<g.length;d++){var m=null;h(s)||(s=B.group(s,g[d]));var C=ee.filterQueries(n.queries,"onGroup")[d].e;r=B.group(r,g[d],e.aggregates,m,s,C.comparer)}i.result=r}return i},a.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=ee.filterQueries(e.queries,"onSortBy"),t.groups=ee.filterQueries(e.queries,"onGroup"),t.filters=ee.filterQueries(e.queries,"onWhere"),t.searches=ee.filterQueries(e.queries,"onSearch"),t.aggregates=ee.filterQueries(e.queries,"onAggregates"),t},a.prototype.addParams=function(e){var t=e.reqParams;e.params.length&&(t.params={});for(var i=0,s=e.params;i<s.length;i++){var n=s[i];if(t[n.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[n.key]=n.value,n.fn&&(t[n.key]=n.fn.call(e.query,n.key,e.query,e.dm)),t.params[n.key]=t[n.key]}},a}(ml),Mi=function(u){Yt(a,u);function a(e){var t=u.call(this)||this;return t.options=ae({},t.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),ae(t.options,e||{}),t}return a.prototype.getModuleName=function(){return"ODataAdaptor"},a.prototype.onPredicate=function(e,t,i){var s="",n,r,l=e.value,o=typeof l,c=e.field?a.getField(e.field):null;if(l instanceof Date&&(l="datetime'"+B.parse.replacer(l)+"'"),o==="string"&&(l=l.replace(/'/g,"''"),e.ignoreCase&&(l=l.toLowerCase()),e.operator!=="like"&&(l=encodeURIComponent(l)),e.operator!=="wildcard"&&e.operator!=="like"&&(l="'"+l+"'"),i&&(c="cast("+c+", 'Edm.String')"),B.parse.isGuid(l)&&(r="guid"),e.ignoreCase&&(r||(c="tolower("+c+")"),l=l.toLowerCase())),e.operator==="isempty"||e.operator==="isnull"||e.operator==="isnotempty"||e.operator==="isnotnull"?(n=e.operator.indexOf("isnot")!==-1?B.odBiOperator.notequal:B.odBiOperator.equal,l=e.operator==="isnull"||e.operator==="isnotnull"?null:"''"):n=B.odBiOperator[e.operator],n)return s+=c,s+=n,r&&(s+=r),s+l;if(!h(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?n=B.odv4UniOperator[e.operator]:n=B.odUniOperator[e.operator],n==="like")l=l,l.indexOf("%")!==-1&&(l.charAt(0)==="%"&&l.lastIndexOf("%")<2?(l=l.substring(1,l.length),n=!h(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?B.odv4UniOperator.startswith:B.odUniOperator.startswith):l.charAt(l.length-1)==="%"&&l.indexOf("%")>l.length-3?(l=l.substring(0,l.length-1),n=!h(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?B.odv4UniOperator.endswith:B.odUniOperator.endswith):l.lastIndexOf("%")!==l.indexOf("%")&&l.lastIndexOf("%")>l.indexOf("%")+1?(l=l.substring(l.indexOf("%")+1,l.lastIndexOf("%")),n=!h(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?B.odv4UniOperator.contains:B.odUniOperator.contains):n=!h(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?B.odv4UniOperator.contains:B.odUniOperator.contains),l=encodeURIComponent(l),l="'"+l+"'";else if(n==="wildcard")if(l=l,l.indexOf("*")!==-1){var p=l.split("*"),d=void 0,f=0;if(l.indexOf("*")!==0&&p[0].indexOf("%3f")===-1&&p[0].indexOf("?")===-1&&(d=p[0],d="'"+d+"'",n=!h(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?B.odv4UniOperator.startswith:B.odUniOperator.startswith,s+=n+"(",s+=c+",",r&&(s+=r),s+=d+")",f++),l.lastIndexOf("*")!==l.length-1&&p[p.length-1].indexOf("%3f")===-1&&p[p.length-1].indexOf("?")===-1&&(d=p[p.length-1],d="'"+d+"'",n=!h(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?B.odv4UniOperator.endswith:B.odUniOperator.endswith,f>0&&(s+=" and "),s+=n+"(",s+=c+",",r&&(s+=r),s+=d+")",f++),p.length>2){for(var v=1;v<p.length-1;v++)if(p[v].indexOf("%3f")===-1&&p[v].indexOf("?")===-1){if(d=p[v],d="'"+d+"'",n=!h(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?B.odv4UniOperator.contains:B.odUniOperator.contains,f>0&&(s+=" and "),n==="substringof"||n==="not substringof"){var g=d;d=c,c=g}s+=n+"(",s+=c+",",r&&(s+=r),s+=d+")",f++}}f===0?(n=!h(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?B.odv4UniOperator.contains:B.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'"):n="wildcard"}else n=!h(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?B.odv4UniOperator.contains:B.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'";if(n==="substringof"||n==="not substringof"){var g=l;l=c,c=g}return n!=="wildcard"&&(s+=n+"(",s+=c+",",r&&(s+=r),s+=l+")"),s},a.prototype.addParams=function(e){u.prototype.addParams.call(this,e),delete e.reqParams.params},a.prototype.onComplexPredicate=function(e,t,i){for(var s=[],n=0;n<e.predicates.length;n++)s.push("("+this.onEachWhere(e.predicates[n],t,i)+")");return s.join(" "+e.condition+" ")},a.prototype.onEachWhere=function(e,t,i){return e.isComplex?this.onComplexPredicate(e,t,i):this.onPredicate(e,t,i)},a.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},a.prototype.onEachSearch=function(e){e.fields&&e.fields.length===0&&B.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],i=0;i<e.fields.length;i++)t.push(new be(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.search=t},a.prototype.onSearch=function(e){return this.pvt.search=be.or(this.pvt.search),""},a.prototype.onEachSort=function(e){var t=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)t.push(a.getField(e.name[i])+(e.direction==="descending"?" desc":""));else t.push(a.getField(e.name)+(e.direction==="descending"?" desc":""));return t.join(",")},a.prototype.onSortBy=function(e){return e.reverse().join(",")},a.prototype.onGroup=function(e){return this.pvt.groups=e,[]},a.prototype.onSelect=function(e){for(var t=0;t<e.length;t++)e[t]=a.getField(e[t]);return e.join(",")},a.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},a.prototype.onCount=function(e){return e===!0?"allpages":""},a.prototype.beforeSend=function(e,t,i){B.endsWith(i.url,this.options.batch)&&i.type.toLowerCase()==="post"?(t.headers.set("Accept",this.options.multipartAccept),t.headers.set("DataServiceVersion","2.0")):t.headers.set("Accept",this.options.accept),t.headers.set("DataServiceVersion","2.0"),t.headers.set("MaxDataServiceVersion","2.0")},a.prototype.processResponse=function(e,t,i,s,n,r){var l="odata.metadata";if(n&&n.type==="GET"&&!this.rootUrl&&e[l]){var o=e[l].split("/$metadata#");this.rootUrl=o[0],this.resourceTableName=o[1]}var c="pvtData";if(!h(e.d)){var p=i&&i.isCountRequired?e.d.results:e.d,d="__metadata";if(!h(p))for(var f=0;f<p.length;f++)h(p[f][d])||delete p[f][d]}var v=n&&n[c],g=this.processBatchResponse(e,i,s,n,r);if(g)return g;var m=s&&n.fetchRequest.headers.get("DataServiceVersion"),C=null,k=m&&parseInt(m,10)||2;if(i&&i.isCountRequired){var T="__count";(e[T]||e["odata.count"])&&(C=e[T]||e["odata.count"]),e.d&&(e=e.d),(e[T]||e["odata.count"])&&(C=e[T]||e["odata.count"])}k===3&&e.value&&(e=e.value),e.d&&(e=e.d),k<3&&e.results&&(e=e.results);var x={};return x.count=C,x.result=e,this.getAggregateResult(v,e,x,null,i),B.isNull(C)?x.result:{result:x.result,count:x.count,aggregates:x.aggregates}},a.prototype.convertToQueryString=function(e,t,i){var s=[],n="table",r=e[n]||"",l="$format";delete e[n],i.dataSource.requiresFormat&&(e[l]="json");for(var o=Object.keys(e),c=0,p=o;c<p.length;c++){var d=p[c];s.push(d+"="+e[d])}return s=s.join("&"),i.dataSource.url&&i.dataSource.url.indexOf("?")!==-1&&!r?s:s.length?r+"?"+s:r||""},a.prototype.localTimeReplacer=function(e,t){for(var i=0,s=h(t)?[]:Object.keys(t);i<s.length;i++){var n=s[i];t[n]instanceof Date&&(t[n]=B.dateParse.toLocalTime(t[n]))}return t},a.prototype.insert=function(e,t,i){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}},a.prototype.remove=function(e,t,i,s){var n;return typeof i=="string"&&!B.parse.isGuid(i)?n="('"+i+"')":n="("+i+")",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+n}},a.prototype.update=function(e,t,i,s,n,r){this.options.updateType==="PATCH"&&!h(r)&&(i=this.compareAndRemove(i,r,t));var l;return typeof i[t]=="string"&&!B.parse.isGuid(i[t])?l="('"+i[t]+"')":l="("+i[t]+")",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+l,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},a.prototype.batchRequest=function(e,t,i,s,n){var r=i.guid=B.getGuid(this.options.batchPre),l=e.dataSource.batchUrl||this.rootUrl?(e.dataSource.batchUrl||this.rootUrl)+"/"+this.options.batch:(e.dataSource.batchUrl||e.dataSource.url).replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;var o={url:i.url,key:i.key,cid:1,cSet:B.getGuid(this.options.changeSet)},c="--"+r+"\n";return c+="Content-Type: multipart/mixed; boundary="+o.cSet.replace("--","")+"\n",this.pvt.changeSet=0,c+=this.generateInsertRequest(t.addedRecords,o,e),c+=this.generateUpdateRequest(t.changedRecords,o,e,n?n.changedRecords:[]),c+=this.generateDeleteRequest(t.deletedRecords,o,e),c+=o.cSet+"--\n",c+="--"+r+"--",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+r,data:c}},a.prototype.generateDeleteRequest=function(e,t,i){if(!e)return"";var s="",n={method:"DELETE ",url:function(r,l,o){var c=B.getObject(o,r[l]);if(typeof c=="number"||B.parse.isGuid(c))return"("+c+")";if(c instanceof Date){var p=r[l][o];return"("+p.toJSON()+")"}else return"('"+c+"')"},data:function(r,l){return""}};return s=this.generateBodyContent(e,t,n,i),s+"\n"},a.prototype.generateInsertRequest=function(e,t,i){if(!e)return"";var s="",n={method:"POST ",url:function(r,l,o){return""},data:function(r,l){return JSON.stringify(r[l])+"\n\n"}};return s=this.generateBodyContent(e,t,n,i),s},a.prototype.generateUpdateRequest=function(e,t,i,s){var n=this;if(!e)return"";var r="";e.forEach(function(o){return o=n.compareAndRemove(o,s.filter(function(c){return B.getObject(t.key,c)===B.getObject(t.key,o)})[0],t.key)});var l={method:this.options.updateType+" ",url:function(o,c,p){if(typeof o[c][p]=="number"||B.parse.isGuid(o[c][p]))return"("+o[c][p]+")";if(o[c][p]instanceof Date){var d=o[c][p];return"("+d.toJSON()+")"}else return"('"+o[c][p]+"')"},data:function(o,c){return JSON.stringify(o[c])+"\n\n"}};return r=this.generateBodyContent(e,t,l,i),r},a.getField=function(e){return e.replace(/\./g,"/")},a.prototype.generateBodyContent=function(e,t,i,s){for(var n="",r=0;r<e.length;r++)n+="\n"+t.cSet+"\n",n+=this.options.changeSetContent+"\n\n",n+=i.method,i.method==="POST "?n+=(s.dataSource.insertUrl||s.dataSource.crudUrl||t.url)+i.url(e,r,t.key)+" HTTP/1.1\n":i.method==="PUT "||i.method==="PATCH "?n+=(s.dataSource.updateUrl||s.dataSource.crudUrl||t.url)+i.url(e,r,t.key)+" HTTP/1.1\n":i.method==="DELETE "&&(n+=(s.dataSource.removeUrl||s.dataSource.crudUrl||t.url)+i.url(e,r,t.key)+" HTTP/1.1\n"),n+="Accept: "+this.options.accept+"\n",n+="Content-Id: "+this.pvt.changeSet+++"\n",n+=this.options.batchChangeSetContentType+"\n",h(e[r]["@odata.etag"])?n+="\n":(n+="If-Match: "+e[r]["@odata.etag"]+"\n\n",delete e[r]["@odata.etag"]),n+=i.data(e,r);return n},a.prototype.processBatchResponse=function(e,t,i,s,n){if(i&&i.headers.get("Content-Type")&&i.headers.get("Content-Type").indexOf("xml")!==-1)return t.isCountRequired?{result:[],count:0}:[];if(s&&this.options.batch&&B.endsWith(s.url,this.options.batch)&&s.type.toLowerCase()==="post"){var r=i.headers.get("Content-Type"),l=void 0,o=void 0,c=e+"";if(r=r.substring(r.indexOf("=batchresponse")+1),c=c.split(r),c.length<2)return{};c=c[1];var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(c);p&&c.replace(p[0],"");var d=p?p[1]:"";c=c.split(d);for(var f=c.length;f>-1;f--)!/\bContent-ID:/i.test(c[f])||!/\bHTTP.+201/.test(c[f])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(c[f])[1],10),n.addedRecords[l]&&(o=B.parse.parseJson(/^\{.+\}/m.exec(c[f])[0]),ae({},n.addedRecords[l],this.processResponse(o))));return n}return null},a.prototype.compareAndRemove=function(e,t,i){var s=this;return h(t)||Object.keys(e).forEach(function(n){if(n!==i&&n!=="@odata.etag")if(B.isPlainObject(e[n])){s.compareAndRemove(e[n],t[n]);var r=Object.keys(e[n]).filter(function(l){return l!=="@odata.etag"});r.length===0&&delete e[n]}else(e[n]===t[n]||e[n]&&t[n]&&e[n].valueOf()===t[n].valueOf())&&delete e[n]}),e},a}(Ai);(function(u){Yt(a,u);function a(e){var t=u.call(this,e)||this;return t.options=ae({},t.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),ae(t.options,e||{}),t}return a.prototype.getModuleName=function(){return"ODataV4Adaptor"},a.prototype.onCount=function(e){return e===!0?"true":""},a.prototype.onPredicate=function(e,t,i){var s="",n=e.value,r=n instanceof Date;if(t instanceof ee)for(var l=this.getQueryRequest(t),o=0;o<l.filters.length;o++)l.filters[o].e.key===e.value&&(i=!0);return s=u.prototype.onPredicate.call(this,e,t,i),r&&(s=s.replace(/datetime'(.*)'$/,"$1")),B.parse.isGuid(n)&&(s=s.replace("guid","").replace(/'/g,"")),s},a.prototype.onEachSearch=function(e){var t=this.pvt.searches||[];t.push(e.key),this.pvt.searches=t},a.prototype.onSearch=function(e){return this.pvt.searches.join(" OR ")},a.prototype.onExpand=function(e){var t=this,i={},s={},n=e.expands.slice(),r=[],l=e.selects.filter(function(o){return o.indexOf(".")>-1});return l.forEach(function(o){var c=o.split(".");if(c[0]in i||(i[c[0]]=[]),c.length===2)i[c[0]].length&&Object.keys(i).indexOf(c[0])!==-1?i[c[0]][0].indexOf("$expand")!==-1&&i[c[0]][0].indexOf(";$select=")===-1?i[c[0]][0]=i[c[0]][0]+";$select="+c[1]:i[c[0]][0]=i[c[0]][0]+","+c[1]:i[c[0]].push("$select="+c[1]);else{for(var p="$select="+c[c.length-1],d="",f="",v=1;v<c.length-1;v++)d=d+"$expand="+c[v]+"(",f=f+")";var g=d+p+f;if(i[c[0]].length&&Object.keys(i).indexOf(c[0])!==-1&&t.expandQueryIndex(i[c[0]],!0)){var m=t.expandQueryIndex(i[c[0]]);i[c[0]][m]=i[c[0]][m]+g.replace("$expand=",",")}else i[c[0]].push(g)}}),Object.keys(i).forEach(function(o){n.indexOf(o)===-1&&n.push(o)}),n.forEach(function(o){s[o]=o in i?o+"("+i[o].join(";")+")":o}),Object.keys(s).forEach(function(o){return r.push(s[o])}),r.join(",")},a.prototype.expandQueryIndex=function(e,t){for(var i=0;i<e.length;i++)if(e[i].indexOf("$expand")!==-1)return t?!0:i;return t?!1:0},a.prototype.onDistinct=function(e){var t=e.map(function(i){return Mi.getField(i)}).join(",");return"groupby(("+t+"))"},a.prototype.onSelect=function(e){return u.prototype.onSelect.call(this,e.filter(function(t){return t.indexOf(".")===-1}))},a.prototype.beforeSend=function(e,t,i){(i.type==="POST"||i.type==="PUT"||i.type==="PATCH")&&t.headers.set("Prefer","return=representation"),t.headers.set("Accept",this.options.accept)},a.prototype.processResponse=function(e,t,i,s,n,r){var l="@odata.context",o="@context";if(n&&n.type==="GET"&&!this.rootUrl&&(e[l]||e[o])){var c=e[l]?e[l].split("/$metadata#"):e[o].split("/$metadata#");this.rootUrl=c[0],this.resourceTableName=c[1]}var p="pvtData",d=n&&n[p],f=u.prototype.processBatchResponse.call(this,e,i,s,n,r);if(f)return f;var v=null,g="@odata.count",m="@count";i&&i.isCountRequired&&(g in e?v=e[g]:m in e&&(v=e[m])),e=h(e.value)?e:e.value;var C={};return C.count=v,C.result=e,this.getAggregateResult(d,e,C,null,i),B.isNull(v)?C.result:{result:C.result,count:v,aggregates:C.aggregates}},a})(Mi);(function(u){Yt(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return a.prototype.getModuleName=function(){return"WebApiAdaptor"},a.prototype.insert=function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},a.prototype.remove=function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},a.prototype.update=function(e,t,i,s){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},a.prototype.batchRequest=function(e,t,i){var s=this,n=i.guid=B.getGuid(this.options.batchPre),r=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;for(var l=[],o=function(v,g){t.addedRecords.forEach(function(m,C){var k={method:"POST ",url:function(T,x,L){return""},data:function(T,x){return JSON.stringify(T[x])+"\n\n"}};l.push("--"+n),l.push("Content-Type: application/http; msgtype=request",""),l.push("POST /api/"+(e.dataSource.insertUrl||e.dataSource.crudUrl||i.url)+k.url(t.addedRecords,v,i.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",m?JSON.stringify(m):"")})},c=0,p=t.addedRecords.length;c<p;c++)o(c);for(var d=function(v,g){t.changedRecords.forEach(function(m,C){var k={method:s.options.updateType+" ",url:function(T,x,L){return""},data:function(T,x){return JSON.stringify(T[x])+"\n\n"}};l.push("--"+n),l.push("Content-Type: application/http; msgtype=request",""),l.push("PUT /api/"+(e.dataSource.updateUrl||e.dataSource.crudUrl||i.url)+k.url(t.changedRecords,v,i.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",m?JSON.stringify(m):"")})},c=0,p=t.changedRecords.length;c<p;c++)d(c);for(var f=function(v,g){t.deletedRecords.forEach(function(m,C){var k={mtd:"DELETE ",url:function(T,x,L){var N=B.getObject(L,T[x]);if(typeof N=="number"||B.parse.isGuid(N))return"/"+N;if(N instanceof Date){var R=T[x][L];return"/"+R.toJSON()}else return"/'"+N+"'"},data:function(T,x){return""}};l.push("--"+n),l.push("Content-Type: application/http; msgtype=request",""),l.push("DELETE /api/"+(e.dataSource.removeUrl||e.dataSource.crudUrl||i.url)+k.url(t.deletedRecords,v,i.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",m?JSON.stringify(m):"")})},c=0,p=t.deletedRecords.length;c<p;c++)f(c);return l.push("--"+n+"--",""),{type:"POST",url:r,contentType:"multipart/mixed; boundary="+n,data:l.join("\r\n")}},a.prototype.beforeSend=function(e,t,i){t.headers.set("Accept","application/json, text/javascript, */*; q=0.01")},a.prototype.processResponse=function(e,t,i,s,n,r){var l="pvtData",o=n&&n[l],c=null,p={};if(n&&n.type.toLowerCase()!=="post"){var d=s&&n.fetchRequest.headers.get("DataServiceVersion"),f=d&&parseInt(d,10)||2;i&&i.isCountRequired&&(B.isNull(e.Count)||(c=e.Count)),f<3&&e.Items&&(e=e.Items),p.count=c,p.result=e,this.getAggregateResult(o,e,p,null,i)}return p.result=p.result||e,B.isNull(c)?p.result:{result:p.result,count:p.count,aggregates:p.aggregates}},a})(Mi);(function(u){Yt(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return a.prototype.processQuery=function(e,t,i){var s=new Ai().processQuery(e,t,i),n="data",r=B.parse.parseJson(s[n]),l={},o="value";if(r.param)for(var c=0;c<r.param.length;c++){var p=r.param[c],d=Object.keys(p)[0];l[d]=p[d]}l[o]=r;var f="pvtData",v="url";return{data:JSON.stringify(l,B.parse.jsonDateReplacer),url:s[v],pvtData:s[f],type:"POST",contentType:"application/json; charset=utf-8"}},a})(Ai);var $o=function(u){Yt(a,u);function a(){return u.call(this)||this}return a.prototype.insert=function(e,t,i,s,n){return this.pvt.position=n,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ae({},{value:t,table:i,action:"insert"},B.getAddParams(this,e,s)))}},a.prototype.remove=function(e,t,i,s,n){return u.prototype.remove.call(this,e,t,i),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ae({},{key:i,keyColumn:t,table:s,action:"remove"},B.getAddParams(this,e,n)))}},a.prototype.update=function(e,t,i,s,n){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ae({},{value:i,action:"update",keyColumn:t,key:i[t],table:s},B.getAddParams(this,e,n)))}},a.prototype.processResponse=function(e,t,i,s,n,r,l){var o,c=n?JSON.parse(n.data):e;if(e=c.action==="batch"?B.parse.parseJson(e):e,this.updateType==="add"&&u.prototype.insert.call(this,t,e,null,null,this.pvt.position),this.updateType==="update"&&u.prototype.update.call(this,t,this.updateKey,e),this.updateType=void 0,e.added)for(o=0;o<e.added.length;o++)u.prototype.insert.call(this,t,e.added[o]);if(e.changed)for(o=0;o<e.changed.length;o++)u.prototype.update.call(this,t,l.key,e.changed[o]);if(e.deleted)for(o=0;o<e.deleted.length;o++)u.prototype.remove.call(this,t,l.key,e.deleted[o]);return e},a.prototype.batchRequest=function(e,t,i,s,n){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(ae({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i.url,key:i.key},B.getAddParams(this,e,s)))}},a.prototype.addParams=function(e){var t=new Ai;t.addParams(e)},a.prototype.beforeSend=function(e,t,i){},a}(Us),Xo=function(u){Yt(a,u);function a(e){var t=u.call(this)||this;return t.options=ae({},t.options,{getData:function(){},addRecord:function(){},updateRecord:function(){},deleteRecord:function(){},batchUpdate:function(){}}),ae(t.options,e||{}),t}return a.prototype.getModuleName=function(){return"CustomDataAdaptor"},a}(Ai);(function(u){Yt(a,u);function a(e){var t=u.call(this)||this;return t.opt=e,t.schema=t.opt.response,t.query=t.opt.query,t.getVariables=t.opt.getVariables?t.opt.getVariables:function(){},t.getQuery=function(){return t.query},t}return a.prototype.getModuleName=function(){return"GraphQLAdaptor"},a.prototype.processQuery=function(e,t){var i=u.prototype.processQuery.apply(this,arguments),s=JSON.parse(i.data),n=["skip","take","sorted","table","select","where","search","requiresCounts","aggregates","params"],r={},l="searchwhereparams";n.filter(function(p){r[p]=l.indexOf(p)>-1?JSON.stringify(s[p]):s[p]});var o=this.getVariables()||{};o.datamanager=r;var c=JSON.stringify({query:this.getQuery(),variables:o});return i.data=c,i},a.prototype.processResponse=function(e,t,i,s,n){var r=e,l,o,c=I(this.schema.result,r.data);this.schema.count&&(l=I(this.schema.count,r.data)),this.schema.aggregates&&(o=I(this.schema.aggregates,r.data),o=h(o)?o:B.parse.parseJson(o));var p=n.pvtData||{},d={result:c,aggregates:o},f=d;return p&&p.groups&&p.groups.length&&this.getAggregateResult(p,f,d,null,i),h(l)?d.result:{result:d.result,count:l,aggregates:o}},a.prototype.insert=function(){var e=u.prototype.insert.apply(this,arguments);return this.generateCrudData(e,"insert")},a.prototype.update=function(){var e=u.prototype.update.apply(this,arguments);return this.generateCrudData(e,"update")},a.prototype.remove=function(){var e=u.prototype.remove.apply(this,arguments);return this.generateCrudData(e,"remove")},a.prototype.batchRequest=function(e,t,i,s,n){var r=u.prototype.batchRequest.apply(this,arguments),l=JSON.parse(r.data);return l.key=i.key,r.data=JSON.stringify(l),this.generateCrudData(r,"batch")},a.prototype.generateCrudData=function(e,t){var i=JSON.parse(e.data);return e.data=JSON.stringify({query:this.opt.getMutation(t),variables:i}),e},a})(Ai);var Jo=function(u){Yt(a,u);function a(e,t,i){var s=u.call(this)||this;s.isCrudAction=!1,s.isInsertAction=!1,h(e)||(s.cacheAdaptor=e),s.pageSize=i,s.guidId=B.getGuid("cacheAdaptor");var n={keys:[],results:[]};window.localStorage.setItem(s.guidId,JSON.stringify(n));var r=s.guidId;return h(t)||setInterval(function(){for(var l=B.parse.parseJson(window.localStorage.getItem(r)),o=[],c=0;c<l.results.length;c++){var p=+new Date,d=+new Date(l.results[c].timeStamp);l.results[c].timeStamp=p-d,p-d>t&&o.push(c)}for(var c=0;c<o.length;c++)l.results.splice(o[c],1),l.keys.splice(o[c],1);window.localStorage.removeItem(r),window.localStorage.setItem(r,JSON.stringify(l))},t),s}return a.prototype.generateKey=function(e,t){var i=this.getQueryRequest(t),s=ee.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),n=e,r="onPage";r in s&&(n+=s[r].pageIndex),i.sorts.forEach(function(d){n+=d.e.direction+d.e.fieldName}),i.groups.forEach(function(d){n+=d.e.fieldName}),i.searches.forEach(function(d){n+=d.e.searchKey});for(var l=0;l<i.filters.length;l++){var o=i.filters[l];if(o.e.isComplex){var c=t.clone();c.queries=[];for(var p=0;p<o.e.predicates.length;p++)c.queries.push({fn:"onWhere",e:o.e.predicates[p],filter:t.queries.filter});n+=o.e.condition+this.generateKey(e,c)}else n+=o.e.field+o.e.operator+o.e.value}return n},a.prototype.processQuery=function(e,t,i){var s=this.generateKey(e.dataSource.url,t),n=B.parse.parseJson(window.localStorage.getItem(this.guidId)),r=n?n.results[n.keys.indexOf(s)]:null;return r!=null&&!this.isCrudAction&&!this.isInsertAction?r:(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0)))},a.prototype.processResponse=function(e,t,i,s,n,r){if(this.isInsertAction||n&&this.cacheAdaptor.options.batch&&B.endsWith(n.url,this.cacheAdaptor.options.batch)&&n.type.toLowerCase()==="post")return this.cacheAdaptor.processResponse(e,t,i,s,n,r);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=i?this.generateKey(t.dataSource.url,i):t.dataSource.url,o={};o=B.parse.parseJson(window.localStorage.getItem(this.guidId));var c=o.keys.indexOf(l);for(c!==-1&&(o.results.splice(c,1),o.keys.splice(c,1)),o.results[o.keys.push(l)-1]={keys:l,result:e.result,timeStamp:new Date,count:e.count};o.results.length>this.pageSize;)o.results.splice(0,1),o.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(o)),e},a.prototype.beforeSend=function(e,t,i){!h(this.cacheAdaptor.options.batch)&&B.endsWith(i.url,this.cacheAdaptor.options.batch)&&i.type.toLowerCase()==="post"&&t.headers.set("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.headers.set("Accept",this.cacheAdaptor.options.accept)},a.prototype.update=function(e,t,i,s){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,i,s)},a.prototype.insert=function(e,t,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,i)},a.prototype.remove=function(e,t,i,s){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},a.prototype.batchRequest=function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)},a}(Ai),cs=function(u,a,e,t){return new(e||(e=Promise))(function(i,s){function n(o){try{l(t.next(o))}catch(c){s(c)}}function r(o){try{l(t.throw(o))}catch(c){s(c)}}function l(o){o.done?i(o.value):new e(function(c){c(o.value)}).then(n,r)}l((t=t.apply(u,a||[])).next())})},ps=function(u,a){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,i,s,n;return n={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function r(o){return function(c){return l([o,c])}}function l(o){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,i&&(s=o[0]&2?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,i=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){e.label=o[1];break}if(o[0]===6&&e.label<s[1]){e.label=s[1],s=o;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(o);break}s[2]&&e.ops.pop(),e.trys.pop();continue}o=a.call(u,e)}catch(c){o=[6,c],i=0}finally{t=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},P=function(){function u(a,e,t){var i=this;this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isEnableCache=!1,this.isInitialLoad=!0,this.isEnableCache=!1,!a&&!this.dataSource&&(a=[]),t=t||a.adaptor,a&&a.timeZoneHandling===!1&&(this.timeZoneHandling=a.timeZoneHandling);var s;if(a instanceof Array?s={json:a,offline:!0}:typeof a=="object"?(a.json||(a.json=[]),a.enablePersistence||(a.enablePersistence=!1),a.id||(a.id=""),a.ignoreOnPersist||(a.ignoreOnPersist=[]),s={url:a.url,insertUrl:a.insertUrl,removeUrl:a.removeUrl,updateUrl:a.updateUrl,crudUrl:a.crudUrl,batchUrl:a.batchUrl,json:a.json,headers:a.headers,accept:a.accept,data:a.data,enableCache:a.enableCache,timeTillExpiration:a.timeTillExpiration,cachingPageSize:a.cachingPageSize,enableCaching:a.enableCaching,requestType:a.requestType,key:a.key,crossDomain:a.crossDomain,jsonp:a.jsonp,dataType:a.dataType,offline:a.offline!==void 0?a.offline:a.adaptor instanceof $o||a.adaptor instanceof Xo?!1:!a.url,requiresFormat:a.requiresFormat,enablePersistence:a.enablePersistence,id:a.id,ignoreOnPersist:a.ignoreOnPersist}):B.throwError("DataManager: Invalid arguments"),s.requiresFormat===void 0&&!B.isCors()&&(s.requiresFormat=h(s.crossDomain)?!0:s.crossDomain),s.dataType===void 0&&(s.dataType="json"),this.isEnableCache=s.enableCache,this.dataSource=s,this.defaultQuery=e,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=t||new Mi,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new ee),this.ready.then(function(r){i.dataSource.offline=!0,i.isDataAvailable=!0,s.json=r.result,i.adaptor=new Us})):this.adaptor=s.offline?new Us:new Mi,!s.jsonp&&this.adaptor instanceof Mi&&(s.jsonp="callback"),this.adaptor=t||this.adaptor,this.isEnableCache){this.guidId=B.getGuid("cacheAdaptor");var n={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(n))}return s.enableCaching&&(this.adaptor=new Jo(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this}return Object.defineProperty(u.prototype,"moduleName",{get:function(){return"datamanager"},enumerable:!0,configurable:!0}),u.prototype.getPersistedData=function(a){var e=localStorage.getItem(a||this.dataSource.id);return JSON.parse(e)},u.prototype.setPersistData=function(a,e,t){localStorage.setItem(e||this.dataSource.id,JSON.stringify(t||this.persistQuery))},u.prototype.setPersistQuery=function(a){var e=this,t=this.getPersistedData();if(this.isInitialLoad&&t&&Object.keys(t).length){this.persistQuery=t,this.persistQuery.queries=this.persistQuery.queries.filter(function(s){if(e.dataSource.ignoreOnPersist&&e.dataSource.ignoreOnPersist.length&&s.fn&&e.dataSource.ignoreOnPersist.some(function(l){return s.fn===l}))return!1;if(s.fn==="onWhere"){var n=s.e;if(n&&n.isComplex&&n.predicates instanceof Array){var r=n.predicates.map(function(l){if(l.predicates&&l.predicates instanceof Array){var o=l.predicates.map(function(m){var C=m.field,k=m.operator,T=m.value,x=m.ignoreCase,L=m.ignoreAccent,N=m.matchCase;return new be(C,k,T,x,L,N)});return l.condition==="and"?be.and(o):be.or(o)}else{var c=l.field,p=l.operator,d=l.value,f=l.ignoreCase,v=l.ignoreAccent,g=l.matchCase;return new be(c,p,d,f,v,g)}});s.e=new be(r[0],n.condition,r.slice(1))}}return!0});var i=ae(new ee,this.persistQuery);return this.isInitialLoad=!1,i}else return this.persistQuery=a,this.isInitialLoad=!1,a},u.prototype.setDefaultQuery=function(a){return this.defaultQuery=a,this},u.prototype.executeLocal=function(a){!this.defaultQuery&&!(a instanceof ee)&&B.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||B.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(a=this.setPersistQuery(a)),a=a||this.defaultQuery;var e=this.adaptor.processQuery(this,a);if(a.subQuery){var t=a.subQuery.fromTable,i=a.subQuery.lookups,s=a.isCountRequired?e.result:e;i&&i instanceof Array&&B.buildHierarchy(a.subQuery.fKey,t,s,i,a.subQuery.key);for(var n=0;n<s.length;n++)s[n][t]instanceof Array&&(s[n]=ae({},{},s[n]),s[n][t]=this.adaptor.processResponse(a.subQuery.using(new u(s[n][t].slice(0))).executeLocal(),this,a))}return this.adaptor.processResponse(e,this,a)},u.prototype.executeQuery=function(a,e,t,i){var s=this,n="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(a=this.setPersistQuery(a)),typeof a=="function"&&(i=t,t=e,e=a,a=null),a||(a=this.defaultQuery),a instanceof ee||B.throwError("DataManager - executeQuery() : A query is required to execute");var r=new si,l={query:a};if(!this.dataSource.offline&&this.dataSource.url!==void 0&&this.dataSource.url!==""||!h(this.adaptor[n])||this.isCustomDataAdaptor(this.adaptor)){var o=this.isEnableCache?this.processQuery(a):this.adaptor.processQuery(this,a);h(this.adaptor[n])?!h(o.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(o,r,l,a)):(l=u.getDeferedArgs(a,o,l),r.resolve(l)):this.adaptor[n](o,r,l,a)}else u.nextTick(function(){var c=s.executeLocal(a);l=u.getDeferedArgs(a,c,l),r.resolve(l)});return(e||t)&&r.promise.then(e,t),i&&r.promise.then(i,i),r.promise},u.prototype.getQueryRequest=function(a){var e={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return e.sorts=ee.filterQueries(a.queries,"onSortBy"),e.groups=ee.filterQueries(a.queries,"onGroup"),e.filters=ee.filterQueries(a.queries,"onWhere"),e.searches=ee.filterQueries(a.queries,"onSearch"),e.aggregates=ee.filterQueries(a.queries,"onAggregates"),e},u.prototype.generateKey=function(a,e){var t=this.getQueryRequest(e),i=ee.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=a,n="onPage";t.sorts.forEach(function(d){s+=d.e.direction+d.e.fieldName}),t.groups.forEach(function(d){s+=d.e.fieldName}),t.searches.forEach(function(d){s+=d.e.searchKey});for(var r=0;r<t.filters.length;r++){var l=t.filters[r];if(l.e.isComplex){var o=e.clone();o.queries=[];for(var c=0;c<l.e.predicates.length;c++)o.queries.push({fn:"onWhere",e:l.e.predicates[c],filter:e.queries.filter});s+=l.e.condition+this.generateKey(a,o)}else s+=l.e.field+l.e.operator+l.e.value}if(!h(this.previousCacheQuery)&&this.previousCacheQuery!==s){var p={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(p))}return this.previousCacheQuery=s,n in i&&(s+=i[n].pageIndex),s},u.prototype.processQuery=function(a){var e=this.generateKey(this.dataSource.url,a),t=JSON.parse(window.localStorage.getItem(this.guidId)),i=t?t.results[t.keys.indexOf(e)]:null;return i!=null?B.parse.parseJson(i):this.adaptor.processQuery(this,a)},u.getDeferedArgs=function(a,e,t){return a.isCountRequired?(t.result=e.result,t.count=e.count,t.aggregates=e.aggregates):t.result=e,t},u.nextTick=function(a){(window.setImmediate||window.setTimeout)(a,0)},u.prototype.extendRequest=function(a,e,t){return ae({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:t},a)},u.prototype.makeRequest=function(a,e,t,i){var s=this,n=!!i.subQuerySelector,r=function(m){t.error=m,e.reject(t)},l=function(m,C,k,T,x,L,N){t.xhr=k,t.count=C?parseInt(C.toString(),10):0,t.result=m,t.request=T,t.aggregates=L,t.actual=x,t.virtualSelectRecords=N,e.resolve(t)},o=function(m,C){var k=new si,T={parent:t};i.subQuery.isChild=!0;var x=s.adaptor.processQuery(s,i.subQuery,m?s.adaptor.processResponse(m):C),L=s.makeRequest(x,k,T,i.subQuery);return n||k.then(function(N){m&&(B.buildHierarchy(i.subQuery.fKey,i.subQuery.fromTable,m,N,i.subQuery.key),l(m,N.count,N.xhr))},r),L},c=function(m,C){if(s.isGraphQLAdaptor(s.adaptor)&&!h(m.errors))return r(m.errors);s.isCustomDataAdaptor(s.adaptor)&&(C=ae({},s.fetchReqOption,C)),C.contentType.indexOf("xml")===-1&&s.dateParse&&!s.isEnableCache&&(m=B.parse.parseJson(m));var k,T=s.afterReponseRequest(m);T.then(function(x){if(k=s.adaptor.processResponse(x,s,i,C.fetchRequest,C),s.isEnableCache){var L=i?s.generateKey(s.dataSource.url,i):s.dataSource.url,N={};N=JSON.parse(window.localStorage.getItem(s.guidId));var R=N.keys.indexOf(L);R!==-1&&(N.results.splice(R,1),N.keys.splice(R,1)),N.results[N.keys.push(L)-1]={keys:L,result:k.result,timeStamp:new Date,count:k.count},window.localStorage.setItem(s.guidId,JSON.stringify(N))}C.contentType.indexOf("xml")===-1&&s.dateParse&&s.isEnableCache&&(k=B.parse.parseJson(k));var Y=0,Oe=null,xe="virtualSelectRecords",H=x[xe];if(i.isCountRequired&&(Y=k.count,Oe=k.aggregates,k=k.result),!i.subQuery){l(k,Y,C.fetchRequest,C.type,x,Oe,H);return}n||o(k,C)}).catch(function(x){return s.dataManagerFailure(x,e,t)})},p=this.extendRequest(a,c,r);if(this.isCustomDataAdaptor(this.adaptor)){this.fetchReqOption=p;var v=p;this.adaptor.options.getData({data:v.data,onSuccess:v.onSuccess,onFailure:v.onFailure})}else{var d=this.useMiddleware(p),f;d.then(function(m){f=new sa(p),f.beforeSend=function(){s.beforeSend(f.fetchRequest,f,m)},p=f.send(),p.catch(function(C){return!0}),s.requests.push(f)}).catch(function(m){return s.dataManagerFailure(m,e,t)})}if(n){var d=void 0,g=i.subQuerySelector.call(this,{query:i.subQuery,parent:i});g&&g.length?(d=Promise.all([p,o(null,g)]),d.then(function(){for(var C=[],k=0;k<arguments.length;k++)C[k]=arguments[k];var T=C[0],x=s.adaptor.processResponse(T[0],s,i,s.requests[0].fetchRequest,s.requests[0]),L=0;i.isCountRequired&&(L=x.count,x=x.result);var N=s.adaptor.processResponse(T[1],s,i.subQuery,s.requests[1].fetchRequest,s.requests[1]);L=0,i.subQuery.isCountRequired&&(L=N.count,N=N.result),B.buildHierarchy(i.subQuery.fKey,i.subQuery.fromTable,x,N,i.subQuery.key),n=!1,l(x,L,s.requests[0].fetchRequest)})):n=!1}return p},u.prototype.dataManagerFailure=function(a,e,t){t.error=a,e.reject(t)},u.prototype.afterReponseRequest=function(a){return cs(this,void 0,void 0,function(){var e,t;return ps(this,function(i){switch(i.label){case 0:return[4,this.applyPostRequestMiddlewares(a)];case 1:return e=i.sent(),t=new si,t.resolve(e),[2,t.promise]}})})},u.prototype.applyPostRequestMiddlewares=function(a){return cs(this,void 0,void 0,function(){return ps(this,function(e){return[2,a]})})},u.prototype.useMiddleware=function(a){return cs(this,void 0,void 0,function(){var e,t;return ps(this,function(i){switch(i.label){case 0:return[4,this.applyPreRequestMiddlewares(a)];case 1:return e=i.sent(),t=new si,t.resolve(e),[2,t.promise]}})})},u.prototype.applyPreRequestMiddlewares=function(a){return cs(this,void 0,void 0,function(){return ps(this,function(e){return[2,a]})})},u.prototype.beforeSend=function(a,e,t){this.adaptor.beforeSend(this,a,e);var i=[];this.dataSource.headers&&(i=i.concat(this.dataSource.headers));var s;t&&t.headers&&(i=i.concat(t.headers));for(var n=0;i&&n<i.length;n++){s=[];for(var r=Object.keys(i[n]),l=0,o=r;l<o.length;l++){var c=o[l];s.push(c),a.headers.set(c,i[n][c])}}},u.prototype.saveChanges=function(a,e,t,i,s){var n=this;t instanceof ee&&(i=t,t=null);var r={url:t,key:e||this.dataSource.key},l=this.adaptor.batchRequest(this,a,r,i||new ee,s),o="dofetchRequest";if(this.dataSource.offline)return l;if(h(this.adaptor[o])){if(this.isCustomDataAdaptor(this.adaptor))return this.dofetchRequest(l,this.adaptor.options.batchUpdate,a);var c=new si,p=new sa(l);return p.beforeSend=function(){n.beforeSend(p.fetchRequest,p)},p.onSuccess=function(d,f){n.isGraphQLAdaptor(n.adaptor)&&(h(d.errors)||p.onFailure(JSON.stringify(d.errors))),c.resolve(n.adaptor.processResponse(d,n,null,f.fetchRequest,f,a,r))},p.onFailure=function(d){c.reject([{error:d}])},p.send().catch(function(d){return!0}),c.promise}else return this.adaptor[o](l)},u.prototype.insert=function(a,e,t,i){e instanceof ee&&(t=e,e=null);var s=this.adaptor.insert(this,a,e,t,i),n="dofetchRequest";return this.dataSource.offline?s:h(this.adaptor[n])?this.dofetchRequest(s,this.adaptor.options.addRecord):this.adaptor[n](s)},u.prototype.remove=function(a,e,t,i){typeof e=="object"&&(e=B.getObject(a,e)),t instanceof ee&&(i=t,t=null);var s=this.adaptor.remove(this,a,e,t,i),n="dofetchRequest";if(this.dataSource.offline)return s;if(h(this.adaptor[n])){var r=this.adaptor.options.deleteRecord;return this.dofetchRequest(s,r)}else return this.adaptor[n](s)},u.prototype.update=function(a,e,t,i,s){t instanceof ee&&(i=t,t=null),this.isEnableCache&&(this.cacheQuery=this.generateKey(this.dataSource.url,i));var n=this.adaptor.update(this,a,e,t,i,s),r="dofetchRequest";if(this.dataSource.offline)return n;if(h(this.adaptor[r])){var l=this.adaptor.options.updateRecord;return this.dofetchRequest(n,l)}else return this.adaptor[r](n)},u.prototype.isCustomDataAdaptor=function(a){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="CustomDataAdaptor"},u.prototype.isGraphQLAdaptor=function(a){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="GraphQLAdaptor"},u.prototype.successFunc=function(a,e,t){if(this.isGraphQLAdaptor(this.adaptor)){var i=typeof a=="object"?a:JSON.parse(a);h(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(e=ae({},this.fetchReqOption,e));try{B.parse.parseJson(a)}catch(c){a=[]}if(this.isEnableCache){var s=JSON.parse(e.data);if(s.action==="insert"||s.action==="remove"){var n={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(n))}else if(s.action==="update"){var r=JSON.parse(window.localStorage.getItem(this.guidId)),i=r?r.results[r.keys.indexOf(this.cacheQuery)]:null;if(i&&i.result){for(var l=i.result,o=0;o<l.length;o++)if(l[o][s.keyColumn]===s.key){l[o]=s.value,window.localStorage.setItem(this.guidId,JSON.stringify(r));break}}}}a=this.adaptor.processResponse(B.parse.parseJson(a),this,null,e.fetchRequest,e,t),this.fetchDeffered.resolve(a)},u.prototype.failureFunc=function(a){this.isEnableCache&&(this.cacheQuery=""),this.fetchDeffered.reject([{error:a}])},u.prototype.dofetchRequest=function(a,e,t){var i=this;if(a=ae({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},a),this.fetchDeffered=new si,this.isCustomDataAdaptor(this.adaptor))this.fetchReqOption=a,e.call(this,{data:a.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this),changes:t});else{var s=new sa(a);s.beforeSend=function(){i.beforeSend(s.fetchRequest,s)},s.onSuccess=this.successFunc.bind(this),s.onFailure=this.failureFunc.bind(this),s.send().catch(function(n){return!0})}return this.fetchDeffered.promise},u.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},u}(),si=function(){function u(){var a=this;this.promise=new Promise(function(e,t){a.resolve=e,a.reject=t}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}return u}(),Te={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"},Ve;(function(u){u.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var a={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},e={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:u.defaultMappedFields,ariaAttributes:a,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function t(H,j,F,K,ne){var J=ae({},e,F),$=ae({},a,J.ariaAttributes),U=v(j).typeof;return U==="string"||U==="number"?i(H,j,K,F,ne):r(H,j,F,$.level,K,ne)}u.createList=t;function i(H,j,F,K,ne){var J=s(H,j,F,K,ne);return Oe(H,J,null,K)}u.createListFromArray=i;function s(H,j,F,K,ne){var J=[],$=ae({},e,K);Te=N($.moduleName);for(var U=T(),ie=0;ie<j.length;ie++)if(!h(j[ie])){var ge=void 0;if($.itemCreating&&typeof $.itemCreating=="function"){var Ce={dataSource:j,curData:j[ie],text:j[ie],options:$};$.itemCreating(Ce)}if(F?ge=L(H,j[ie],void 0,null,null,[],null,U,ie,K):ge=Y(H,j[ie],void 0,null,null,K,ne),$.itemCreated&&typeof $.itemCreated=="function"){var Ce={dataSource:j,curData:j[ie],text:j[ie],item:ge,options:$};$.itemCreated(Ce)}J.push(ge)}return J}u.createListItemFromArray=s;function n(H,j,F,K,ne,J){var $=ae({},e,F);Te=N($.moduleName);var U=J&&(J.getModuleName()==="listview"||J.getModuleName()==="multiselect")?$.fields:ae({},u.defaultMappedFields,$.fields),ie=ae({},a,$.ariaAttributes),ge,Ce=[];K&&(ie.level=K);var ve=[],ce,me;j&&j.length&&!h(v(j).item)&&!Object.prototype.hasOwnProperty.call(v(j).item,U.id)&&(ge=T());for(var Se=0;Se<j.length;Se++){var le=zi(j[Se],U);if(!h(j[Se])){if($.itemCreating&&typeof $.itemCreating=="function"){var Me={dataSource:j,curData:j[Se],text:le[U.text],options:$,fields:U};$.itemCreating(Me)}var ht=j[Se];$.itemCreating&&typeof $.itemCreating=="function"&&(le=zi(j[Se],U)),Object.prototype.hasOwnProperty.call(le,U.id)&&!h(le[U.id])&&(ge=le[U.id]);var Ue=[];if($.showCheckBox&&($.itemNavigable&&(le[U.url]||le[U.urlAttributes])?Ce.push(H("input",{className:Te.check,attrs:{type:"checkbox"}})):Ue.push(H("input",{className:Te.check,attrs:{type:"checkbox"}}))),ne===!0){if($.showIcon&&Object.prototype.hasOwnProperty.call(le,U.iconCss)&&!h(le[U.iconCss])&&Ue.push(H("span",{className:Te.icon+" "+le[U.iconCss]})),ce=L(H,ht,le,U,$.itemClass,Ue,!!(Object.prototype.hasOwnProperty.call(ht,"isHeader")&&ht.isHeader),ge,Se,F),me=ce.querySelector("."+Te.anchorWrap),Object.prototype.hasOwnProperty.call(le,U.tooltip)){var _e=le[U.tooltip];if(F&&F.enableHtmlSanitizer)_e=yt.sanitize(_e);else{var ct=H("span",{innerHTML:_e});_e=ct.innerText,ct=null}ce.setAttribute("title",_e)}$.itemNavigable&&Ce.length&&nt(Ce,ce.firstElementChild)}else{if(ce=Y(H,ht,le,U,$.itemClass,F,J),ce.classList.add(Te.level+"-"+ie.level),ce.setAttribute("aria-level",ie.level.toString()),(ie.groupItemRole==="presentation"||ie.itemRole==="presentation")&&ce.removeAttribute("aria-level"),me=ce.querySelector("."+Te.anchorWrap),Object.prototype.hasOwnProperty.call(le,U.tooltip)){var _e=le[U.tooltip];if(F&&F.enableHtmlSanitizer)_e=yt.sanitize(_e);else{var ct=H("span",{innerHTML:_e});_e=ct.innerText,ct=null}ce.setAttribute("title",_e)}if(Object.prototype.hasOwnProperty.call(le,U.htmlAttributes)&&le[U.htmlAttributes]){var rt=le[U.htmlAttributes];"class"in rt&&typeof rt.class=="string"&&rt.class.trim()===""&&delete rt.class,g(ce,rt)}if(Object.prototype.hasOwnProperty.call(le,U.enabled)&&le[U.enabled]===!1&&ce.classList.add(Te.disabled),Object.prototype.hasOwnProperty.call(le,U.isVisible)&&le[U.isVisible]===!1&&(ce.style.display="none"),Object.prototype.hasOwnProperty.call(le,U.imageUrl)&&!h(le[U.imageUrl])&&!$.template){var oi={src:le[U.imageUrl],alt:h(le.name)?"Displaying Image":"Displaying "+le.name+" Image"};Ri(oi,le[U.imageAttributes]);var Kt=H("img",{className:Te.image,attrs:oi});me?me.insertAdjacentElement("afterbegin",Kt):nt([Kt],ce.firstElementChild)}if($.showIcon&&Object.prototype.hasOwnProperty.call(le,U.iconCss)&&!h(le[U.iconCss])&&!$.template){var hi=H("div",{className:Te.icon+" "+le[U.iconCss]});me?me.insertAdjacentElement("afterbegin",hi):nt([hi],ce.firstElementChild)}Ue.length&&nt(Ue,ce.firstElementChild),$.itemNavigable&&Ce.length&&nt(Ce,ce.firstElementChild),x(H,le,U,j,$,ce,ie.level)}if(me&&E([ce],[Te.navigable]),$.itemCreated&&typeof $.itemCreated=="function"){var Me={dataSource:j,curData:j[Se],text:le[U.text],item:ce,options:$,fields:U};$.itemCreated(Me)}Ce=[],ve.push(ce)}}return ve}u.createListItemFromJson=n;function r(H,j,F,K,ne,J){var $=ae({},e,F),U=n(H,j,F,K,ne,J);return Oe(H,U,$.listClass,F)}u.createListFromJson=r;function l(H,j,F){if(Te=N(e.moduleName),!(!H||!H.length)){var K,ne,J=Array.prototype.slice.call(H);for(j?ne=o(j,J):ne=F===!0?J.length:-1,K=J[ne+(F===!0?-1:1)];K&&(!Ci(K)||K.classList.contains(Te.disabled));)ne=ne+(F===!0?-1:1),K=J[ne];return K}}u.getSiblingLI=l;function o(H,j){if(!(!j||!H)){var F=j;return F=Array.prototype.slice.call(j),F.indexOf(H)}}u.indexOf=o;function c(H,j,F){F===void 0&&(F="None");var K=ae({},u.defaultMappedFields,j),ne=new ee().group(K.groupBy);ne=p(F,"key",ne);var J=d(H,ne);H=[];for(var $=0;$<J.length;$++){var U=J[$].items,ie={},ge="isHeader";ie[K.text]=J[$].key,ie[""+ge]=!0;var Ce=K.text;Ce==="id"&&(Ce="text",ie[""+Ce]=J[$].key),ie._id="group-list-item-"+(J[$].key?J[$].key.toString().trim():"undefined"),ie.items=U,H.push(ie);for(var ve=0;ve<U.length;ve++)H.push(U[ve])}return H}u.groupDataSource=c;function p(H,j,F){if(F===void 0&&(F=new ee),H==="Ascending")F.sortBy(j,"ascending",!0);else if(H==="Descending")F.sortBy(j,"descending",!0);else for(var K=0;K<F.queries.length;K++)F.queries[K].fn==="onSortBy"&&F.queries.splice(K,1);return F}u.addSorting=p;function d(H,j){return new P(H).executeLocal(j)}u.getDataSource=d;function f(H,j){var F=ae({},e,j),K=ae({},u.defaultMappedFields,F.fields),ne=H.cloneNode(!0),J=[];ne.classList.add("json-parent");var $=ne.querySelectorAll(".json-parent>li");ne.classList.remove("json-parent");for(var U=0;U<$.length;U++){for(var ie=$[U],ge=ie.querySelector("a"),Ce=ie.querySelector("ul"),ve={},ce=ge?ge.childNodes:ie.childNodes,me=Object.keys(ce),Se=0;Se<ce.length;Se++)ce[Number(me[Se])].hasChildNodes()||(ve[K.text]=ce[Number(me[Se])].textContent);var le=m(ie);le.id?(ve[K.id]=le.id,delete le.id):ve[K.id]=T(),Object.keys(le).length&&(ve[K.htmlAttributes]=le),ge&&(le=m(ge),Object.keys(le).length&&(ve[K.urlAttributes]=le)),Ce&&(ve[K.child]=f(Ce,j)),J.push(ve)}return J}u.createJsonFromElement=f;function v(H){for(var j={typeof:null,item:null},F=0;F<H.length;F++)if(!h(H[F]))return j={typeof:typeof H[F],item:H[F]};return j}function g(H,j){var F={};Ri(F,j),F.class&&(E([H],F.class.split(" ")),delete F.class),Q(H,F)}function m(H){for(var j={},F=H.attributes,K=0;K<F.length;K++)j[F[K].nodeName]=F[K].nodeValue;return j}function C(H,j,F,K,ne,J){Te=N(e.moduleName);for(var $=H("ul",{className:Te.ul,attrs:{role:"presentation"}}),U=ae({},e,ne),ie=ae({},u.defaultMappedFields,K),ge=ds(j),Ce=[],ve,ce=T(),me=0;me<F.length;me++){var Se=zi(F[me],ie),le=F[me],Me=le.isHeader;if(typeof F[me]=="string"||typeof F[me]=="number"?ve=le:ve=Se[ie.value],U.itemCreating&&typeof U.itemCreating=="function"){var ht={dataSource:F,curData:le,text:ve,options:U,fields:ie};U.itemCreating(ht)}U.itemCreating&&typeof U.itemCreating=="function"&&(Se=zi(F[me],ie),typeof F[me]=="string"||typeof F[me]=="number"?ve=le:ve=Se[ie.value]);var Ue=H("li",{id:ce+"-"+me,className:Me?Te.group:Te.li,attrs:{role:"presentation"}});if(Me)typeof F[me]=="string"||typeof F[me]=="number"?Ue.innerText=le:Ue.innerText=Se[ie.text];else{var _e=Me?U.groupTemplateID:U.templateID;if(Me)if(J&&J.getModuleName()!=="listview"){var ct=ge(le,J,"headerTemplate",_e,!!U.isStringTemplate,null,Ue);ct&&ye(ct,Ue)}else ye(ge(le,J,"headerTemplate",_e,!!U.isStringTemplate),Ue);else if(J&&J.getModuleName()!=="listview"){var ct=ge(le,J,"template",_e,!!U.isStringTemplate,null,Ue);ct&&ye(ct,Ue)}else ye(ge(le,J,"template",_e,!!U.isStringTemplate),Ue);Ue.setAttribute("data-value",h(ve)?"null":ve),Ue.setAttribute("role","option")}if(U.itemCreated&&typeof U.itemCreated=="function"){var ht={dataSource:F,curData:le,text:ve,item:Ue,options:U,fields:ie};U.itemCreated(ht)}Ce.push(Ue)}return ye(Ce,$),$}u.renderContentTemplate=C;function k(H,j,F,K,ne,J){for(var $=ds(H),U=ae({},u.defaultMappedFields,F),ie=ae({},e,ne),ge=U.groupBy,Ce=0,ve=K;Ce<ve.length;Ce++){var ce=ve[Ce],me={};if(me[""+ge]=ce.textContent,ce.innerHTML="",J&&J.getModuleName()!=="listview"){var Se=$(me,J,"groupTemplate",ie.groupTemplateID,!!ie.isStringTemplate,null,ce);Se&&ye(Se,ce)}else ye($(me,J,"groupTemplate",ie.groupTemplateID,!!ie.isStringTemplate),ce)}return K}u.renderGroupTemplate=k;function T(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}u.generateId=T;function x(H,j,F,K,ne,J,$){var U=j[F.child]||[],ie=j[F.hasChildren];if(U.length&&(ie=!0,J.classList.add(Te.hasChild),ne.processSubChild)){var ge=r(H,U,ne,++$);J.appendChild(ge)}if(ne.expandCollapse&&ie&&!ne.template){J.firstElementChild.classList.add(Te.iconWrapper);var Ce=ne.expandIconPosition==="Left"?nt:ye;Ce([H("div",{className:"e-icons "+ne.expandIconClass})],J.querySelector("."+Te.textContent))}}function L(H,j,F,K,ne,J,$,U,ie,ge){var Ce=ae({},e,ge),ve=ae({},a,Ce.ariaAttributes),ce=j,me=j,Se;typeof j!="string"&&typeof j!="number"&&typeof j!="boolean"&&(Se=j,ce=typeof F[K.text]=="boolean"||typeof F[K.text]=="number"?F[K.text]:F[K.text]||"",me=F[K.value]);var le;!h(Se)&&!h(F[K.id])&&F[K.id]!==""?le=U:le=U+"-"+ie;var Me=H("li",{className:($===!0?Te.group:Te.li)+" "+(h(ne)?"":ne),id:le,attrs:ve.groupItemRole!==""&&ve.itemRole!==""?{role:$===!0?ve.groupItemRole:ve.itemRole}:{}});return Se&&Object.prototype.hasOwnProperty.call(F,K.enabled)&&F[K.enabled].toString()==="false"&&Me.classList.add(Te.disabled),ge&&ge.enableHtmlSanitizer&&(ce=yt.sanitize(ce)),$?Me.innerText=ce:(Me.setAttribute("data-value",h(me)?"null":me),Me.setAttribute("role","option"),Se&&Object.prototype.hasOwnProperty.call(F,K.htmlAttributes)&&F[K.htmlAttributes]&&g(Me,F[K.htmlAttributes]),J.length&&!Ce.itemNavigable&&ye(J,Me),Se&&(F[K.url]||F[K.urlAttributes]&&F[K.urlAttributes].href)?Me.appendChild(R(H,Se,K,ce,J,Ce.itemNavigable)):(J.length&&Ce.itemNavigable&&ye(J,Me),Me.appendChild(document.createTextNode(ce)))),Me}function N(H){return{li:"e-"+H+"-item",ul:"e-"+H+"-parent e-ul",group:"e-"+H+"-group-item",icon:"e-"+H+"-icon",text:"e-"+H+"-text",check:"e-"+H+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+H+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+H+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function R(H,j,F,K,ne,J){var $=zi(j,F),U={href:$[F.url]};Object.prototype.hasOwnProperty.call($,F.urlAttributes)&&$[F.urlAttributes]&&(Ri(U,$[F.urlAttributes]),U.href=$[F.url]?$[F.url]:$[F.urlAttributes].href);var ie;if(!J)ie=H("a",{className:Te.text+" "+Te.url,innerHTML:K});else{ie=H("a",{className:Te.text+" "+Te.url});var ge=H("div",{className:Te.anchorWrap});ne&&ne.length&&ye(ne,ge),ge.appendChild(document.createTextNode(K)),ye([ge],ie)}return g(ie,U),ie}function Y(H,j,F,K,ne,J,$){var U=ae({},e,J),ie=ae({},a,U.ariaAttributes),ge=j,Ce,ve,ce;typeof j!="string"&&typeof j!="number"&&(ce=j,ge=F[K.text]||"",Ce=h(F._id)?F[K.id]:F._id,ve=!!(Object.prototype.hasOwnProperty.call(j,"isHeader")&&j.isHeader)),J&&J.enableHtmlSanitizer&&(ge=yt.sanitize(ge));var me=H("li",{className:(ve===!0?Te.group:Te.li)+" "+(h(ne)?"":ne),attrs:ie.groupItemRole!==""&&ie.itemRole!==""?{role:ve===!0?ie.groupItemRole:ie.itemRole}:{}});if(h(Ce)?me.setAttribute("data-uid",T()):me.setAttribute("data-uid",Ce),ve&&J&&J.groupTemplate){var Se=ds(J.groupTemplate);if($&&$.getModuleName()!=="listview"){var le=Se(j,$,"groupTemplate",U.groupTemplateID,!!U.isStringTemplate,null,me);le&&ye(le,me)}else ye(Se(j,$,"groupTemplate",U.groupTemplateID,!!U.isStringTemplate),me)}else if(!ve&&J&&J.template){var Se=ds(J.template);if($&&$.getModuleName()!=="listview"){var le=Se(j,$,"template",U.templateID,!!U.isStringTemplate,null,me);le&&ye(le,me)}else ye(Se(j,$,"template",U.templateID,!!U.isStringTemplate),me)}else{var Me=H("div",{className:Te.textContent,attrs:ie.wrapperRole!==""?{role:ie.wrapperRole}:{}});if(ce&&(F[K.url]||F[K.urlAttributes]&&F[K.urlAttributes].href))Me.appendChild(R(H,ce,K,ge,null,U.itemNavigable));else{var ht=H("span",{className:Te.text,attrs:ie.itemText!==""?{role:ie.itemText}:{}});J&&J.enableHtmlSanitizer?ht.innerText=ge:ht.innerHTML=ge,Me.appendChild(ht)}me.appendChild(Me)}return me}function Oe(H,j,F,K){var ne=ae({},e,K),J=ae({},a,ne.ariaAttributes);Te=N(ne.moduleName);var $=H("ul",{className:Te.ul+" "+(h(F)?"":F),attrs:J.listRole!==""?{role:J.listRole}:{}});return ye(j,$),$}u.generateUL=Oe;function xe(H,j,F,K){var ne=ae({},e,K);Te=N(ne.moduleName);var J=ne.expandIconPosition==="Left"?nt:ye;return J([H("div",{className:"e-icons "+ne.expandIconClass+" "+(h(F)?"":F)})],j.querySelector("."+Te.textContent)),j}u.generateIcon=xe})(Ve||(Ve={}));function zi(u,a){var e={};if(h(u)||typeof u=="string"||typeof u=="number"||!h(u.isHeader))return u;for(var t=0,i=Object.keys(a);t<i.length;t++){var s=i[t],n=a[""+s],r=!h(n)&&typeof n=="string"?I(n,u):void 0;h(r)||(e[""+n]=r)}return e}function ds(u){if(u)try{return typeof u!="function"&&document.querySelector(u)?Ie(document.querySelector(u).innerHTML.trim()):Ie(u)}catch(a){return Ie(u)}}var Gt,ai,Lt,ss,nn=!1;function Qo(u,a){var e=!1,t={left:0,top:0},i=u;if(!u||!a)return t;for(h(a.offsetParent)&&a.style.position==="fixed"&&(e=!0);(a.offsetParent||e)&&u&&a.offsetParent!==u;)t.left+=u.offsetLeft,t.top+=u.offsetTop,u=u.offsetParent;for(u=i;(a.offsetParent||e)&&u&&a.offsetParent!==u;)t.left-=u.scrollLeft,t.top-=u.scrollTop,u=u.parentElement;return t}function kt(u,a,e,t,i){if(ai=void 0,ai=i,nn=!!t,!u)return{left:0,top:0};a||(a="left"),e||(e="top"),ss=u.ownerDocument,Lt=u;var s={left:0,top:0};return Zo(a.toLowerCase(),e.toLowerCase(),s)}function _t(u,a){a.left=u}function $t(u,a){a.top=u}function Zo(u,a,e){switch(Gt=Lt.getBoundingClientRect(),a+u){case"topcenter":_t(ga(),e),$t(Vs(),e);break;case"topright":_t(ma(),e),$t(Vs(),e);break;case"centercenter":_t(ga(),e),$t(va(),e);break;case"centerright":_t(ma(),e),$t(va(),e);break;case"centerleft":_t(Hs(),e),$t(va(),e);break;case"bottomcenter":_t(ga(),e),$t(fa(),e);break;case"bottomright":_t(ma(),e),$t(fa(),e);break;case"bottomleft":_t(Hs(),e),$t(fa(),e);break;default:case"topleft":_t(Hs(),e),$t(Vs(),e);break}return Lt=null,e}function gl(){return ss.documentElement.scrollTop||ss.body.scrollTop}function yl(){return ss.documentElement.scrollLeft||ss.body.scrollLeft}function fa(){return nn?Gt.bottom:Gt.bottom+gl()}function va(){return Vs()+Gt.height/2}function Vs(){return nn?Gt.top:Gt.top+gl()}function Hs(){return Gt.left+yl()}function ma(){var u=Lt&&((Lt.classList.contains("e-date-wrapper")||Lt.classList.contains("e-datetime-wrapper"))&&Lt.classList.contains("e-rtl")||Lt.classList.contains("e-ddl")&&Lt.classList.contains("e-rtl")||Lt.classList.contains("e-date-range-wrapper"))?ai?ai.width:0:ai&&Gt.width>=ai.width?ai.width:0;return Lt&&Lt.classList.contains("e-rtl")&&Lt.classList.contains("e-multiselect")&&(u=ai.width),Gt.right+yl()-u}function ga(){return Hs()+Gt.width/2}var li,wt;function bl(u,a,e,t){if(a===void 0&&(a=null),e===void 0&&(e={X:!1,Y:!1}),!e.Y&&!e.X)return{left:0,top:0};var i=u.getBoundingClientRect();if(wt=a,li=u.ownerDocument,t||(t=kt(u,"left","top")),e.X){var s=wt?kl():Ol(),n=hn(),r=un(),l=n-t.left,o=t.left+i.width-r;i.width>s?l>0&&o<=0?t.left=r-i.width:o>0&&l<=0?t.left=n:t.left=l>o?r-i.width:n:l>0?t.left+=l:o>0&&(t.left-=o)}if(e.Y){var c=wt?wl():Il(),p=on(),d=cn(),f=p-t.top,v=t.top+i.height-d;i.height>c?f>0&&v<=0?t.top=d-i.height:v>0&&f<=0?t.top=p:t.top=f>v?d-i.height:p:f>0?t.top+=f:v>0&&(t.top-=v)}return t}function _s(u,a,e,t){a===void 0&&(a=null);var i=kt(u,"left","top");e&&(i.left=e),t&&(i.top=t);var s=[];wt=a,li=u.ownerDocument;var n=u.getBoundingClientRect(),r=i.top,l=i.left,o=i.left+n.width,c=i.top+n.height,p=Al(r,c),d=Sl(l,o);return p.topSide&&s.push("top"),d.rightSide&&s.push("right"),d.leftSide&&s.push("left"),p.bottomSide&&s.push("bottom"),s}function eh(u,a,e,t,i,s,n,r,l){if(n===void 0&&(n=null),r===void 0&&(r={X:!0,Y:!0}),!(!a||!u||!i||!s||!r.X&&!r.Y)){var o={TL:null,TR:null,BL:null,BR:null},c={TL:null,TR:null,BL:null,BR:null},p;if(window.getComputedStyle(u).display==="none"){var d=u.style.visibility;u.style.visibility="hidden",u.style.display="block",p=u.getBoundingClientRect(),u.style.removeProperty("display"),u.style.visibility=d}else p=u.getBoundingClientRect();var f={posX:i,posY:s,offsetX:e,offsetY:t,position:{left:0,top:0}};wt=n,li=a.ownerDocument,ih(a,o,f,l,p),ln(c,f,p),r.X&&El(a,c,o,f,p,!0),r.Y&&o.TL.top>-1&&xl(a,c,o,f,p,!0),th(u,f,p)}}function th(u,a,e){var t=0,i=0;if(u.offsetParent!=null&&(getComputedStyle(u.offsetParent).position==="absolute"||getComputedStyle(u.offsetParent).position==="relative")){var s=kt(u.offsetParent,"left","top",!1,e);t=s.left,i=s.top}var n=1,r=1,l=Cl(u);if(l){var o=getComputedStyle(l).transform;if(o!=="none"){var c=new DOMMatrix(o);n=c.a,r=c.d}var p=getComputedStyle(l).zoom;if(p!=="none"){var d=rn(document.body);n=d*n,r=d*r}}u.style.top=a.position.top/r+a.offsetY-i/r+"px",u.style.left=a.position.left/n+a.offsetX-t/n+"px"}function rn(u){var a=getComputedStyle(u).zoom;return parseFloat(a)||1}function Cl(u){for(;u;){var a=window.getComputedStyle(u).transform,e=rn(document.body);if(a&&a!=="none"||e&&e!==1)return u;if(u===document.body)return null;u=u.offsetParent||u.parentElement}return null}function ih(u,a,e,t,i){e.position=kt(u,e.posX,e.posY,t,i),a.TL=kt(u,"left","top",t,i),a.TR=kt(u,"right","top",t,i),a.BR=kt(u,"left","bottom",t,i),a.BL=kt(u,"right","bottom",t,i)}function ln(u,a,e){u.TL={top:a.position.top+a.offsetY,left:a.position.left+a.offsetX},u.TR={top:u.TL.top,left:u.TL.left+e.width},u.BL={top:u.TL.top+e.height,left:u.TL.left},u.BR={top:u.TL.top+e.height,left:u.TL.left+e.width}}function Sl(u,a){var e=!1,t=!1;return u-Ys()<hn()&&(e=!0),a>un()&&(t=!0),{leftSide:e,rightSide:t}}function El(u,a,e,t,i,s){var n=Sl(a.TL.left,a.TR.left);e.TL.left-Ys()<=hn()&&(n.leftSide=!1),e.TR.left>un()&&(n.rightSide=!1),(n.leftSide&&!n.rightSide||!n.leftSide&&n.rightSide)&&(t.posX==="right"?t.posX="left":t.posX="right",t.offsetX=t.offsetX+i.width,t.offsetX=-1*t.offsetX,t.position=kt(u,t.posX,t.posY,!1),ln(a,t,i),s&&El(u,a,e,t,i,!1))}function xl(u,a,e,t,i,s){var n=Al(a.TL.top,a.BL.top);e.TL.top-Gs()<=on()&&(n.topSide=!1),e.BL.top>=cn()&&u.getBoundingClientRect().bottom<window.innerHeight&&(n.bottomSide=!1),(n.topSide&&!n.bottomSide||!n.topSide&&n.bottomSide)&&(t.posY==="top"?t.posY="bottom":t.posY="top",t.offsetY=t.offsetY+i.height,t.offsetY=-1*t.offsetY,t.position=kt(u,t.posX,t.posY,!1,i),ln(a,t,i),s&&xl(u,a,e,t,i,!1))}function Al(u,a){var e=!1,t=!1;return u-Gs()<on()&&(e=!0),a>cn()&&(t=!0),{topSide:e,bottomSide:t}}function kl(){return wt.getBoundingClientRect().width}function wl(){return wt.getBoundingClientRect().height}function Tl(){return wt.getBoundingClientRect().left}function Dl(){return wt.getBoundingClientRect().top}function on(){return wt?Dl():0}function hn(){return wt?Tl():0}function un(){return wt?Ys()+Tl()+kl():Ys()+Ol()}function cn(){return wt?Gs()+Dl()+wl():Gs()+Il()}function Gs(){return li.documentElement.scrollTop||li.body.scrollTop}function Ys(){return li.documentElement.scrollLeft||li.body.scrollLeft}function Il(){return window.innerHeight}function Ol(){var u=window.innerWidth,a=document.documentElement.getBoundingClientRect(),e=h(document.documentElement)?0:a.width;return u-(u-e)}function Ll(){wt=null,li=null}var Nl=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Je=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},sh=function(u){Nl(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return Je([y("left")],a.prototype,"X",void 0),Je([y("top")],a.prototype,"Y",void 0),a}(Dt),at={ROOT:"e-popup",RTL:"e-rtl",OPEN:"e-popup-open",CLOSE:"e-popup-close"},Vi=function(u){Nl(a,u);function a(e,t){return u.call(this,t,e)||this}return a.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];switch(n){case"width":Si(this.element,{width:fe(e.width)});break;case"height":Si(this.element,{height:fe(e.height)});break;case"zIndex":Si(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":{var r=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break}case"offsetY":{var l=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+l).toString()+"px";break}case"content":this.setContent();break;case"actionOnScroll":e.actionOnScroll!=="none"?this.wireScrollEvents():this.unwireScrollEvents();break}}},a.prototype.getModuleName=function(){return"popup"},a.prototype.resolveCollision=function(){this.checkCollision()},a.prototype.getPersistData=function(){return this.addOnPersist([])},a.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(at.ROOT,at.RTL,at.OPEN,at.CLOSE),this.content=null,this.relateTo=null,Ll(),u.prototype.destroy.call(this)},a.prototype.render=function(){this.element.classList.add(at.ROOT);var e={};this.zIndex!==1e3&&(e.zIndex=this.zIndex),this.width!=="auto"&&(e.width=fe(this.width)),this.height!=="auto"&&(e.height=fe(this.height)),Si(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},a.prototype.wireEvents=function(){V.isDevice&&b.add(window,"orientationchange",this.orientationOnChange,this),this.actionOnScroll!=="none"&&this.wireScrollEvents()},a.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];b.add(i,"scroll",this.scrollRefresh,this)}},a.prototype.unwireEvents=function(){V.isDevice&&b.remove(window,"orientationchange",this.orientationOnChange),this.actionOnScroll!=="none"&&this.unwireScrollEvents()},a.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];b.remove(i,"scroll",this.scrollRefresh)}},a.prototype.getRelateToElement=function(){var e=this.relateTo===""||h(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),typeof this.relateTo=="string"?document.querySelector(this.relateTo):this.relateTo},a.prototype.scrollRefresh=function(e){if(this.actionOnScroll==="reposition"?!h(this.element)&&!(this.element.offsetParent===e.target||this.element.offsetParent&&this.element.offsetParent.tagName==="BODY"&&e.target.parentElement==null)&&this.refreshPosition():this.actionOnScroll==="hide"&&this.hide(),this.actionOnScroll!=="none"&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);!t&&!this.targetInvisibleStatus?(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0):t&&(this.targetInvisibleStatus=!1)}},a.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),s=0;s<i.length;s++)if(!this.isElementVisible(e,i[s]))return!1;return!0},a.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(h(this.checkGetBoundingClientRect(t))){var n=window,r={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},l=kt(e),o={top:l.top,left:l.left,right:l.left+i.width,bottom:l.top+i.height},c={top:r.bottom-o.top,left:r.right-o.left,bottom:o.bottom-r.top,right:o.right-r.left};return c.top>0&&c.left>0&&c.right>0&&c.bottom>0}else{var s=t.getBoundingClientRect();return!(i.bottom<s.top)&&!(i.bottom>s.bottom)&&!(i.right>s.right)&&!(i.left<s.left)}},a.prototype.preRender=function(){},a.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(at.RTL):this.element.classList.remove(at.RTL)},a.prototype.setContent=function(){if(!h(this.content))if(this.element.innerHTML="",typeof this.content=="string")this.element.textContent=this.content;else{var e=this.getRelateToElement(),t=this.content.props;(!e.classList.contains("e-dropdown-btn")||h(t))&&this.element.appendChild(this.content)}},a.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},a.prototype.refreshPosition=function(e,t){h(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},a.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if(typeof this.position.X=="number"&&typeof this.position.Y=="number")e={left:this.position.X,top:this.position.Y};else if(typeof this.position.X=="string"&&typeof this.position.Y=="number"||typeof this.position.X=="number"&&typeof this.position.Y=="string"){var s=void 0,n=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(s=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),typeof this.position.X=="string"?e={left:t.left,top:this.position.Y}:e={left:this.position.X,top:t.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=s)}else if(i){var r=this.element.clientHeight,n=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY,r),this.element.style.display=n}else e={left:0,top:0};h(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},a.prototype.checkGetBoundingClientRect=function(e){var t;try{return t=e.getBoundingClientRect(),t}catch(i){return null}},a.prototype.getAnchorPosition=function(e,t,i,s,n,r){r===void 0&&(r=0);var l=this.checkGetBoundingClientRect(t),o=this.checkGetBoundingClientRect(e);if(h(l)||h(o))return null;var c=e,p={left:0,top:0};switch(t.offsetParent&&t.offsetParent.tagName==="BODY"&&e.tagName==="BODY"?p=kt(e):(t.classList.contains("e-dlg-modal")&&c.tagName!=="BODY"&&(t=t.parentElement),p=Qo(c,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&c.tagName==="BODY"&&this.targetType==="container"?p.left+=window.innerWidth/2-l.width/2:this.targetType==="container"?p.left+=o.width/2-l.width/2:p.left+=o.width/2;break;case"right":if(t.classList.contains("e-dlg-modal")&&c.tagName==="BODY"&&this.targetType==="container")p.left+=window.innerWidth-l.width;else if(this.targetType==="container"){var d=1,f=Cl(t);if(f){var v=getComputedStyle(f).transform;if(v!=="none"){var g=new DOMMatrix(v);d=g.a}var m=getComputedStyle(f).zoom;if(m!=="none"){var C=rn(document.body);d=C*d}}p.left+=(o.width-l.width)/d}else p.left+=o.width;break}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&c.tagName==="BODY"&&this.targetType==="container"?p.top+=window.innerHeight/2-l.height/2:this.targetType==="container"?p.top+=o.height/2-l.height/2:p.top+=o.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&c.tagName==="BODY"&&this.targetType==="container"?p.top+=window.innerHeight-l.height:this.targetType==="container"&&!t.classList.contains("e-dialog")?p.top+=o.height-l.height:this.targetType==="container"&&t.classList.contains("e-dialog")?p.top+=o.height-r:p.top+=o.height;break}return p.left+=s,p.top+=n,p},a.prototype.callFlip=function(e){var t=this.getRelateToElement();eh(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},a.prototype.callFit=function(e){if(_s(this.element,this.viewPortElement).length!==0)if(h(this.viewPortElement)){var t=bl(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),s=this.checkGetBoundingClientRect(this.viewPortElement);if(h(i)||h(s))return null;e&&e.Y===!0&&(s.top>i.top?this.element.style.top="0px":s.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-s.bottom)+"px")),e&&e.X===!0&&(s.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-s.right)+"px":s.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(s.left-i.left)+"px"))}},a.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;e==="none"&&t==="none"||(e==="flip"&&t==="flip"?this.callFlip({X:!0,Y:!0}):e==="fit"&&t==="fit"?this.callFit({X:!0,Y:!0}):(e==="flip"?this.callFlip({X:!0,Y:!1}):t==="flip"&&this.callFlip({Y:!0,X:!1}),e==="fit"?this.callFit({X:!0,Y:!1}):t==="fit"&&this.callFit({X:!1,Y:!0})))},a.prototype.show=function(e,t){var i=this;if(this.wireEvents(),this.zIndex===1e3||!h(t)){var s=h(t)?this.element:t;this.zIndex=nh(s),Si(this.element,{zIndex:this.zIndex})}e=!h(e)&&typeof e=="object"?e:this.showAnimation,(this.collision.X!=="none"||this.collision.Y!=="none")&&(w([this.element],at.CLOSE),E([this.element],at.OPEN),this.checkCollision(),w([this.element],at.OPEN),E([this.element],at.CLOSE)),h(e)?(w([this.element],at.CLOSE),E([this.element],at.OPEN),this.trigger("open")):(e.begin=function(){i.isDestroyed||(w([i.element],at.CLOSE),E([i.element],at.OPEN))},e.end=function(){i.isDestroyed||i.trigger("open")},new bt(e).animate(this.element))},a.prototype.hide=function(e){var t=this;e=!h(e)&&typeof e=="object"?e:this.hideAnimation,h(e)?(w([this.element],at.OPEN),E([this.element],at.CLOSE),this.trigger("close")):(e.end=function(){t.isDestroyed||(w([t.element],at.OPEN),E([t.element],at.CLOSE),t.trigger("close"))},new bt(e).animate(this.element)),this.unwireEvents()},a.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),ah(e,this.fixedParent)},a.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&t.tagName!=="HTML";){var i=getComputedStyle(t);(i.position==="fixed"||i.position==="sticky")&&!h(this.element)&&this.element.offsetParent&&this.element.offsetParent.tagName==="BODY"&&getComputedStyle(this.element.offsetParent).overflow!=="hidden"&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?fe(window.scrollY-parseInt(this.element.style.top,10)):fe(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,!h(this.element)&&h(this.element.offsetParent)&&i.position==="fixed"&&this.element.style.position==="fixed"&&(this.fixedParent=!0)}},Je([y("auto")],a.prototype,"height",void 0),Je([y("auto")],a.prototype,"width",void 0),Je([y(null)],a.prototype,"content",void 0),Je([y("container")],a.prototype,"targetType",void 0),Je([y(null)],a.prototype,"viewPortElement",void 0),Je([y({X:"none",Y:"none"})],a.prototype,"collision",void 0),Je([y("")],a.prototype,"relateTo",void 0),Je([Nt({},sh)],a.prototype,"position",void 0),Je([y(0)],a.prototype,"offsetX",void 0),Je([y(0)],a.prototype,"offsetY",void 0),Je([y(1e3)],a.prototype,"zIndex",void 0),Je([y(!1)],a.prototype,"enableRtl",void 0),Je([y("reposition")],a.prototype,"actionOnScroll",void 0),Je([y(null)],a.prototype,"showAnimation",void 0),Je([y(null)],a.prototype,"hideAnimation",void 0),Je([q()],a.prototype,"open",void 0),Je([q()],a.prototype,"close",void 0),Je([q()],a.prototype,"targetExitViewport",void 0),a=Je([ot],a),a}(Tt);function ah(u,a){for(var e=getComputedStyle(u),t=[],i=/(auto|scroll)/,s=u.parentElement;s&&s.tagName!=="HTML";){var n=getComputedStyle(s);!(e.position==="absolute"&&n.position==="static")&&i.test(n.overflow+n.overflowY+n.overflowX)&&t.push(s),s=s.parentElement}return a||t.push(document),t}function nh(u){for(var a=u.parentElement,e=[];a&&a.tagName!=="BODY";){var t=document.defaultView.getComputedStyle(a,null).getPropertyValue("z-index"),i=document.defaultView.getComputedStyle(a,null).getPropertyValue("position");t!=="auto"&&i!=="static"&&e.push(t),a=a.parentElement}for(var s=[],n=0;n<document.body.children.length;n++)if(!u.isEqualNode(document.body.children[n])){var t=document.defaultView.getComputedStyle(document.body.children[n],null).getPropertyValue("z-index"),i=document.defaultView.getComputedStyle(document.body.children[n],null).getPropertyValue("position");t!=="auto"&&i!=="static"&&s.push(t)}s.push("999");var r=[];if(!h(u.parentElement)&&u.parentElement.tagName!=="BODY"){for(var l=[].slice.call(u.parentElement.children),n=0;n<l.length;n++)if(!u.isEqualNode(l[n])){var t=document.defaultView.getComputedStyle(l[n],null).getPropertyValue("z-index"),i=document.defaultView.getComputedStyle(l[n],null).getPropertyValue("position");t!=="auto"&&i!=="static"&&r.push(t)}}var o=e.concat(s,r),c=Math.max.apply(Math,o)+1;return c>2147483647?2147483647:c}var Bl=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Be=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},rh=1500,lh=500,kn=0,wn=8,oh=2,Ut=2,ya="e-tooltip",Tn="e-rtl",hh="e-bigger",Dn="e-icons",In="e-tooltip-close",ba="e-tooltip-wrap",On="e-tip-content",Ti="e-arrow-tip",Ln="e-arrow-tip-outer",fs="e-arrow-tip-inner",ji="e-tip-bottom",Ca="e-tip-top",Nn="e-tip-left",Sa="e-tip-right",Ea="e-popup",Ui="e-popup-open",xa="e-popup-close",vs="e-lib",uh="e-hidden",Bn="e-tooltip-popup-container",ch=function(u){Bl(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return Be([y({effect:"FadeIn",duration:150,delay:0})],a.prototype,"open",void 0),Be([y({effect:"FadeOut",duration:150,delay:0})],a.prototype,"close",void 0),a}(Dt),ph=function(u){Bl(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.mouseMoveEvent=null,i.mouseMoveTarget=null,i.containerElement=null,i.isBodyContainer=!0,i}return a.prototype.initialize=function(){this.formatPosition(),E([this.element],ya)},a.prototype.formatPosition=function(){var e,t;this.position&&(this.position.indexOf("Top")===0||this.position.indexOf("Bottom")===0?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1]))},a.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:Ti+" "+this.tipClass});e.appendChild(this.createElement("div",{className:Ln+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:fs+" "+this.tipClass})),this.tooltipEle.appendChild(e)},a.prototype.setTipClass=function(e){e.indexOf("Right")===0?this.tipClass=Nn:e.indexOf("Bottom")===0?this.tipClass=Ca:e.indexOf("Left")===0?this.tipClass=Sa:this.tipClass=ji},a.prototype.renderPopup=function(e){var t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove(vs),this.popupObj=new Vi(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},a.prototype.getScalingFactor=function(e){if(!e)return{x:1,y:1};var t={x:1,y:1},i=e.closest('[style*="transform: scale"]');if(i&&i!==this.tooltipEle&&i.contains(this.tooltipEle)){var s=window.getComputedStyle(i),n=s.getPropertyValue("transform"),r=n.match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);t.x=r[0],t.y=r[3]}return t},a.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var t=this.element.closest('[style*="zoom"]');t&&(t.contains(this.tooltipEle)||(this.tooltipEle.style.zoom=getComputedStyle(t).zoom));var i=kt(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),s=this.getScalingFactor(e),n=this.calculateTooltipOffset(this.position,s.x,s.y),r=this.calculateElementPosition(i,n),l=r[0],o=r[1],c=this.collisionFlipFit(e,l,o);return c.left=c.left/s.x,c.top=c.top/s.y,this.tooltipEle.style.display="",c},a.prototype.windowResize=function(){this.reposition(this.findTarget())},a.prototype.reposition=function(e){if(this.popupObj&&e){var t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()}},a.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},a.prototype.closePopupHandler=function(){this.isReact&&!(this.opensOn==="Click"||typeof this.content=="function")&&this.clearTemplate(["content"]),this.clear();var e={type:this.tooltipEventArgs.event?this.tooltipEventArgs.event.type:null,cancel:!1,target:this.tooltipEventArgs.target,event:this.tooltipEventArgs.event?this.tooltipEventArgs.event:null,element:this.tooltipEle,isInteracted:!h(this.tooltipEventArgs.event)};this.trigger("afterClose",e),e=null},a.prototype.calculateTooltipOffset=function(e,t,i){t===void 0&&(t=1),i===void 0&&(i=1);var s={top:0,left:0},n,r,l,o,c,p,d,f;if(t!==1||i!==1){var v=this.tooltipEle.getBoundingClientRect(),g=void 0;l=Math.round(v.width),o=Math.round(v.height),c=M("."+Ti,this.tooltipEle),c&&(g=c.getBoundingClientRect()),n=c?Math.round(g.width):0,r=c?Math.round(g.height):0,p=this.showTipPointer?kn:wn,d=r/2+Ut+(o-this.tooltipEle.clientHeight*i),f=n/2+Ut+(l-this.tooltipEle.clientWidth*t)}else l=this.tooltipEle.offsetWidth,o=this.tooltipEle.offsetHeight,c=M("."+Ti,this.tooltipEle),n=c?c.offsetWidth:0,r=c?c.offsetHeight:0,p=this.showTipPointer?kn:wn,d=r/2+Ut+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),f=n/2+Ut+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(p+=oh),e){case"RightTop":s.left+=n+p,s.top-=o-d;break;case"RightCenter":s.left+=n+p,s.top-=o/2;break;case"RightBottom":s.left+=n+p,s.top-=d;break;case"BottomRight":s.top+=r+p,s.left-=f;break;case"BottomCenter":s.top+=r+p,s.left-=l/2;break;case"BottomLeft":s.top+=r+p,s.left-=l-f;break;case"LeftBottom":s.left-=n+l+p,s.top-=d;break;case"LeftCenter":s.left-=n+l+p,s.top-=o/2;break;case"LeftTop":s.left-=n+l+p,s.top-=o-d;break;case"TopLeft":s.top-=o+r+p,s.left-=l-f;break;case"TopRight":s.top-=o+r+p,s.left-=f;break;default:s.top-=o+r+p,s.left-=l/2;break}return s.left+=this.offsetX,s.top+=this.offsetY,s},a.prototype.updateTipPosition=function(e){var t=Ee("."+Ti+",."+Ln+",."+fs,this.tooltipEle),i=[ji,Ca,Nn,Sa];w(t,i),this.setTipClass(e),E(t,this.tipClass)},a.prototype.adjustArrow=function(e,t,i,s){var n=M("."+Ti,this.tooltipEle);if(!(this.showTipPointer===!1||n===null)){this.updateTipPosition(t);var r,l;this.tooltipEle.style.display="block";var o=this.tooltipEle.clientWidth,c=this.tooltipEle.clientHeight,p=M("."+fs,this.tooltipEle),d=n.offsetWidth,f=n.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===ji||this.tipClass===Ca){if(this.tipClass===ji?(l="99.9%",p.style.top="-"+(f-2)+"px"):(l=-(f-1)+"px",p.style.top="-"+(f-6)+"px"),e){var v=i!=="Center"||o>e.offsetWidth||this.mouseTrail;v&&i==="Left"||!v&&this.tipPointerPosition==="End"?r=o-d-Ut+"px":v&&i==="Right"||!v&&this.tipPointerPosition==="Start"?r=Ut+"px":v&&(this.tipPointerPosition==="End"||this.tipPointerPosition==="Start")?r=this.tipPointerPosition==="End"?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-d/2-Ut+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-d/2+Ut+"px":r=o/2-d/2+"px"}}else{this.tipClass===Sa?(r="99.9%",p.style.left="-"+(d-2)+"px"):(r=-(d-1)+"px",p.style.left=-d+(d-2)+"px");var v=s!=="Center"||c>e.offsetHeight||this.mouseTrail;v&&s==="Top"||!v&&this.tipPointerPosition==="End"?l=c-f-Ut+"px":v&&s==="Bottom"||!v&&this.tipPointerPosition==="Start"?l=Ut+"px":l=c/2-f/2+"px"}n.style.top=l,n.style.left=r}},a.prototype.renderContent=function(e){var t=this,i=M("."+On,this.tooltipEle);if(this.cssClass&&E([this.tooltipEle],this.cssClass.split(" ")),e&&!h(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),h(this.content))e&&!h(e.getAttribute("data-content"))&&(i.innerHTML=e.getAttribute("data-content"));else if(i.innerHTML="",this.content instanceof HTMLElement)i.appendChild(this.content);else if(typeof this.content=="string")if(this.isAngular?this.setProperties({content:yt.sanitize(this.content)},!0):this.content=this.enableHtmlSanitizer?yt.sanitize(this.content):this.content,this.enableHtmlParse){var s=Ie(this.content),n=s({},this,"content",this.element.id+"content",void 0,void 0,i,this.root);n&&ye(n,i)}else i.textContent=this.content;else{var r=Ie(this.content),n=r({},this,"content",this.element.id+"content",void 0,void 0,i);n&&(this.isAngular&&setTimeout(function(){t.reposition(e)},1),ye(n,i)),this.renderReactTemplates()}},a.prototype.renderCloseIcon=function(){if(!this.isSticky){var e=this.tooltipEle.querySelector("."+Dn+"."+In);e&&ft(e);return}var t=this.createElement("div",{className:Dn+" "+In,attrs:{role:"button","aria-label":"Press escape to close the Tooltip"}});this.tooltipEle.appendChild(t),b.add(t,V.touchStartEvent,this.onStickyClose,this)},a.prototype.addDescribedBy=function(e,t){var i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),Q(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},a.prototype.removeDescribedBy=function(e){var t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),s=i.indexOf(t);s!==-1&&i.splice(s,1),e.removeAttribute("data-tooltip-id");var n=i.join(" ").trim();n?e.setAttribute("aria-describedby",n):e.removeAttribute("aria-describedby")},a.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},a.prototype.touchEndHandler=function(){var e=this;if(!this.isSticky){var t=function(){e.close()};this.autoCloseTimer=setTimeout(t,rh)}},a.prototype.targetClick=function(e){var t;if(this.target?t=A(e.target,this.target):t=this.element,!h(t)){var i=e;t.getAttribute("data-tooltip-id")===null?i.type==="mousedown"&&i.button===2||this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t)}},a.prototype.targetHover=function(e){var t;if(this.target?t=A(e.target,this.target):t=this.element,!(h(t)||t.getAttribute("data-tooltip-id")!==null&&this.closeDelay===0)){!h(this.tooltipEle)&&this.tooltipEle.getAttribute("e-animation-id")&&(bt.stop(this.tooltipEle),this.clear());for(var i=[].slice.call(Ee('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)),s=0,n=i;s<n.length;s++){var r=n[s];this.restoreElement(r)}this.showTooltip(t,this.animation.open,e)}},a.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},a.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&b.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},a.prototype.showTooltip=function(e,t,i){var s=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,b.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!h(i)};var n=function(r){s.beforeRenderCallback(r,e,i,t)};this.trigger("beforeRender",this.tooltipEventArgs,n.bind(this))},a.prototype.beforeRenderCallback=function(e,t,i,s){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,h(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?$e(this.element.getAttribute("id")):$e("tooltip"),this.tooltipEle=this.createElement("div",{className:ba+" "+Ea+" "+vs,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}}),this.tooltipEle.style.width=fe(this.width),this.tooltipEle.style.height=fe(this.height),this.tooltipEle.style.position="absolute",this.tooltipBeforeRender(t,this),this.tooltipAfterRender(t,i,s,this)):t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),bt.stop(this.tooltipEle),this.reposition(t),this.tooltipAfterRender(t,i,s,this)))},a.prototype.appendContainer=function(e){typeof this.container=="string"?this.container==="body"?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=M(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer=this.containerElement.tagName==="BODY"),this.isBodyContainer||E([this.containerElement],Bn),this.containerElement.appendChild(e.tooltipEle)},a.prototype.tooltipBeforeRender=function(e,t){e&&(V.isDevice&&E([t.tooltipEle],hh),t.width!=="auto"&&(t.tooltipEle.style.maxWidth=fe(t.width)),t.tooltipEle.appendChild(t.createElement("div",{className:On})),this.appendContainer(t),w([t.tooltipEle],uh),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),E([t.tooltipEle],Ui),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),bt.stop(t.tooltipEle),t.reposition(e))},a.prototype.tooltipAfterRender=function(e,t,i,s){if(e){w([s.tooltipEle],Ui),E([s.tooltipEle],xa),s.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:s.tooltipEle,isInteracted:!h(t)},s.needTemplateReposition()&&!s.mouseTrail&&(i.effect==="None"||i.effect==="FadeIn"||this.isReact&&typeof s.content!="string")&&(s.tooltipEle.style.display="none");var n=function(r){s.beforeOpenCallback(r,e,i,t)};s.trigger("beforeOpen",s.tooltipEventArgs,n.bind(s))}},a.prototype.beforeOpenCallback=function(e,t,i,s){var n=this;if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(t);else{var r={name:i.effect==="None"&&zs==="Enable"?"FadeIn":this.animation.open.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};if(i.effect==="None"&&(r=void 0),this.openDelay>0){var l=function(){n.mouseTrail&&b.add(t,"mousemove touchstart mouseenter",n.onMouseMove,n),n.popupObj&&(n.popupObj.show(r,t),n.mouseMoveEvent&&n.mouseTrail&&n.onMouseMove(n.mouseMoveEvent))};this.showTimer=setTimeout(l,this.openDelay)}else this.popupObj&&this.popupObj.show(r,t)}s&&this.wireMouseEvents(s,t)},a.prototype.needTemplateReposition=function(){var e=this;return!h(e.viewContainerRef)&&typeof e.viewContainerRef!="string"||this.isReact},a.prototype.checkCollision=function(e,t,i){var s={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},n=_s(this.tooltipEle,this.checkCollideTarget(),t,i);return n.length>0&&(s.horizontal=n.indexOf("left")>=0?"Right":n.indexOf("right")>=0?"Left":this.tooltipPositionX,s.vertical=n.indexOf("top")>=0?"Bottom":n.indexOf("bottom")>=0?"Top":this.tooltipPositionY),s},a.prototype.calculateElementPosition=function(e,t){return[this.isBodyContainer?e.left+t.left:e.left-this.containerElement.getBoundingClientRect().left+t.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+t.top:e.top-this.containerElement.getBoundingClientRect().top+t.top+window.pageYOffset+this.containerElement.scrollTop]},a.prototype.collisionFlipFit=function(e,t,i){var s=this.checkCollision(e,t,i),n=s.position;if(this.tooltipPositionY!==s.vertical&&(n=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?s.vertical+this.tooltipPositionX:this.tooltipPositionX+s.vertical),this.tooltipPositionX!==s.horizontal&&(n.indexOf("Left")===0&&(s.vertical=n==="LeftTop"||n==="LeftCenter"?"Top":"Bottom",n=s.vertical+"Left"),n.indexOf("Right")===0&&(s.vertical=n==="RightTop"||n==="RightCenter"?"Top":"Bottom",n=s.vertical+"Right"),s.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:n},this.trigger("beforeCollision",this.tooltipEventArgs),this.tooltipEventArgs.cancel)n=this.position;else{var r=s.vertical,l=s.horizontal;if(s.position!==n){var o=kt(e,l,r,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,n,l,r);var c=this.getScalingFactor(e),p=this.calculateTooltipOffset(n,c.x,c.y);p.top-=this.getOffSetPosition("TopBottom",n,this.offsetY),p.left-=this.getOffSetPosition("RightLeft",n,this.offsetX),s.position=n;var d=this.calculateElementPosition(o,p);s.left=d[0],s.top=d[1]}else this.adjustArrow(e,n,l,r)}var f={left:s.left,top:s.top},v=this.isBodyContainer?bl(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:this.windowCollision},f):f;this.tooltipEle.style.display="block";var g=M("."+Ti,this.tooltipEle);if(this.showTipPointer&&g!=null&&(n.indexOf("Bottom")===0||n.indexOf("Top")===0)){var m=parseInt(g.style.left,10)-(v.left-s.left);m<0?m=0:m+g.offsetWidth>this.tooltipEle.clientWidth&&(m=this.tooltipEle.clientWidth-g.offsetWidth),g.style.left=m.toString()+"px"}return this.tooltipEle.style.display="",f.left=v.left,f.top=v.top,f},a.prototype.getOffSetPosition=function(e,t,i){return e.indexOf(this.position.split(/(?=[A-Z])/)[0])!==-1&&e.indexOf(t.split(/(?=[A-Z])/)[0])!==-1?2*i:0},a.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},a.prototype.hideTooltip=function(e,t,i){var s=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);var n=function(){s.closeDelay&&s.tooltipEle&&s.isTooltipOpen||s.tooltipHide(e,t,i)};this.hideTimer=setTimeout(n,this.closeDelay)}else this.tooltipHide(e,t,i)},a.prototype.tooltipHide=function(e,t,i){var s=this,n;t?n=this.target?i||t.target:this.element:n=M('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:n,event:t||null,element:this.tooltipEle,isInteracted:!h(t)},this.trigger("beforeClose",this.tooltipEventArgs,function(r){r.cancel?s.isHidden=!1:(s.mouseMoveBeforeRemove(),s.popupHide(e,n,t))})},a.prototype.popupHide=function(e,t,i){t&&i&&this.restoreElement(t),this.isHidden=!0;var s={name:e.effect==="None"&&zs==="Enable"?"FadeOut":this.animation.close.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};e.effect==="None"&&(s=void 0),this.popupObj&&this.popupObj.hide(s)},a.prototype.restoreElement=function(e){this.unwireMouseEvents(e),h(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},a.prototype.clear=function(){var e=this.findTarget();e&&this.restoreElement(e),this.tooltipEle&&(w([this.tooltipEle],xa),E([this.tooltipEle],Ui)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&ft(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},a.prototype.tooltipHover=function(){this.tooltipEle&&(this.isTooltipOpen=!0)},a.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},a.prototype.onMouseOut=function(e){var t=e.relatedTarget;if(t&&!this.mouseTrail){var i=A(t,"."+ba+"."+vs+"."+Ea);i?b.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),this.closeDelay===0&&(this.animation.close.effect==="None"||this.isReact&&typeof this.content!="string")&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear();this.popupObj&&!this.popupObj.element.classList.contains(Ui)&&this.clear()},a.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),b.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},a.prototype.onStickyClose=function(){this.close()},a.prototype.onMouseMove=function(e){var t=0,i=0;if(e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),!h(this.tooltipEle)){bt.stop(this.tooltipEle),w([this.tooltipEle],xa),E([this.tooltipEle],Ui),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var s=this.getScalingFactor(e.target),n=this.calculateTooltipOffset(this.position,s.x,s.y),r=t+n.left+this.offsetX,l=i+n.top+this.offsetY,o=this.checkCollision(e.target,r,l);if(this.tooltipPositionX!==o.horizontal||this.tooltipPositionY!==o.vertical){var c=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?o.vertical+o.horizontal:o.horizontal+o.vertical;o.position=c,this.adjustArrow(e.target,o.position,o.horizontal,o.vertical);var p=this.calculateTooltipOffset(o.position,s.x,s.y);o.left=t+p.left-this.offsetX,o.top=i+p.top-this.offsetY}this.tooltipEle.style.left=o.left+"px",this.tooltipEle.style.top=o.top+"px"}},a.prototype.keyDown=function(e){this.tooltipEle&&e.keyCode===27&&this.close()},a.prototype.touchEnd=function(e){this.tooltipEle&&A(e.target,"."+ya)===null&&!this.isSticky&&this.close()},a.prototype.scrollHandler=function(e){this.tooltipEle&&!this.isSticky&&!A(e.target,"."+ba+"."+vs+"."+Ea)&&!this.isSticky&&this.close()},a.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},a.prototype.preRender=function(){this.tipClass=ji,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},a.prototype.wireEvents=function(e){for(var t=this.getTriggerList(e),i=0,s=t;i<s.length;i++){var n=s[i];if(n==="Custom")return;n==="Focus"&&this.wireFocusEvents(),n==="Click"&&b.add(this.element,V.touchStartEvent,this.targetClick,this),n==="Hover"&&(V.isDevice?(this.touchModule=new is(this.element,{tapHoldThreshold:lh,tapHold:this.tapHoldHandler.bind(this)}),b.add(this.element,V.touchEndEvent,this.touchEndHandler,this)):b.add(this.element,"mouseover",this.targetHover,this))}this.windowResizeBound=this.windowResize.bind(this),this.keyDownBound=this.keyDown.bind(this),this.touchEndBound=this.touchEnd.bind(this),this.scrollWheelBound=this.scrollHandler.bind(this),document.addEventListener("wheel",this.scrollWheelBound),document.addEventListener("scroll",this.scrollWheelBound),document.addEventListener("touchend",this.touchEndBound),document.addEventListener("keydown",this.keyDownBound),window.addEventListener("resize",this.windowResizeBound)},a.prototype.getTriggerList=function(e){return e?(e==="Auto"&&(e=V.isDevice?"Hover":"Hover Focus"),e.split(" ")):[]},a.prototype.wireFocusEvents=function(){if(h(this.target))b.add(this.element,"focusin",this.targetHover,this);else{var e=[].slice.call(Ee(this.target,this.element));if(this.targetsList=e,!h(this.targetsList)&&this.targetsList.length>0)for(var t=0,i=e;t<i.length;t++){var s=i[t];b.add(s,"focus",this.targetHover,this)}else b.add(this.element,"focusin",this.targetHover,this)}},a.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.isSticky||(e.type==="focus"&&b.add(t,"blur",this.onMouseOut,this),e.type==="focusin"&&b.add(t,"focusout",this.onMouseOut,this),e.type==="mouseover"&&b.add(t,"mouseleave",this.onMouseOut,this),this.closeDelay&&(b.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),b.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&this.openDelay===0&&b.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},a.prototype.unwireEvents=function(e){for(var t=this.getTriggerList(e),i=0,s=t;i<s.length;i++){var n=s[i];if(n==="Custom")return;n==="Focus"&&this.unwireFocusEvents(),n==="Click"&&b.remove(this.element,V.touchStartEvent,this.targetClick),n==="Hover"&&(V.isDevice?(this.touchModule&&this.touchModule.destroy(),b.remove(this.element,V.touchEndEvent,this.touchEndHandler)):b.remove(this.element,"mouseover",this.targetHover))}document.removeEventListener("touchend",this.touchEndBound),this.touchEndBound=null,document.removeEventListener("wheel",this.scrollWheelBound),document.removeEventListener("scroll",this.scrollWheelBound),this.scrollWheelBound=null,window.removeEventListener("resize",this.windowResizeBound),this.windowResizeBound=null,document.removeEventListener("keydown",this.keyDownBound),this.keyDownBound=null},a.prototype.unwireFocusEvents=function(){if(h(this.target))b.remove(this.element,"focusin",this.targetHover);else{var e=[].slice.call(Ee(this.target,this.element));if(!h(this.targetsList)&&this.targetsList.length>0)for(var t=0,i=e;t<i.length;t++){var s=i[t];b.remove(s,"focus",this.targetHover)}else b.remove(this.element,"focusin",this.targetHover)}},a.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var t=this.getTriggerList(this.opensOn),i=0,s=t;i<s.length;i++){var n=s[i];n==="Focus"&&(b.remove(e,"blur",this.onMouseOut),b.remove(e,"focusout",this.onMouseOut)),n==="Hover"&&!V.isDevice&&b.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(b.remove(e,"mouseenter",this.tooltipHover),b.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&b.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},a.prototype.findTarget=function(){var e=M('[data-tooltip-id= "'+this.ctrlId+'_content"]',document);return e},a.prototype.getModuleName=function(){return"tooltip"},a.prototype.getPersistData=function(){return this.addOnPersist([])},a.prototype.onPropertyChanged=function(e,t){for(var i=this.findTarget(),s=0,n=Object.keys(e);s<n.length;s++){var r=n[s];switch(r){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=fe(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=fe(e.height),this.reposition(i));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var l=M("."+fs,this.tooltipEle);l&&(l.style.top=l.style.left=null),this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var o=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+o).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var c=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+c).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&w([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&E([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?E([this.tooltipEle],Tn):w([this.tooltipEle],Tn));break;case"isSticky":this.tooltipEle&&i&&(this.renderCloseIcon(),this.reposition(i));break;case"container":h(this.containerElement)||w([this.containerElement],Bn),this.container=e.container,this.tooltipEle&&i&&(this.appendContainer(this),this.reposition(i))}}},a.prototype.open=function(e,t){h(t)&&(t=this.animation.open),h(e)&&(e=this.element),e.style.display!=="none"&&this.showTooltip(e,t)},a.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},a.prototype.refresh=function(e){if(this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e),!h(this.targetsList)&&!h(this.target)){var t=Ee(this.target,this.element);t.length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))}},a.prototype.destroy=function(){u.prototype.destroy.call(this),this.tooltipEle&&ft(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),Ll(),w([this.element],ya),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null;for(var e=Ee('[data-tooltip-id= "'+this.ctrlId+'_content"]',this.element),t=0,i=e;t<i.length;t++){var s=i[t];this.restoreElement(s)}this.containerElement=null,this.tipClass=null,this.tooltipPositionX=null,this.tooltipPositionY=null,this.ctrlId=null,this.tooltipEventArgs=null,this.touchModule=null,this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.targetsList=null},Be([y("auto")],a.prototype,"width",void 0),Be([y("auto")],a.prototype,"height",void 0),Be([y()],a.prototype,"content",void 0),Be([y("body")],a.prototype,"container",void 0),Be([y()],a.prototype,"target",void 0),Be([y("TopCenter")],a.prototype,"position",void 0),Be([y(0)],a.prototype,"offsetX",void 0),Be([y(0)],a.prototype,"offsetY",void 0),Be([y(!0)],a.prototype,"showTipPointer",void 0),Be([y(!0)],a.prototype,"enableHtmlParse",void 0),Be([y(!1)],a.prototype,"windowCollision",void 0),Be([y("Auto")],a.prototype,"tipPointerPosition",void 0),Be([y("Auto")],a.prototype,"opensOn",void 0),Be([y(!1)],a.prototype,"mouseTrail",void 0),Be([y(!1)],a.prototype,"isSticky",void 0),Be([Nt({},ch)],a.prototype,"animation",void 0),Be([y(0)],a.prototype,"openDelay",void 0),Be([y(0)],a.prototype,"closeDelay",void 0),Be([y()],a.prototype,"cssClass",void 0),Be([y(!0)],a.prototype,"enableHtmlSanitizer",void 0),Be([y("")],a.prototype,"htmlAttributes",void 0),Be([q()],a.prototype,"beforeRender",void 0),Be([q()],a.prototype,"beforeOpen",void 0),Be([q()],a.prototype,"afterOpen",void 0),Be([q()],a.prototype,"beforeClose",void 0),Be([q()],a.prototype,"afterClose",void 0),Be([q()],a.prototype,"beforeCollision",void 0),Be([q()],a.prototype,"created",void 0),Be([q()],a.prototype,"destroyed",void 0),a=Be([ot],a),a}(Tt),it={},dh=30,fh=30,Pn=30,vh=30,mh=30,gh=30,yh=36,bh=36,Aa="e-spin-show",Ws="e-spin-hide",Rn="e-spin-material",Mn="e-spin-material3",Fn="e-spin-tailwind3",Vn="e-spin-fabric",Hn="e-spin-fluent",Wn="e-spin-fluent2",qn="e-spin-tailwind",Ch="e-spin-bootstrap",zn="e-spin-bootstrap4",jn="e-spin-bootstrap5",Un="e-spin-high-contrast",Ja="e-spinner-pane",pn="e-spinner-inner",$s="e-path-circle",Sh="e-path-arc",Eh="e-spin-label",Qa="e-spin-template",Gn=null,xh=null;function Xs(u,a){var e;if(u.target){var t,i=h(a)?Wt:a,s=Yh(u.target,i);if(!h(u.cssClass)){var n=u.cssClass.split(" ").filter(function(c){return c.trim()!==""});(e=s.wrap.classList).add.apply(e,n)}if(!h(u.template)||!h(Gn)){var r=h(u.template)?Gn:u.template;s.wrap.classList.add(Qa),jh(s.wrap,r,xh)}else{var l=h(u.type)?Mh(s.wrap):u.type,o=h(u.width)?void 0:u.width;t=Uh(o,l),Fh(l,s.wrap,t,i),h(u.label)||Ah(s.inner_wrap,u.label,i)}s.wrap.classList.add(Ws),s=null}}function Ah(u,a,e){var t=e("div",{});return t.classList.add(Eh),t.innerHTML=a,u.appendChild(t),t}function kh(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"Material",radius:a},rs(u,t,e,Rn),ls(a,u,"Material",Rn)}function wh(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"Tailwind3",radius:a},rs(u,t,e,Fn),ls(a,u,"Tailwind3",Fn)}function Th(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"Material3",radius:a},rs(u,t,e,Mn),ls(a,u,"Material3",Mn)}function Dh(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"Bootstrap4",radius:a},rs(u,t,e,zn),ls(a,u,"Bootstrap4",zn)}function Ih(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"Bootstrap5",radius:a},rs(u,t,e,jn),ls(a,u,"Bootstrap5",jn)}function Oh(u,a,e){var t={},i=0;it[""+a].timeOut=0,t[""+a]=Gh(a,e,0,0);var s={uniqueID:a,container:u,globalInfo:t,timeOutVar:i};Pl(s)}function Lh(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"Fabric",radius:a},ns(u,t,Vn),os(a,u,Vn)}function Nh(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"Fluent",radius:a},ns(u,t,Hn),os(a,u,Hn)}function Bh(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"Fluent2",radius:a},ns(u,t,Wn),os(a,u,Wn)}function Ph(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"Tailwind",radius:a},ns(u,t,qn),os(a,u,qn)}function Rh(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"HighContrast",radius:a},ns(u,t,Un),os(a,u,Un)}function Mh(u){var a=window.getComputedStyle(u,":after").getPropertyValue("content");return a.replace(/['"]+/g,"")}function Fh(u,a,e,t){var i=a.querySelector("."+pn),s=i.querySelector("svg");switch(h(s)||i.removeChild(s),u){case"Material":kh(i,e,t);break;case"Material3":Th(i,e,t);break;case"Fabric":Lh(i,e);break;case"Fluent":Nh(i,e);break;case"Fluent2":Bh(i,e);break;case"Bootstrap":Vh(i,e);break;case"HighContrast":Rh(i,e);break;case"Bootstrap4":Dh(i,e,t);break;case"Bootstrap5":Ih(i,e,t);break;case"Tailwind":case"Tailwind-dark":Ph(i,e);break;case"Tailwind3":wh(i,e,t);break}}function Vh(u,a,e){var t=qt();it[""+t]={timeOut:0,type:"Bootstrap",radius:a},Hh(u,t),Wh(u,a)}function Hh(u,a,e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=64,s=32,n=2;t.setAttribute("id",a),t.setAttribute("class",Ch),t.setAttribute("viewBox","0 0 "+i+" "+i),u.insertBefore(t,u.firstChild);for(var r=0;r<=7;r++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",$s+"_"+r),l.setAttribute("r",n+""),l.setAttribute("transform","translate("+s+","+s+")"),t.appendChild(l)}}function Wh(u,a){var e=u.querySelector("svg.e-spin-bootstrap"),t=0,i=0,s=24;e.style.width=e.style.height=a+"px";for(var n=90,r=0;r<=7;r++){var l=Za(t,i,s,n),o=e.querySelector("."+$s+"_"+r);o.setAttribute("cx",l.x+""),o.setAttribute("cy",l.y+""),n=n>=360?0:n,n=n+45}}function qh(u,a){var e=[],t=u,i=a,s=!1,n=1;r(t);function r(l){e.push(l),(l!==i||n===1)&&(l<=t&&l>1&&!s?l=parseFloat((l-.2).toFixed(2)):l===1?(l=7,l=parseFloat((l+.2).toFixed(2)),s=!0):l<8&&s?(l=parseFloat((l+.2).toFixed(2)),l===8&&(s=!1)):l<=8&&!s&&(l=parseFloat((l-.2).toFixed(2))),++n,r(l))}return e}function zh(u){for(var a=u.querySelector("svg.e-spin-bootstrap"),e=a.getAttribute("id"),t=1;t<=8;t++){var i=u.getElementsByClassName("e-path-circle_"+(t===8?0:t))[0];s(i,t,t,qh(t,t),e)}function s(n,r,l,o,c){var p=0;d(r);function d(f){it[""+c].isAnimate&&(++p,n.setAttribute("r",f+""),p>=o.length&&(p=0),it[c].timeOut=setTimeout(d.bind(null,o[p]),18))}}}function jh(u,a,e){h(e)||u.classList.add(e);var t=u.querySelector(".e-spinner-inner");t.innerHTML=a}function Uh(u,a){var e;switch(a){case"Material":e=dh;break;case"Material3":e=fh;break;case"Fabric":e=Pn;break;case"Tailwind":case"Tailwind-dark":case"Tailwind3":e=Pn;break;case"Fluent":e=vh;break;case"Fluent2":e=mh;break;case"Bootstrap4":e=yh;break;case"Bootstrap5":e=bh;break;default:e=gh}return u=u?parseFloat(u+""):e,a==="Bootstrap"?u:u/2}function Gh(u,a,e,t){return{radius:a,count:e,previousId:t}}function qt(){for(var u="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)u+=a.charAt(Math.floor(Math.random()*a.length));return u}function ns(u,a,e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("id",a),i.setAttribute("class",e);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",$s);var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",Sh),u.insertBefore(i,u.firstChild),i.appendChild(s),i.appendChild(n)}function rs(u,a,e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("class",t),i.setAttribute("id",a),s.setAttribute("class",$s),u.insertBefore(i,u.firstChild),i.appendChild(s)}function Yh(u,a){var e=a("div",{}),t=a("div",{});return e.classList.add(Ja),t.classList.add(pn),t.setAttribute("aria-disabled","true"),u.appendChild(e),e.appendChild(t),{wrap:e,inner_wrap:t}}function Pl(u){var a=1,e=149,t=1333,i=75;Kh(a,e,Xh,t,u.globalInfo[u.uniqueID].count,i,u),u.globalInfo[u.uniqueID].count=++u.globalInfo[u.uniqueID].count%4}function Kh(u,a,e,t,i,s,n){var r=++n.globalInfo[n.uniqueID].previousId,l=new Date().getTime(),o=a-u,c=_h(n.globalInfo[n.uniqueID].radius*2+""),p=Rl(c),d=-90*(n.globalInfo[n.uniqueID].count||0);f(n);function f(g){var m=Math.max(0,Math.min(new Date().getTime()-l,t));v(e(m,u,o,t),g.container),r===g.globalInfo[g.uniqueID].previousId&&m<t?it[g.uniqueID].timeOut=setTimeout(f.bind(null,g),1):Pl(g)}function v(g,m){if(!h(m.querySelector("svg.e-spin-material"))||!h(m.querySelector("svg.e-spin-material3"))||!h(m.querySelector("svg.e-spin-tailwind3"))){var C=void 0;if(!h(m.querySelector("svg.e-spin-material"))&&!h(m.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?C=m.querySelector("svg.e-spin-material"):!h(m.querySelector("svg.e-spin-material3"))&&!h(m.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))?C=m.querySelector("svg.e-spin-material3"):!h(m.querySelector("svg.e-spin-tailwind3"))&&!h(m.querySelector("svg.e-spin-tailwind3").querySelector("path.e-path-circle"))&&(C=m.querySelector("svg.e-spin-tailwind3")),!h(C)){var k=C.querySelector("path.e-path-circle");k.setAttribute("stroke-dashoffset",Ml(c,p,g,s)+""),k.setAttribute("transform","rotate("+d+" "+c/2+" "+c/2+")")}}}}function ls(u,a,e,t){var i=u*2,s=a.querySelector("svg."+t),n=s.querySelector("path.e-path-circle"),r=Rl(i),l=i/2+"px";s.setAttribute("viewBox","0 0 "+i+" "+i),s.style.width=s.style.height=i+"px",s.style.transformOrigin=l+" "+l+" "+l,n.setAttribute("d",$h(i,r)),(e==="Material"||e==="Material3"||e==="Fluent2"||e==="Tailwind3")&&(n.setAttribute("stroke-width",r+""),n.setAttribute("stroke-dasharray",(i-r)*Math.PI*.75+""),n.setAttribute("stroke-dashoffset",Ml(i,r,1,75)+""))}function _h(u){var a=parseFloat(u);return a}function $h(u,a){var e=u/2,t=a/2;return"M"+e+","+t+"A"+(e-t)+","+(e-t)+" 0 1 1 "+t+","+e}function Rl(u){return 10/100*u}function Ml(u,a,e,t){return(u-a)*Math.PI*(3*t/100-e/100)}function Xh(u,a,e,t){var i=(u/=t)*u,s=i*u;return a+e*(6*s*i+-15*i*i+10*s)}function os(u,a,e){var t=u,i=u,s=u*2,n=315,r=45,l=a.querySelector("."+e),o=l.querySelector(".e-path-circle"),c=l.querySelector(".e-path-arc"),p=s/2+"px";o.setAttribute("d",Qh(t,i,u)),c.setAttribute("d",Jh(t,i,u,n,r)),l.setAttribute("viewBox","0 0 "+s+" "+s),l.style.transformOrigin=p+" "+p+" "+p,l.style.width=l.style.height=s+"px"}function Za(u,a,e,t){var i=(t-90)*Math.PI/180;return{x:u+e*Math.cos(i),y:a+e*Math.sin(i)}}function Jh(u,a,e,t,i){var s=Za(u,a,e,i),n=Za(u,a,e,t),r=["M",s.x,s.y,"A",e,e,0,0,0,n.x,n.y].join(" ");return r}function Qh(u,a,e){var t=["M",u,a,"m",-e,0,"a",e,e,0,1,0,e*2,0,"a",e,e,0,1,0,-e*2,0].join(" ");return t}function Js(u){Fl(u,!1),u=null}function Fl(u,a){var e;if(u)if(u.classList.contains(Ja))e=u;else{var t=u.querySelectorAll("."+Ja);if(V.isIE){for(var i=0;i<t.length;i++)if(t[i].parentElement&&t[i].parentElement===u){e=t[i];break}}else e=Array.from(t).find(function(o){return o.parentElement===u})||null}if(u&&e){var s=e.querySelector("."+pn),n=a?!e.classList.contains(Qa)&&!e.classList.contains(Ws):!e.classList.contains(Qa)&&!e.classList.contains(Aa);if(n){var r=e.querySelector("svg");if(h(r))return;var l=r.getAttribute("id");switch(it[""+l].isAnimate=!a,it[""+l].type){case"Material":case"Material3":case"Tailwind3":a?clearTimeout(it[l].timeOut):Oh(s,l,it[l].radius);break;case"Bootstrap":a?clearTimeout(it[l].timeOut):zh(s);break}}a?ri(e,[Ws],[Aa]):ri(e,[Aa],[Ws]),u=null}}function Qs(u){Fl(u,!0),u=null}var Zh=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zt=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},ka={TEXTSHAPE:"e-skeleton-text",CIRCLESHAPE:"e-skeleton-circle",SQUARESHAPE:"e-skeleton-square",RECTANGLESHAPE:"e-skeleton-rectangle",WAVEEFFECT:"e-shimmer-wave",PULSEEFFECT:"e-shimmer-pulse",FADEEFFECT:"e-shimmer-fade",VISIBLENONE:"e-visible-none"},Yn;(function(u){u.Text="Text",u.Circle="Circle",u.Square="Square",u.Rectangle="Rectangle"})(Yn||(Yn={}));var Kn;(function(u){u.Wave="Wave",u.Fade="Fade",u.Pulse="Pulse",u.None="None"})(Kn||(Kn={}));var eu=function(u){Zh(a,u);function a(e,t){return u.call(this,e,t)||this}return a.prototype.getModuleName=function(){return"skeleton"},a.prototype.getPersistData=function(){return this.addOnPersist([])},a.prototype.preRender=function(){this.element.id||(this.element.id=$e("e-"+this.getModuleName())),this.updateCssClass(),Q(this.element,{role:"alert","aria-busy":"true","aria-live":"polite","aria-label":this.label})},a.prototype.render=function(){this.initialize()},a.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];switch(n){case"width":case"height":this.updateDimension();break;case"shape":this.updateShape();break;case"shimmerEffect":this.updateEffect();break;case"visible":this.updateVisibility();break;case"label":this.element.setAttribute("aria-label",this.label);break;case"cssClass":t.cssClass&&w([this.element],t.cssClass.split(" ")),this.updateCssClass();break}}},a.prototype.destroy=function(){u.prototype.destroy.call(this);var e=["role","aria-live","aria-busy","aria-label"],t=[];this.cssClass&&(t=t.concat(this.cssClass.split(" ")));for(var i=0;i<e.length;i++)this.element.removeAttribute(e[parseInt(i.toString(),10)]);t=t.concat(this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[]),t=t.concat(this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[]),w([this.element],t)},a.prototype.initialize=function(){this.updateShape(),this.updateEffect(),this.updateVisibility()},a.prototype.updateShape=function(){if(!h(this.shape)){var e=ka[this.shape.toUpperCase()+"SHAPE"],t=this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[];this.updateDimension(),t&&w([this.element],t),E([this.element],[e])}},a.prototype.updateDimension=function(){var e=!this.width&&["Text","Rectangle"].indexOf(this.shape)>-1?"100%":fe(this.width),t=["Circle","Square"].indexOf(this.shape)>-1?e:fe(this.height);this.element.style.width=e,this.element.style.height=t},a.prototype.updateEffect=function(){var e=this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[];e&&w([this.element],e),h(this.shimmerEffect)||E([this.element],[ka[this.shimmerEffect.toUpperCase()+"EFFECT"]])},a.prototype.updateVisibility=function(){this.element.classList[this.visible?"remove":"add"](ka.VISIBLENONE)},a.prototype.updateCssClass=function(){this.cssClass&&E([this.element],this.cssClass.split(" "))},Zt([y("")],a.prototype,"width",void 0),Zt([y("")],a.prototype,"height",void 0),Zt([y(!0)],a.prototype,"visible",void 0),Zt([y("Text")],a.prototype,"shape",void 0),Zt([y("Wave")],a.prototype,"shimmerEffect",void 0),Zt([y("Loading...")],a.prototype,"label",void 0),Zt([y("")],a.prototype,"cssClass",void 0),a=Zt([ot],a),a}(Tt),Vl=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),We=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},Hl=function(u){Vl(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return We([y()],a.prototype,"text",void 0),We([y()],a.prototype,"value",void 0),We([y()],a.prototype,"iconCss",void 0),We([y()],a.prototype,"groupBy",void 0),We([y()],a.prototype,"htmlAttributes",void 0),We([y()],a.prototype,"disabled",void 0),a}(Dt),O={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:"e-list-item",group:"e-list-group-item",disabled:"e-disabled",grouping:"e-dd-group",virtualList:"e-list-item e-virtual-list"},tu="ItemTemplate",iu="DisplayTemplate",su="SpinnerTemplate",au="ValueTemplate",nu="GroupTemplate",ru="HeaderTemplate",lu="FooterTemplate",ou="NoRecordsTemplate",hu="ActionFailureTemplate",uu="e-hide-group-header",Wl=function(u){Vl(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.preventChange=!1,i.isPreventChange=!1,i.isDynamicDataChange=!1,i.addedNewItem=!1,i.isAddNewItemTemplate=!1,i.isRequesting=!1,i.isVirtualizationEnabled=!1,i.isCustomDataUpdated=!1,i.isAllowFiltering=!1,i.virtualizedItemsCount=0,i.isCheckBoxSelection=!1,i.totalItemCount=0,i.dataCount=0,i.remoteDataCount=-1,i.isRemoteDataUpdated=!1,i.isIncrementalRequest=!1,i.itemCount=30,i.virtualListHeight=0,i.isVirtualScrolling=!1,i.isPreventScrollAction=!1,i.scrollPreStartIndex=0,i.isScrollActionTriggered=!1,i.previousStartIndex=0,i.isMouseScrollAction=!1,i.isKeyBoardAction=!1,i.isScrollChanged=!1,i.isUpwardScrolling=!1,i.startIndex=0,i.currentPageNumber=0,i.pageCount=0,i.isPreventKeyAction=!1,i.generatedDataObject={},i.skeletonCount=32,i.isVirtualTrackHeight=!1,i.virtualSelectAll=!1,i.isVirtualReorder=!1,i.incrementalQueryString="",i.incrementalEndIndex=0,i.incrementalStartIndex=0,i.incrementalPreQueryString="",i.isObjectCustomValue=!1,i.appendUncheckList=!1,i.getInitialData=!1,i.preventPopupOpen=!0,i.virtualSelectAllState=!1,i.CurrentEvent=null,i.isDynamicData=!1,i.isPrimitiveData=!1,i.isCustomFiltering=!1,i.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},i.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},i.selectedValueInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},i}return a.prototype.getPropObject=function(e,t,i){var s=new Object,n=new Object,r=function(o){return o};s[r(e)]=t[r(e)],n[r(e)]=i[r(e)];var l=new Object;return l.newProperty=s,l.oldProperty=n,l},a.prototype.getValueByText=function(e,t,i){var s=null;return h(this.listData)||(t?s=this.checkValueCase(e,!0,i):s=this.checkValueCase(e,!1,i)),s},a.prototype.checkValueCase=function(e,t,i,s){var n=this,r=null;if(s&&(r=e),!h(this.listData)){var l=this.listData,o=this.fields,c=this.typeOfData(l).typeof;if(c==="string"||c==="number"||c==="boolean")for(var p=0,d=l;p<d.length;p++){var f=d[p];h(f)||(i?r=this.checkingAccent(String(f),e,t):t?this.checkIgnoreCase(String(f),e)&&(r=this.getItemValue(String(f),e,t)):this.checkNonIgnoreCase(String(f),e)&&(r=this.getItemValue(String(f),e,t,s)))}else if(t)l.filter(function(g){var m=I(o.value,g);!h(m)&&n.checkIgnoreCase(I(o.text,g).toString(),e)&&(r=I(o.value,g))});else if(s){var v=null;v=r,l.filter(function(g){var m=I(o.value,g);!h(m)&&!h(r)&&m.toString()===v.toString()&&(r=I(o.text,g))})}else l.filter(function(g){n.checkNonIgnoreCase(I(o.text,g),e)&&(r=I(o.value,g))})}return r},a.prototype.checkingAccent=function(e,t,i){var s=B.ignoreDiacritics(String(e)),n=B.ignoreDiacritics(t.toString()),r=null;return i?this.checkIgnoreCase(s,n)&&(r=this.getItemValue(String(e),t,i)):this.checkNonIgnoreCase(String(e),t)&&(r=this.getItemValue(String(e),t,i)),r},a.prototype.checkIgnoreCase=function(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()},a.prototype.checkNonIgnoreCase=function(e,t){return String(e)===t.toString()},a.prototype.getItemValue=function(e,t,i,s){var n=null,r=this.listData,l=this.typeOfData(r).typeof;return s?n=e.toString():i?n=l==="string"?String(e):this.getFormattedValue(String(e)):n=l==="string"?t:this.getFormattedValue(t),n},a.prototype.templateCompiler=function(e){var t=!1;if(typeof e!="function"&&e)try{t=!!Ee(e,document).length}catch(i){t=!1}return t},a.prototype.l10nUpdate=function(e){var t=this.getModuleName()==="listbox"?this.ulElement:this.list;if(!h(this.noRecordsTemplate)&&this.noRecordsTemplate!=="No records found"||this.actionFailureTemplate!=="Request failed"){var i=e?this.actionFailureTemplate:this.noRecordsTemplate,s=void 0,n=e?this.actionFailureTemplateId:this.noRecordsTemplateId;t.innerHTML="";var r=this.templateCompiler(i);typeof i!="function"&&r?s=Ie(M(i,document).innerHTML.trim()):s=Ie(i);var l=e?"actionFailureTemplate":"noRecordsTemplate",o=void 0;if(this.isReact&&typeof i=="function"?o=s({},this,l,n,this.isStringTemplate,null):o=s({},this,l,n,this.isStringTemplate,null,t),o&&o.length>0)for(var c=0;c<o.length;c++)if(this.getModuleName()==="listbox"&&l==="noRecordsTemplate")if(o[c].nodeName==="#text"){var p=this.createElement("li");p.textContent=o[c].textContent,p.classList.add("e-list-nrt"),p.setAttribute("role","option"),t.appendChild(p)}else o[c].classList.add("e-list-nr-template"),t.appendChild(o[c]);else(o[c]instanceof HTMLElement||o[c]instanceof Text&&o[c].textContent!=="")&&t.appendChild(o[c]);this.renderReactTemplates()}else{var d={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},f=new St(this.getLocaleName(),{},this.locale);f.getConstant("actionFailureTemplate")!==""||f.getConstant("noRecordsTemplate")!==""?this.l10n=f:this.l10n=new St(this.getModuleName()==="listbox"?"listbox":this.getModuleName()==="mention"?"mention":"dropdowns",d,this.locale);var v=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if(this.getModuleName()==="listbox"){var p=this.createElement("li");p.textContent=v,t.appendChild(p),p.classList.add("e-list-nrt"),p.setAttribute("role","option")}else h(t)||(t.innerHTML=v)}},a.prototype.checkAndResetCache=function(){this.isVirtualizationEnabled&&(this.generatedDataObject={},this.virtualItemStartIndex=this.virtualItemEndIndex=0,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.selectedValueInfo=null)},a.prototype.updateIncrementalInfo=function(e,t){this.viewPortInfo.startIndex=e,this.viewPortInfo.endIndex=t,this.updateVirtualItemIndex(),this.isIncrementalRequest=!0,this.resetList(this.dataSource,this.fields,this.query),this.isIncrementalRequest=!1},a.prototype.updateIncrementalView=function(e,t){this.viewPortInfo.startIndex=e,this.viewPortInfo.endIndex=t,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+O.li),this.ulElement=this.list.querySelector("ul")},a.prototype.updateVirtualItemIndex=function(){this.virtualItemStartIndex=this.viewPortInfo.startIndex,this.virtualItemEndIndex=this.viewPortInfo.endIndex,this.virtualListInfo=this.viewPortInfo},a.prototype.getFilteringSkeletonCount=function(){var e=this.skeletonCount;this.getSkeletonCount(!0),this.skeletonCount=this.dataCount<this.itemCount*2&&(!(this.dataSource instanceof P)||this.dataSource instanceof P&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount;var t=!0;if((this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof P)||this.dataSource instanceof P&&this.totalItemCount<=this.itemCount)&&(this.skeletonCount=0,t=!1),!this.list.classList.contains(O.noData)){if(e!==this.skeletonCount&&t?this.UpdateSkeleton(!0,Math.abs(e-this.skeletonCount)):this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl").length>0)this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0&&this.list.querySelector(".e-dropdownbase")){var i=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});this.list.querySelector(".e-dropdownbase").appendChild(i)}this.list.getElementsByClassName("e-virtual-ddl-content").length>0&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},a.prototype.getSkeletonCount=function(e){this.virtualListHeight=this.listContainerHeight!=null?parseInt(this.listContainerHeight,10):this.virtualListHeight;var t=this.virtualListHeight>0&&this.listItemHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;this.skeletonCount=t*4<this.itemCount?this.itemCount:t*4,this.itemCount=e?this.itemCount:this.skeletonCount,this.virtualItemCount=this.itemCount,this.skeletonCount=Math.floor(this.skeletonCount/2)},a.prototype.GetVirtualTrackHeight=function(){var e=this.totalItemCount===this.viewPortInfo.endIndex?this.totalItemCount*this.listItemHeight-this.itemCount*this.listItemHeight:this.totalItemCount*this.listItemHeight;e=this.isVirtualTrackHeight?0:e;var t="height: "+(e-this.itemCount*this.listItemHeight)+"px;";return(this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")&&this.skeletonCount===0?"height: 0px;":t},a.prototype.getTransformValues=function(){var e=this.viewPortInfo.startIndex*this.listItemHeight;e=e-this.skeletonCount*this.listItemHeight,e=this.viewPortInfo.startIndex===0&&this.listData&&this.listData.length===0||this.skeletonCount===0?0:e;var t="transform: translate(0px, "+e+"px);";return t},a.prototype.UpdateSkeleton=function(e,t){var i=this.list.querySelector(".e-virtual-ddl-content"),s=this.list.querySelector(".e-virtual-list");if(i&&(!s||e)&&this.isVirtualizationEnabled)for(var n=e?t:this.skeletonCount,r=0;r<n;r++){var l=this.createElement("li",{className:O.virtualList,styles:"overflow: inherit"});this.isVirtualizationEnabled&&this.itemTemplate&&(l.style.height=this.listItemHeight-parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom,10)+"px");var o=new eu({shape:"Text",height:"10px",width:"95%",cssClass:"e-skeleton-text"});o.appendTo(this.createElement("div")),l.appendChild(o.element),i.firstChild&&i.firstChild.insertBefore(l,i.firstChild.children[0])}},a.prototype.getLocaleName=function(){return"drop-down-base"},a.prototype.getTextByValue=function(e){var t=this.checkValueCase(e,!1,!1,!0);return t},a.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var t=void 0;if(this.properties.allowCustomValue&&this.properties.value&&this.properties.value instanceof Array&&this.properties.value.length>0?t=this.typeOfData(this.properties.value):t=this.typeOfData(this.listData),typeof I(this.fields.value?this.fields.value:"value",t.item)=="number"||t.typeof==="number")return parseFloat(e);if(typeof I(this.fields.value?this.fields.value:"value",t.item)=="boolean"||t.typeof==="boolean")return e==="true"||""+e=="true"}return e},a.prototype.setEnableRtl=function(){h(this.enableRtlElements)||(this.list&&this.enableRtlElements.push(this.list),this.enableRtl?E(this.enableRtlElements,O.rtl):w(this.enableRtlElements,O.rtl))},a.prototype.initialize=function(e){if(this.bindEvent=!0,this.preventPopupOpen=!0,this.actionFailureTemplateId=""+this.element.id+hu,this.element.tagName==="UL"){var t=Ve.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(t,this.fields)}else if(this.element.tagName==="SELECT"){var i=this.dataSource instanceof Array?this.dataSource.length>0:!h(this.dataSource);i?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query,e)},a.prototype.getPersistData=function(){return this.addOnPersist([])},a.prototype.updateDataAttribute=function(e){for(var t=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],i={},s=0;s<this.element.attributes.length;s++)t.indexOf(this.element.attributes[s].name)===-1&&!(this.getModuleName()==="dropdownlist"&&this.element.attributes[s].name==="readonly")&&(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));ae(i,e,i),this.setProperties({htmlAttributes:i},!0)},a.prototype.renderItemsBySelect=function(){var e=this.element,t=e.querySelectorAll("select>optgroup"),i,s=this.getModuleName()==="multiselect"&&this.isGroupChecking&&t.length>0;i=s?{value:"value",text:"text",groupBy:"categeory"}:i={value:"value",text:"text"};var n=[],r=e.querySelectorAll("select>option");if(this.getJSONfromOption(n,r,i),t.length){for(var l=0;l<t.length;l++){var o=t[l],c={};c[i.text]=o.label,c.isHeader=!0;var p=o.querySelectorAll("option");s?this.getJSONfromOption(n,p,i,o.label):(n.push(c),this.getJSONfromOption(n,p,i))}e.querySelectorAll("select>option")}this.updateFields(i.text,i.value,s?i.groupBy:this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss,this.fields.disabled),this.resetList(n,i)},a.prototype.updateFields=function(e,t,i,s,n,r){var l={fields:{text:e,value:t,groupBy:h(i)?this.fields&&this.fields.groupBy:i,htmlAttributes:h(s)?this.fields&&this.fields.htmlAttributes:s,iconCss:h(n)?this.fields&&this.fields.iconCss:n,disabled:h(r)?this.fields&&this.fields.disabled:r}};this.setProperties(l,!0)},a.prototype.getJSONfromOption=function(e,t,i,s){s===void 0&&(s=null);for(var n=0,r=t;n<r.length;n++){var l=r[n],o={};o[i.text]=l.innerText,o[i.value]=h(l.getAttribute(i.value))?l.innerText:l.getAttribute(i.value),h(s)||(o[i.groupBy]=s),e.push(o)}},a.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=""+this.element.id+tu,this.displayTemplateId=""+this.element.id+iu,this.spinnerTemplateId=""+this.element.id+su,this.valueTemplateId=""+this.element.id+au,this.groupTemplateId=""+this.element.id+nu,this.headerTemplateId=""+this.element.id+ru,this.footerTemplateId=""+this.element.id+lu,this.noRecordsTemplateId=""+this.element.id+ou},a.prototype.setListData=function(e,t,i,s){var n=this;t=t||this.fields;var r;this.isActive=!0;var l={cancel:!1,data:e,query:i};this.isPreventChange=this.isAngular&&this.preventChange?!0:this.isPreventChange,this.isRequesting||this.trigger("actionBegin",l,function(o){if(!o.cancel)if(n.isRequesting=!0,n.showSpinner(),e instanceof P){n.isRequested=!0;var c=!1;if(n.isDataFetched){n.emptyDataRequest(t);return}o.data.executeQuery(n.getQuery(o.query)).then(function(k){n.isPreventChange=n.isAngular&&n.preventChange?!0:n.isPreventChange;var T=!0;if(!n.virtualSelectAll){for(var x=n.getQuery(o.query),L=0;L<x.queries.length;L++)x.queries[L].fn==="onWhere"&&(c=!0);if(n.isVirtualizationEnabled&&k.count!==0&&k.count<n.itemCount*2){if(x)for(var L=0;L<x.queries.length;L++)x.queries[L].fn==="onTake"&&(x.queries[L].e.nos=k.count),n.getModuleName()==="multiselect"&&(x.queries[L].e.condition==="or"||x.queries[L].e.operator==="equal")&&!n.isCustomFiltering&&(T=!1)}else if(n.isVirtualTrackHeight=!1,x)for(var L=0;L<x.queries.length;L++)n.getModuleName()==="multiselect"&&(x.queries[L].e&&x.queries[L].e.condition==="or"||x.queries[L].e&&x.queries[L].e.operator==="equal")&&(T=!1)}T&&(n.dataCount=n.totalItemCount=k.count),n.trigger("actionComplete",k,function(N){if(!N.cancel){n.isRequesting=!1,n.isCustomFiltering=!1;var R=N.result;if(n.isIncrementalRequest){r=n.renderItems(R,t);return}if((!n.isVirtualizationEnabled&&R.length===0||n.isVirtualizationEnabled&&R.length===0&&!c)&&(n.isDataFetched=!0),c||(n.remoteDataCount=N.count),n.dataCount=n.virtualSelectAll?n.dataCount:N.count,n.totalItemCount=n.virtualSelectAll?n.totalItemCount:N.count,r=n.renderItems(R,t),n.appendUncheckList=!1,n.onActionComplete(r,R,N),n.groupTemplate&&n.renderGroupTemplate(r),n.isRequested=!1,n.bindChildItems(R,r,t,N),n.getInitialData){n.getInitialData=!1,n.preventPopupOpen=!1;return}n.isVirtualizationEnabled&&n.setCurrentView&&n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),n.keyboardEvent!=null&&n.handleVirtualKeyboardActions(n.keyboardEvent,n.pageCount),n.isVirtualizationEnabled&&(n.getFilteringSkeletonCount(),n.updatePopupPosition()),n.virtualSelectAll&&n.virtualSelectAllData&&(n.virtualSelectionAll(n.virtualSelectAllState,n.liCollections,n.CurrentEvent),n.virtualSelectAllState=!1,n.CurrentEvent=null,n.virtualSelectAll=!1)}})}).catch(function(k){n.isRequested=!1,n.isRequesting=!1,n.onActionFailure(k),n.hideSpinner()})}else{n.isRequesting=!1;var p=!0,d=void 0;if(n.isVirtualizationEnabled&&!n.virtualGroupDataSource&&n.fields.groupBy){var f=new P(n.dataSource).executeLocal(new ee().group(n.fields.groupBy));n.virtualGroupDataSource=f.records}var v=n.isVirtualizationEnabled&&n.virtualGroupDataSource&&!n.isCustomDataUpdated?new P(n.virtualGroupDataSource):new P(o.data);if(d=n.getQuery(o.query).executeLocal(v),!n.virtualSelectAll){var g=n.getQuery(o.query);if(n.isVirtualizationEnabled&&d.count!==0&&d.count<n.itemCount*2&&!n.appendUncheckList){if(g){for(var m=0;m<g.queries.length;m++)g.queries[m].fn==="onTake"&&(g.queries[m].e.nos=d.count,d=g.executeLocal(v)),n.getModuleName()==="multiselect"&&(g.queries[m].e.condition==="or"||g.queries[m].e.operator==="equal")&&!n.isCustomFiltering&&(p=!1);p&&(d=g.executeLocal(v),n.isVirtualTrackHeight=!(n.dataSource instanceof P)&&!n.isCustomDataUpdated)}}else if(n.isVirtualTrackHeight=!1,g)for(var m=0;m<g.queries.length;m++)n.getModuleName()==="multiselect"&&(g.queries[m].e&&g.queries[m].e.condition==="or"||g.queries[m].e&&g.queries[m].e.operator==="equal")&&(p=!1)}p&&!(n.dataSource instanceof P)&&!n.isCustomDataUpdated&&!n.virtualSelectAll&&(n.dataCount=n.totalItemCount=n.virtualSelectAll?d.length:d.count),d=n.isVirtualizationEnabled?d.result:d;var C={cancel:!1,result:d};n.isPreventChange=n.isAngular&&n.preventChange?!0:n.isPreventChange,n.trigger("actionComplete",C,function(k){if(n.isCustomFiltering=!1,n.isIncrementalRequest){r=n.renderItems(k.result,t);return}if(!k.cancel){if(r=n.renderItems(k.result,t),n.onActionComplete(r,k.result,s),n.groupTemplate&&n.renderGroupTemplate(r),n.bindChildItems(k.result,r,t),n.getInitialData){n.getInitialData=!1,n.preventPopupOpen=!1;return}setTimeout(function(){n.getModuleName()==="multiselect"&&n.itemTemplate!=null&&r.childElementCount>0&&(r.children[0].childElementCount>0||n.fields.groupBy&&r.children[1]&&r.children[1].childElementCount>0)&&n.updateDataList()})}})}})},a.prototype.handleVirtualKeyboardActions=function(e,t){},a.prototype.updatePopupState=function(){},a.prototype.updatePopupPosition=function(){},a.prototype.virtualSelectionAll=function(e,t,i){},a.prototype.updateRemoteData=function(){this.setListData(this.dataSource,this.fields,this.query)},a.prototype.bindChildItems=function(e,t,i,s){var n=this;e.length>=100&&this.getModuleName()==="autocomplete"?setTimeout(function(){var r=n.remainingItems(n.sortedData,i);ye(r,t),n.liCollections=n.list.querySelectorAll("."+O.li),n.updateListValues(),n.raiseDataBound(e,s)},0):this.raiseDataBound(e,s)},a.prototype.isObjectInArray=function(e,t){return t.some(function(i){return Object.keys(e).every(function(s){return Object.prototype.hasOwnProperty.call(i,s)&&i[s]===e[s]})})},a.prototype.updateListValues=function(){},a.prototype.findListElement=function(e,t,i,s){var n=null;if(e){for(var r=[].slice.call(e.querySelectorAll(t)),l=0;l<r.length;l++)if(r[l].getAttribute(i)===s+""){n=r[l];break}}return n},a.prototype.raiseDataBound=function(e,t){this.hideSpinner();var i={items:e,e:t};this.trigger("dataBound",i)},a.prototype.remainingItems=function(e,t){var i=new P(e).executeLocal(new ee().skip(100));if(this.itemTemplate){var s=this.templateListItem(i,t);return[].slice.call(s.childNodes)}var n=this.typeOfData(i).typeof;return n==="string"||n==="number"||n==="boolean"?Ve.createListItemFromArray(this.createElement,i,!0,this.listOption(i,t),this):Ve.createListItemFromJson(this.createElement,i,this.listOption(i,t),1,!0,this)},a.prototype.emptyDataRequest=function(e){var t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.isRequesting=!1,this.hideSpinner()},a.prototype.showSpinner=function(){},a.prototype.hideSpinner=function(){},a.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),h(this.list)||E([this.list],O.noData)},a.prototype.onActionComplete=function(e,t,i){if(this.listData=t,this.isVirtualizationEnabled&&!this.isCustomDataUpdated&&!this.virtualSelectAll&&this.notify("setGeneratedData",{module:"VirtualScroll"}),this.getModuleName()!=="listbox"&&e.setAttribute("tabindex","0"),this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.isVirtualizationEnabled||(this.fixedHeaderElement=h(this.fixedHeaderElement)?this.fixedHeaderElement:null),this.getModuleName()==="multiselect"&&this.properties.allowCustomValue&&this.fields.groupBy)for(var s=0;s<e.childElementCount;s++)e.children[s].classList.contains("e-list-group-item")&&(h(e.children[s].innerHTML)||e.children[s].innerHTML==="")&&E([e.children[s]],uu),e.children[0].classList.contains("e-hide-group-header")&&Si(e.children[1],{zIndex:11});h(this.list)||this.isVirtualizationEnabled||(this.list.innerHTML="",this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+O.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent))},a.prototype.postRender=function(e,t,i){if(this.fields.disabled){for(var s=e.querySelectorAll("."+O.li),n=0;n<s.length;n++)if(JSON.parse(JSON.stringify(this.listData[n]))[this.fields.disabled])if(h(this.fields.groupBy))this.disableListItem(s[n]);else{var r=this.listData[n],l=I(this.fields.value?this.fields.value:"value",r),o=e.querySelector('li[data-value="'+l+'"]');h(o)||this.disableListItem(o)}}var c=this.fields.disabled?e.querySelector("."+O.li+":not(.e-disabled"):e.querySelector("."+O.li),p=e.querySelector("."+O.selected);if(c&&!p){if(this.isVirtualizationEnabled&&this.viewPortInfo.startIndex!==0){var d=this.ulElement.querySelectorAll("li."+O.li+":not(.e-virtual-list):not(.e-hide-listitem)");c=d&&d.length>0?d[2]:c}c&&c.classList.add(O.focus)}t.length<=0?(this.l10nUpdate(),E([e],O.noData)):e.classList.remove(O.noData)},a.prototype.getQuery=function(e){return e||(this.query?this.query:new ee)},a.prototype.updateVirtualizationProperties=function(e,t,i){this.isVirtualizationEnabled=!0,this.virtualizedItemsCount=e,this.isAllowFiltering=t,this.isCheckBoxSelection=i},a.prototype.renderGroupTemplate=function(e){if(this.fields.groupBy!==null&&this.dataSource||this.element.querySelector("."+O.group)){var t=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},s=e.querySelectorAll("."+O.group),n=this.templateCompiler(this.groupTemplate);if(typeof this.groupTemplate!="function"&&n){var r=M(this.groupTemplate,document).innerHTML.trim(),l=Ve.renderGroupTemplate(r,t,this.fields.properties,s,i,this);if(this.isGroupChecking)for(var o=0;o<l.length;o++)this.notify("addItem",{module:"CheckBoxSelection",item:l[o]})}else{var l=Ve.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,s,i,this);if(this.isGroupChecking)for(var o=0;o<l.length;o++)this.notify("addItem",{module:"CheckBoxSelection",item:l[o]})}this.renderReactTemplates()}},a.prototype.createListItems=function(e,t){if(e){if(t.groupBy||this.element.querySelector("optgroup")){if(t.groupBy){this.sortOrder!=="None"&&(e=this.getSortedDataSource(e));var i=t.properties||t;e=Ve.groupDataSource(e,i,this.sortOrder)}E([this.list],O.grouping)}else(this.getModuleName()!=="listbox"||this.getModuleName()==="listbox"&&!this.preventDefActionFilter)&&(e=this.getSortedDataSource(e));var s=this.listOption(e,t),n=e.length>100?new P(e).executeLocal(new ee().take(100)):e;return this.sortedData=e,Ve.createList(this.createElement,this.getModuleName()==="autocomplete"?n:e,s,!0,this)}return null},a.prototype.listOption=function(e,t){var i=!h(t.iconCss),s=h(t.properties)?t:t.properties,n=t.text!==null||t.value!==null?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return ae({},n,t,!0)},a.prototype.setFloatingHeader=function(e){!h(this.list)&&!this.list.classList.contains(O.noData)&&(h(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:O.fixedHead}),!h(this.list)&&!this.list.querySelector("li").classList.contains(O.group)&&(this.fixedHeaderElement.style.display="none"),!h(this.fixedHeaderElement)&&!h(this.list)&&nt([this.fixedHeaderElement],this.list),this.setFixedHeader()),!h(this.fixedHeaderElement)&&this.fixedHeaderElement.style.zIndex==="0"&&this.setFixedHeader(),this.scrollStop(e))},a.prototype.scrollStop=function(e,t){for(var i=h(e)?this.list:e.target,s=getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),n=getComputedStyle(this.getValidLi(),null).getPropertyValue("margin-bottom"),r=parseInt(n,10),l=this.getModuleName()==="multiselect"?parseFloat(s):parseInt(s,10),o=Math.round(i.scrollTop/(l+r)),c=this.list.querySelectorAll("li:not(.e-hide-listitem)"),p=this.list.querySelectorAll(".e-virtual-list").length,d=o;d>-1;d--){var f=this.isVirtualizationEnabled?d+p:d;if(this.isVirtualizationEnabled){if(this.fixedHeaderElement&&this.updateGroupHeader(f,c,i))break;t&&(!h(c[f])&&c[f].classList.contains(O.selected)&&this.getModuleName()!=="autocomplete"||!h(c[f])&&c[f].classList.contains(O.focus)&&this.getModuleName())}else if(this.updateGroupHeader(f,c,i))break}},a.prototype.getPageCount=function(e){if(this.list){var t=this.list.classList.contains(O.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height"),i=Math.round(this.list.getBoundingClientRect().height/parseInt(t,10));return e?i:Math.round(i)}else return 0},a.prototype.updateGroupHeader=function(e,t,i){return!h(t[e])&&t[e].classList.contains(O.group)?(this.updateGroupFixedHeader(t[e],i),!0):(this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none",!1)},a.prototype.updateGroupFixedHeader=function(e,t){this.fixedHeaderElement&&(h(e.innerHTML)||(this.fixedHeaderElement.innerHTML=e.innerHTML),this.fixedHeaderElement.style.position="fixed",this.fixedHeaderElement.style.top=this.list.parentElement.offsetTop+this.list.offsetTop-window.scrollY+"px",this.fixedHeaderElement.style.display="block")},a.prototype.getValidLi=function(){return this.isVirtualizationEnabled?this.liCollections[0].classList.contains("e-virtual-list")?this.liCollections[this.skeletonCount]:this.liCollections[0]:this.liCollections[0]},a.prototype.renderItems=function(e,t,i){var s;if(this.itemTemplate&&e){this.getModuleName()==="multiselect"&&this.virtualSelectAll&&(this.virtualSelectAllData=e,e=e.slice(this.virtualItemStartIndex,this.virtualItemEndIndex));var n=e;n&&t.groupBy?(this.sortOrder!=="None"&&(n=this.getSortedDataSource(n)),n=Ve.groupDataSource(n,t.properties,this.sortOrder)):(this.getModuleName()!=="listbox"||this.getModuleName()==="listbox"&&!this.preventDefActionFilter)&&(n=this.getSortedDataSource(n)),this.sortedData=n;var r=n.length>100?new P(n).executeLocal(new ee().take(100)):n;if(s=this.templateListItem(this.getModuleName()==="autocomplete"?r:n,t),this.isIncrementalRequest)return this.incrementalLiCollections=s.querySelectorAll("."+O.li),this.incrementalUlElement=s,this.incrementalListData=e,s;if(this.isVirtualizationEnabled){var l=this.list.querySelector(".e-list-parent"),o=this.list.querySelector(".e-virtual-ddl-content");if(e.length>=this.virtualizedItemsCount&&l&&o||l&&o&&this.isAllowFiltering||l&&o&&this.getModuleName()==="autocomplete"){this.getModuleName()==="multiselect"&&this.isCheckBoxSelection&&this.appendUncheckList&&this.list&&this.list.querySelector(".e-active")?(o.appendChild(s),i=!0):o.replaceChild(s,l);var c=this.list.querySelectorAll(".e-reorder");this.list.querySelector(".e-virtual-ddl-content")&&c&&c.length>0&&!i&&this.list.querySelector(".e-virtual-ddl-content").removeChild(c[0]),this.updateListElements(e)}else o||(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(s),this.updateListElements(e))}}else{if(this.getModuleName()==="multiselect"&&this.virtualSelectAll&&(this.virtualSelectAllData=e,e=e.slice(this.virtualItemStartIndex,this.virtualItemEndIndex)),s=this.createListItems(e,t),this.isIncrementalRequest)return this.incrementalLiCollections=s.querySelectorAll("."+O.li),this.incrementalUlElement=s,this.incrementalListData=e,s;if(this.isVirtualizationEnabled){var l=this.list.querySelector(".e-list-parent:not(.e-reorder)"),o=this.list.querySelector(".e-virtual-ddl-content"),p=!1;(!l&&this.list.querySelector(".e-list-parent.e-reorder")||l&&this.isVirtualReorder&&this.list.querySelector(".e-list-parent.e-reorder"))&&(l=this.list.querySelector(".e-list-parent.e-reorder")),e.length>=this.virtualizedItemsCount&&l&&o||l&&o&&this.isAllowFiltering||l&&o&&(this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")||p?(this.appendUncheckList?o.appendChild(s):o.replaceChild(s,l),this.updateListElements(e)):(!o||!o.firstChild)&&(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(s),this.updateListElements(e))}}return s},a.prototype.createVirtualContent=function(){this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content"}))},a.prototype.updateListElements=function(e){this.liCollections=this.list.querySelectorAll("."+O.li),this.ulElement=this.list.querySelector("ul"),this.listData=e,this.postRender(this.list,e,this.bindEvent)},a.prototype.templateListItem=function(e,t){var i=this.listOption(e,t);i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate;var s=this.templateCompiler(this.itemTemplate),n;if(typeof this.itemTemplate!="function"&&s){var r=M(this.itemTemplate,document).innerHTML.trim();return n=Ve.renderContentTemplate(this.createElement,r,e,t.properties,i,this),this.isVirtualizationEnabled&&this.isReact&&this.renderReactTemplates(),n}else return n=Ve.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,i,this),this.isVirtualizationEnabled&&this.isReact&&this.renderReactTemplates(),n},a.prototype.typeOfData=function(e){for(var t={typeof:null,item:null},i=0;!h(e)&&i<e.length;i++)if(!h(e[i])){var s=typeof e[i]=="string"||typeof e[i]=="number"||typeof e[i]=="boolean",n=s?h(e[i]):h(I(this.fields.value?this.fields.value:"value",e[i]));if(!n)return t={typeof:typeof e[i],item:e[i]}}return t},a.prototype.setFixedHeader=function(){h(this.list)||(this.list.parentElement.style.display="block");var e=0;if(this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(e))){var t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10),i=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10),s=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10),n=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10);e=t+i+s+n}if(!h(this.liCollections)){var r=this.getValidLi().offsetWidth-e;this.fixedHeaderElement.style.width=r.toString()+"px"}Si(this.fixedHeaderElement,{zIndex:10});var l=this.ulElement.querySelector("."+O.group+":not(.e-hide-listitem)");h(l)||(this.fixedHeaderElement.innerHTML=l.innerHTML)},a.prototype.getSortedDataSource=function(e){if(e&&this.sortOrder!=="None"){var t=this.fields.text?this.fields.text:"text";(this.typeOfData(e).typeof==="string"||this.typeOfData(e).typeof==="number"||this.typeOfData(e).typeof==="boolean")&&(t=""),e=Ve.getDataSource(e,Ve.addSorting(this.sortOrder,t))}return e},a.prototype.getIndexByValue=function(e){var t,i=[];this.fields.disabled&&this.getModuleName()==="multiselect"&&this.liCollections?i=this.liCollections:i=this.getItems();for(var s=0;s<i.length;s++)if(!h(e)&&i[s].getAttribute("data-value")===e.toString()){t=s;break}return t},a.prototype.getIndexByValueFilter=function(e,t){var i;if(!t)return null;var s=t.querySelectorAll("li:not(.e-list-group-item)");if(s){for(var n=0;n<s.length;n++)if(!h(e)&&s[n].getAttribute("data-value")===e.toString()){i=n;break}}return i},a.prototype.dispatchEvent=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e&&e.dispatchEvent(i)},a.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&(this.isPrimitiveData=!0,this.updateFields("text","text"))},a.prototype.resetList=function(e,t,i,s){if(this.list){if(this.element.tagName==="SELECT"&&this.element.options.length>0||this.element.tagName==="UL"&&this.element.childNodes.length>0){var n=e instanceof Array?e.length>0:!h(e);!n&&this.selectData&&this.selectData.length>0&&(e=this.selectData)}e=this.getModuleName()==="combobox"&&this.selectData&&e instanceof Array&&e.length<this.selectData.length&&this.addedNewItem?this.selectData:e,this.addedNewItem=!1,this.setListData(e,t,i,s)}},a.prototype.updateSelectElementData=function(e){(e||this.isVirtualizationEnabled)&&h(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},a.prototype.updateSelection=function(){},a.prototype.renderList=function(){this.render()},a.prototype.updateDataSource=function(e,t){this.resetList(this.dataSource),this.totalItemCount=this.dataSource instanceof P?this.dataSource.dataSource.json.length:0},a.prototype.setUpdateInitial=function(e,t,i){this.isDataFetched=!1,this.isPrimitiveData=!1;for(var s={},n=0;e.length>n;n++)t[e[n]]&&e[n]==="fields"?(this.setFields(),s[e[n]]=t[e[n]]):t[e[n]]&&(s[e[n]]=t[e[n]]);Object.keys(s).length>0&&(Object.keys(s).indexOf("dataSource")===-1&&(s.dataSource=this.dataSource),this.getModuleName()==="listbox"?(!this.isReact||this.isReact&&(!h(t.dataSource)||!h(t.sortOrder)))&&this.updateDataSource(s,i):(this.isDynamicData=!0,this.updateDataSource(s,i)))},a.prototype.onPropertyChanged=function(e,t){this.getModuleName()==="dropdownbase"&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];switch(n){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var r=this.ulElement.querySelector("."+O.group);this.fixedHeaderElement.innerHTML=r.innerHTML}break;case"locale":this.list&&!h(this.liCollections)&&this.liCollections.length===0&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex();break}}},a.prototype.render=function(e,t){this.getModuleName()==="listbox"?this.list=this.createElement("div",{className:O.content,attrs:{tabindex:"0"}}):this.list=this.createElement("div",{className:O.content}),this.list.classList.add(O.root),this.setFields();var i={duration:300,selector:"."+O.li};this.rippleFun=Vt(this.list,i);var s=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!h(s))&&!this.isGroupChecking){b.add(this.list,"scroll",this.setFloatingHeader,this);for(var n=this.getScrollableParent(),r=0;r<n.length;r++){var l=n[r];b.add(l,"scroll",this.updateGroupFixedHeader,this)}}if(this.getModuleName()==="dropdownbase"){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),w([this.element],O.root),this.element.style.display="none";var o=this.createElement("div");this.element.parentElement.insertBefore(o,this.element),o.appendChild(this.element),o.appendChild(this.list)}this.setEnableRtl(),t||this.initialize(e)},a.prototype.getScrollableParent=function(){for(var e=getComputedStyle(this.element),t=[],i=/(auto|scroll)/,s=this.element.parentElement;s&&s.tagName!=="HTML";){var n=getComputedStyle(s);!(e.position==="absolute"&&n.position==="static")&&i.test(n.overflow+n.overflowY+n.overflowX)&&t.push(s),s=s.parentElement}return t.push(document),t},a.prototype.removeScrollEvent=function(){this.list&&b.remove(this.list,"scroll",this.setFloatingHeader)},a.prototype.getModuleName=function(){return"dropdownbase"},a.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+O.li)},a.prototype.addItem=function(e,t){if((!this.list||this.list.textContent===this.noRecordsTemplate&&this.getModuleName()!=="listbox")&&this.renderList(),this.sortOrder!=="None"&&h(t)){var i=[].slice.call(this.listData);i.push(e),i=this.getSortedDataSource(i),this.fields.groupBy&&(i=Ve.groupDataSource(i,this.fields.properties,this.sortOrder)),t=i.indexOf(e)}var s=this.getItems().length,n=s===0,r=this.list.querySelector("."+O.selected);e=e instanceof Array?e:[e];var l;l=h(t)||t<0||t>s-1?s:t;var o=this.fields;e&&o.groupBy&&(e=Ve.groupDataSource(e,o.properties));for(var c=[],p=0;p<e.length;p++){var d=e[p],f=d.isHeader,v=this.createElement("li",{className:f?O.group:O.li,id:"option-add-"+p}),g=d instanceof Object?I(o.text,d):d;if(f&&(v.innerText=g),this.itemTemplate&&!f){var m=this.templateCompiler(this.itemTemplate),C=typeof this.itemTemplate!="function"&&m?Ie(M(this.itemTemplate,document).innerHTML.trim()):Ie(this.itemTemplate),k=C(d,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,v);k&&ye(k,v)}else f||v.appendChild(document.createTextNode(g));v.setAttribute("data-value",d instanceof Object?I(o.value,d):d),v.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:v}),c.push(v),this.getModuleName()==="listbox"?(this.listData.splice(n?this.listData.length:l,0,d),this.listData.length!==this.sortedData.length&&(this.sortedData=this.listData)):this.listData.push(d),this.sortOrder==="None"&&h(t)&&l===0&&(l=null),this.getModuleName()==="listbox"?this.updateActionCompleteData(v,d,n?null:l+p):this.updateActionCompleteData(v,d,l),this.trigger("beforeItemRender",{element:v,item:d})}if(s===0&&h(this.list.querySelector("ul")))h(this.list)||(this.list.innerHTML="",this.list.classList.remove(O.noData),this.isAddNewItemTemplate=!0,h(this.ulElement)||this.list.appendChild(this.ulElement)),this.liCollections=c,!h(c)&&!h(this.ulElement)&&ye(c,this.ulElement),this.updateAddItemList(this.list,s);else{this.getModuleName()==="listbox"&&s===0&&(this.ulElement.innerHTML="");for(var T=[],p=0;p<e.length;p++){for(var x=this.ulElement.querySelectorAll(".e-list-group-item"),L=0;L<x.length;L++)T[L]=x[L].innerText;if(T.indexOf(c[p].innerText)>-1&&o.groupBy){for(var L=0;L<x.length;L++)if(T[L]===c[p].innerText){this.sortOrder==="None"?this.ulElement.insertBefore(c[p+1],x[L+1]):this.ulElement.insertBefore(c[p+1],this.ulElement.childNodes[t]),p=p+1;break}}else this.liCollections[l]&&this.liCollections[l].parentNode?this.liCollections[l].parentNode.insertBefore(c[p],this.liCollections[l]):t&&this.getModuleName()==="listbox"?this.ulElement.insertBefore(c[p],this.ulElement.childNodes[t+p]):this.ulElement.appendChild(c[p]);var N=[].slice.call(this.liCollections);N.splice(l,0,c[p]),this.liCollections=N,l+=1,this.getModuleName()==="multiselect"&&this.updateDataList()}}this.getModuleName()==="listbox"&&this.isReact&&this.renderReactTemplates(),(r||t===0)&&this.updateSelection(),this.addedNewItem=!0},a.prototype.isDisabledElement=function(e){return!!(e&&e.classList.contains("e-disabled"))},a.prototype.isDisabledItemByIndex=function(e){return this.fields.disabled&&this.liCollections?this.isDisabledElement(this.liCollections[e]):!1},a.prototype.disableListItem=function(e){e.classList.add("e-disabled"),e.setAttribute("aria-disabled","true"),e.setAttribute("aria-selected","false")},a.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var s=["required","aria-required","form"],n=0;n<s.length;n++)if(e.getAttribute(s[n])){var r=e.getAttribute(s[n]);t.setAttribute(s[n],r),e.removeAttribute(s[n])}},a.prototype.setZIndex=function(){},a.prototype.updateActionCompleteData=function(e,t,i){},a.prototype.updateAddItemList=function(e,t){},a.prototype.updateDataList=function(){},a.prototype.getDataByValue=function(e){if(!h(this.listData)){var t=this.typeOfData(this.listData).typeof;if(t==="string"||t==="number"||t==="boolean")for(var i=0,s=this.listData;i<s.length;i++){var n=s[i];if(!h(n)&&n===e)return n}else for(var r=0,l=this.listData;r<l.length;r++){var n=l[r];if(!h(n)&&I(this.fields.value?this.fields.value:"value",n)===e)return n}}return null},a.prototype.destroy=function(){document&&(b.remove(document,"scroll",this.updateGroupFixedHeader),document.body.contains(this.list)&&(b.remove(this.list,"scroll",this.setFloatingHeader),h(this.rippleFun)||this.rippleFun(),G(this.list))),this.liCollections=null,this.ulElement=null,this.list=null,this.enableRtlElements=null,this.rippleFun=null,u.prototype.destroy.call(this)},We([Nt({text:null,value:null,iconCss:null,groupBy:null,disabled:null},Hl)],a.prototype,"fields",void 0),We([y(null)],a.prototype,"itemTemplate",void 0),We([y(null)],a.prototype,"groupTemplate",void 0),We([y("No records found")],a.prototype,"noRecordsTemplate",void 0),We([y("Request failed")],a.prototype,"actionFailureTemplate",void 0),We([y("None")],a.prototype,"sortOrder",void 0),We([y([])],a.prototype,"dataSource",void 0),We([y(null)],a.prototype,"query",void 0),We([y("StartsWith")],a.prototype,"filterType",void 0),We([y(!0)],a.prototype,"ignoreCase",void 0),We([y(1e3)],a.prototype,"zIndex",void 0),We([y(!1)],a.prototype,"ignoreAccent",void 0),We([y()],a.prototype,"locale",void 0),We([q()],a.prototype,"actionBegin",void 0),We([q()],a.prototype,"actionComplete",void 0),We([q()],a.prototype,"actionFailure",void 0),We([q()],a.prototype,"select",void 0),We([q()],a.prototype,"dataBound",void 0),We([q()],a.prototype,"created",void 0),We([q()],a.prototype,"destroyed",void 0),a=We([ot],a),a}(Tt),se={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",FLOATTEXTCONTENT:"e-float-text-content",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"},en=["title","style","class"],_n="e-input-focus",z;(function(u){var a=!0;function e(S,D){S.element.__eventHandlers={};var W=h(D)?Wt:D,_={container:null,buttons:[],clearButton:null};if(S.floatLabelType,a=S.bindClearAction,h(S.floatLabelType)||S.floatLabelType==="Never"?(_.container=ne(S,se.INPUTGROUP,se.INPUTCUSTOMTAG,"span",W),S.element.parentNode.insertBefore(_.container,S.element),E([S.element],se.INPUT),_.container.appendChild(S.element)):g(S,_,W),n(S),!h(S.properties)&&!h(S.properties.showClearButton)&&S.properties.showClearButton&&(Se(S.properties.showClearButton,S.element,_,!0,W),_.clearButton.setAttribute("role","button"),_.container.classList.contains(se.FLOATINPUT)&&E([_.container],se.INPUTGROUP)),!h(S.buttons))for(var X=0;X<S.buttons.length;X++)_.buttons.push(ea(S.buttons[X],_.container,W));return!h(S.element)&&S.element.tagName==="TEXTAREA"&&E([_.container],se.TEXTAREA),mn(_.container,S.element),_=k(S,_),_e(_.container,W),_}u.createInput=e;function t(S){var D=L(S.element);(D.classList.contains("e-input-group")||D.classList.contains("e-outline")||D.classList.contains("e-filled"))&&D.classList.add("e-input-focus"),S.floatLabelType!=="Never"&&setTimeout(function(){u.calculateWidth(S.element,D)},80)}function i(S){var D=L(S.element);(D.classList.contains("e-input-group")||D.classList.contains("e-outline")||D.classList.contains("e-filled"))&&D.classList.remove("e-input-focus"),S.floatLabelType!=="Never"&&setTimeout(function(){u.calculateWidth(S.element,D)},80)}function s(S){l(S.floatLabelType,S.element)}function n(S){l(S.floatLabelType,S.element);var D=function(){return t(S)},W=function(){return i(S)},_=function(){return s(S)};S.element.addEventListener("focus",D),S.element.addEventListener("blur",W),S.element.addEventListener("input",_),S.element.__eventHandlers.inputFocusHandler={focusHandler:D},S.element.__eventHandlers.inputBlurHandler={blurHandler:W},S.element.__eventHandlers.inputHandler={inputHandler:_}}u.bindInitialEvent=n;function r(S){if(!h(S.element)&&!h(S.element.__eventHandlers)&&!h(S.element.__eventHandlers.inputFocusHandler)&&!h(S.element.__eventHandlers.inputBlurHandler)&&!h(S.element.__eventHandlers.inputHandler)){var D=S.element.__eventHandlers.inputFocusHandler.focusHandler,W=S.element.__eventHandlers.inputBlurHandler.blurHandler,_=S.element.__eventHandlers.inputHandler.inputHandler;S.element.removeEventListener("focus",D),S.element.removeEventListener("blur",W),S.element.removeEventListener("input",_),delete S.element.__eventHandlers.inputFocusHandler,delete S.element.__eventHandlers.inputBlurHandler,delete S.element.__eventHandlers.inputHandler}}function l(S,D){var W=D.value,_=D.parentElement,X=_&&_.parentElement;W!==""&&!h(W)?_&&_.classList.contains("e-input-group")?_.classList.add("e-valid-input"):X&&X.classList.contains("e-input-group")&&X.classList.add("e-valid-input"):S!=="Always"&&(_&&_.classList.contains("e-input-group")?_.classList.remove("e-valid-input"):X&&X.classList.contains("e-input-group")&&X.classList.remove("e-valid-input"))}function o(){var S=L(this).getElementsByClassName("e-float-text")[0];h(S)||(E([S],se.LABELTOP),S.classList.contains(se.LABELBOTTOM)&&w([S],se.LABELBOTTOM))}function c(){var S=L(this);if(S.getElementsByTagName("textarea")[0]?S.getElementsByTagName("textarea")[0].value==="":S.getElementsByTagName("input")[0].value===""){var D=S.getElementsByClassName("e-float-text")[0];h(D)||(D.classList.contains(se.LABELTOP)&&w([D],se.LABELTOP),E([D],se.LABELBOTTOM))}}function p(S){S.addEventListener("focus",o),S.addEventListener("blur",c)}u.wireFloatingEvents=p;function d(S){h(S)||(S.removeEventListener("focus",o),S.removeEventListener("blur",c))}function f(S){K(S.element,S.floatLabelType)}function v(S){K(S.element,S.floatLabelType)}function g(S,D,W){var _=h(W)?Wt:W;S.floatLabelType==="Auto"&&p(S.element),h(D.container)?(D.container=ne(S,se.FLOATINPUT,se.FLOATCUSTOMTAG,"div",_),D.container.classList.add(se.INPUTGROUP),S.element.parentNode&&S.element.parentNode.insertBefore(D.container,S.element)):(h(S.customTag)||D.container.classList.add(se.FLOATCUSTOMTAG),D.container.classList.add(se.FLOATINPUT));var X=_("span",{className:se.FLOATLINE}),te=_("label",{className:se.FLOATTEXT});if(!h(S.element.id)&&S.element.id!==""&&(te.id="label_"+S.element.id.replace(/ /g,"_"),Q(S.element,{"aria-labelledby":te.id})),!h(S.element.placeholder)&&S.element.placeholder!==""&&(te.innerText=J(S.element.placeholder),S.element.removeAttribute("placeholder")),!h(S.properties)&&!h(S.properties.placeholder)&&S.properties.placeholder!==""&&(te.innerText=J(S.properties.placeholder)),te.innerText||D.container.classList.add(se.NOFLOATLABEL),D.container.classList.contains("e-float-icon-left")){var ke=D.container.querySelector(".e-input-in-wrap");ke.appendChild(S.element),ke.appendChild(X),ke.appendChild(te)}else D.container.appendChild(S.element),D.container.appendChild(X),D.container.appendChild(te);if(x(S.element.value,te),S.floatLabelType==="Always"&&(te.classList.contains(se.LABELBOTTOM)&&w([te],se.LABELBOTTOM),E([te],se.LABELTOP)),S.floatLabelType==="Auto"){var pt=function(){return f(S)},st=function(){return v(S)};S.element.addEventListener("input",pt),S.element.addEventListener("blur",st),S.element.__eventHandlers.floatInputHandler={inputFloatHandler:pt},S.element.__eventHandlers.floatBlurHandler={blurFloatHandler:st}}else m(S);h(S.element.getAttribute("id"))||te.setAttribute("for",S.element.getAttribute("id"))}function m(S){if(!h(S.element)&&!h(S.element.__eventHandlers)&&!h(S.element.__eventHandlers.floatInputHandler)&&!h(S.element.__eventHandlers.floatBlurHandler)){var D=S.element.__eventHandlers.floatInputHandler.inputFloatHandler,W=S.element.__eventHandlers.floatBlurHandler.blurFloatHandler;S.element.removeEventListener("input",D),S.element.removeEventListener("blur",W),delete S.element.__eventHandlers.floatInputHandler,delete S.element.__eventHandlers.floatBlurHandler}}function C(S,D){S==="Always"&&D.classList.contains("e-outline")&&D.classList.add("e-valid-input")}function k(S,D){if(!h(S.properties))for(var W=0,_=Object.keys(S.properties);W<_.length;W++){var X=_[W];switch(X){case"cssClass":U(S.properties.cssClass,[D.container]),C(S.floatLabelType,D.container);break;case"enabled":me(S.properties.enabled,S.element,S.floatLabelType,D.container);break;case"enableRtl":ce(S.properties.enableRtl,[D.container]);break;case"placeholder":Ce(S.properties.placeholder,S.element);break;case"readonly":ve(S.properties.readonly,S.element);break}}return D}function T(S,D,W){h(D)||(S&&!W?w([D],se.CLEARICONHIDE):E([D],se.CLEARICONHIDE))}function x(S,D,W){if(W===void 0&&(W=null),S)E([D],se.LABELTOP),D.classList.contains(se.LABELBOTTOM)&&w([D],se.LABELBOTTOM);else{var _=W!=null?W!==document.activeElement:!0;_&&(D.classList.contains(se.LABELTOP)&&w([D],se.LABELTOP),E([D],se.LABELBOTTOM))}}function L(S){var D=h(S.parentNode)?S:S.parentNode;return D&&D.classList.contains("e-input-in-wrap")&&(D=D.parentNode),D}function N(S,D,W,_){var X=h(_)?Wt:_,te=X("span",{className:se.CLEARICON}),ke=D.container;if(!h(W))ke.appendChild(te);else{var pt=D.container.classList.contains(se.FLOATINPUT)?D.container.querySelector("."+se.FLOATTEXT):S;pt.insertAdjacentElement("afterend",te)}return E([te],se.CLEARICONHIDE),H(S,te),te.setAttribute("aria-label","close"),te}function R(S,D,W){D.classList.contains(se.DISABLE)||D.readOnly||(S.preventDefault(),D!==document.activeElement&&D.focus(),D.value="",E([W],se.CLEARICONHIDE))}function Y(S,D){T(S.value,D)}function Oe(S,D){T(S.value,D,S.readOnly)}function xe(S,D){setTimeout(function(){h(D)||(E([D],se.CLEARICONHIDE),D=!h(S)&&S.classList.contains("e-combobox")?null:D)},200)}function H(S,D,W){if(a===void 0||a){var _=function(pt){return R(pt,S,D)};D.addEventListener("click",_),S.__eventHandlers.clearClickHandler={clickHandlerEvent:_}}var X=function(){return Y(S,D)},te=function(){return Oe(S,D)},ke=function(){return xe(S,D)};S.addEventListener("input",X),S.addEventListener("focus",te),S.addEventListener("blur",ke),S.__eventHandlers.clearInputHandler={inputHandlerEvent:X},S.__eventHandlers.clearFocusHandler={focusHandlerEvent:te},S.__eventHandlers.clearBlurHandler={blurHandlerEvent:ke}}u.wireClearBtnEvents=H;function j(S,D){if(!h(S)&&!h(S.__eventHandlers)){if(!h(S.__eventHandlers.clearClickHandler)){var W=S.__eventHandlers.clearClickHandler.clickHandlerEvent;(a===void 0||a)&&(h(D)||D.removeEventListener("click",W)),delete S.__eventHandlers.clearClickHandler}if(!h(S.__eventHandlers.clearInputHandler)&&!h(S.__eventHandlers.clearFocusHandler)&&!h(S.__eventHandlers.clearBlurHandler)){var _=S.__eventHandlers.clearInputHandler.inputHandlerEvent,X=S.__eventHandlers.clearFocusHandler.focusHandlerEvent,te=S.__eventHandlers.clearBlurHandler.blurHandlerEvent;S.removeEventListener("input",_),S.removeEventListener("focus",X),S.removeEventListener("blur",te),delete S.__eventHandlers.clearInputHandler,delete S.__eventHandlers.clearFocusHandler,delete S.__eventHandlers.clearBlurHandler}}}function F(S,D){D===void 0&&(D=null),r(S),S.floatLabelType==="Auto"&&m(S),S.properties.showClearButton&&j(S.element,D),h(S.buttons)||rt(!1,null,S.buttons),d(S.element),h(S.element)||(delete S.element.__eventHandlers,S.element.classList.contains(se.INPUT)&&S.element.classList.remove(se.INPUT))}u.destroy=F;function K(S,D){var W=L(S);if(W.classList.contains(se.FLOATINPUT)&&D==="Auto"){var _=L(S).getElementsByClassName("e-float-text")[0];x(S.value,_,S)}}function ne(S,D,W,_,X){var te=h(X)?Wt:X,ke;return h(S.customTag)?ke=te(_,{className:D}):(ke=te(S.customTag,{className:D}),ke.classList.add(W)),ke.classList.add("e-control-wrapper"),ke}function J(S){var D="";if(!h(S)&&S!==""){var W=document.createElement("span");W.innerHTML='<input  placeholder="'+S+'"/>';var _=W.children[0];D=_.placeholder}return D}function $(S,D,W,_){if(D.value=S,W!=="Never"&&ie(D,D.parentElement),!h(W)&&W==="Auto"&&K(D,W),!h(_)&&_){var X=L(D);if(!h(X)){var te=X.getElementsByClassName(se.CLEARICON)[0];h(te)||(D.value&&!h(X)&&X.classList.contains("e-input-focus")?w([te],se.CLEARICONHIDE):E([te],se.CLEARICONHIDE))}}l(W,D)}u.setValue=$;function U(S,D,W){!h(W)&&W!==""&&w(D,W.split(" ")),!h(S)&&S!==""&&E(D,S.split(" "))}u.setCssClass=U;function ie(S,D,W){if(!(W!=="multiselect"&&!Kt(S))){var _=W==="multiselect"?S:S.clientWidth-parseInt(getComputedStyle(S,null).getPropertyValue("padding-left"),10);!h(D)&&!h(D.getElementsByClassName("e-float-text-content")[0])&&(D.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&D.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(_<D.getElementsByClassName("e-float-text-content")[0].clientWidth||_===D.getElementsByClassName("e-float-text-content")[0].clientWidth)&&D.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}}u.calculateWidth=ie;function ge(S,D){typeof S=="number"?D.style.width=fe(S):typeof S=="string"&&(D.style.width=S.match(/px|%|em/)?S:fe(S)),ie(D.firstChild,D)}u.setWidth=ge;function Ce(S,D){S=J(S);var W=L(D);if(W.classList.contains(se.FLOATINPUT))if(!h(S)&&S!==""){var _=W.getElementsByClassName("e-float-text-content")[0];_&&_.children[0]?_.children[0].textContent=S:W.getElementsByClassName(se.FLOATTEXT)[0].textContent=S,W.classList.remove(se.NOFLOATLABEL),D.removeAttribute("placeholder")}else{W.classList.add(se.NOFLOATLABEL);var _=W.getElementsByClassName("e-float-text-content")[0];_?_.children[0].textContent="":W.getElementsByClassName(se.FLOATTEXT)[0].textContent=""}else!h(S)&&S!==""?Q(D,{placeholder:S}):D.removeAttribute("placeholder")}u.setPlaceholder=Ce;function ve(S,D,W){S?Q(D,{readonly:""}):D.removeAttribute("readonly"),h(W)||K(D,W)}u.setReadonly=ve;function ce(S,D){S?E(D,se.RTL):w(D,se.RTL)}u.setEnableRtl=ce;function me(S,D,W,_){var X={disabled:"","aria-disabled":"true"},te=!h(_);S?(D.classList.remove(se.DISABLE),le(X,D),te&&w([_],se.DISABLE)):(D.classList.add(se.DISABLE),Me(X,D),te&&E([_],se.DISABLE)),h(W)||K(D,W)}u.setEnabled=me;function Se(S,D,W,_,X){var te=h(X)?Wt:X;S?W.clearButton=N(D,W,_,te):(ft(W.clearButton),W.clearButton=null)}u.setClearButton=Se;function le(S,D){for(var W=0,_=Object.keys(S);W<_.length;W++){var X=_[W],te=L(D);X==="disabled"&&D.classList.remove(se.DISABLE),X==="disabled"&&te.classList.contains(se.INPUTGROUP)&&te.classList.remove(se.DISABLE),X==="placeholder"&&te.classList.contains(se.FLOATINPUT)?te.getElementsByClassName(se.FLOATTEXT)[0].textContent="":D.removeAttribute(X)}}u.removeAttributes=le;function Me(S,D){for(var W=0,_=Object.keys(S);W<_.length;W++){var X=_[W],te=L(D);X==="disabled"&&D.classList.add(se.DISABLE),X==="disabled"&&te.classList.contains(se.INPUTGROUP)&&te.classList.add(se.DISABLE),X==="placeholder"&&te.classList.contains(se.FLOATINPUT)?te.getElementsByClassName(se.FLOATTEXT)[0].textContent=S[""+X]:D.setAttribute(X,S[""+X])}}u.addAttributes=Me;function ht(S){var D=S.container;if(!h(D)&&D.classList.contains(se.FLOATINPUT)){var W=D.querySelector("textarea")?D.querySelector("textarea"):D.querySelector("input"),_=D.querySelector("."+se.FLOATTEXT).textContent,X=D.querySelector(".e-clear-icon")!==null;G(D.querySelector("."+se.FLOATLINE)),G(D.querySelector("."+se.FLOATTEXT)),ri(D,[se.INPUTGROUP],[se.FLOATINPUT]),d(W),Q(W,{placeholder:_}),W.classList.add(se.INPUT),!X&&W.tagName==="INPUT"&&W.removeAttribute("required")}}u.removeFloating=ht;function Ue(S,D,W,_){var X=h(_)?Wt:_,te=A(S,"."+se.INPUTGROUP),ke=te.tagName;ke=ke!=="DIV"&&ke!=="SPAN"?ke:null;var pt={element:S,floatLabelType:D,customTag:ke,properties:{placeholder:W}};if(D!=="Never"){var st=te.querySelector(".e-clear-icon"),zt={container:te};S.classList.remove(se.INPUT),g(pt,zt,X),_e(zt.container,X),ie(pt.element,zt.container);var jt=te.classList.contains("e-float-icon-left");if(h(st))if(jt){var Xl=te.querySelector(".e-input-in-wrap");st=Xl.querySelector(".e-input-group-icon")}else st=te.querySelector(".e-input-group-icon");if(h(st))jt&&(st=te.querySelector(".e-input-group-icon"));else{var Jl=te.querySelector("."+se.FLOATLINE),Ql=te.querySelector("."+se.FLOATTEXT),ia=jt?te.querySelector(".e-input-in-wrap"):te;ia.insertBefore(S,st),ia.insertBefore(Jl,st),ia.insertBefore(Ql,st)}}else m(pt);C(D,S.parentElement)}u.addFloating=Ue;function _e(S,D){if(S.classList.contains("e-outline")&&S.getElementsByClassName("e-float-text")[0]){var W=D("span",{className:se.FLOATTEXTCONTENT});W.innerHTML=S.getElementsByClassName("e-float-text")[0].innerHTML,S.getElementsByClassName("e-float-text")[0].innerHTML="",S.getElementsByClassName("e-float-text")[0].appendChild(W)}}u.createSpanElement=_e;function ct(S,D){for(var W=0;W<D.length;W++)rt(S,D[parseInt(W.toString(),10)].container)}u.setRipple=ct;function rt(S,D,W){var _=[];_.push(W);var X=h(W)?D.querySelectorAll(".e-input-group-icon"):_;if(S&&X.length>0)for(var te=0;te<X.length;te++)X[parseInt(te.toString(),10)].addEventListener("mousedown",hi,!1),X[parseInt(te.toString(),10)].addEventListener("mouseup",us,!1);else if(X.length>0)for(var te=0;te<X.length;te++)X[parseInt(te.toString(),10)].removeEventListener("mousedown",hi,this),X[parseInt(te.toString(),10)].removeEventListener("mouseup",us,this)}function oi(S,D){!S.classList.contains("e-disabled")&&!S.querySelector("input").readOnly&&D.classList.add("e-input-btn-ripple")}function Kt(S){if(!S)return!1;for(var D=S;D&&D!==document.body;){var W=window.getComputedStyle(D);if(W.display==="none")return!1;D=D.parentElement}return!0}function hi(){for(var S=this,D=this.parentElement;!D.classList.contains("e-input-group");)D=D.parentElement;oi(D,S)}function us(){var S=this;setTimeout(function(){S.classList.remove("e-input-btn-ripple")},500)}function fn(S,D){var W=D("span",{className:S});return W.classList.add("e-input-group-icon"),W}function Gl(S,D,W,_,X){var te=typeof D=="string"?D.split(","):D;if(S.toLowerCase()==="append")for(var ke=0,pt=te;ke<pt.length;ke++){var st=pt[ke];ea(st,W,X)}else for(var zt=0,jt=te;zt<jt.length;zt++){var st=jt[zt];vn(st,W,_,X)}W.getElementsByClassName("e-input-group-icon")[0]&&W.getElementsByClassName("e-float-text-overflow")[0]&&W.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")}u.addIcon=Gl;function vn(S,D,W,_){var X=h(_)?Wt:_,te=fn(S,X);D.classList.add("e-float-icon-left");var ke=D.querySelector(".e-input-in-wrap");if(h(ke)){ke=X("span",{className:"e-input-in-wrap"}),W.parentNode.insertBefore(ke,W);var pt=D.querySelectorAll(W.tagName+" ~ *");ke.appendChild(W);for(var st=0;st<pt.length;st++){var zt=pt[parseInt(st.toString(),10)],jt=ke.parentElement;(!zt.classList.contains("e-float-line")||!(jt&&jt.classList.contains("e-filled"))&&jt)&&ke.appendChild(zt)}}return ke.parentNode.insertBefore(te,ke),rt(!0,D,te),te}u.prependSpan=vn;function ea(S,D,W){var _=h(W)?Wt:W,X=fn(S,_),te=D.classList.contains("e-float-icon-left")?D.querySelector(".e-input-in-wrap"):D;return te.appendChild(X),rt(!0,D,X),X}u.appendSpan=ea;function mn(S,D){D.type==="hidden"?S.classList.add("e-hidden"):S.classList.contains("e-hidden")&&S.classList.remove("e-hidden")}u.validateInputType=mn;function Yl(S,D){if(!h(S))for(var W=0,_=Object.keys(S);W<_.length;W++){var X=_[W];en.indexOf(X)<0&&D.setAttribute(X,S[""+X])}}u.updateHTMLAttributesToElement=Yl;function Kl(S,D,W){U(ta(S),[W],ta(D))}u.updateCssClass=Kl;function ta(S){var D=S;return!h(S)&&S!==""&&(D=S.replace(/\s+/g," ").trim()),D}u.getInputValidClassList=ta;function _l(S,D){if(!h(S))for(var W=0,_=Object.keys(S);W<_.length;W++){var X=_[W];if(en.indexOf(X)>-1)if(X==="class"){var te=this.getInputValidClassList(S[""+X]);te!==""&&E([D],te.split(" "))}else if(X==="style"){var ke=D.getAttribute(X);ke=h(ke)?S[""+X]:ke+S[""+X],D.setAttribute(X,ke)}else D.setAttribute(X,S[""+X])}}u.updateHTMLAttributesToWrapper=_l;function $l(S){return!S||/^\s*$/.test(S)}u.isBlank=$l})(z||(z={}));var cu=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),qe=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},pu="e-control-wrapper e-numeric",wa="e-input-group-icon",Ta="e-spin-up",du="e-spin-down",$n="e-error",Di="increment",Gi="decrement",fu=new RegExp("^(-)?(\\d*)$"),vu=".",mu="e-numerictextbox",gu="e-control",Xn="e-input-focus",yu="e-numeric-hidden",Jn=["title","style","class"],Qn=0,Da=function(u){cu(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.preventChange=!1,i.isDynamicChange=!1,i.numericOptions=e,i}return a.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=I("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),w([this.cloneElement],[gu,mu,"e-lib"]),this.angularTagName=null,this.formEle=A(this.element,"form"),this.element.tagName==="EJS-NUMERICTEXTBOX"){this.angularTagName=this.element.tagName;var t=this.createElement("input"),i=0;for(i;i<this.element.attributes.length;i++){var s=this.element.attributes[i].nodeName;s!=="id"&&s!=="class"?(t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML):s==="class"&&t.setAttribute(s,this.element.className.split(" ").filter(function(r){return r.indexOf("ng-")!==0}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(t),this.element=t,Pe("ej2_instances",e,this.element)}Q(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"});var n={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new St("numerictextbox",n,this.locale),this.l10n.getConstant("placeholder")!==""&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",$e("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),this.placeholder===null&&this.updatePlaceholder()},a.prototype.render=function(){this.element.tagName.toLowerCase()==="input"&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(this.value===null||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),this.value!==null&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!this.element.hasAttribute("aria-labelledby")&&!this.element.hasAttribute("placeholder")&&!this.element.hasAttribute("aria-label")&&this.element.setAttribute("aria-label","numerictextbox"),!h(A(this.element,"fieldset"))&&A(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},a.prototype.checkAttributes=function(e){for(var t=e?h(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"],i=0,s=t;i<s.length;i++){var n=s[i];if(!h(this.element.getAttribute(n)))switch(n){case"disabled":if(h(this.numericOptions)||this.numericOptions.enabled===void 0||e){var r=!(this.element.getAttribute(n)==="disabled"||this.element.getAttribute(n)===""||this.element.getAttribute(n)==="true");this.setProperties({enabled:r},!e)}break;case"readonly":if(h(this.numericOptions)||this.numericOptions.readonly===void 0||e){var l=this.element.getAttribute(n)==="readonly"||this.element.getAttribute(n)===""||this.element.getAttribute(n)==="true";this.setProperties({readonly:l},!e)}break;case"placeholder":(h(this.numericOptions)||this.numericOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(h(this.numericOptions)||this.numericOptions.value===void 0||e){var o=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));this.setProperties(Pe(n,o,{}),!e)}break;case"min":if(h(this.numericOptions)||this.numericOptions.min===void 0||e){var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));c!==null&&!isNaN(c)&&this.setProperties(Pe(n,c,{}),!e)}break;case"max":if(h(this.numericOptions)||this.numericOptions.max===void 0||e){var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));p!==null&&!isNaN(p)&&this.setProperties(Pe(n,p,{}),!e)}break;case"step":if(h(this.numericOptions)||this.numericOptions.step===void 0||e){var d=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));d!==null&&!isNaN(d)&&this.setProperties(Pe(n,d,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(n);break;case"name":this.inputName=this.element.getAttribute(n);break;default:{var f=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));(f!==null&&!isNaN(f)||n==="value")&&this.setProperties(Pe(n,f,{}),!0)}break}}},a.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},a.prototype.initCultureFunc=function(){this.instance=new dt(this.locale)},a.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,I("currency",this)!==null&&(Pe("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},a.prototype.createWrapper=function(){var e=this.cssClass;!h(this.cssClass)&&this.cssClass!==""&&(e=this.getNumericValidClassList(this.cssClass));var t=z.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=t,this.container=t.container,this.container.setAttribute("class",pu+" "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&Q(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true","aria-label":"hidden",class:yu}}),this.inputName=this.inputName!==null?this.inputName:this.element.id,this.element.removeAttribute("name"),this.isAngular&&this.angularTagName==="EJS-NUMERICTEXTBOX"&&this.cloneElement.id.length>0?Q(this.hiddenInput,{name:this.cloneElement.id}):Q(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),this.inputStyle!==null&&Q(this.container,{style:this.inputStyle})},a.prototype.updateDataAttribute=function(e){var t={};if(e)t=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var s=0,n=Object.keys(t);s<n.length;s++){var r=n[s];r.indexOf("data")===0&&this.hiddenInput.setAttribute(r,t[""+r])}},a.prototype.updateHTMLAttrToElement=function(){if(!h(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];Jn.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},a.prototype.updateCssClass=function(e,t){z.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(t))},a.prototype.getNumericValidClassList=function(e){var t=e;return!h(e)&&e!==""&&(t=e.replace(/\s+/g," ").trim()),t},a.prototype.updateHTMLAttrToWrapper=function(){if(!h(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(Jn.indexOf(i)>-1)if(i==="class"){var s=this.getNumericValidClassList(this.htmlAttributes[""+i]);s!==""&&E([this.container],s.split(" "))}else if(i==="style"){var n=this.container.getAttribute(i);n=h(n)?this.htmlAttributes[""+i]:n+this.htmlAttributes[""+i],this.container.setAttribute(i,n)}else this.container.setAttribute(i,this.htmlAttributes[""+i])}},a.prototype.setElementWidth=function(e){h(e)||(typeof e=="number"?this.container.style.width=fe(e):typeof e=="string"&&(this.container.style.width=e.match(/px|%|em/)?e:fe(e)))},a.prototype.spinBtnCreation=function(){this.spinDown=z.appendSpan(wa+" "+du,this.container,this.createElement),Q(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=z.appendSpan(wa+" "+Ta,this.container,this.createElement),Q(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},a.prototype.validateMinMax=function(){typeof this.min=="number"&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),typeof this.max=="number"&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),this.decimals!==null&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&Q(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&Q(this.element,{"aria-valuemax":this.max.toString()})},a.prototype.formattedValue=function(e,t){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)},a.prototype.validateStep=function(){this.decimals!==null&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},a.prototype.action=function(e,t){this.isInteract=!0;var i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,e)),this.raiseChangeEvent(t)},a.prototype.checkErrorClass=function(){this.isValidState?w([this.container],$n):E([this.container],$n),Q(this.element,{"aria-invalid":this.isValidState?"false":"true"})},a.prototype.bindClearEvent=function(){this.showClearButton&&b.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},a.prototype.resetHandler=function(e){e.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},a.prototype.clear=function(e){this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="";var t=A(this.element,"form");if(t){var i=this.element.nextElementSibling,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),i.dispatchEvent(s)}},a.prototype.resetFormHandler=function(){this.element.tagName==="EJS-NUMERICTEXTBOX"?this.updateValue(null):this.updateValue(this.inputEleValue)},a.prototype.setSpinButton=function(){h(this.spinDown)||Q(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),h(this.spinUp)||Q(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},a.prototype.wireEvents=function(){b.add(this.element,"focus",this.focusHandler,this),b.add(this.element,"blur",this.focusOutHandler,this),b.add(this.element,"keydown",this.keyDownHandler,this),b.add(this.element,"keyup",this.keyUpHandler,this),b.add(this.element,"input",this.inputHandler,this),b.add(this.element,"keypress",this.keyPressHandler,this),b.add(this.element,"change",this.changeHandler,this),b.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&b.add(this.formEle,"reset",this.resetFormHandler,this))},a.prototype.wireSpinBtnEvents=function(){b.add(this.spinUp,V.touchStartEvent,this.mouseDownOnSpinner,this),b.add(this.spinDown,V.touchStartEvent,this.mouseDownOnSpinner,this),b.add(this.spinUp,V.touchEndEvent,this.mouseUpOnSpinner,this),b.add(this.spinDown,V.touchEndEvent,this.mouseUpOnSpinner,this),b.add(this.spinUp,V.touchMoveEvent,this.touchMoveOnSpinner,this),b.add(this.spinDown,V.touchMoveEvent,this.touchMoveOnSpinner,this)},a.prototype.unwireEvents=function(){b.remove(this.element,"focus",this.focusHandler),b.remove(this.element,"blur",this.focusOutHandler),b.remove(this.element,"keyup",this.keyUpHandler),b.remove(this.element,"input",this.inputHandler),b.remove(this.element,"keydown",this.keyDownHandler),b.remove(this.element,"keypress",this.keyPressHandler),b.remove(this.element,"change",this.changeHandler),b.remove(this.element,"paste",this.pasteHandler),this.formEle&&b.remove(this.formEle,"reset",this.resetFormHandler)},a.prototype.unwireSpinBtnEvents=function(){b.remove(this.spinUp,V.touchStartEvent,this.mouseDownOnSpinner),b.remove(this.spinDown,V.touchStartEvent,this.mouseDownOnSpinner),b.remove(this.spinUp,V.touchEndEvent,this.mouseUpOnSpinner),b.remove(this.spinDown,V.touchEndEvent,this.mouseUpOnSpinner),b.remove(this.spinUp,V.touchMoveEvent,this.touchMoveOnSpinner),b.remove(this.spinDown,V.touchMoveEvent,this.touchMoveOnSpinner)},a.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var t=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(t,e)},a.prototype.raiseChangeEvent=function(e){if(this.inputValue=h(this.inputValue)||isNaN(this.inputValue)?null:this.inputValue,this.prevValue!==this.value||this.prevValue!==this.inputValue){var t={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),this.changeEventArgs.event===void 0&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),Ri(t,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",t)}},a.prototype.pasteHandler=function(){var e=this;if(!(!this.enabled||this.readonly)){var t=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(t)})}},a.prototype.preventHandler=function(){var e=this,t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var i=e.element.selectionStart,s=e.element.selectionStart-1,n=0,r=e.element.value.split(""),l=Pi(e.locale),o=I("decimal",l),c=o.charCodeAt(0);e.element.value[s]===" "&&e.element.selectionStart>0&&!t?(h(e.prevVal)?e.element.value=e.element.value.trim():s!==0?e.element.value=e.prevVal:s===0&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(s,s)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.value[e.element.selectionStart-1].charCodeAt(0)!==45?(r.indexOf(e.element.value[e.element.selectionStart-1])!==r.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===c||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==c)&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(i,e.element.value.length),e.element.setSelectionRange(s,s),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&e.element.value[e.element.selectionStart-2].charCodeAt(0)!==45&&(r.indexOf(e.element.value[e.element.selectionStart-2])!==r.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===c||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==c)&&(e.element.setSelectionRange(s,s),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),e.cursorPosChanged===!0&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),e.element.value.trim()===""&&e.element.setSelectionRange(n,n),e.element.selectionStart>0&&(e.element.value[e.element.selectionStart-1].charCodeAt(0)===45&&e.element.selectionStart>1&&(h(e.prevVal)||(e.element.value=e.prevVal),e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===o&&e.decimals===0&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(i,e.element.value.length))),e.prevVal=e.element.value}})},a.prototype.keyUpHandler=function(){if(!(!this.enabled||this.readonly)){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);!e&&V.isDevice&&this.preventHandler();var t=this.instance.getNumberParser({format:"n"})(this.element.value);t=t===null||isNaN(t)?null:t,this.hiddenInput.value=t||t===0?t.toString():null;var i=A(this.element,"form");if(i){var s=this.element.nextElementSibling,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),s.dispatchEvent(n)}}},a.prototype.inputHandler=function(e){var t=this;if(!(!this.enabled||this.readonly)){var i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),s=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if((s||i)&&V.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==I("decimal",Pi(this.locale))&&this.element.value!==I("minusSign",Pi(this.locale))){var n=this.instance.getNumberParser({format:"n"})(this.element.value);n=isNaN(n)?null:n,t.localChange({value:n}),this.preventChange=!0}if(this.isVue){var r=this.instance.getNumberParser({format:"n"})(this.element.value),l=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),o=new RegExp("[^0-9]+$");(o.test(this.element.value)||(this.elementPrevValue.indexOf(".")!==-1||this.elementPrevValue.indexOf("-")!==-1)&&this.element.value[this.element.value.length-1]==="0")&&(r=this.value);var c={event:e,value:r===null||isNaN(r)?null:r,previousValue:l===null||isNaN(l)?null:l};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",c)}}},a.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(Di,e);break;case 40:e.preventDefault(),this.action(Gi,e);break}},a.prototype.performAction=function(e,t,i){(e===null||isNaN(e))&&(e=0);var s=i===Di?e+t:e-t;return s=this.correctRounding(e,t,s),this.strictMode?this.trimValue(s):s},a.prototype.correctRounding=function(e,t,i){var s=new RegExp("[,.](.*)"),n=s.test(e.toString()),r=s.test(t.toString());if(n||r){var l=n?s.exec(e.toString())[0].length:0,o=r?s.exec(t.toString())[0].length:0,c=Math.max(l,o);return e=this.roundValue(i,c)}return i},a.prototype.roundValue=function(e,t){t=t||0;var i=Math.pow(10,t);return e*=i,e=Math.round(e)/i},a.prototype.updateValue=function(e,t){t&&(this.isInteract=!0),e!==null&&!isNaN(e)&&this.decimals&&(e=this.roundNumber(e,this.decimals)),this.inputValue=e,this.isVue&&this.element&&this.element.hasAttribute("modelvalue")&&this.isDynamicChange||this.changeValue(e===null||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(t)},a.prototype.updateCurrency=function(e,t){Pe(e,t,this.cultureInfo),this.updateValue(this.value)},a.prototype.changeValue=function(e){if(!(e||e===0))e=null,this.setProperties({value:e},!0);else{var t=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,t)},!0)}this.modifyText(),this.strictMode||this.validateState()},a.prototype.modifyText=function(){if(this.value||this.value===0){var e=this.formatNumber(),t=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(t),Q(this.element,{"aria-valuenow":e}),h(this.hiddenInput)||(this.hiddenInput.value=this.value.toString(),this.value!==null&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator)))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},a.prototype.setElementValue=function(e,t){z.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)},a.prototype.validateState=function(){this.isValidState=!0,(this.value||this.value===0)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},a.prototype.getNumberOfDecimals=function(e){var t,i=new RegExp("[eE][-+]?([0-9]+)"),s=e.toString();if(i.test(s)){var n=i.exec(s);h(n)||(s=e.toFixed(Math.min(parseInt(n[1],10),20)))}var r=s.split(".")[1];return t=!r||!r.length?0:r.length,this.decimals!==null&&(t=t<this.decimals?t:this.decimals),t},a.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},a.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},a.prototype.roundNumber=function(e,t){var i=e,s=t||0,n=i.toString().split("e");i=Math.round(+(n[0]+"e"+(n[1]?Number(n[1])+s:s)));var r=i.toString().split("e");return i=+(r[0]+"e"+(r[1]?Number(r[1])-s:-s)),Number(i.toFixed(s))},a.prototype.cancelEvent=function(e){return e.preventDefault(),!1},a.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!V.isDevice&&V.info.version==="11.0"&&e.keyCode===13){var t=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(t,e),!0}if(e.which===0||e.metaKey||e.ctrlKey||e.keyCode===8||e.keyCode===13)return!0;var i=String.fromCharCode(e.which),s=I("decimal",Pi(this.locale)),n=e.code==="NumpadDecimal"&&i!==s;n&&(i=s);var r=this.element.value;if(r=r.substring(0,this.element.selectionStart)+i+r.substring(this.element.selectionEnd),this.numericRegex().test(r)){if(n){var l=this.element.selectionStart+1;this.element.value=r,this.element.setSelectionRange(l,l),e.preventDefault(),e.stopPropagation()}return!0}else return e.preventDefault(),e.stopPropagation(),!1},a.prototype.numericRegex=function(){var e=Pi(this.locale),t=I("decimal",e),i="*";return t===vu&&(t="\\"+t),this.decimals===0&&this.validateDecimalOnType?fu:(this.decimals&&this.validateDecimalOnType&&(i="{0,"+this.decimals+"}"),new RegExp("^\\s*(-)?(((\\d+("+t+"\\d"+i+")?)|("+t+"\\d"+i+")))?$"))},a.prototype.mouseWheel=function(e){e.preventDefault();var t,i=e;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this.action(Di,e):t<0&&this.action(Gi,e),this.cancelEvent(e)},a.prototype.focusHandler=function(e){var t=this;if(clearTimeout(Qn),this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),!(!this.enabled||this.readonly)){if(this.isFocused=!0,this.prevValue=this.value,this.value||this.value===0){var i=this.formatNumber();if(this.setElementValue(i),!this.isPrevFocused)if(!V.isDevice&&V.info.version==="11.0")this.element.setSelectionRange(0,i.length);else{var s=V.isDevice&&V.isIos?600:0;Qn=setTimeout(function(){t.element.setSelectionRange(0,i.length)},s)}}V.isDevice||b.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},a.prototype.focusOutHandler=function(e){var t=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),!(!this.enabled||this.readonly)){if(this.isPrevFocused){if(e.preventDefault(),V.isDevice){var i=this.element.value;this.element.focus(),this.isPrevFocused=!1;var s=this.element;setTimeout(function(){t.setElementValue(i,s)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var n=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(n),V.isDevice||b.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}var r=A(this.element,"form");if(r){var l=this.element.nextElementSibling,o=document.createEvent("FocusEvent");o.initEvent("focusout",!1,!0),l.dispatchEvent(o)}}},a.prototype.mouseDownOnSpinner=function(e){var t=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),!!this.getElementData(e)){this.getElementData(e);var i=e.currentTarget,s=i.classList.contains(Ta)?Di:Gi;b.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){t.isCalled=!0,t.action(s,e)},150),b.add(document,"mouseup",this.mouseUpClick,this)}},a.prototype.touchMoveOnSpinner=function(e){var t;if(e.type==="touchmove"){var i=e.touches;t=i.length&&document.elementFromPoint(i[0].pageX,i[0].pageY)}else t=document.elementFromPoint(e.clientX,e.clientY);t.classList.contains(wa)||clearInterval(this.timeOut)},a.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),V.isDevice||(this.isPrevFocused=!1)),V.isDevice||e.preventDefault(),!!this.getElementData(e)){var t=e.currentTarget,i=t.classList.contains(Ta)?Di:Gi;b.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,e),this.isCalled=!1,b.remove(document,"mouseup",this.mouseUpClick);var s=A(this.element,"form");if(s){var n=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),n.dispatchEvent(r)}}},a.prototype.getElementData=function(e){return e.which&&e.which===3||e.button&&e.button===2||!this.enabled||this.readonly?!1:(clearInterval(this.timeOut),!0)},a.prototype.floatLabelTypeUpdate=function(){z.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),z.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},a.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,this.spinUp&&b.remove(this.spinUp,"mouseleave",this.mouseUpClick),this.spinDown&&b.remove(this.spinDown,"mouseleave",this.mouseUpClick)},a.prototype.increment=function(e){e===void 0&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Di)),this.raiseChangeEvent()},a.prototype.decrement=function(e){e===void 0&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Gi)),this.raiseChangeEvent()},a.prototype.destroy=function(){this.unwireEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),G(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),G(this.spinUp),G(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],t=0;t<e.length;t++)this.element.removeAttribute(e[t]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),G(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,z.destroy({element:this.element,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),u.prototype.destroy.call(this)},a.prototype.getText=function(){return this.element.value},a.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),E([this.container],[Xn]))},a.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),w([this.container],[Xn]))},a.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},a.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];switch(n){case"width":this.setElementWidth(e.width),z.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":z.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":z.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":z.setReadonly(e.readonly,this.element),this.readonly?Q(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),z.validateInputType(this.container,this.element);break;case"placeholder":z.setPlaceholder(e.placeholder,this.element),z.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":Pe(n,I(n,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),z.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":{var r=I(n,e);this.setProperties({currencyCode:r},!0),this.updateCurrency(n,r)}break;case"currencyCode":{var l=I(n,e);this.setProperties({currency:l},!0),this.updateCurrency("currency",l)}break;case"format":Pe(n,I(n,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},a.prototype.updateClearButton=function(e){z.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},a.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():(G(this.spinUp),G(this.spinDown))},a.prototype.getModuleName=function(){return"numerictextbox"},qe([y("")],a.prototype,"cssClass",void 0),qe([y(null)],a.prototype,"value",void 0),qe([y(-Number.MAX_VALUE)],a.prototype,"min",void 0),qe([y(Number.MAX_VALUE)],a.prototype,"max",void 0),qe([y(1)],a.prototype,"step",void 0),qe([y(null)],a.prototype,"width",void 0),qe([y(null)],a.prototype,"placeholder",void 0),qe([y({})],a.prototype,"htmlAttributes",void 0),qe([y(!0)],a.prototype,"showSpinButton",void 0),qe([y(!1)],a.prototype,"readonly",void 0),qe([y(!0)],a.prototype,"enabled",void 0),qe([y(!1)],a.prototype,"showClearButton",void 0),qe([y(!1)],a.prototype,"enablePersistence",void 0),qe([y("n2")],a.prototype,"format",void 0),qe([y(null)],a.prototype,"decimals",void 0),qe([y(null)],a.prototype,"currency",void 0),qe([y(null)],a.prototype,"currencyCode",void 0),qe([y(!0)],a.prototype,"strictMode",void 0),qe([y(!1)],a.prototype,"validateDecimalOnType",void 0),qe([y("Never")],a.prototype,"floatLabelType",void 0),qe([q()],a.prototype,"created",void 0),qe([q()],a.prototype,"destroyed",void 0),qe([q()],a.prototype,"change",void 0),qe([q()],a.prototype,"focus",void 0),qe([q()],a.prototype,"blur",void 0),a=qe([ot],a),a}(Tt),bu=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ii=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s};function Zn(u,a){for(var e=ae({},u),t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];a.indexOf(s)<0&&ll(e,s)}return e}function Cu(u,a){var e=a===40?0:u.childElementCount-1,t=e,i,s=u.querySelector(".e-selected");s&&s.classList.remove("e-selected");for(var n=0,r=u.children.length;n<r;n++)u.children[n].classList.contains("e-focused")&&(i=u.children[n],t=n,i.classList.remove("e-focused"),a===40?t++:t--,t===(a===40?u.childElementCount:-1)&&(t=e));i=u.children[t],t=ql(u,i,t,a),t!==-1&&(E([u.children[t]],"e-focused"),u.children[t].focus())}function ql(u,a,e,t,i){if(i===void 0&&(i=0),(a.classList.contains("e-separator")||a.classList.contains("e-disabled"))&&(e===(t===40?u.childElementCount-1:0)?e=t===40?0:u.childElementCount-1:t===40?e++:e--),a=u.children[e],a.classList.contains("e-separator")||a.classList.contains("e-disabled")){if(i++,i===u.childElementCount)return e=-1;e=ql(u,a,e,t,i)}return e}function Su(u,a){var e=[].slice.call(u.getElementsByClassName("e-blank-icon"));if(e.length){var t=u.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!h(t)){t.classList.contains("e-url")&&(t=t.querySelector(".e-menu-url"));var i=t.querySelector(".e-menu-icon"),s,n=u.classList.contains("e-rtl");n?s={padding:"paddingRight",margin:"marginLeft"}:s={padding:"paddingLeft",margin:"marginRight"};var r=parseInt(getComputedStyle(i).fontSize,10)+parseInt(getComputedStyle(i)[s.margin],10)+parseInt(getComputedStyle(t).paddingLeft,10)+"px";e.forEach(function(l){l.classList.contains("e-url")&&l.querySelector(".e-menu-url")?l.querySelector(".e-menu-url").style[s.padding]=r:l.style[s.padding]=r})}}}var er=function(u){bu(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return Ii([y("")],a.prototype,"iconCss",void 0),Ii([y("")],a.prototype,"id",void 0),Ii([y(!1)],a.prototype,"separator",void 0),Ii([y("")],a.prototype,"text",void 0),Ii([y("")],a.prototype,"url",void 0),Ii([y(!1)],a.prototype,"disabled",void 0),a}(Dt),zl=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ke=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},vt={DISABLED:"e-disabled",FOCUS:"e-focused",ICON:"e-menu-icon",ITEM:"e-item",POPUP:"e-dropdown-popup",RTL:"e-rtl",SEPARATOR:"e-separator",VERTICAL:"e-vertical",POPUPWIDTH:"e-dropdown-popup-width"},Eu=function(u){zl(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return Ke([y("SlideDown")],a.prototype,"effect",void 0),Ke([y(400)],a.prototype,"duration",void 0),Ke([y("ease")],a.prototype,"easing",void 0),a}(Dt),xu=function(u){zl(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.isPopupCreated=!0,i}return a.prototype.preRender=function(){},a.prototype.getPersistData=function(){return this.addOnPersist([])},a.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.createPopupOnClick&&!this.isPopupCreated?(this.createPopup(),this.openPopUp()):this.closePopup()},a.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},a.prototype.addItems=function(e,t){for(var i,s=this.items.length,n=0,r=this.items.length;n<r;n++)if(t===this.items[n].text){s=n;break}for(var l=e.length-1;l>=0;l--)i=new er(this,"items",e[l],!0),this.items.splice(s,0,i);this.canOpen()||this.createItems()},a.prototype.removeItems=function(e,t){for(var i=!1,s=0,n=e.length;s<n;s++)for(var r=0,l=this.items.length;r<l;r++)if(e[s]===(t?this.items[r].id:this.items[r].text)){this.items.splice(r,1),i=!0;break}i&&this.getULElement()&&this.createItems()},a.prototype.createPopup=function(){var e,t=this.createElement("div",{className:this.popupWidth!=="auto"?vt.POPUP+" "+vt.POPUPWIDTH:vt.POPUP,id:this.element.id+"-popup"});if(document.body.appendChild(t),this.dropDown=new Vi(t,{width:this.popupWidth,relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),this.dropDown.element.setAttribute("role","dialog"),this.dropDown.element.setAttribute("aria-label","dropdown menu"),h(this.popupContent)||(this.popupContent.style.display=""),this.dropDown.element.style.position==="fixed"&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),Q(this.element,(e={},e["aria-haspopup"]=this.items.length||this.target?"true":"false",e["aria-expanded"]="false",e.type="button",e)),this.cssClass&&E([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPopupCreated=!0,this.createPopupOnClick){var i=Z(this.activeElem[0],"split-btn");i&&(i.isPopupCreated=!0)}},a.prototype.getTargetElement=function(){return this.createPopupOnClick&&!this.isColorPicker()&&!h(this.popupContent)?this.popupContent:typeof this.target=="string"?M(this.target):this.target},a.prototype.createItems=function(e){var t=this,i=this.items,s=this.hasIcon(this.items,"iconCss"),n,r,l,o,c=this.getULElement();if(c?c.innerHTML="":c=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}}),this.itemTemplate){var p=this.compiletemplate(this.itemTemplate);i.forEach(function(m){var C=t.createElement("li",{className:m.separator?vt.ITEM+" "+vt.SEPARATOR:vt.ITEM,attrs:m.separator?{role:"separator",tabindex:"-1","aria-label":"separator","aria-hidden":"true"}:{role:"menuitem",tabindex:"-1","aria-label":m.text},id:m.id?m.id:$e("e-"+t.getModuleName()+"-item")}),k=p(m,t,"template",null,!1,null,C);k&&ye(k,C),m.disabled&&C.classList.add("e-disabled");var T={item:m,element:C};t.trigger("beforeItemRender",T),T.item.disabled!==m.disabled&&C.classList[T.item.disabled?"add":"remove"]("e-disabled"),c.appendChild(C)}),this.isReact&&this.renderReactTemplates()}else for(var d=0;d<i.length;d++){r=i[d],this.enableHtmlSanitizer&&(r.text=yt.sanitize(r.text));var f=r.text;l=this.createElement("li",{innerHTML:r.url?"":f,className:r.separator?vt.ITEM+" "+vt.SEPARATOR:vt.ITEM,attrs:r.separator?{role:"separator",tabindex:"-1","aria-label":"separator","aria-hidden":"true"}:{role:"menuitem",tabindex:"-1","aria-label":f},id:r.id?r.id:$e("e-"+this.getModuleName()+"-item")}),this.enableHtmlSanitizer?l.textContent=r.url?"":f:l.innerHTML=r.url?"":f,r.url&&(l.appendChild(this.createAnchor(r)),l.classList.add("e-url")),r.iconCss?(n=this.createElement("span",{className:vt.ICON+" "+r.iconCss}),r.url?l.childNodes[0].appendChild(n):l.insertBefore(n,l.childNodes[0])):s&&!r.separator&&l.classList.add("e-blank-icon");var v=r.disabled;r.disabled&&l.classList.add("e-disabled"),o={item:r,element:l},this.trigger("beforeItemRender",o);var g=o.item.disabled;v!==g&&(o.item.disabled?l.classList.add("e-disabled"):l.classList.remove("e-disabled")),c.appendChild(l)}e&&this.getPopUpElement().appendChild(c),s&&Su(this.getPopUpElement())},a.prototype.compiletemplate=function(e){if(this.itemTemplate)try{if(typeof this.itemTemplate!="function"){var t=document.querySelector(this.itemTemplate);if(t)return Ie(t.innerHTML.trim())}return Ie(e)}catch(i){return Ie(e)}},a.prototype.hasIcon=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i][""+t])return!0;return!1},a.prototype.createAnchor=function(e){var t=e.text,i=this.createElement("a",{className:"e-menu-text e-menu-url",attrs:{href:e.url}});return this.enableHtmlSanitizer?i.textContent=t:i.innerHTML=t,i},a.prototype.initialize=function(){this.button=new ts({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=$e("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-label",this.element.textContent?this.element.textContent:"dropdownbutton"),this.target&&!this.isColorPicker()&&!this.createPopupOnClick||!this.createPopupOnClick?this.createPopup():(this.isPopupCreated=!1,this.target&&!this.isColorPicker()&&this.createPopupOnClick&&(this.popupContent=this.getTargetElement(),this.popupContent.style.display="none"))},a.prototype.isColorPicker=function(){if(!this.element)return!1;var e=this.element.previousSibling;return!!(e&&e.classList&&e.classList.contains("e-split-colorpicker"))},a.prototype.appendArrowSpan=function(){this.cssClass=h(this.cssClass)?"":this.cssClass,this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf(vt.VERTICAL)>-1?"bottom":"right")+" e-caret"}))},a.prototype.setActiveElem=function(e){this.activeElem=e},a.prototype.getModuleName=function(){return"dropdown-btn"},a.prototype.canOpen=function(){var e=!1;return this.isPopupCreated&&(e=this.getPopUpElement().classList.contains("e-popup-close")),e},a.prototype.destroy=function(){var e=this;if(u.prototype.destroy.call(this),this.getModuleName()==="dropdown-btn"){var t;this.element.querySelector("span.e-caret")&&G(this.element.querySelector("span.e-caret")),this.cssClass&&(t=this.cssClass.split(" ")),this.button.destroy(),t&&w([this.element],t),w(this.activeElem,["e-active"]);var i=this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"];i.forEach(function(s){e.element.removeAttribute(s)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents()}},a.prototype.destroyPopup=function(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){var e=document.getElementById(this.getPopUpElement().id);e&&(w([e],["e-popup-open","e-popup-close"]),G(e))}b.remove(this.getPopUpElement(),"click",this.clickHandler),b.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&this.dropDown&&(this.dropDown.element=null,this.dropDown=void 0)}this.isPopupCreated=!1;var t=Z(this.activeElem[0],"split-btn");if(this.createPopupOnClick&&t){var i=Z(this.activeElem[1],"dropdown-btn");i&&(i.isPopupCreated=!1)}},a.prototype.getPopUpElement=function(){var e=null;if(!this.dropDown&&this.activeElem[0].classList.contains("e-split-btn")){var t=Z(this.activeElem[1],"dropdown-btn");t&&(this.dropDown=t.dropDown)}return this.dropDown&&(e=this.dropDown.element),e},a.prototype.getULElement=function(){var e=null;return this.getPopUpElement()&&(e=this.getPopUpElement().children[0]),e},a.prototype.wireEvents=function(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||b.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),b.add(this.element,"click",this.clickHandler,this),b.add(this.element,"keydown",this.keyBoardHandler,this),b.add(window,"resize",this.windowResize,this)},a.prototype.windowResize=function(){!this.canOpen()&&this.dropDown&&this.dropDown.refreshPosition(this.element)},a.prototype.popupWireEvents=function(){this.delegateMousedownHandler||(this.delegateMousedownHandler=this.mousedownHandler.bind(this));var e=this.getPopUpElement();this.createPopupOnClick&&b.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),e&&(b.add(e,"click",this.clickHandler,this),b.add(e,"keydown",this.keyBoardHandler,this),this.closeActionEvents&&b.add(e,this.closeActionEvents,this.focusoutHandler,this)),this.rippleFn=Vt(e,{selector:"."+vt.ITEM})},a.prototype.popupUnWireEvents=function(){var e=this.getPopUpElement();this.createPopupOnClick&&b.remove(document,"mousedown touchstart",this.delegateMousedownHandler),e&&e.parentElement&&(b.remove(e,"click",this.clickHandler),b.remove(e,"keydown",this.keyBoardHandler),this.closeActionEvents&&b.remove(e,this.closeActionEvents,this.focusoutHandler))},a.prototype.keyBoardHandler=function(e){if(!(e.target===this.element&&(e.keyCode===9||!e.altKey&&e.keyCode===40||e.keyCode===38)))switch(e.target&&(e.target.classList.contains("e-item")||e.target.parentElement&&e.target.parentElement.classList.contains("e-split-btn-wrapper"))&&e.keyCode===13&&e.preventDefault(),e.keyCode){case 38:case 40:e.altKey&&(e.keyCode===38||e.keyCode===40)?this.keyEventHandler(e):this.upDownKeyHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e);break}},a.prototype.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},a.prototype.upDownKeyHandler=function(e){this.target&&(e.keyCode===38||e.keyCode===40)||(e.preventDefault(),Cu(this.getULElement(),e.keyCode))},a.prototype.keyEventHandler=function(e){if(!(this.target&&(e.keyCode===13||e.keyCode===9))){if(e.keyCode===13&&this.activeElem[0].classList.contains("e-split-btn")){this.triggerSelect(e),this.activeElem[0].focus();return}e.target&&e.target.className.indexOf("e-edit-template")>-1&&e.keyCode===32||(e.keyCode!==9&&e.preventDefault(),e.keyCode===27||e.keyCode===38||e.keyCode===9?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e))}},a.prototype.getLI=function(e){return e.tagName==="LI"?e:A(e,"li")},a.prototype.mousedownHandler=function(e){var t=e.target;this.dropDown&&!this.canOpen()&&this.getPopUpElement()&&!(A(t,'[id="'+this.getPopUpElement().id+'"]')||A(t,'[id="'+this.element.id+'"]'))&&this.closePopup(e)},a.prototype.focusoutHandler=function(e){if(this.isPopupCreated&&!this.canOpen()){var t=e.relatedTarget||e.target;if(t&&t.className.indexOf("e-item")>-1){var i=this.getLI(t);if(i){var s=Array.prototype.indexOf.call(this.getULElement().children,i),n=this.items[s];if(n){var r={element:i,item:n,event:e};this.trigger("select",r)}}}this.closePopup(e)}},a.prototype.clickHandler=function(e){var t=e.target;if(A(t,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&this.target!==""&&!this.isColorPicker()&&!this.createPopupOnClick?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(e):this.closePopup(e):this.isPopupCreated?this.closePopup(e,this.activeElem[0]):(this.createPopup(),this.openPopUp(e));else if(A(t,'[id="'+this.getPopUpElement().id+'"]')){var i=this.getLI(e.target);i&&(this.triggerSelect(e),this.closePopup(e,this.activeElem[0]))}},a.prototype.triggerSelect=function(e){var t,i,s,n=this.getLI(e.target);n&&(i=Array.prototype.indexOf.call(this.getULElement().children,n),s=this.items[i],s&&(t={element:n,item:s,event:e},this.trigger("select",t)))},a.prototype.openPopUp=function(e){var t=this;e===void 0&&(e=null);var i=this.getPopUpElement();if(this.activeElem[0]&&this.activeElem[0].classList.contains("e-dropdown-btn")&&i.style.width&&i.style.width!=="auto"&&this.setWidth(i),!this.target)this.createItems(!0);else if(this.activeElem.length>1){var s=Z(this.activeElem[0],"split-btn");s.isReact&&i.childNodes.length<1&&(s.appendReactElement&&s.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates())}else this.isReact&&i.childNodes.length<1&&(this.appendReactElement&&this.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates());var n=this.getULElement();this.popupWireEvents();var r={element:n,items:this.items,event:e,cancel:!1};this.trigger("beforeOpen",r,function(l){if(!l.cancel){var o=t.getULElement(),c=t.animationSettings.effect!=="None"?{name:t.animationSettings.effect,duration:t.animationSettings.duration,timingFunction:t.animationSettings.easing}:null;if(c&&t.animatePopup(c,o),t.dropDown.show(null,t.element),E([t.element],"e-active"),t.element.setAttribute("aria-expanded","true"),t.element.setAttribute("aria-owns",t.getPopUpElement().id),o&&!t.isSafari()&&o.focus(),t.enableRtl&&o.parentElement.style.left!=="0px"){var p=void 0;t.element.parentElement&&t.element.parentElement.classList.contains("e-split-btn-wrapper")?p=t.element.parentElement.offsetWidth:p=t.element.offsetWidth;var d=o.parentElement.offsetWidth-p,f=parseFloat(o.parentElement.style.left)-d;f<0&&(f=0),o.parentElement.style.left=f+"px"}var v={element:o,items:t.items};t.trigger("open",v),o&&t.isSafari()&&o.focus()}})},a.prototype.animatePopup=function(e,t){new bt(e).animate(t,{begin:function(i){i.element.parentElement.style.height=i.element.parentElement.offsetHeight+"px"}})},a.prototype.setWidth=function(e){var t=fe(e.style.width);if(t.indexOf("%")>-1){var i=this.element.offsetWidth*parseFloat(t)/100;e.style.width=i+"px"}},a.prototype.closePopup=function(e,t){var i=this;e===void 0&&(e=null);var s=this.getULElement(),n={element:s,items:this.items,event:e,cancel:!1};this.trigger("beforeClose",n,function(r){if(r.cancel)s&&s.focus();else{var l=i.getPopUpElement();l&&b.remove(l,"keydown",i.keyBoardHandler),i.popupUnWireEvents();var o=i.getULElement(),c=void 0;o&&(c=o.querySelector(".e-selected")),c&&c.classList.remove("e-selected"),i.dropDown&&i.dropDown.hide(),w(i.activeElem,"e-active"),i.element.setAttribute("aria-expanded","false"),i.element.removeAttribute("aria-owns"),t&&(i.isSafari()?t.focus({preventScroll:!0}):t.focus());var p={element:o,items:i.items};i.trigger("close",p),!i.target&&o&&G(o),(!i.target||i.isColorPicker()||i.target&&!i.isColorPicker())&&i.createPopupOnClick&&i.destroyPopup()}})},a.prototype.unWireEvents=function(){this.createPopupOnClick||b.remove(document,"mousedown touchstart",this.delegateMousedownHandler),b.remove(this.element,"click",this.clickHandler),b.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(b.remove(this.getPopUpElement(),"click",this.clickHandler),b.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler)),b.remove(window,"resize",this.windowResize)},a.prototype.onPropertyChanged=function(e,t){var i=["content","cssClass","iconCss","iconPosition","disabled","enableRtl"];this.button.setProperties(Zn(e,i));var s;this.isPopupCreated&&(s=this.getPopUpElement(),this.dropDown.setProperties(Zn(e,["enableRtl"])));for(var n=0,r=Object.keys(e);n<r.length;n++){var l=r[n];switch(l){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(t.cssClass=h(t.cssClass)?"":t.cssClass,e.cssClass.indexOf(vt.VERTICAL)>-1||t.cssClass.indexOf(vt.VERTICAL)>-1){this.element.querySelector("span.e-caret")||this.appendArrowSpan();var o=this.element.querySelector("span.e-caret");e.cssClass.indexOf(vt.VERTICAL)>-1?ri(o,["e-icon-bottom"],["e-icon-right"]):ri(o,["e-icon-right"],["e-icon-bottom"])}this.isPopupCreated&&(t.cssClass&&w([s],t.cssClass.split(" ")),e.cssClass&&E([s],e.cssClass.replace(/\s+/g," ").trim().split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":e.createPopupOnClick?this.destroyPopup():this.createPopup();break}}},a.prototype.focusIn=function(){this.element.focus()},Ke([y("")],a.prototype,"content",void 0),Ke([y("")],a.prototype,"cssClass",void 0),Ke([y(!1)],a.prototype,"disabled",void 0),Ke([y("")],a.prototype,"iconCss",void 0),Ke([y("Left")],a.prototype,"iconPosition",void 0),Ke([y(!0)],a.prototype,"enableHtmlSanitizer",void 0),Ke([ol([],er)],a.prototype,"items",void 0),Ke([y(!1)],a.prototype,"createPopupOnClick",void 0),Ke([y("")],a.prototype,"target",void 0),Ke([y("")],a.prototype,"closeActionEvents",void 0),Ke([y(null)],a.prototype,"itemTemplate",void 0),Ke([y("auto")],a.prototype,"popupWidth",void 0),Ke([Nt({effect:"None"},Eu)],a.prototype,"animationSettings",void 0),Ke([q()],a.prototype,"beforeItemRender",void 0),Ke([q()],a.prototype,"beforeOpen",void 0),Ke([q()],a.prototype,"beforeClose",void 0),Ke([q()],a.prototype,"close",void 0),Ke([q()],a.prototype,"open",void 0),Ke([q()],a.prototype,"select",void 0),Ke([q()],a.prototype,"created",void 0),a=Ke([ot],a),a}(Tt),Au=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Qe=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},ku="e-clear-icon-hide",qs=function(u){Au(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.previousValue=null,i.isHiddenInput=!1,i.isForm=!1,i.inputPreviousValue=null,i.textboxOptions=e,i}return a.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];switch(n){case"floatLabelType":z.removeFloating(this.textboxWrapper),z.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":z.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":z.setWidth(e.width,this.textboxWrapper.container);break;case"value":{var r=this.isProtectedOnChange;this.isProtectedOnChange=!0,z.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=r,z.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&this.preventChange===!0?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(h(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&h(this.preventChange))&&this.raiseChangeEvent()}break;case"htmlAttributes":this.updateHTMLAttributesToElement(),this.updateHTMLAttributesToWrapper(),this.checkAttributes(!0),this.multiline&&!h(this.textarea)?z.validateInputType(this.textboxWrapper.container,this.textarea):z.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":z.setReadonly(this.readonly,this.respectiveElement);break;case"type":this.respectiveElement.tagName!=="TEXTAREA"&&(this.respectiveElement.setAttribute("type",this.type),z.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":z.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent();break;case"enableRtl":z.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":z.setPlaceholder(this.placeholder,this.respectiveElement),z.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":this.autocomplete!=="on"&&this.autocomplete!==""?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":z.updateCssClass(e.cssClass,t.cssClass,this.textboxWrapper.container);break;case"locale":this.globalize=new dt(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),z.setPlaceholder(this.placeholder,this.respectiveElement);break}}},a.prototype.getModuleName=function(){return"textbox"},a.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=A(this.element,"form"),h(this.formElement)||(this.isForm=!0),this.element.tagName==="EJS-TEXTBOX"){var e=I("ej2_instances",this.element),t=this.multiline?this.createElement("textarea"):this.createElement("input"),i=0;for(i;i<this.element.attributes.length;i++){var s=this.element.attributes[i].nodeName;s!=="id"&&s!=="class"?(t.setAttribute(s,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML,s==="name"&&this.element.removeAttribute("name")):s==="class"&&t.setAttribute(s,this.element.className.split(" ").filter(function(l){return l.indexOf("ng-")!==0}).join(" "))}this.element.appendChild(t),this.element=t,Pe("ej2_instances",e,this.element)}this.updateHTMLAttributesToElement(),this.checkAttributes(!1),(h(this.textboxOptions)||this.textboxOptions.value===void 0)&&this.element.value!==""&&this.setProperties({value:this.element.value},!0),this.element.tagName!=="TEXTAREA"&&this.element.setAttribute("type",this.type),(this.type==="text"||this.element.tagName==="INPUT"&&this.multiline&&this.isReact)&&this.element.setAttribute("role","textbox"),this.globalize=new dt(this.locale);var n={placeholder:this.placeholder};if(this.l10n=new St("textbox",n,this.locale),this.l10n.getConstant("placeholder")!==""&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",$e("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),this.element.tagName==="INPUT"&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",$e("textarea"));for(var r=["placeholder","disabled","value","readonly","type","autocomplete"],i=0;i<this.element.attributes.length;i++){var s=this.element.attributes[i].nodeName;this.element.hasAttribute(s)&&en.indexOf(s)<0&&!(s==="id"||s==="type"||s==="e-mappinguid")&&(this.textarea.setAttribute(s,this.element.attributes[i].nodeValue),r.indexOf(s)<0&&(this.element.removeAttribute(s),i--))}}},a.prototype.checkAttributes=function(e){for(var t=e?h(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"],i=0,s=t;i<s.length;i++){var n=s[i];if(!h(this.element.getAttribute(n)))switch(n){case"disabled":if(h(this.textboxOptions)||this.textboxOptions.enabled===void 0||e){var r=!(this.element.getAttribute(n)==="disabled"||this.element.getAttribute(n)===""||this.element.getAttribute(n)==="true");this.setProperties({enabled:r},!e)}break;case"readonly":if(h(this.textboxOptions)||this.textboxOptions.readonly===void 0||e){var l=this.element.getAttribute(n)==="readonly"||this.element.getAttribute(n)===""||this.element.getAttribute(n)==="true";this.setProperties({readonly:l},!e)}break;case"placeholder":(h(this.textboxOptions)||this.textboxOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":if(h(this.textboxOptions)||this.textboxOptions.autocomplete===void 0||e){var o=this.element.autocomplete==="off"?"off":"on";this.setProperties({autocomplete:o},!e)}break;case"value":(h(this.textboxOptions)||this.textboxOptions.value===void 0||e)&&this.element.value!==""&&this.setProperties({value:this.element.value},!e);break;case"type":(h(this.textboxOptions)||this.textboxOptions.type===void 0||e)&&this.setProperties({type:this.element.type},!e);break}}},a.prototype.render=function(){var e=this.cssClass;!h(this.cssClass)&&this.cssClass!==""&&(e=z.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=z.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttributesToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),h(this.value)||(z.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),h(this.value)||(this.initialValue=this.value,this.setInitialValue()),this.autocomplete!=="on"&&this.autocomplete!==""?this.respectiveElement.autocomplete=this.autocomplete:!h(this.textboxOptions)&&this.textboxOptions.autocomplete!==void 0&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,z.setWidth(this.width,this.textboxWrapper.container),!h(A(this.element,"fieldset"))&&A(this.element,"fieldset").disabled&&(this.enabled=!1),!this.element.hasAttribute("aria-labelledby")&&!this.element.hasAttribute("placeholder")&&!this.element.hasAttribute("aria-label")&&this.element.setAttribute("aria-label","textbox"),this.renderComplete()},a.prototype.updateHTMLAttributesToWrapper=function(){z.updateHTMLAttributesToWrapper(this.htmlAttributes,this.textboxWrapper.container)},a.prototype.updateHTMLAttributesToElement=function(){z.updateHTMLAttributesToElement(this.htmlAttributes,this.respectiveElement?this.respectiveElement:this.multiline&&!h(this.textarea)?this.textarea:this.element)},a.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},a.prototype.wireEvents=function(){b.add(this.respectiveElement,"focus",this.focusHandler,this),b.add(this.respectiveElement,"blur",this.focusOutHandler,this),b.add(this.respectiveElement,"keydown",this.keydownHandler,this),b.add(this.respectiveElement,"input",this.inputHandler,this),b.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&b.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!h(this.textboxWrapper.container.querySelector(".e-float-text"))&&this.floatLabelType==="Auto"&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&b.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},a.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var e=this.textboxWrapper.container.querySelector(".e-float-text");h(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))},a.prototype.resetValue=function(e){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,e==null&&this.textboxWrapper.container.classList.contains("e-valid-input")&&!(this.floatLabelType==="Always"&&this.textboxWrapper.container.classList.contains("e-outline"))&&this.textboxWrapper.container.classList.remove("e-valid-input"),this.isProtectedOnChange=t},a.prototype.resetForm=function(){if(this.isAngular?this.resetValue(""):this.resetValue(this.initialValue),!h(this.textboxWrapper)){var e=this.textboxWrapper.container.querySelector(".e-float-text");!h(e)&&this.floatLabelType!=="Always"&&(h(this.initialValue)||this.initialValue===""?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):this.initialValue!==""&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}},a.prototype.focusHandler=function(e){var t={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("focus",t)},a.prototype.focusOutHandler=function(e){!(this.previousValue===null&&this.value===null&&this.respectiveElement.value==="")&&this.previousValue!==this.value&&this.raiseChangeEvent(e,!0);var t={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("blur",t)},a.prototype.keydownHandler=function(e){(e.keyCode===13||e.keyCode===9)&&!((this.previousValue===null||this.previousValue==="")&&(this.value===null||this.value==="")&&this.respectiveElement.value==="")&&this.setProperties({value:this.respectiveElement.value},!0)},a.prototype.inputHandler=function(e){var t=this,i={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(t.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",i),e.stopPropagation()},a.prototype.changeHandler=function(e){this.setProperties({value:this.respectiveElement.value},!0),this.previousValue!==this.value&&this.raiseChangeEvent(e,!0),e.stopPropagation()},a.prototype.raiseChangeEvent=function(e,t){var i={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:t||!1,isInteracted:t||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value,this.element.tagName==="INPUT"&&this.multiline&&V.info.name==="mozilla"&&(this.element.value=this.respectiveElement.value)},a.prototype.bindClearEvent=function(){this.showClearButton&&(this.enabled?b.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):b.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},a.prototype.resetInputHandler=function(e){if(e.preventDefault(),!this.textboxWrapper.clearButton.classList.contains(ku)||this.textboxWrapper.container.classList.contains("e-static-clear")){z.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0);var t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};if(this.trigger("input",t),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0),A(this.element,"form")){var i=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),i.dispatchEvent(s)}}},a.prototype.unWireEvents=function(){b.remove(this.respectiveElement,"focus",this.focusHandler),b.remove(this.respectiveElement,"blur",this.focusOutHandler),b.remove(this.respectiveElement,"keydown",this.keydownHandler),b.remove(this.respectiveElement,"input",this.inputHandler),b.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&b.remove(this.formElement,"reset",this.resetForm),!h(this.textboxWrapper.container.querySelector(".e-float-text"))&&this.floatLabelType==="Auto"&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&b.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},a.prototype.destroy=function(){this.unWireEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),this.element.tagName==="INPUT"&&this.multiline&&(G(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),h(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),G(this.textboxWrapper.container)),this.textboxWrapper=null,z.destroy({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),u.prototype.destroy.call(this)},a.prototype.addIcon=function(e,t){z.addIcon(e,t,this.textboxWrapper.container,this.respectiveElement,this.createElement)},a.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},a.prototype.addAttributes=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];s==="disabled"?(this.setProperties({enabled:!1},!0),z.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):s==="readonly"?(this.setProperties({readonly:!0},!0),z.setReadonly(this.readonly,this.respectiveElement)):s==="class"?this.respectiveElement.classList.add(e[""+s]):s==="placeholder"?(this.setProperties({placeholder:e[""+s]},!0),z.setPlaceholder(this.placeholder,this.respectiveElement)):s==="rows"&&this.respectiveElement.tagName==="TEXTAREA"?this.respectiveElement.setAttribute(s,e[""+s]):this.respectiveElement.setAttribute(s,e[""+s])}},a.prototype.removeAttributes=function(e){for(var t=0,i=e;t<i.length;t++){var s=i[t];s==="disabled"?(this.setProperties({enabled:!0},!0),z.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):s==="readonly"?(this.setProperties({readonly:!1},!0),z.setReadonly(this.readonly,this.respectiveElement)):s==="placeholder"?(this.setProperties({placeholder:null},!0),z.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(s)}},a.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&E([this.textboxWrapper.container],[_n]))},a.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&w([this.textboxWrapper.container],[_n]))},Qe([y("text")],a.prototype,"type",void 0),Qe([y(!1)],a.prototype,"readonly",void 0),Qe([y(null)],a.prototype,"value",void 0),Qe([y("Never")],a.prototype,"floatLabelType",void 0),Qe([y("")],a.prototype,"cssClass",void 0),Qe([y(null)],a.prototype,"placeholder",void 0),Qe([y("on")],a.prototype,"autocomplete",void 0),Qe([y({})],a.prototype,"htmlAttributes",void 0),Qe([y(!1)],a.prototype,"multiline",void 0),Qe([y(!0)],a.prototype,"enabled",void 0),Qe([y(!1)],a.prototype,"showClearButton",void 0),Qe([y(!1)],a.prototype,"enablePersistence",void 0),Qe([y(null)],a.prototype,"width",void 0),Qe([q()],a.prototype,"created",void 0),Qe([q()],a.prototype,"destroyed",void 0),Qe([q()],a.prototype,"change",void 0),Qe([q()],a.prototype,"blur",void 0),Qe([q()],a.prototype,"focus",void 0),Qe([q()],a.prototype,"input",void 0),a=Qe([ot],a),a}(Tt),wu=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Le=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},pe={root:"e-dropdownlist",hover:O.hover,selected:O.selected,rtl:O.rtl,li:O.li,disable:O.disabled,base:O.root,focus:O.focus,content:O.content,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",resizeIcon:"e-resizer-right e-icons",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden",virtualList:"e-list-item e-virtual-list"},Tu={container:null,buttons:[]},ms=function(u){wu(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.isListSearched=!1,i.preventChange=!1,i.isTouched=!1,i.isFocused=!1,i.autoFill=!1,i.isUpdateHeaderHeight=!1,i.isUpdateFooterHeight=!1,i.isReactTemplateUpdate=!1,i}return a.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),u.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},a.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initialRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},a.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},a.prototype.requiredModules=function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"VirtualScroll"}),e},a.prototype.renderList=function(e,t){u.prototype.render.call(this,e,t),this.dataSource instanceof P||(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0),this.enableVirtualization&&this.isFiltering()&&this.getModuleName()==="combobox"&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+O.li),this.ulElement=this.list.querySelector("ul")),this.unWireListEvents(),this.wireListEvents()},a.prototype.floatLabelChange=function(){if(this.getModuleName()==="dropdownlist"&&this.floatLabelType==="Auto"){var e=this.inputWrapper.container.querySelector(".e-float-text");this.inputElement.value!==""||this.isInteracted?ri(e,["e-label-top"],["e-label-bottom"]):ri(e,["e-label-bottom"],["e-label-top"])}},a.prototype.resetHandler=function(e){e.preventDefault(),this.clearAll(e),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=0)},a.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,this.getModuleName()!=="autocomplete"&&!h(this.ulElement)){var e=this.fields.disabled?this.ulElement.querySelector("."+pe.li+":not(.e-disabled)"):this.ulElement.querySelector("."+pe.li);this.enableVirtualization&&(e=this.liCollections[this.skeletonCount]),e&&e.classList.add(pe.focus)}},a.prototype.clearAll=function(e,t){this.previousItemData=h(this.itemData)?null:this.itemData,(h(t)||!h(t)&&(h(t.dataSource)||!(t.dataSource instanceof P)&&t.dataSource.length===0))&&(this.isActive=!0,this.resetSelection(t));var i=this.getItemData();if(!this.allowObjectBinding&&this.previousValue===i.value||this.allowObjectBinding&&this.previousValue&&this.isObjectInArray(this.previousValue,[this.allowCustom?this.value?this.value:i:i.value?this.getDataByValue(i.value):i])){this.checkAndResetCache(),this.enableVirtualization&&this.list&&this.updateInitialData();return}this.onChangeEvent(e),this.checkAndResetCache(),this.enableVirtualization&&this.updateInitialData()},a.prototype.resetSelection=function(e){this.list&&(!h(e)&&(h(e.dataSource)||!(e.dataSource instanceof P)&&e.dataSource.length===0)?(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource)):(this.allowFiltering&&this.getModuleName()!=="autocomplete"&&!h(this.actionCompleteData.ulElement)&&!h(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement())),h(this.hiddenElement)||(this.hiddenElement.innerHTML=""),h(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(G(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},a.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(i==="class"){var s=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();s!==""&&E([this.inputWrapper.container],s.split(" "))}else if(i==="disabled"&&this.htmlAttributes[""+i]==="disabled")this.enabled=!1,this.setEnable();else if(i==="readonly"&&!h(this.htmlAttributes[""+i]))this.readonly=!0,this.dataBind();else if(i==="style")this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+i]);else if(i==="aria-label")(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&!this.readonly?this.inputElement.setAttribute("aria-label",this.htmlAttributes[""+i]):this.getModuleName()==="dropdownlist"&&this.inputWrapper.container.setAttribute("aria-label",this.htmlAttributes[""+i]);else{var n=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],r=["name","required"];(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&n.push("tabindex"),r.indexOf(i)>-1||i.indexOf("data")===0?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):n.indexOf(i)>-1?i==="placeholder"?z.setPlaceholder(this.htmlAttributes[""+i],this.inputElement):this.inputElement.setAttribute(i,this.htmlAttributes[""+i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}}(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&this.inputWrapper.container.removeAttribute("tabindex")},a.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},a.prototype.setEnableRtl=function(){!h(this.inputElement)&&!h(this.inputElement.parentElement)&&z.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},a.prototype.setEnable=function(){z.setEnabled(this.enabled,this.inputElement),this.enabled?(w([this.inputWrapper.container],pe.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex),this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","false"),this.inputWrapper.container.removeAttribute("disabled"))):(this.hidePopup(),E([this.inputWrapper.container],pe.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1,this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","true"),this.inputWrapper.container.setAttribute("disabled","")))},a.prototype.getPersistData=function(){return this.addOnPersist(["value"])},a.prototype.getLocaleName=function(){return"drop-down-list"},a.prototype.preventTabIndex=function(e){this.getModuleName()==="dropdownlist"&&(e.tabIndex=-1)},a.prototype.targetElement=function(){return h(this.inputWrapper)?null:this.inputWrapper.container},a.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},a.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},a.prototype.getElementByValue=function(e){for(var t,i=this.getItems(),s=0,n=i;s<n.length;s++){var r=n[s];if(this.getFormattedValue(r.getAttribute("data-value"))===e){t=r;break}}return t},a.prototype.initValue=function(){this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.renderList(),this.dataSource instanceof P?this.initialRemoteRender=!0:this.updateValues()},a.prototype.isDisableItemValue=function(e){if(typeof e=="object"){var t=JSON.parse(JSON.stringify(e))[this.fields.value];return this.isDisabledItemByIndex(this.getIndexByValue(t))}return this.isDisabledItemByIndex(this.getIndexByValue(e))},a.prototype.updateValues=function(){if(this.fields.disabled&&(this.value!=null&&(this.value=this.isDisableItemValue(this.value)?null:this.value),this.text!=null&&(this.text=this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?null:this.text),this.index!=null&&(this.index=this.isDisabledItemByIndex(this.index)?null:this.index,this.activeIndex=this.index)),this.selectedValueInfo=this.viewPortInfo,h(this.value))if(this.text&&h(this.value)){var t=this.getElementByText(this.text);if(h(t)){this.setProperties({text:null});return}else this.setSelection(t,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else{var e=this.allowObjectBinding&&!h(this.value)?I(this.fields.value?this.fields.value:"",this.value):this.value;this.setSelection(this.getElementByValue(e),null)}this.setHiddenValue(),z.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},a.prototype.onBlurHandler=function(e){if(this.enabled){var t=e.relatedTarget,i=e.target,s=this.isPreventBlur;if(this.isPreventBlur=!1,s&&!this.isDocumentClick&&this.isPopupOpen&&(!h(i)||!this.isFilterLayout()&&h(t))){this.getModuleName()==="dropdownlist"&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus();return}if(this.isDocumentClick||!h(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(pe.mobileFilter)){this.beforePopupOpen||(this.isDocumentClick=!1);return}(this.getModuleName()==="dropdownlist"&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&i.classList.contains(pe.inputFocus))||h(t)&&this.getModuleName()==="dropdownlist"&&this.allowFiltering&&i!==this.inputWrapper.container||this.getModuleName()!=="dropdownlist"&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1),this.isFocused=!1}},a.prototype.focusOutAction=function(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut(e)},a.prototype.onFocusOut=function(e){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),this.getModuleName()==="dropdownlist"&&this.element.tagName!=="INPUT"&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&E([this.inputWrapper.clearButton],pe.clearIconHide),this.trigger("blur"))},a.prototype.onFocus=function(e){if(!this.isInteracted){this.isInteracted=!0;var t={isInteracted:!!e,event:e};this.trigger("focus",t)}this.updateIconState(),this.isFocused=!0},a.prototype.resizingWireEvent=function(){b.add(document,"mousemove",this.resizePopup,this),b.add(document,"mouseup",this.stopResizing,this),b.add(document,"touchmove",this.resizePopup,this),b.add(document,"touchend",this.stopResizing,this)},a.prototype.resizingUnWireEvent=function(){b.remove(document,"mousemove",this.resizePopup),b.remove(document,"mouseup",this.stopResizing),b.remove(document,"touchmove",this.resizePopup),b.remove(document,"touchend",this.stopResizing)},a.prototype.resetValueHandler=function(e){var t=A(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}},a.prototype.wireEvent=function(){b.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),b.add(this.inputWrapper.container,"focus",this.focusIn,this),b.add(this.inputWrapper.container,"keypress",this.onSearch,this),b.add(window,"resize",this.windowResize,this),this.bindCommonEvent()},a.prototype.bindCommonEvent=function(){b.add(this.targetElement(),"blur",this.onBlurHandler,this);var e=A(this.inputElement,"form");e&&b.add(e,"reset",this.resetValueHandler,this),V.isDevice?this.keyboardModule=new Ct(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new Ct(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},a.prototype.windowResize=function(){this.isPopupOpen&&this.popupObj.refreshPosition(this.inputWrapper.container)},a.prototype.bindClearEvent=function(){this.showClearButton&&b.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},a.prototype.unBindCommonEvent=function(){!h(this.inputWrapper)&&this.targetElement()&&b.remove(this.targetElement(),"blur",this.onBlurHandler);var e=this.inputElement&&A(this.inputElement,"form");e&&b.remove(e,"reset",this.resetValueHandler),V.isDevice||this.keyboardModule.destroy(),this.showClearButton&&b.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},a.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement.value!==""&&!this.readonly?w([this.inputWrapper.clearButton],pe.clearIconHide):E([this.inputWrapper.clearButton],pe.clearIconHide))},a.prototype.wireListEvents=function(){h(this.list)||(b.add(this.list,"click",this.onMouseClick,this),b.add(this.list,"mouseover",this.onMouseOver,this),b.add(this.list,"mouseout",this.onMouseLeave,this))},a.prototype.onSearch=function(e){e.charCode!==32&&e.charCode!==13&&(this.list===void 0&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))},a.prototype.onServerIncrementalSearch=function(e){!this.isRequested&&!h(this.list)&&!h(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(e)},a.prototype.startResizing=function(e){this.isResizing=!0,this.trigger("resizeStart",e);var t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;this.list&&this.list.parentElement&&(this.originalWidth=this.list.parentElement.offsetWidth,this.originalHeight=this.list.parentElement.offsetHeight,this.originalMouseX=t,this.originalMouseY=i),this.resizingWireEvent(),e&&e.preventDefault()},a.prototype.resizePopup=function(e){if(this.isResizing){this.trigger("resizing",e);var t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,s=t-this.originalMouseX,n=i-this.originalMouseY;if(this.list&&this.list.parentElement){var r=parseInt(window.getComputedStyle(this.list.parentElement).minWidth,10),l=parseInt(window.getComputedStyle(this.list.parentElement).minHeight,10);r=r||100,l=l||120,this.resizeWidth=Math.max(this.originalWidth+s,r),this.resizeHeight=Math.max(this.originalHeight+n,l),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.fixedHeaderElement&&this.ulElement&&(this.fixedHeaderElement.style.width=this.ulElement.offsetWidth+"px")}e&&e.preventDefault()}},a.prototype.stopResizing=function(e){this.isResizing&&(this.isResizing=!1,this.trigger("resizeStop",e),this.resizingUnWireEvent()),e&&e.preventDefault()},a.prototype.onMouseClick=function(e){var t=e.target;this.keyboardEvent=null;var i=A(t,"."+O.li);if(!(!this.isValidLI(i)||this.isDisabledElement(i)))if(this.setSelection(i,e),V.isDevice&&this.isFilterLayout())history.back();else{var s=100;this.closePopup(s,e)}},a.prototype.onMouseOver=function(e){var t=A(e.target,"."+O.li);this.setHover(t)},a.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains(O.hover)&&(this.removeHover(),E([e],O.hover))},a.prototype.onMouseLeave=function(){this.removeHover()},a.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll("."+O.hover);e&&e.length&&w(e,O.hover)}},a.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&e.getAttribute("role")==="option"},a.prototype.updateIncrementalItemIndex=function(e,t){this.incrementalStartIndex=e,this.incrementalEndIndex=t},a.prototype.incrementalSearch=function(e){if(this.liCollections.length>0)if(this.enableVirtualization){var t=!1,i=!1,s=this.ulElement.getElementsByClassName("e-active")[0],n=s?s.textContent:null;this.incrementalQueryString===""?(this.incrementalQueryString=String.fromCharCode(e.charCode),this.incrementalPreQueryString=this.incrementalQueryString):String.fromCharCode(e.charCode).toLocaleLowerCase()===this.incrementalPreQueryString.toLocaleLowerCase()?i=!0:this.incrementalQueryString=String.fromCharCode(e.charCode),(this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||this.incrementalEndIndex===0)&&(t=!0,this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex===0?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),t=!0),(this.viewPortInfo.startIndex!==0||t)&&this.updateIncrementalView(0,this.itemCount);for(var r=qi(e.charCode,this.incrementalLiCollections,this.activeIndex,!0,this.element.id,i,n,!0);h(r)&&this.incrementalEndIndex<this.totalItemCount&&(this.updateIncrementalItemIndex(this.incrementalEndIndex,this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),t=!0,(this.viewPortInfo.startIndex!==0||t)&&this.updateIncrementalView(0,this.itemCount),r=qi(e.charCode,this.incrementalLiCollections,0,!0,this.element.id,i,n,!0,!0),!!h(r));)if(h(r)&&this.incrementalEndIndex>=this.totalItemCount){this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100);break}h(r)&&this.incrementalEndIndex>=this.totalItemCount&&(this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),t=!0,(this.viewPortInfo.startIndex!==0||t)&&this.updateIncrementalView(0,this.itemCount),r=qi(e.charCode,this.incrementalLiCollections,0,!0,this.element.id,i,n,!0,!0));var l=r&&this.getIndexByValue(r.getAttribute("data-value"));if(l)l=l-this.skeletonCount;else for(var o=0;o<this.incrementalLiCollections.length;o++)if(!h(r)&&!h(r.getAttribute("data-value"))&&this.incrementalLiCollections[o].getAttribute("data-value")===r.getAttribute("data-value").toString()){l=o,l=this.incrementalStartIndex+l;break}if(l&&(!(this.viewPortInfo.startIndex>=l)||!(l>=this.viewPortInfo.endIndex))){var c=l-(this.itemCount/2-2)>0?l-(this.itemCount/2-2):0,p=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(c,p)}if(h(r))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var d=this.getIndexByValue(r.getAttribute("data-value"))-this.skeletonCount;if(d>this.itemCount/2){var c=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,p=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(c,p)}if(r=this.getElementByValue(r.getAttribute("data-value")),this.setSelection(r,e),this.setScrollPosition(),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var f=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=f-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}this.incrementalPreQueryString=this.incrementalQueryString}}else{var r=void 0;if(this.fields.disabled){var v=this.list.querySelectorAll("."+O.li+":not(.e-disabled)");r=qi(e.charCode,v,this.activeIndex,!0,this.element.id)}else r=qi(e.charCode,this.liCollections,this.activeIndex,!0,this.element.id);h(r)||(this.setSelection(r,e),this.setScrollPosition())}},a.prototype.hideSpinner=function(){h(this.spinnerElement)||(Qs(this.spinnerElement),w([this.spinnerElement],pe.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},a.prototype.showSpinner=function(){h(this.spinnerElement)&&(this.spinnerElement=V.isDevice&&!h(this.filterInputObj)&&this.filterInputObj.buttons[1]||!h(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],E([this.spinnerElement],pe.disableIcon),Xs({target:this.spinnerElement,width:V.isDevice?"16px":"14px"},this.createElement),Js(this.spinnerElement))},a.prototype.keyActionHandler=function(e){if(this.enabled){this.keyboardEvent=e,this.isPreventKeyAction&&this.enableVirtualization&&e.preventDefault();var t=e.action==="pageUp"||e.action==="pageDown",i=this.getModuleName()!=="dropdownlist"&&(e.action==="home"||e.action==="end");this.isEscapeKey=e.action==="escape",this.isTabKey=!this.isPopupOpen&&e.action==="tab";var s=e.action==="down"||e.action==="up"||e.action==="pageUp"||e.action==="pageDown"||e.action==="home"||e.action==="end";if(!((this.isEditTextBox()||t||i)&&!this.isPopupOpen)&&!this.readonly){var n=e.action==="tab"||e.action==="close";if(h(this.list)&&!this.isRequested&&!n&&e.action!=="escape"&&(this.searchKeyEvent=e,(!this.enableVirtualization||this.enableVirtualization&&this.getModuleName()!=="autocomplete"&&e.type!=="mousedown"&&(e.keyCode===40||e.keyCode===38))&&(this.renderList(e),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+O.li),this.ulElement=this.list.querySelector("ul"))),h(this.list)||!h(this.liCollections)&&s&&this.liCollections.length===0||this.isRequested)return;switch((n&&this.getModuleName()!=="autocomplete"&&this.isPopupOpen||e.action==="escape")&&e.preventDefault(),this.isSelected=e.action==="escape"?!1:this.isSelected,this.isTyped=s||e.action==="escape"?!1:this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":this.isMouseScrollAction=!0,this.updateHomeEndAction(e);break;case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(e);break;case"space":this.getModuleName()==="dropdownlist"&&(this.beforePopupOpen||(this.showPopup(),e.preventDefault()));break;case"open":this.showPopup(e);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e));break}}}},a.prototype.updateUpDownAction=function(e,t){if(!(this.fields.disabled&&this.list&&this.list.querySelectorAll(".e-list-item:not(.e-disabled)").length===0)){if(this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var i=this.getItemData().value;h(i)&&(i="null");var s=this.getIndexByValue(i);h(s)||(this.activeIndex=s)}var n=this.list.querySelector("."+pe.focus);if(this.isSelectFocusItem(n)&&!t){if(this.setSelection(n,e),this.enableVirtualization){var r=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.fields.groupBy&&(r=this.virtualListInfo&&this.virtualListInfo.startIndex===0?this.selectedLI.offsetHeight-r:r-this.selectedLI.offsetHeight),this.list.scrollTop=r-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}else if(!h(this.liCollections)){var l=this.activeIndex,o=e.action==="down"?this.activeIndex+1:this.activeIndex-1;o=t?l:o;var c=0;this.getModuleName()==="autocomplete"&&(c=e.action==="down"&&h(this.activeIndex)?0:this.liCollections.length-1,o=o<0?this.liCollections.length-1:o===this.liCollections.length?0:o);var p=void 0;if(this.getModuleName()!=="autocomplete"||this.getModuleName()==="autocomplete"&&this.isPopupOpen)if(!this.enableVirtualization)p=h(this.activeIndex)?this.liCollections[c]:this.liCollections[o];else if(!t)p=h(this.activeIndex)?this.liCollections[this.skeletonCount]:this.liCollections[o],p=!h(p)&&!p.classList.contains("e-virtual-list")?p:null;else if(this.getModuleName()==="autocomplete"){var i=this.getFormattedValue(this.selectedLI.getAttribute("data-value"));p=this.getElementByValue(i)}else p=this.getElementByValue(this.getItemData().value);if(h(p)){if(this.enableVirtualization&&!this.isPopupOpen&&this.getModuleName()!=="autocomplete"&&(this.viewPortInfo.endIndex!==this.totalItemCount&&e.action==="down"||this.viewPortInfo.startIndex!==0&&e.action==="up")){if(e.action==="down"){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex+this.itemCount<this.totalItemCount-this.itemCount?this.viewPortInfo.startIndex+this.itemCount:this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter=this.getModuleName()==="combobox"?!0:this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter=this.getModuleName()==="combobox"?!1:this.isCustomFilter;var i=this.liCollections[0].getAttribute("data-value")!=="null"?this.getFormattedValue(this.liCollections[0].getAttribute("data-value")):null,f=this.getDataByValue(i);f&&(this.itemData=f)}else if(e.action==="up"){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex-this.itemCount>0?this.viewPortInfo.startIndex-this.itemCount:0,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter=this.getModuleName()==="combobox"?!0:this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter=this.getModuleName()==="combobox"?!1:this.isCustomFilter;var i=this.liCollections[this.liCollections.length-1].getAttribute("data-value")!=="null"?this.getFormattedValue(this.liCollections[this.liCollections.length-1].getAttribute("data-value")):null,f=this.getDataByValue(i);f&&(this.itemData=f)}this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+O.li),this.ulElement=this.list.querySelector("ul"),this.handleVirtualKeyboardActions(e,this.pageCount)}}else{var d=this.liCollections[this.skeletonCount]&&this.liCollections[this.skeletonCount].classList.contains("e-item-focus");if(this.setSelection(p,e),d&&this.enableVirtualization&&this.getModuleName()==="autocomplete"&&!t){var r=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;r=this.virtualListInfo&&this.virtualListInfo.startIndex===0&&this.fields.groupBy?this.selectedLI.offsetHeight-r:r-this.selectedLI.offsetHeight,this.list.scrollTop=r-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}}if(this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var i=this.getItemData().value,s=this.getIndexByValueFilter(i,this.actionCompleteData.ulElement);h(s)||(this.activeIndex=s)}this.allowFiltering&&this.getModuleName()==="dropdownlist"&&this.filterInput&&(!h(this.ulElement)&&!h(this.ulElement.getElementsByClassName("e-item-focus")[0])?Q(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!h(this.ulElement)&&!h(this.ulElement.getElementsByClassName("e-active")[0])&&Q(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}));for(var v,o=0;o<this.liCollections.length;o++)if(this.liCollections[o].classList.contains(pe.focus)||this.liCollections[o].classList.contains(pe.selected)){v=o;break}v!=null&&this.isDisabledElement(this.liCollections[v])&&(this.getModuleName()!=="autocomplete"&&(this.liCollections.length-1===v&&e.action==="down"&&(e.action="up"),v===0&&e.action==="up"&&(e.action="down")),this.updateUpDownAction(e)),e.preventDefault()}},a.prototype.updateHomeEndAction=function(e,t){if(this.getModuleName()==="dropdownlist"){var i=0;if(e.action==="home"?(i=0,this.enableVirtualization&&this.isPopupOpen?i=this.skeletonCount:this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.startIndex!==0&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query))):(this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.endIndex!==this.totalItemCount&&(this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query)),i=this.getItems().length-1),e.preventDefault(),this.activeIndex===i){t&&this.setSelection(this.liCollections[i],e);return}if(!this.enableVirtualization&&this.liCollections[i]&&this.liCollections[i].classList.contains("e-disabled"))return;this.setSelection(this.liCollections[i],e)}},a.prototype.selectCurrentValueOnTab=function(e){this.getModuleName()==="autocomplete"?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))},a.prototype.mobileKeyActionHandler=function(e){if(this.enabled&&!(this.isEditTextBox()&&!this.isPopupOpen)&&!this.readonly){if(this.list===void 0&&!this.isRequested&&(this.searchKeyEvent=e,this.renderList()),h(this.list)||!h(this.liCollections)&&this.liCollections.length===0||this.isRequested)return;e.action==="enter"&&this.selectCurrentItem(e)}},a.prototype.handleVirtualKeyboardActions=function(e,t){switch(e.action){case"down":case"up":(this.itemData!=null||this.getModuleName()==="autocomplete")&&this.updateUpDownAction(e,!0);break;case"pageUp":this.activeIndex=this.getModuleName()==="autocomplete"?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))+this.getPageCount()-1:this.getIndexByValue(this.previousValue),this.pageUpSelection(this.activeIndex-this.getPageCount(),e,!0),e.preventDefault();break;case"pageDown":this.activeIndex=this.getModuleName()==="autocomplete"?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))-this.getPageCount():this.getIndexByValue(this.previousValue),this.pageDownSelection(h(this.activeIndex)?2*this.getPageCount():this.activeIndex+this.getPageCount(),e,!0),e.preventDefault();break;case"home":this.isMouseScrollAction=!0,this.updateHomeEndAction(e,!0);break;case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(e,!0);break}this.keyboardEvent=null},a.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var t=this.list.querySelector("."+pe.focus);if(this.isDisabledElement(t))return;t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(e),this.focusDropDown(e)}else this.showPopup()},a.prototype.isSelectFocusItem=function(e){return!h(e)},a.prototype.pageUpSelection=function(e,t,i){var s=e>=0?this.liCollections[e+1]:this.liCollections[0];if(!this.enableVirtualization&&s&&s.classList.contains("e-disabled")){for(var n=e>=0?e+1:0;n<this.liCollections.length&&(s=this.liCollections[n],!(s&&!s.classList.contains("e-disabled")));)if(n--,n<0)return}this.enableVirtualization&&this.activeIndex==null&&(s=this.liCollections.length>=e&&e>=0?this.liCollections[e+this.skeletonCount+1]:this.liCollections[0]),!h(s)&&s.classList.contains("e-virtual-list")&&(s=this.liCollections[this.skeletonCount]),this.PageUpDownSelection(s,t),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!h(this.ulElement)&&!h(this.ulElement.getElementsByClassName("e-item-focus")[0])?Q(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!h(this.ulElement)&&!h(this.ulElement.getElementsByClassName("e-active")[0])&&Q(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},a.prototype.PageUpDownSelection=function(e,t){this.enableVirtualization?!h(e)&&(this.getModuleName()!=="autocomplete"&&!e.classList.contains("e-active")||this.getModuleName()==="autocomplete"&&!e.classList.contains("e-item-focus"))&&this.setSelection(e,t):this.setSelection(e,t)},a.prototype.pageDownSelection=function(e,t,i){var s=this.getItems(),n=e<=s.length?this.liCollections[e-1]:this.liCollections[s.length-1];if(!this.enableVirtualization&&n&&n.classList.contains("e-disabled"))for(;e>=0&&e<this.liCollections.length&&(n=e<=s.length?this.liCollections[e-1]:this.liCollections[s.length-1],!(n&&!n.classList.contains("e-disabled")));)e++;this.enableVirtualization&&this.skeletonCount>0&&(e=this.getModuleName()==="dropdownlist"&&this.allowFiltering?e+1:e,n=e<s.length?this.liCollections[e]:this.liCollections[s.length-1]),this.enableVirtualization&&this.activeIndex==null&&(n=e<=s.length?this.liCollections[e+this.skeletonCount-1]:this.liCollections[s.length-1]),this.PageUpDownSelection(n,t),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!h(this.ulElement)&&!h(this.ulElement.getElementsByClassName("e-item-focus")[0])?Q(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!h(this.ulElement)&&!h(this.ulElement.getElementsByClassName("e-active")[0])&&Q(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},a.prototype.unWireEvent=function(){h(this.inputWrapper)||(b.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),b.remove(this.inputWrapper.container,"keypress",this.onSearch),b.remove(this.inputWrapper.container,"focus",this.focusIn),b.remove(window,"resize",this.windowResize)),this.unBindCommonEvent()},a.prototype.unWireListEvents=function(){this.list&&(b.remove(this.list,"click",this.onMouseClick),b.remove(this.list,"mouseover",this.onMouseOver),b.remove(this.list,"mouseout",this.onMouseLeave))},a.prototype.checkSelector=function(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},a.prototype.onDocumentClick=function(e){var t=e.target;if(!(!h(this.popupObj)&&A(t,this.checkSelector(this.popupObj.element.id)))&&!h(this.inputWrapper)&&!this.inputWrapper.container.contains(e.target)){if(this.inputWrapper.container.classList.contains(pe.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var i=this.isRequested;this.getModuleName()==="combobox"&&this.isTyped&&(this.isInteracted=!1),this.hidePopup(e),this.isInteracted=!1,i||(this.onFocusOut(e),this.inputWrapper.container.classList.remove(pe.inputFocus))}}else t!==this.inputElement&&!(this.allowFiltering&&t===this.filterInput)&&!(this.getModuleName()==="combobox"&&!this.allowFiltering&&V.isDevice&&t===this.inputWrapper.buttons[0])&&(this.isPreventBlur=(V.isIE||V.info.name==="edge")&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault())},a.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(pe.inputFocus))},a.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)},a.prototype.dropDownClick=function(e){if(!(e.which===3||e.button===2)&&(this.keyboardEvent=null,!(this.targetElement().classList.contains(pe.disable)||this.inputWrapper.clearButton===e.target))){var t=e.target;if(t!==this.inputElement&&!(this.allowFiltering&&t===this.filterInput)&&this.getModuleName()!=="combobox"&&e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(e),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=this.inputElement.value.trim()===""?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(e));var i=this,s=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){i.cloneElements(),i.isSecondClick=!0,i.isSecondClick=!(i.isReact&&i.isFiltering()&&i.dataSource instanceof P&&!i.list.querySelector("ul"))},s)}}},a.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}},a.prototype.updateSelectedItem=function(e,t,i,s){var n=this;this.removeSelection(),e.classList.add(O.selected),this.removeHover();var r=e.getAttribute("data-value")!==null?this.getFormattedValue(e.getAttribute("data-value")):null,l=this.getDataByValue(r);if(!this.initial&&!i&&!h(t)){var o=this.detachChanges(l);this.isSelected=!0;var c={e:t,item:e,itemData:o,isInteracted:!!t,cancel:!1};this.trigger("select",c,function(p){p.cancel?e.classList.remove(O.selected):(n.selectEventCallback(e,t,i,l,r),s&&n.setSelectOptions(e,t))})}else this.selectEventCallback(e,t,i,l,r),s&&this.setSelectOptions(e,t)},a.prototype.selectEventCallback=function(e,t,i,s,n){this.previousItemData=h(this.itemData)?null:this.itemData,this.itemData!==s&&(this.previousValue=h(this.itemData)?null:typeof this.itemData=="object"&&!this.allowObjectBinding?this.checkFieldValue(this.itemData,this.fields.value.split(".")):this.itemData),this.item=e,this.itemData=s;var r=this.list.querySelector("."+O.focus);if(r&&w([r],O.focus),e.setAttribute("aria-selected","true"),h(n)&&(n="null"),this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var l=this.getIndexByValueFilter(n,this.actionCompleteData.ulElement);h(l)?this.activeIndex=this.getIndexByValue(n):this.activeIndex=l}else this.enableVirtualization&&this.activeIndex==null&&this.dataSource instanceof P&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+O.li),this.ulElement=this.list.querySelector("ul")),this.activeIndex=this.getIndexByValue(n)},a.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains(O.selected)&&(this.removeSelection(),e.classList.add(O.selected),this.removeHover(),e.setAttribute("aria-selected","true"))},a.prototype.setValue=function(e){var t=this.getItemData();this.isTouched=!h(e),t.value===null?z.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):z.setValue(t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&this.itemData!==null?this.setValueTemplate():!h(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(G(this.valueTempElement),this.inputElement.style.display="block"),!h(t.value)&&!this.enableVirtualization&&this.allowFiltering&&(this.activeIndex=this.getIndexByValueFilter(t.value,this.actionCompleteData.ulElement));var i=pe.clearIcon,s=this.isFiltering()&&this.filterInput&&this.getModuleName()==="combobox",n=s&&this.filterInput.parentElement.querySelector("."+i);return this.isFiltering()&&n&&n.style.removeProperty("visibility"),!this.allowObjectBinding&&this.previousValue===t.value||this.allowObjectBinding&&this.previousValue!=null&&this.isObjectInArray(this.previousValue,[this.allowCustom&&this.isObjectCustomValue?this.value?this.value:t:t.value?this.getDataByValue(t.value):t])?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,this.getModuleName()==="dropdownlist"&&this.updateIconState(),!1)},a.prototype.setSelection=function(e,t){if(this.isValidLI(e)&&(!e.classList.contains(O.selected)||this.isPopupOpen&&this.isSelected&&e.classList.contains(O.selected)))this.updateSelectedItem(e,t,!1,!0);else if(this.setSelectOptions(e,t),this.enableVirtualization&&this.value){var i=this.isPrimitiveData?"":this.fields.value,s=this.allowObjectBinding&&!h(this.value)?I(this.fields.value?this.fields.value:"",this.value):this.value;if(this.dataSource instanceof P){var n=new P(this.virtualGroupDataSource).executeLocal(new ee().where(new be(i,"equal",s)));if(n&&n.length>0){this.itemData=n[0];var r=this.getItemData(),l=this.allowObjectBinding?this.getDataByValue(r.value):r.value;(this.value===r.value&&this.text!==r.text||this.value!==r.value&&this.text===r.text)&&this.setProperties({text:r.text?r.text.toString():r.text,value:l})}}else{var n=new P(this.dataSource).executeLocal(new ee().where(new be(i,"equal",s)));if(n&&n.length>0){this.itemData=n[0];var r=this.getItemData(),l=this.allowObjectBinding?this.getDataByValue(r.value):r.value;(this.value===r.value&&this.text!==r.text||this.value!==r.value&&this.text===r.text)&&(this.setProperties({text:r.text?r.text.toString():r.text,value:l}),h(e)&&(this.previousValue=this.value))}}}},a.prototype.setSelectOptions=function(e,t){this.list&&this.removeHover(),this.previousSelectedLI=h(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,!this.setValue(t)&&((!this.isPopupOpen&&!h(e)||this.isPopupOpen&&!h(t)&&(t.type!=="keydown"||t.type==="keydown"&&t.action==="enter"))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.isPopupOpen&&!h(this.selectedLI)&&this.itemData!==null&&(!t||t.type!=="click")&&this.setScrollPosition(t),V.info.name!=="mozilla"&&this.targetElement()&&(Q(this.targetElement(),{"aria-describedby":this.inputElement.id!==""?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),this.isPopupOpen&&!h(this.ulElement)&&!h(this.ulElement.getElementsByClassName("e-item-focus")[0])?Q(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):this.isPopupOpen&&!h(this.ulElement)&&!h(this.ulElement.getElementsByClassName("e-active")[0])&&Q(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},a.prototype.dropdownCompiler=function(e){var t=!1;if(typeof e!="function"&&e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t},a.prototype.setValueTemplate=function(){var e;this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(G(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:pe.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var t=this.dropdownCompiler(this.valueTemplate);typeof this.valueTemplate!="function"&&t?e=Ie(document.querySelector(this.valueTemplate).innerHTML.trim()):e=Ie(this.valueTemplate);var i=e(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);i&&i.length>0&&ye(i,this.valueTempElement),this.renderReactTemplates()},a.prototype.removeSelection=function(){if(this.list){var e=this.list.querySelectorAll("."+O.selected);e.length&&(w(e,O.selected),e[0].removeAttribute("aria-selected"))}},a.prototype.getItemData=function(){var e=this.fields,t=null;t=this.itemData;var i,s;h(t)||(i=I(e.value,t),s=I(e.text,t));var n=!h(t)&&!ni(i)?i:t,r=!h(t)&&!ni(i)?s:t;return{value:n,text:r}},a.prototype.onChangeEvent=function(e,t){var i=this,s=this.getItemData(),n=this.isSelectCustom?null:this.activeIndex;if(this.enableVirtualization){var r=this.dataSource instanceof P?this.virtualGroupDataSource:this.dataSource;if(s.value&&r&&r.length>0){var l=r.findIndex(function(c){return!h(s.value)&&I(i.fields.value,c)===s.value});l!==-1&&(n=l)}}var o=this.allowObjectBinding?t?this.value:this.getDataByValue(s.value):s.value;this.setProperties({index:n,text:s.text?s.text.toString():s.text,value:o},!0),this.detachChangeEvent(e)},a.prototype.detachChanges=function(e){var t;return typeof e=="string"||typeof e=="boolean"||typeof e=="number"?t=Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):t=e,t},a.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.enableVirtualization?this.getIndexByValue(this.value):this.index,this.typedString=h(this.text)?"":this.text,!this.initial){var t=this.detachChanges(this.itemData),i=void 0;typeof this.previousItemData=="string"||typeof this.previousItemData=="boolean"||typeof this.previousItemData=="number"?i=Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):i=this.previousItemData,this.setHiddenValue();var s={e,item:this.item,itemData:t,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s)}(h(this.value)||this.value==="")&&this.floatLabelType!=="Always"&&w([this.inputWrapper.container],"e-valid-input")},a.prototype.setHiddenValue=function(){if(h(this.value))this.hiddenElement.innerHTML="";else{var e=this.allowObjectBinding&&!h(this.value)?I(this.fields.value?this.fields.value:"",this.value):this.value;if(this.hiddenElement.querySelector("option")){var t=this.hiddenElement.querySelector("option");t.textContent=this.text,t.setAttribute("value",e.toString())}else if(!h(this.hiddenElement)){var i=document.createElement("option");i.text=this.text,i.setAttribute("selected",""),this.hiddenElement.appendChild(i);var t=this.hiddenElement.querySelector("option");t.setAttribute("value",e.toString())}}},a.prototype.onFilterUp=function(e){if(!(e.ctrlKey&&e.keyCode===86)&&(this.isValidKey||e.keyCode===40||e.keyCode===38))switch(this.isValidKey=!1,this.filterArgs=e,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,e.keyCode){case 38:case 40:this.getModuleName()==="autocomplete"&&!this.isPopupOpen&&!this.preventAltUp&&!this.isRequested?(this.preventAutoFill=!0,this.searchLists(e)):this.preventAutoFill=!1,this.preventAltUp=!1,this.getModuleName()==="autocomplete"&&!h(this.ulElement)&&!h(this.ulElement.getElementsByClassName("e-item-focus")[0])&&Q(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&this.typedString!==""||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(e)):this.typedString===""&&this.queryString===""&&this.getModuleName()!=="autocomplete"?(this.preventAutoFill=!0,this.searchLists(e)):this.typedString===""&&(this.list&&this.resetFocusElement(),this.activeIndex=null,this.getModuleName()!=="dropdownlist"&&(this.preventAutoFill=!0,this.searchLists(e),this.getModuleName()==="autocomplete"&&this.hidePopup())),e.preventDefault();break;default:this.isFiltering()&&this.getModuleName()==="combobox"&&h(this.list)&&(this.getInitialData=!0,this.renderList(),!this.isSecondClick&&!this.isDropDownClick&&this.executeCloneElements()),this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.getInitialData||this.searchLists(e),(this.enableVirtualization&&this.getModuleName()!=="autocomplete"||this.getModuleName()==="autocomplete"&&!(this.dataSource instanceof P)||this.getModuleName()==="autocomplete"&&this.dataSource instanceof P&&this.totalItemCount!==0)&&this.getFilteringSkeletonCount();break}else this.isValidKey=!1},a.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&this.getModuleName()!=="autocomplete"&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value;break}},a.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},a.prototype.getQuery=function(e){var t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new ee;var i=this.typedString===""?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof P)&&s==="string"||s==="number")t.where("",i,this.typedString,this.ignoreCase,this.ignoreAccent);else if(this.getModuleName()!=="combobox"||this.isFiltering()&&this.getModuleName()==="combobox"&&this.typedString!==""){var n=this.fields.text?this.fields.text:"";t.where(n,i,this.typedString,this.ignoreCase,this.ignoreAccent)}}else t=this.enableVirtualization&&!h(this.customFilterQuery)?this.customFilterQuery.clone():e?e.clone():this.query?this.query.clone():new ee;if(this.enableVirtualization&&this.viewPortInfo.endIndex!==0){var r=this.getTakeValue(),l=!1;if(t){for(var o=0;o<t.queries.length;o++)if(t.queries[o].fn==="onSkip"){l=!0;break}}var c=0,p=0;if(t&&t.queries.length>0)for(var o=0;o<t.queries.length;o++)t.queries[o].fn==="onSkip"&&(p=t.queries[o].e.nos),t.queries[o].fn==="onTake"&&(c=r<=t.queries[o].e.nos?t.queries[o].e.nos:r);if(c<=0&&this.query&&this.query.queries.length>0)for(var o=0;o<this.query.queries.length;o++)this.query.queries[o].fn==="onTake"&&(c=r<=this.query.queries[o].e.nos?this.query.queries[o].e.nos:r);var d=!1;if(t&&t.queries.length>0)for(var o=0;o<t.queries.length;o++){if(t.queries[o].fn==="onSkip"){p=t.queries[o].e.nos,t.queries.splice(o,1),l=!1,--o;continue}t.queries[o].fn==="onTake"&&(c=t.queries[o].e.nos<=c?c:t.queries[o].e.nos,t.queries.splice(o,1),--o)}!d&&(this.allowFiltering||!this.isPopupOpen||!l)&&(p>0?t.skip(p):t.skip(this.virtualItemStartIndex)),this.isIncrementalRequest?t.take(this.incrementalEndIndex):c>0?t.take(c):t.take(r),t.requiresCount()}return t},a.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},a.prototype.searchLists=function(e){var t=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+pe.clearIcon)){var i=this.filterInput.parentElement.querySelector("."+pe.clearIcon);i.style.visibility=this.filterInput.value===""?"hidden":"visible"}if(this.isDataFetched=!1,this.isFiltering()){this.checkAndResetCache(),this.isRequesting=!1;var s={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(n,r,l){s.cancel||(t.isCustomFilter=!0,t.customFilterQuery=r&&r.clone(),t.filteringAction(n,r,l))},baseEventArgs:e,cancel:!1};this.trigger("filtering",s,function(n){!n.cancel&&!t.isCustomFilter&&!n.preventDefaultAction&&t.filteringAction(t.dataSource,null,t.fields)})}},a.prototype.filter=function(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)},a.prototype.filteringAction=function(e,t,i){if(!h(this.filterInput)){this.beforePopupOpen=!(!this.isPopupOpen&&this.getModuleName()==="combobox"&&this.filterInput.value===""||this.getInitialData);var s=this.list.classList.contains(O.noData);if(this.filterInput.value.trim()===""&&!this.itemTemplate){if(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!h(this.actionCompleteData.ulElement)&&!h(this.actionCompleteData.list)){if(this.enableVirtualization&&(this.isFiltering()&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(e,i,t),s&&!this.list.classList.contains(O.noData))){if(!this.list.querySelector(".e-virtual-ddl-content")){var n=this.createElement("div",{className:"e-virtual-ddl-content"});n.style.cssText=this.getTransformValues(),this.list.appendChild(n).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});r.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(r)}}this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list)}this.isTyped=!0,!h(this.itemData)&&this.getModuleName()==="dropdownlist"&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0}else if(this.isNotSearchList=!1,t=this.filterInput.value.trim()===""?null:t,this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(e,i,t),this.getModuleName()==="dropdownlist"&&this.list.classList.contains(O.noData)&&(this.popupContentElement.setAttribute("role","status"),this.popupContentElement.setAttribute("id","no-record"),Q(this.filterInputObj.container,{"aria-activedescendant":"no-record"})),this.enableVirtualization&&s&&!this.list.classList.contains(O.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")){var n=this.createElement("div",{className:"e-virtual-ddl-content"});n.style.cssText=this.getTransformValues(),this.list.appendChild(n).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});r.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(r)}}this.enableVirtualization&&this.getFilteringSkeletonCount(),this.renderReactTemplates(),this.filterInput&&this.filterInput.value===""&&this.getModuleName()==="combobox"&&this.executeCloneElements()}},a.prototype.setSearchBox=function(e){if(this.isFiltering()){var t=e.querySelector("."+pe.filterParent)?e.querySelector("."+pe.filterParent):this.createElement("span",{className:pe.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:pe.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var i=!1;return V.isDevice&&this.isDeviceFullScreen&&(i=!0),this.filterInputObj=z.createInput({element:this.filterInput,buttons:i?[pe.backIcon,pe.filterBarClearIcon]:[pe.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),h(this.cssClass)||(this.cssClass.split(" ").indexOf("e-outline")!==-1?E([this.filterInputObj.container],"e-outline"):this.cssClass.split(" ").indexOf("e-filled")!==-1&&E([this.filterInputObj.container],"e-filled")),ye([this.filterInputObj.container],t),nt([t],e),Q(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+pe.clearIcon),!V.isDevice&&this.clearIconElement&&(b.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),V.isDevice?this.searchKeyModule=new Ct(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new Ct(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),b.add(this.filterInput,"input",this.onInput,this),b.add(this.filterInput,"keyup",this.onFilterUp,this),b.add(this.filterInput,"keydown",this.onFilterDown,this),b.add(this.filterInput,"blur",this.onBlurHandler,this),b.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}else return Tu},a.prototype.onInput=function(e){!h(e)&&!h(e.data)&&e.data.length>1&&this.autoFill&&(this.getModuleName()==="combobox"||this.getModuleName()==="autocomplete")&&(this.inputElement.value=e.data),this.isValidKey=!0,this.getModuleName()==="combobox"&&this.updateIconState(),V.isDevice&&V.info.name==="mozilla"&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))},a.prototype.pasteHandler=function(e){var t=this;setTimeout(function(){t.typedString=t.filterInput.value,t.getModuleName()==="combobox"&&t.isFiltering()&&h(t.list)&&t.renderList(),t.searchLists(e)})},a.prototype.onActionFailure=function(e){u.prototype.onActionFailure.call(this,e),this.beforePopupOpen&&this.renderPopup()},a.prototype.getTakeValue=function(){return this.allowFiltering&&this.getModuleName()==="dropdownlist"&&V.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},a.prototype.onActionComplete=function(e,t,i,s){var n=this;if(this.dataSource instanceof P&&!h(i)&&!this.virtualGroupDataSource&&(this.totalItemCount=i.count),this.isNotSearchList&&!this.enableVirtualization){this.isNotSearchList=!1;return}if(this.getInitialData){this.updateActionCompleteDataValues(e,t),this.getInitialData=!1,this.isReactTemplateUpdate=!0,this.searchLists(this.filterArgs);return}var r=this.itemCount;if(this.isActive||!h(e)){var l=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(u.prototype.onActionComplete.call(this,e,t,i),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof P)||this.dataSource instanceof P&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering),this.isRequested&&!h(this.searchKeyEvent)&&this.searchKeyEvent.type==="keydown"&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!h(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.enableVirtualization||(this.list.scrollTop=0),h(e)||Q(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"listbox"}),this.initialRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initialRemoteRender=!1,this.value&&this.dataSource instanceof P){var o=h(this.fields.value)?this.fields.text:this.fields.value,c=this.allowObjectBinding&&!h(this.value)?I(o,this.value):this.value,p=this.fields.value.split("."),d=t.some(function(C){return h(C[o])&&p.length>1?n.checkFieldValue(C,p)===c:C[o]===c});this.enableVirtualization&&this.virtualGroupDataSource&&(d=this.virtualGroupDataSource.some(function(C){return h(C[o])&&p.length>1?n.checkFieldValue(C,p)===c:C[o]===c})),d?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new be(o,"equal",c))).then(function(C){C.result.length>0&&n.addItem(C.result,t.length),n.updateValues()})}else this.updateValues();this.initial=!1}else this.getModuleName()==="autocomplete"&&this.value&&this.setInputValue();if(this.getModuleName()!=="autocomplete"&&this.isFiltering()&&!this.isTyped){if((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||h(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof P||!h(this.dataSource)&&!h(this.dataSource.length)&&this.dataSource.length!==0))&&(this.itemTemplate&&(this.element.tagName==="EJS-COMBOBOX"||this.isReact)&&this.allowFiltering?setTimeout(function(){n.updateActionCompleteDataValues(e,t)},0):this.updateActionCompleteDataValues(e,t)),this.isDynamicData){var f=this.allowObjectBinding&&!h(this.value)?I(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(f),this.selectedLI=this.getElementByValue(f),this.isDynamicData=!1}if((this.allowCustom||this.allowFiltering&&!this.isValueInList(t,this.value)&&this.dataSource instanceof P)&&!this.enableVirtualization)this.addNewItem(t,l);else if((this.allowCustom||this.allowFiltering&&this.isValueInList(t,this.value))&&!this.enableVirtualization){var v=this.allowObjectBinding&&!h(this.value)?I(this.fields.value?this.fields.value:"",this.value):this.value,g=!h(this.value)&&l&&l.getAttribute("data-value")===v.toString();g&&this.addNewItem(t,l)}(!h(this.itemData)||h(this.itemData)&&this.enableVirtualization)&&(this.getSkeletonCount(),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof P)||this.dataSource instanceof P&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.UpdateSkeleton(),this.focusIndexItem()),this.enableVirtualization&&this.updateActionCompleteDataValues(e,t)}else if(this.enableVirtualization&&this.getModuleName()!=="autocomplete"&&!this.isFiltering()){var v=this.getItemData().value;this.activeIndex=this.getIndexByValue(v);var m=this.findListElement(this.list,"li","data-value",v);this.selectedLI=m}else this.enableVirtualization&&this.getModuleName()==="autocomplete"&&(this.activeIndex=this.skeletonCount);this.beforePopupOpen&&(this.renderPopup(i),this.enableVirtualization&&(this.list.querySelector(".e-virtual-list")||(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"))),this.enableVirtualization&&r!==this.itemCount&&this.resetList(this.dataSource,this.fields))}},a.prototype.isValueInList=function(e,t){if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return!0}else if(typeof e=="object"&&e!==null){for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]===t)return!0}return!1},a.prototype.checkFieldValue=function(e,t){var i=e;return t.forEach(function(s){i=i[s]}),i},a.prototype.updateActionCompleteDataValues=function(e,t){this.actionCompleteData={ulElement:e.cloneNode(!0),list:t,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},a.prototype.addNewItem=function(e,t){var i=this;if(!h(this.itemData)&&!h(t)){var s=this.getItemData().value,n=e.some(function(r){return(typeof r=="string"||typeof r=="number"||typeof r=="boolean")&&r===s||I(i.fields.value,r)===s});n||this.addItem(this.itemData)}},a.prototype.updateActionCompleteData=function(e,t,i){var s=this;this.getModuleName()!=="autocomplete"&&this.actionCompleteData.ulElement&&(this.itemTemplate&&this.element.tagName==="EJS-COMBOBOX"&&this.allowFiltering?setTimeout(function(){s.actionCompleteDataUpdate(e,t,i)},0):this.actionCompleteDataUpdate(e,t,i))},a.prototype.actionCompleteDataUpdate=function(e,t,i){i!==null?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t)},a.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.enableVirtualization&&!h(e)||!this.enableVirtualization?this.getIndexByValue(e):this.activeIndex;var t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.enableVirtualization&&h(t)||this.removeFocus()},a.prototype.updateSelection=function(){var e=this.list.querySelector("."+O.selected);e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+O.li).classList.add(pe.focus))},a.prototype.updateSelectionList=function(){var e=this.list&&this.list.querySelector(".e-active");if(!e&&!h(this.value)&&this.getModuleName()!=="autocomplete"){var t=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value):this.value,i=this.findListElement(this.list,"li","data-value",t);i&&i.classList.add("e-active")}},a.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+pe.focus);e&&e.length&&w(e,pe.focus)},a.prototype.renderPopup=function(e){var t=this;if(this.popupObj&&document.body.contains(this.popupObj.element)){this.refreshPopup();return}var i={cancel:!1};this.trigger("beforeOpen",i,function(s){var n;if(s.cancel)t.beforePopupOpen=!1;else{var r=t.createElement("div",{id:t.element.id+"_popup",className:"e-ddl e-popup "+(t.cssClass!==null?t.cssClass:"")});r.setAttribute("aria-label",t.element.id),r.setAttribute("role","dialog");var l=t.setSearchBox(r);if(t.listContainerHeight=t.allowFiltering&&t.getModuleName()==="dropdownlist"&&V.isDevice?fe(Math.round(window.outerHeight).toString()+"px"):fe(t.popupHeight),t.headerTemplate&&(t.setHeaderTemplate(r),t.isUpdateHeaderHeight=t.header.offsetHeight!==0),ye([t.list],r),t.footerTemplate&&(t.setFooterTemplate(r),t.isUpdateFooterHeight=t.footer.offsetHeight!==0),document.body.appendChild(r),r.style.top="0px",n=r.clientHeight,t.enableVirtualization&&t.itemTemplate){var o=r.querySelectorAll("li.e-list-item:not(.e-virtual-list)");t.listItemHeight=o.length>0?Math.ceil(o[0].getBoundingClientRect().height)+parseInt(window.getComputedStyle(o[0]).marginBottom,10):0}if(t.enableVirtualization&&!t.list.classList.contains(O.noData)){if(t.getSkeletonCount(),t.skeletonCount=t.totalItemCount<t.itemCount*2&&(!(t.dataSource instanceof P)||t.dataSource instanceof P&&t.totalItemCount<=t.itemCount)?0:t.skeletonCount,t.list.querySelector(".e-virtual-ddl-content"))t.list.getElementsByClassName("e-virtual-ddl-content")[0].style=t.getTransformValues();else{var c=t.createElement("div",{className:"e-virtual-ddl-content"});c.style.cssText=t.getTransformValues(),t.list.appendChild(c).appendChild(t.list.querySelector(".e-list-parent"))}if(t.UpdateSkeleton(),t.liCollections=t.list.querySelectorAll("."+O.li),t.virtualItemCount=t.itemCount,t.list.querySelector(".e-virtual-ddl"))t.list.getElementsByClassName("e-virtual-ddl")[0].style=t.GetVirtualTrackHeight();else{var p=t.createElement("div",{id:t.element.id+"_popup",className:"e-virtual-ddl"});p.style.cssText=t.GetVirtualTrackHeight(),r.querySelector(".e-dropdownbase").appendChild(p)}}if(r.style.visibility="hidden",t.popupHeight!=="auto"){if(t.searchBoxHeight=0,!h(l.container)&&t.getModuleName()!=="combobox"&&t.getModuleName()!=="autocomplete"&&(t.searchBoxHeight=l.container.parentElement.getBoundingClientRect().height,t.listContainerHeight=(parseInt(t.listContainerHeight,10)-t.searchBoxHeight).toString()+"px"),t.headerTemplate){t.header=t.header?t.header:r.querySelector(".e-ddl-header");var d=Math.round(t.header.getBoundingClientRect().height);t.listContainerHeight=(parseInt(t.listContainerHeight,10)-(d+t.searchBoxHeight)).toString()+"px"}if(t.footerTemplate){t.footer=t.footer?t.footer:r.querySelector(".e-ddl-footer");var d=Math.round(t.footer.getBoundingClientRect().height);t.listContainerHeight=(parseInt(t.listContainerHeight,10)-(d+t.searchBoxHeight)).toString()+"px"}t.list.style.maxHeight=(parseInt(t.listContainerHeight,10)-2).toString()+"px",r.style.maxHeight=fe(t.popupHeight)}else r.style.height="auto";var f=0,v=void 0;if(t.isPreventScrollAction=!0,!h(t.selectedLI)&&!h(t.activeIndex)&&t.activeIndex>=0||t.enableVirtualization?t.setScrollPosition():t.list.scrollTop=0,V.isDevice&&t.isDeviceFullScreen&&!t.allowFiltering&&(t.getModuleName()==="dropdownlist"||t.isDropDownClick&&t.getModuleName()==="combobox")){f=t.getOffsetValue(r);var g=t.isEmptyList()?t.list:t.liCollections[0];h(t.inputElement)||(v=-(parseInt(getComputedStyle(g).textIndent,10)-parseInt(getComputedStyle(t.inputElement).paddingLeft,10)+parseInt(getComputedStyle(t.inputElement.parentElement).borderLeftWidth,10)))}t.createPopup(r,f,v),t.popupContentElement=t.popupObj.element.querySelector(".e-content"),t.getFocusElement(),t.checkCollision(r),V.isDevice&&(parseInt(t.popupWidth.toString(),10)>window.outerWidth&&!(t.getModuleName()==="dropdownlist"&&t.allowFiltering)&&t.popupObj.element.classList.add("e-wide-popup"),t.popupObj.element.classList.add(pe.device),(t.getModuleName()==="dropdownlist"||t.getModuleName()==="combobox"&&!t.allowFiltering&&t.isDropDownClick)&&(t.popupObj.collision={X:"fit",Y:"fit"}),t.isFilterLayout()&&t.isDeviceFullScreen&&(t.popupObj.element.classList.add(pe.mobileFilter),t.popupObj.position={X:0,Y:0},t.popupObj.dataBind(),Q(t.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),E([document.body,t.popupObj.element],pe.popupFullScreen),t.setSearchBoxPosition(),t.backIconElement=l.container.querySelector(".e-back-icon"),t.clearIconElement=l.container.querySelector("."+pe.clearIcon),b.add(t.backIconElement,"click",t.clickOnBackIcon,t),b.add(t.clearIconElement,"click",t.clearText,t))),r.style.visibility="visible",E([r],"e-popup-close");for(var m=t.popupObj.getScrollableParent(t.inputWrapper.container),C=0,k=m;C<k.length;C++){var T=k[C];b.add(T,"scroll",t.scrollHandler,t)}h(t.list)||(t.unWireListEvents(),t.wireListEvents()),t.selectedElementID=t.selectedLI?t.selectedLI.id:null,t.enableVirtualization&&(t.notify("bindScrollEvent",{module:"VirtualScroll",component:t.getModuleName(),enable:t.enableVirtualization}),setTimeout(function(){(t.value||t.list.querySelector(".e-active"))&&(t.updateSelectionList(),t.selectedValueInfo&&t.viewPortInfo&&t.viewPortInfo.offsets.top?t.list.scrollTop=t.viewPortInfo.offsets.top:t.scrollBottom(!0,!0))},5)),Q(t.targetElement(),{"aria-expanded":"true","aria-owns":t.element.id+"_popup","aria-controls":t.element.id}),t.getModuleName()!=="dropdownlist"&&t.list.classList.contains("e-nodata")&&(Q(t.targetElement(),{"aria-activedescendant":"no-record"}),t.popupContentElement.setAttribute("role","status"),t.popupContentElement.setAttribute("id","no-record")),t.inputElement.setAttribute("aria-expanded","true"),t.inputElement.setAttribute("aria-controls",t.element.id+"_popup");var x=t.isFiltering()?t.filterInput.parentElement:t.inputWrapper.container;E([x],[pe.inputFocus]);var L={name:"FadeIn",duration:100};t.beforePopupOpen=!0;var N=t.popupObj,R={popup:N,event:e,cancel:!1,animation:L};if(t.trigger("open",R,function(Oe){Oe.cancel?(t.beforePopupOpen=!1,t.destroyPopup()):(h(t.inputWrapper)||E([t.inputWrapper.container],[pe.iconAnimation]),t.renderReactTemplates(),t.isReact&&t.isFiltering()&&t.dataSource instanceof P&&t.list.querySelector("ul")&&!t.isSecondClick&&t.executeCloneElements(),h(t.popupObj)||t.popupObj.show(new bt(Oe.animation),t.zIndex===1e3?t.element:null),t.isReact&&setTimeout(function(){if(t.popupHeight&&t.list&&t.popupHeight!=="auto"&&!(t.getModuleName()==="dropdownlist"&&t.allowFiltering)){var xe=typeof t.popupHeight=="string"?parseInt(t.popupHeight,10):t.popupHeight;if(!t.isUpdateHeaderHeight&&t.headerTemplate&&t.header){var H=t.list.style.maxHeight===""?xe:parseInt(t.list.style.maxHeight,10);t.list.style.maxHeight=(H-t.header.offsetHeight).toString()+"px",t.isUpdateHeaderHeight=!0}if(!t.isUpdateFooterHeight&&t.footerTemplate&&t.footer){var H=t.list.style.maxHeight===""?xe:parseInt(t.list.style.maxHeight,10);t.list.style.maxHeight=(H-t.footer.offsetHeight).toString()+"px",t.isUpdateFooterHeight=!0}}},15))}),t.allowResize&&(t.getModuleName()!=="dropdownlist"||!(V.isDevice&&t.isDeviceFullScreen&&t.allowFiltering))){var Y=16;t.resizer=t.createElement("div",{id:t.element.id+"_resize-popup",className:pe.resizeIcon}),t.list&&t.list.parentElement&&(t.list.parentElement.classList.add("e-resize"),t.popupHeight.toString().toLowerCase()!=="auto"&&n>=parseInt(t.popupHeight.toString(),10)-2&&(t.list.parentElement.style.height="100%"),t.list.parentElement.style.paddingBottom=t.getModuleName()==="dropdownlist"&&t.allowFiltering&&t.searchBoxHeight?(t.searchBoxHeight+Y).toString()+"px":Y.toString()+"px",(t.header||t.footer||t.itemTemplate)&&(t.list.parentElement.style.paddingBottom=(parseInt(t.list.parentElement.style.maxHeight,10)-parseInt(t.list.style.maxHeight,10)+Y).toString()+"px"),t.list.parentElement.appendChild(t.resizer),t.list.parentElement.style.width=t.resizeWidth+"px",t.list.parentElement.style.height=t.resizeHeight+"px",t.list.parentElement.style.maxHeight=t.resizeHeight+"px",t.list.style.maxHeight=t.resizeHeight+"px"),b.add(t.resizer,"mousedown",t.startResizing,t),b.add(t.resizer,"touchstart",t.startResizing,t)}}})},a.prototype.checkCollision=function(e){if(!V.isDevice||V.isDevice&&!(this.getModuleName()==="dropdownlist"||this.isDropDownClick)){var t=_s(e);t.length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision()}},a.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),s=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+s)},a.prototype.createPopup=function(e,t,i){var s=this;this.popupObj=new Vi(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){s.isDocumentClick||s.focusDropDown(),s.isReact&&s.clearTemplate(["headerTemplate","footerTemplate"]),s.isNotSearchList=!1,s.isDocumentClick=!1,s.destroyPopup(),s.isFiltering()&&s.actionCompleteData.list&&s.actionCompleteData.list.length>0?(s.isActive=!0,s.isReactTemplateUpdate&&s.isReact&&s.itemTemplate&&!s.enableVirtualization&&(s.actionCompleteData.ulElement=s.renderItems(s.actionCompleteData.list,s.fields),s.isReactTemplateUpdate=!1),s.enableVirtualization?s.onActionComplete(s.ulElement,s.listData,null,!0):s.onActionComplete(s.actionCompleteData.ulElement,s.actionCompleteData.list,null,!0)):s.enableVirtualization&&s.focusIndexItem()},open:function(){b.add(document,"mousedown",s.onDocumentClick,s),s.isPopupOpen=!0;var n=s.actionCompleteData&&s.actionCompleteData.ulElement&&s.actionCompleteData.ulElement.querySelector("li"),r=s.list.querySelector("ul li");!h(s.ulElement)&&!h(s.ulElement.getElementsByClassName("e-item-focus")[0])?Q(s.targetElement(),{"aria-activedescendant":s.ulElement.getElementsByClassName("e-item-focus")[0].id}):!h(s.ulElement)&&!h(s.ulElement.getElementsByClassName("e-active")[0])&&Q(s.targetElement(),{"aria-activedescendant":s.ulElement.getElementsByClassName("e-active")[0].id}),s.isFiltering()&&s.itemTemplate&&s.element.tagName===s.getNgDirective()&&n&&r&&n.textContent!==r.textContent&&s.element.tagName!=="EJS-COMBOBOX"&&s.cloneElements(),s.isFilterLayout()&&(w([s.inputWrapper.container],[pe.inputFocus]),s.isFilterFocus=!0,s.filterInput.focus(),s.inputWrapper.clearButton&&E([s.inputWrapper.clearButton],pe.clearIconHide)),s.activeStateChange()},targetExitViewport:function(){V.isDevice||s.hidePopup()}})},a.prototype.isEmptyList=function(){return!h(this.liCollections)&&this.liCollections.length===0},a.prototype.getFocusElement=function(){},a.prototype.isFilterLayout=function(){return this.getModuleName()==="dropdownlist"&&this.allowFiltering},a.prototype.scrollHandler=function(){V.isDevice&&(this.getModuleName()==="dropdownlist"&&!this.isFilterLayout()||this.getModuleName()==="combobox"&&!this.allowFiltering&&this.isDropDownClick)&&this.element&&!this.isElementInViewport(this.element)&&this.hidePopup()},a.prototype.isElementInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth},a.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var t=this.filterInput.parentElement.querySelector("."+pe.clearIcon);G(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)},a.prototype.setPopupPosition=function(e){var t,i=e,s=this.list.querySelector("."+pe.focus)||this.selectedLI,n=this.isEmptyList()?this.list:this.liCollections[0],r=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],l=n.getBoundingClientRect().height;this.listItemHeight=l+parseInt(window.getComputedStyle(n).marginBottom,10);var o=this.list.offsetHeight/2,c=h(s)?n.offsetTop:s.offsetTop,p=r.offsetTop;if(p-o<c&&!h(this.liCollections)&&this.liCollections.length>0&&!h(s)){var d=this.list.offsetHeight/l,f=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(d-(this.liCollections.length-this.activeIndex))*l-i+f,this.list.scrollTop=s.offsetTop}else c>o&&!this.enableVirtualization?(t=o-l/2,this.list.scrollTop=c-o+l/2):t=c;var v=this.inputWrapper.container.offsetHeight;return t=t+l+i-(l-v)/2,-t},a.prototype.setWidth=function(){var e=fe(this.popupWidth);if(e.indexOf("%")>-1){var t=this.inputWrapper.container.offsetWidth*parseFloat(e)/100;e=t.toString()+"px"}if(V.isDevice&&e.indexOf("px")>-1&&!this.allowFiltering&&(this.getModuleName()==="dropdownlist"||this.isDropDownClick&&this.getModuleName()==="combobox")){var i=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+(parseInt(getComputedStyle(i).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))*2+"px"}return e},a.prototype.scrollBottom=function(e,t,i){var s=this;if(t===void 0&&(t=!1),i===void 0&&(i=null),h(this.selectedLI)&&this.enableVirtualization&&(this.selectedLI=this.list.querySelector("."+O.li),!h(this.selectedLI)&&this.selectedLI.classList.contains("e-virtual-list")&&(this.selectedLI=this.liCollections[this.skeletonCount])),!h(this.selectedLI)){var n=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0;this.isUpwardScrolling=!1;var r=this.list.querySelectorAll(".e-virtual-list").length,l=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,o=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+n):this.selectedLI.offsetTop,c=this.list.offsetHeight,p=o-r*(this.selectedLI.offsetHeight+n)+(this.selectedLI.offsetHeight+n)-this.list.scrollTop,d=this.list.scrollTop+p-c,f=!1;d=e?d+parseInt(getComputedStyle(this.list).paddingTop,10)*2:d+parseInt(getComputedStyle(this.list).paddingTop,10);var v=o-r*(this.selectedLI.offsetHeight+n)+(this.selectedLI.offsetHeight+n)-this.list.scrollTop;if(v=this.fields.groupBy&&!h(this.fixedHeaderElement)?v-this.fixedHeaderElement.offsetHeight:v,this.activeIndex===0&&!this.enableVirtualization)this.list.scrollTop=0,f=this.isKeyBoardAction;else if(p>c||!(v>0&&this.list.offsetHeight>v)){var g=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,m=i==="pageDown"?this.getPageCount()-2:1;!this.enableVirtualization||this.isKeyBoardAction||t?this.isKeyBoardAction&&this.enableVirtualization&&l&&g===l&&i!=="end"&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.enableVirtualization&&this.itemTemplate?this.list.scrollTop+=d:(this.enableVirtualization&&(m=i==="pageDown"?this.getPageCount()+1:m),this.list.scrollTop+=(this.selectedLI.offsetHeight+n)*m),this.isPreventKeyAction=this.IsScrollerAtEnd()?!1:this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&i==="end"?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):(i==="pageDown"&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=d):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?e&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight+this.listItemHeight*2:this.virtualListInfo.startIndex*this.listItemHeight:0,f=this.isKeyBoardAction}this.isKeyBoardAction=f,this.enableVirtualization&&this.fields.groupBy&&this.fixedHeaderElement&&i==="down"&&setTimeout(function(){s.scrollStop(null,!0)},100)}},a.prototype.scrollTop=function(e){if(e===void 0&&(e=null),!h(this.selectedLI)){var t=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0,i=this.list.querySelectorAll(".e-virtual-list").length,s=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+t):this.selectedLI.offsetTop,n=s-i*(this.selectedLI.offsetHeight+t)-this.list.scrollTop,r=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;n=this.fields.groupBy&&!h(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n;var l=s-i*(this.selectedLI.offsetHeight+t)+(this.selectedLI.offsetHeight+t)-this.list.scrollTop,o=this.enableVirtualization&&this.getModuleName()==="autocomplete"&&n<=0;if(this.activeIndex===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(n<0||o){var c=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,p=e==="pageUp"?this.getPageCount()-2:1;this.enableVirtualization&&(p=e==="pageUp"?this.getPageCount():p),this.enableVirtualization&&this.isKeyBoardAction&&r&&c===r&&e!=="home"&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.list.scrollTop-=(this.selectedLI.offsetHeight+t)*p,this.isPreventKeyAction=this.list.scrollTop!==0?this.isPreventKeyAction:!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&e==="home"?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):(e==="pageUp"&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+n)}else l>0&&this.list.offsetHeight>l||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!h(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},a.prototype.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},a.prototype.isEditTextBox=function(){return!1},a.prototype.isFiltering=function(){return this.allowFiltering},a.prototype.isPopupButton=function(){return!0},a.prototype.setScrollPosition=function(e){if(this.isPreventScrollAction=!0,h(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,e.action);break;default:this.isKeyBoardAction=e.action==="up"||e.action==="pageUp"||e.action==="open",this.scrollTop(e.action);break}this.isKeyBoardAction=!1},a.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null),this.enableVirtualization&&(this.list.scrollTop=0,this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getSkeletonCount(),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()))},a.prototype.setEleWidth=function(e){h(e)||(typeof e=="number"?this.inputWrapper.container.style.width=fe(e):typeof e=="string"&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:fe(e)))},a.prototype.closePopup=function(e,t){var i=this,s=!h(this.filterInput)&&!h(this.filterInput.value)&&this.filterInput.value!=="";if(this.getModuleName()==="combobox"&&this.typedString,this.isTyped=!1,this.isVirtualTrackHeight=!1,!!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen)){this.keyboardEvent=null,b.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var n=this.popupObj.getScrollableParent(this.inputWrapper.container),r=0,l=n;r<l.length;r++){var o=l[r];b.remove(o,"scroll",this.scrollHandler)}V.isDevice&&this.isFilterLayout()&&this.isDeviceFullScreen&&w([document.body,this.popupObj.element],pe.popupFullScreen),this.isFilterLayout()&&(V.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&b.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(b.remove(this.backIconElement,"click",this.clickOnBackIcon),b.remove(this.clearIconElement,"click",this.clearText)),h(this.filterInput)||(b.remove(this.filterInput,"input",this.onInput),b.remove(this.filterInput,"keyup",this.onFilterUp),b.remove(this.filterInput,"keydown",this.onFilterDown),b.remove(this.filterInput,"blur",this.onBlurHandler),b.remove(this.filterInput,"paste",this.pasteHandler)),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(this.filterInput.removeAttribute("aria-activedescendant"),this.filterInput.removeAttribute("aria-disabled"),this.filterInput.removeAttribute("role"),this.filterInput.removeAttribute("autocomplete"),this.filterInput.removeAttribute("autocapitalize"),this.filterInput.removeAttribute("spellcheck")),this.filterInput=null),Q(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(pe.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.enableVirtualization&&(this.value==null||this.isTyped?(this.viewPortInfo.endIndex=this.viewPortInfo&&this.viewPortInfo.endIndex>0?this.viewPortInfo.endIndex:this.itemCount,(this.getModuleName()==="autocomplete"||this.getModuleName()==="dropdownlist"&&!h(this.typedString)&&this.typedString!==""||this.getModuleName()==="combobox"&&this.allowFiltering&&!h(this.typedString)&&this.typedString!=="")&&this.checkAndResetCache()):this.getModuleName()==="autocomplete"&&this.checkAndResetCache(),(this.getModuleName()==="dropdownlist"||this.getModuleName()==="combobox")&&this.skeletonCount!==0&&this.getSkeletonCount(!0)),this.beforePopupOpen=!1;var c={name:"FadeOut",duration:100,delay:e||0},p=this.popupObj,d={popup:p,cancel:!1,animation:c,event:t||null};this.trigger("close",d,function(v){if(i.getModuleName()==="dropdownlist"&&z.destroy({element:i.filterInput,floatLabelType:i.floatLabelType,properties:{placeholder:i.filterBarPlaceholder},buttons:i.clearIconElement},i.clearIconElement),i.filterInputObj=null,!h(i.popupObj)&&!h(i.popupObj.element.querySelector(".e-fixed-head"))){var g=i.popupObj.element.querySelector(".e-fixed-head");g.parentNode.removeChild(g),i.fixedHeaderElement=null}v.cancel||(i.getModuleName()==="autocomplete"&&i.rippleFun(),i.isPopupOpen?i.popupObj.hide(new bt(v.animation)):i.destroyPopup())}),V.isDevice&&!d.cancel&&this.popupObj.element.classList.contains("e-wide-popup")&&this.popupObj.element.classList.remove("e-wide-popup");var f;this.dataSource instanceof P?f=this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:f=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.enableVirtualization&&this.isFiltering()&&s&&this.totalItemCount!==f&&(this.updateInitialData(),this.checkAndResetCache())}},a.prototype.updateInitialData=function(){var e=this.selectData;if(!h(e)){var t=this.renderItems(e,this.fields);if(this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.getModuleName()==="combobox"&&(this.typedString=""),this.previousStartIndex=0,this.previousEndIndex=0,this.dataSource instanceof P?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.list.parentElement){var i=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});i.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(i)}this.getModuleName()!=="autocomplete"&&this.totalItemCount!==0&&this.totalItemCount>this.itemCount*2&&this.getSkeletonCount(),this.UpdateSkeleton(),this.listData=e,this.updateActionCompleteDataValues(t,e),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},a.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.inputElement.removeAttribute("aria-controls"),this.popupObj&&(this.resizer&&(b.remove(this.resizer,"mousedown",this.startResizing),b.remove(this.resizer,"touchstart",this.startResizing)),this.popupObj.destroy(),G(this.popupObj.element))},a.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},a.prototype.render=function(){this.preselectedIndex=h(this.index)?null:this.index,this.element.tagName==="INPUT"?(this.inputElement=this.element,h(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),h(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var e=this.cssClass;!h(this.cssClass)&&this.cssClass!==""&&(e=this.cssClass.replace(/\s+/g," ").trim()),!h(A(this.element,"fieldset"))&&A(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=z.createInput({element:this.inputElement,buttons:this.isPopupButton()?[pe.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:this.getModuleName()==="dropdownlist"?!0:this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:pe.hiddenElement}}),nt([this.hiddenElement],this.inputWrapper.container),this.hiddenElement.hasAttribute("aria-label")||this.hiddenElement.setAttribute("aria-label",this.getModuleName()),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=fe(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.floatLabelType!=="Never"&&z.calculateWidth(this.inputElement,this.inputWrapper.container),!h(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var t=this.element.getAttribute("id")?this.element.getAttribute("id"):$e("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&!this.readonly?this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()):this.getModuleName()==="dropdownlist"&&(this.targetElement().hasAttribute("aria-label")||Q(this.targetElement(),{"aria-label":this.getModuleName()}),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),this.inputElement.setAttribute("aria-expanded","false")),Q(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),this.value!==null||this.activeIndex!==null||this.text!==null)this.enableVirtualization&&(this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.index!==null&&(this.activeIndex=this.index+this.skeletonCount)),this.initValue(),this.selectedValueInfo=this.viewPortInfo,this.enableVirtualization&&(this.activeIndex=this.activeIndex+this.skeletonCount);else if(this.element.tagName==="SELECT"&&this.element.options[0]){var i=this.element;this.value=this.allowObjectBinding?this.getDataByValue(i.options[i.selectedIndex].value):i.options[i.selectedIndex].value,this.text=h(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(n){n.stopImmediatePropagation()},this.inputElement.onchange=function(n){n.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),h(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var s=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];!h(this.element.id)&&this.element.id!==""&&!h(s)&&(s.id="label_"+this.element.id.replace(/ /g,"_"),Q(this.inputElement,{"aria-labelledby":s.id})),this.renderComplete(),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount},a.prototype.getListHeight=function(){var e=this.createElement("div",{className:"e-dropdownbase"}),t=this.createElement("li",{className:"e-list-item"}),i=fe(this.popupHeight);e.style.height=parseInt(i,10).toString()+"px",e.appendChild(t),document.body.appendChild(e),this.virtualListHeight=e.getBoundingClientRect().height;var s=Math.ceil(t.getBoundingClientRect().height)+parseInt(window.getComputedStyle(t).marginBottom,10);return e.remove(),s},a.prototype.setFooterTemplate=function(e){var t;this.footer?this.isReact&&typeof this.footerTemplate=="function"?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),E([this.footer],pe.footer));var i=this.dropdownCompiler(this.footerTemplate);typeof this.footerTemplate!="function"&&i?t=Ie(M(this.footerTemplate,document).innerHTML.trim()):t=Ie(this.footerTemplate);var s=t({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);s&&s.length>0&&ye(s,this.footer),ye([this.footer],e)},a.prototype.setHeaderTemplate=function(e){var t;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),E([this.header],pe.header));var i=this.dropdownCompiler(this.headerTemplate);typeof this.headerTemplate!="function"&&i?t=Ie(M(this.headerTemplate,document).innerHTML.trim()):t=Ie(this.headerTemplate);var s=t({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);s&&s.length&&ye(s,this.header);var n=e.querySelector("div.e-content");e.insertBefore(this.header,n)},a.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},a.prototype.setOldText=function(e){this.text=e},a.prototype.setOldValue=function(e){this.value=e},a.prototype.refreshPopup=function(){!h(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&!(V.isDevice&&this.isFilterLayout())||this.getModuleName()==="autocomplete")&&(w([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},a.prototype.checkData=function(e){e.dataSource&&!h(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&e.dataSource instanceof P)&&(this.list&&!this.isReact?this.list.innerHTML="":this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var t=Object.keys(e).indexOf("value")!==-1&&h(e.value),i=Object.keys(e).indexOf("text")!==-1&&h(e.text);this.getModuleName()!=="autocomplete"&&this.allowFiltering&&(t||i)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!h(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!h(Object.keys(e.query))&&(this.actionCompleteData=this.getModuleName()==="combobox"?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},a.prototype.updateDataSource=function(e,t){(this.inputElement.value!==""||!h(e)&&(h(e.dataSource)||!(e.dataSource instanceof P)&&e.dataSource.length===0))&&this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&this.list&&(b.remove(this.list,"scroll",this.setFloatingHeader),b.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!h(e)&&(h(e.dataSource)||!(e.dataSource instanceof P)&&e.dataSource.length===0))||e.dataSource instanceof P||!h(e)&&Array.isArray(e.dataSource)&&!h(t)&&Array.isArray(t.dataSource)&&e.dataSource.length!==t.dataSource.length)&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()},a.prototype.checkCustomValue=function(){var e=this.allowObjectBinding&&!h(this.value)?I(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(e);var t=this.getItemData(),i=this.allowObjectBinding?this.itemData:t.value,s=h(i)?null:this.index;h(s)&&e===i||this.isAngular?this.setProperties({text:t.text?t.text.toString():t.text,value:i}):this.setProperties({text:t.text?t.text.toString():t.text,index:s,value:i})},a.prototype.updateInputFields=function(){this.getModuleName()==="dropdownlist"&&z.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},a.prototype.onPropertyChanged=function(e,t){var i=this;!h(e.dataSource)&&!this.isTouched&&h(e.value)&&h(e.index)&&!h(this.preselectedIndex)&&!h(this.index)&&(e.index=this.index),(!h(e.value)||!h(e.index))&&(this.isTouched=!0),this.getModuleName()==="dropdownlist"&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(var s=function(p){switch(p){case"query":case"dataSource":n.getSkeletonCount(),n.checkAndResetCache();break;case"htmlAttributes":n.setHTMLAttributes();break;case"width":n.setEleWidth(e.width),z.calculateWidth(n.inputElement,n.inputWrapper.container);break;case"placeholder":z.setPlaceholder(e.placeholder,n.inputElement);break;case"filterBarPlaceholder":n.filterInput&&z.setPlaceholder(e.filterBarPlaceholder,n.filterInput);break;case"readonly":n.getModuleName()!=="dropdownlist"&&z.setReadonly(e.readonly,n.inputElement),n.setReadOnly();break;case"cssClass":n.setCssClass(e.cssClass,t.cssClass),z.calculateWidth(n.inputElement,n.inputWrapper.container);break;case"enableRtl":n.setEnableRtl();break;case"enabled":n.setEnable();break;case"text":if(n.fields.disabled&&(e.text=e.text&&!n.isDisabledItemByIndex(n.getIndexByValue(n.getValueByText(e.text)))?e.text:null),e.text===null){n.clearAll();break}if(n.enableVirtualization){n.updateValues(),n.updateInputFields(),n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"});break}if(n.list||(n.dataSource instanceof P&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender){var d=n.getElementByText(e.text);if(!n.checkValidLi(d))if(n.liCollections&&n.liCollections.length===100&&n.getModuleName()==="autocomplete"&&n.listData.length>100)n.setSelectionData(e.text,t.text,"text");else if(e.text&&n.dataSource instanceof P){var f=n.getItems().length,v=h(n.fields.text)?n.fields.value:n.fields.text;n.typedString="",n.dataSource.executeQuery(n.getQuery(n.query).where(new be(v,"equal",e.text))).then(function(L){L.result.length>0?(i.addItem(L.result,f),i.updateValues()):i.setOldText(t.text)})}else n.getModuleName()==="autocomplete"?n.setInputValue(e,t):n.setOldText(t.text);n.updateInputFields()}break;case"value":if(n.fields.disabled&&(e.value=e.value!=null&&!n.isDisableItemValue(e.value)?e.value:null),e.value===null){n.clearAll();break}if(n.allowObjectBinding&&!h(e.value)&&!h(t.value)&&n.isObjectInArray(e.value,[t.value]))return{value:void 0};if(n.enableVirtualization){n.updateValues(),n.updateInputFields(),n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),n.preventChange=n.isAngular&&n.preventChange?!n.preventChange:n.preventChange;break}if(n.notify("beforeValueChange",{newProp:e}),n.list||(n.dataSource instanceof P&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender){var g=n.allowObjectBinding&&!h(e.value)?I(n.fields.value?n.fields.value:"",e.value):e.value,m=n.getElementByValue(g);if(!n.checkValidLi(m))if(n.liCollections&&n.liCollections.length===100&&n.getModuleName()==="autocomplete"&&n.listData.length>100)n.setSelectionData(e.value,t.value,"value");else if(e.value&&n.dataSource instanceof P){var C=n.getItems().length,v=h(n.fields.value)?n.fields.text:n.fields.value;n.typedString="";var k=n.allowObjectBinding&&!h(e.value)?I(v,e.value):e.value;n.dataSource.executeQuery(n.getQuery(n.query).where(new be(v,"equal",k))).then(function(N){N.result.length>0?(i.addItem(N.result,C),i.updateValues()):i.setOldValue(t.value)})}else n.getModuleName()==="autocomplete"?n.setInputValue(e,t):n.setOldValue(t.value);n.updateInputFields(),n.preventChange=n.isAngular&&n.preventChange?!n.preventChange:n.preventChange}break;case"index":if(n.fields.disabled&&(e.index=e.index!=null&&!n.isDisabledItemByIndex(e.index)?e.index:null),e.index===null){n.clearAll();break}if(n.list||(n.dataSource instanceof P&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender&&n.liCollections){var T=n.liCollections[e.index];n.checkValidLi(T)||(n.liCollections&&n.liCollections.length===100&&n.getModuleName()==="autocomplete"&&n.listData.length>100?n.setSelectionData(e.index,t.index,"index"):n.index=t.index),n.updateInputFields()}break;case"footerTemplate":n.popupObj&&n.setFooterTemplate(n.popupObj.element);break;case"headerTemplate":n.popupObj&&n.setHeaderTemplate(n.popupObj.element);break;case"valueTemplate":!h(n.itemData)&&n.valueTemplate!==null&&n.setValueTemplate();break;case"allowFiltering":n.allowFiltering&&(n.actionCompleteData={ulElement:n.ulElement,list:n.listData,isUpdated:!0},n.actionData=n.actionCompleteData,n.updateSelectElementData(n.allowFiltering));break;case"floatLabelType":z.removeFloating(n.inputWrapper),z.addFloating(n.inputElement,e.floatLabelType,n.placeholder,n.createElement),!h(n.inputWrapper.buttons[0])&&n.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&n.floatLabelType!=="Never"&&n.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":n.inputWrapper.clearButton||(z.setClearButton(e.showClearButton,n.inputElement,n.inputWrapper,null,n.createElement),n.bindClearEvent());break;default:{var x=n.getPropObject(p,e,t);u.prototype.onPropertyChanged.call(n,x.newProperty,x.oldProperty)}break}},n=this,r=0,l=Object.keys(e);r<l.length;r++){var o=l[r],c=s(o);if(typeof c=="object")return c.value}},a.prototype.checkValidLi=function(e){return this.isValidLI(e)?(this.setSelection(e,null),!0):!1},a.prototype.setSelectionData=function(e,t,i){var s=this,n;this.updateListValues=function(){if(i==="text")n=s.getElementByText(e),s.checkValidLi(n)||s.setOldText(t);else if(i==="value"){var r=s.fields.value?s.fields.value:"";s.allowObjectBinding&&!h(e)&&I(r,e),n=s.getElementByValue(e),s.checkValidLi(n)||s.setOldValue(t)}else i==="index"&&(n=s.liCollections[e],s.checkValidLi(n)||(s.index=t))}},a.prototype.updatePopupState=function(){this.beforePopupOpen&&(this.beforePopupOpen=!1,this.showPopup())},a.prototype.setReadOnly=function(){this.readonly?E([this.inputWrapper.container],["e-readonly"]):w([this.inputWrapper.container],["e-readonly"])},a.prototype.setInputValue=function(e,t){},a.prototype.setCssClass=function(e,t){h(t)||(t=t.replace(/\s+/g," ").trim()),h(e)||(e=e.replace(/\s+/g," ").trim()),z.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&z.setCssClass(e,[this.popupObj.element],t)},a.prototype.getModuleName=function(){return"dropdownlist"},a.prototype.showPopup=function(e){if(this.enabled){if(this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,this.isReact&&this.getModuleName()==="combobox"&&this.itemTemplate&&this.isCustomFilter&&this.isAddNewItemTemplate&&(this.renderList(),this.isAddNewItemTemplate=!1),this.isFiltering()&&this.dataSource instanceof P&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen){this.refreshPopup();return}this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(h(this.list)||!ni(this.list)&&(this.list.classList.contains(O.noData)||this.list.querySelectorAll("."+O.li).length<=0))&&(this.isReact&&this.isFiltering()&&this.itemTemplate!=null&&(this.isSecondClick=!1),this.renderList(e)),this.enableVirtualization&&this.listData&&this.listData.length&&(!h(this.value)&&(this.getModuleName()==="dropdownlist"||this.getModuleName()==="combobox")&&this.removeHover(),this.beforePopupOpen||this.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),this.beforePopupOpen&&this.invokeRenderPopup(e),this.enableVirtualization&&!this.allowFiltering&&this.selectedValueInfo!=null&&this.selectedValueInfo.startIndex>0&&this.value!=null&&this.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0}),!this.isSecondClick&&!this.isDropDownClick&&this.executeCloneElements()}},a.prototype.executeCloneElements=function(){var e=this,t=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isReact&&this.isFiltering()&&this.itemTemplate!=null&&setTimeout(function(){e.cloneElements(),e.isSecondClick=!(e.isReact&&e.isFiltering()&&e.dataSource instanceof P&&!e.list.querySelector("ul"))},t)},a.prototype.invokeRenderPopup=function(e){if(V.isDevice&&this.isFilterLayout()){var t=this;window.onpopstate=function(){t.hidePopup()},history.pushState({},"")}!h(this.list)&&(!h(this.list.children[0])||this.list.classList.contains(O.noData))&&this.renderPopup(e)},a.prototype.renderHightSearch=function(){},a.prototype.hidePopup=function(e){if(this.isEscapeKey&&this.getModuleName()==="dropdownlist")if(h(this.inputElement)||z.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,h(this.index))this.resetSelection();else{var t=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value):this.value,i=this.findListElement(this.ulElement,"li","data-value",t);this.selectedLI=this.liCollections[this.index]||i,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&this.itemData!==null&&this.setValueTemplate())}this.isVirtualTrackHeight=!1,this.customFilterQuery=null,this.closePopup(0,e);var s=this.getItemData(),n=!h(this.selectedLI);n&&this.enableVirtualization&&this.selectedLI.classList&&(n=this.selectedLI.classList.contains("e-active")),this.inputElement&&this.inputElement.value===""&&!this.isInteracted&&(this.isSelectCustom||n&&this.inputElement.value!==s.text)&&(this.isSelectCustom=!1,this.clearAll(e))},a.prototype.focusIn=function(e){if(this.enabled&&!this.targetElement().classList.contains(pe.disable)){var t=!1;this.preventFocus&&V.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),E([this.inputWrapper.container],[pe.inputFocus]),this.onFocus(e),this.floatLabelType!=="Never"&&z.calculateWidth(this.inputElement,this.inputWrapper.container)}},a.prototype.focusOut=function(e){this.enabled&&(!this.enableVirtualization&&(this.getModuleName()==="combobox"||this.getModuleName()==="autocomplete")&&(this.isTyped=!0),this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),w([this.inputWrapper.container],[pe.inputFocus]),this.floatLabelType!=="Never"&&z.calculateWidth(this.inputElement,this.inputWrapper.container))},a.prototype.disableItem=function(e){if(this.fields.disabled){this.list||this.renderList();var t=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if(typeof e=="string")t=this.getIndexByValue(e);else if(typeof e=="object"){if(e instanceof HTMLLIElement){for(var i=0;i<this.liCollections.length;i++)if(this.liCollections[i]===e){t=this.getIndexByValue(e.getAttribute("data-value"));break}}else for(var s=JSON.parse(JSON.stringify(e))[this.fields.value],i=0;i<this.listData.length;i++)if(JSON.parse(JSON.stringify(this.listData[i]))[this.fields.value]===s){t=this.getIndexByValue(s);break}}else t=e;var n=t<this.liCollections.length&&t>-1;if(n&&!JSON.parse(JSON.stringify(this.listData[t]))[this.fields.disabled]){var r=this.liCollections[t];if(r){this.disableListItem(r);var l=JSON.parse(JSON.stringify(this.listData[t]));l[this.fields.disabled]=!0,this.listData[t]=l,this.dataSource=this.listData,r.classList.contains(pe.focus)&&this.removeFocus(),r.classList.contains(pe.selected)&&this.clear()}}}}},a.prototype.destroy=function(){if(this.isActive=!1,this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),Ko(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.popupObj&&this.popupObj.hide(),this.unWireEvent(),this.list&&this.unWireListEvents(),!(this.element&&!this.element.classList.contains("e-"+this.getModuleName()))){if(this.inputElement){for(var e=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],t=0;t<e.length;t++)this.inputElement.removeAttribute(e[t]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),z.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container&&this.inputWrapper.container.parentElement&&(this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?G(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),G(this.inputWrapper.container))),delete this.hiddenElement,this.filterInput=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.clearIconElement=null,this.popupObj=null,this.popupContentElement=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,this.actionData.ulElement=null,this.inputElement&&!h(this.inputElement.onchange)&&(this.inputElement.onchange=null),this.inputElement&&!h(this.inputElement.onselect)&&(this.inputElement.onselect=null),z.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties,buttons:this.inputWrapper.container.querySelectorAll(".e-input-group-icon")[0]},this.clearButton),this.clearButton=null,this.inputElement=null,this.inputWrapper=null,u.prototype.destroy.call(this)}},a.prototype.getItems=function(){return this.list||(this.dataSource instanceof P&&(this.initialRemoteRender=!0),this.renderList()),this.ulElement?u.prototype.getItems.call(this):[]},a.prototype.getDataByValue=function(e){return u.prototype.getDataByValue.call(this,e)},a.prototype.clear=function(){this.value=null},Le([y(null)],a.prototype,"cssClass",void 0),Le([y("100%")],a.prototype,"width",void 0),Le([y(!0)],a.prototype,"enabled",void 0),Le([y(!1)],a.prototype,"enablePersistence",void 0),Le([y("300px")],a.prototype,"popupHeight",void 0),Le([y("100%")],a.prototype,"popupWidth",void 0),Le([y(null)],a.prototype,"placeholder",void 0),Le([y(null)],a.prototype,"filterBarPlaceholder",void 0),Le([y({})],a.prototype,"htmlAttributes",void 0),Le([y(null)],a.prototype,"query",void 0),Le([y(null)],a.prototype,"valueTemplate",void 0),Le([y(null)],a.prototype,"headerTemplate",void 0),Le([y(null)],a.prototype,"footerTemplate",void 0),Le([y(!1)],a.prototype,"allowFiltering",void 0),Le([y(!0)],a.prototype,"isDeviceFullScreen",void 0),Le([y(!1)],a.prototype,"readonly",void 0),Le([y(!1)],a.prototype,"enableVirtualization",void 0),Le([y(!1)],a.prototype,"allowResize",void 0),Le([y(null)],a.prototype,"text",void 0),Le([y(null)],a.prototype,"value",void 0),Le([y(!1)],a.prototype,"allowObjectBinding",void 0),Le([y(null)],a.prototype,"index",void 0),Le([y("Never")],a.prototype,"floatLabelType",void 0),Le([y(!1)],a.prototype,"showClearButton",void 0),Le([q()],a.prototype,"filtering",void 0),Le([q()],a.prototype,"change",void 0),Le([q()],a.prototype,"beforeOpen",void 0),Le([q()],a.prototype,"open",void 0),Le([q()],a.prototype,"close",void 0),Le([q()],a.prototype,"blur",void 0),Le([q()],a.prototype,"focus",void 0),Le([q()],a.prototype,"resizeStop",void 0),Le([q()],a.prototype,"resizing",void 0),Le([q()],a.prototype,"resizeStart",void 0),a=Le([ot],a),a}(Wl),Zs=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ue=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},Rt="e-treeview",tr="e-control",ze="e-icon-collapsible",we="e-icon-expandable",de="e-list-item",ci="e-list-text",Du="e-text-wrap",Iu="e-ie-wrap",Ae="e-list-parent",gs="e-hover",Et="e-active",ys="e-icons-spinner",Xt="e-process",Xe="e-icons",Ze="e-text-content",bs="e-input",ir="e-input-group",Cs="e-tree-input",Ia="e-editing",sr="e-rtl",ar="e-interaction",Ou="e-drag-item",nr="e-droppable",Oa="e-dragging",Yi="e-sibling",Ss="e-drop-in",Ki="e-drop-next",La="e-drop-out",Na="e-no-drop",Lu="e-fullrow-wrap",Jt="e-fullrow",Oi="e-selected",Es="e-expanded",rr="e-node-collapsed",Li="e-disable",Nu="e-drop-count",ut="e-check",Mt="e-stop",mt="e-treeview-checkbox",Qt="e-frame",Bu="e-ripple-container",lr="e-ripple",Pu="e-ripple-element",pi="e-node-focus",or="e-list-img",Ru="e-bigger",Mu="e-small",Fu="e-has-child",xs="e-animation-active",hr="e-disabled",_i="e-prevent",ur={treeRole:"group",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},Vu=function(u){Zs(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return ue([y("child")],a.prototype,"child",void 0),ue([y([])],a.prototype,"dataSource",void 0),ue([y("expanded")],a.prototype,"expanded",void 0),ue([y("hasChildren")],a.prototype,"hasChildren",void 0),ue([y("htmlAttributes")],a.prototype,"htmlAttributes",void 0),ue([y("iconCss")],a.prototype,"iconCss",void 0),ue([y("id")],a.prototype,"id",void 0),ue([y("imageUrl")],a.prototype,"imageUrl",void 0),ue([y("isChecked")],a.prototype,"isChecked",void 0),ue([y("parentID")],a.prototype,"parentID",void 0),ue([y(null)],a.prototype,"query",void 0),ue([y("selectable")],a.prototype,"selectable",void 0),ue([y("selected")],a.prototype,"selected",void 0),ue([y(null)],a.prototype,"tableName",void 0),ue([y("text")],a.prototype,"text",void 0),ue([y("tooltip")],a.prototype,"tooltip",void 0),ue([y("navigateUrl")],a.prototype,"navigateUrl",void 0),a}(Dt),cr=function(u){Zs(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return ue([y("SlideDown")],a.prototype,"effect",void 0),ue([y(400)],a.prototype,"duration",void 0),ue([y("linear")],a.prototype,"easing",void 0),a}(Dt),Hu=function(u){Zs(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return ue([Nt({effect:"SlideUp",duration:400,easing:"linear"},cr)],a.prototype,"collapse",void 0),ue([Nt({effect:"SlideDown",duration:400,easing:"linear"},cr)],a.prototype,"expand",void 0),a}(Dt),Wu=function(u){Zs(a,u);function a(t,i){var s=u.call(this,t,i)||this;return s.isRefreshed=!1,s.preventExpand=!1,s.checkedElement=[],s.disableNode=[],s.validArr=[],s.validNodes=[],s.expandChildren=[],s.isFieldChange=!1,s.changeDataSource=!1,s.hasTemplate=!1,s.isFirstRender=!1,s.isNodeDropped=!1,s.isInteracted=!1,s.isRightClick=!1,s.mouseDownStatus=!1,s.isDropIn=!1,s.OldCheckedData=[],s.isHiddenItem=!1,s}e=a,a.prototype.getModuleName=function(){return"treeview"},a.prototype.preRender=function(){var t=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",shiftSpace:"shift+space",ctrlSpace:"ctrl+space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:we,ariaAttributes:ur,expandIconPosition:"Left",itemCreated:function(i){t.beforeNodeCreate(i)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new bt({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),this.DDTTreeData=JSON.parse(JSON.stringify(this.fields.dataSource)),h(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),h(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),h(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},a.prototype.getPersistData=function(){var t=["selectedNodes","checkedNodes","expandedNodes"];return this.addOnPersist(t)},a.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},a.prototype.initialize=function(){this.element.setAttribute("role","tree"),!h(this.fields.dataSource)&&Array.isArray(this.fields.dataSource)&&this.fields.dataSource.length!==0&&this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},a.prototype.setDisabledMode=function(){this.disabled?(this.element.classList.add(hr),this.element.setAttribute("aria-disabled","true")):(this.element.classList.remove(hr),this.element.setAttribute("aria-disabled","false"))},a.prototype.setEnableRtl=function(){(this.enableRtl?E:w)([this.element],sr)},a.prototype.setRipple=function(){var t="."+Jt+",."+Ze,i={selector:t,ignore:"."+Ze+" > ."+Xe+",."+ir+",."+bs+", ."+mt};this.rippleFn=Vt(this.element,i);var s={selector:"."+Ze+" > ."+Xe,isCenterRipple:!0};this.rippleIconFn=Vt(this.element,s)},a.prototype.setFullRow=function(t){(t?E:w)([this.element],Lu)},a.prototype.setMultiSelect=function(t){t?this.element.setAttribute("aria-multiselectable","true"):this.element.setAttribute("aria-multiselectable","false")},a.prototype.templateComplier=function(t){if(t){this.hasTemplate=!0,this.element.classList.add(ar);try{return typeof t!="function"&&document.querySelectorAll(t).length?Ie(document.querySelector(t).innerHTML.trim()):Ie(t)}catch(i){return Ie(t)}}this.element.classList.remove(ar)},a.prototype.setDataBinding=function(t){var i=this;this.treeList.push("false"),this.fields.dataSource instanceof P?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(s){i.isOffline=i.fields.dataSource.dataSource.offline,i.fields.dataSource instanceof P&&i.isOffline&&(i.treeList.pop(),i.treeData=s.result,i.isNumberTypeId=i.getType(),i.setRootData(),i.renderItems(!0),i.treeList.length===0&&!i.isLoaded&&i.finalize())}).catch(function(s){i.trigger("actionFailure",{error:s})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(s){i.treeList.pop(),i.treeData=s.result,i.isNumberTypeId=i.getType(),i.setRootData(),t&&(i.changeDataSource=!0),i.renderItems(!0),i.changeDataSource=!1,i.treeList.length===0&&!i.isLoaded&&i.finalize()}).catch(function(s){i.trigger("actionFailure",{error:s})})):(this.treeList.pop(),h(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),this.treeList.length===0&&!this.isLoaded&&this.finalize()},a.prototype.getQuery=function(t,i){i===void 0&&(i=null);var s=[],n;if(t.query)n=t.query.clone();else{n=new ee;for(var r=this.getActualProperties(t),l=0,o=Object.keys(r);l<o.length;l++){var c=o[l];c!=="dataSource"&&c!=="tableName"&&c!=="child"&&t[""+c]&&c!=="url"&&s.indexOf(t[""+c])===-1&&s.push(t[""+c])}n.select(s),Object.prototype.hasOwnProperty.call(r,"tableName")&&n.from(t.tableName)}return Ve.addSorting(this.sortOrder,t.text,n),!h(i)&&!h(t.parentID)&&n.where(t.parentID,"equal",this.isNumberTypeId?parseFloat(i):i),n},a.prototype.getType=function(){return this.treeData[0]?typeof I(this.fields.id,this.treeData[0])=="number":!1},a.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),this.dataType===1){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var t=this.getChildNodes(this.treeData,void 0,!0);h(t)?this.rootData=[]:this.rootData=t}else this.rootData=this.treeData},a.prototype.isChildObject=function(){return typeof this.fields.child=="object"},a.prototype.renderItems=function(t){this.listBaseOption.ariaAttributes.level=1;var i=this.getSortedData(this.rootData);this.ulElement=Ve.createList(this.createElement,t?this.rootData:i,this.listBaseOption),this.element.appendChild(this.ulElement);var s=this.ulElement.querySelectorAll(".e-list-item");if(this.loadOnDemand===!1)for(var n=0;n<s.length;)this.renderChildNodes(s[parseInt(n.toString(),10)],!0,null,!0),n++;var r=Ee("."+Ae,this.element);(r.length===1&&s&&s.length!==0||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},a.prototype.updateCheckedStateFromDS=function(){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(this.dataType===1){for(var t=this.fields,i=new P(this.treeData).executeLocal(new ee().where(t.isChecked,"equal",!0,!1)),s=0;s<i.length;s++){var n=i[parseInt(s.toString(),10)][this.fields.id]?i[parseInt(s.toString(),10)][this.fields.id].toString():null;if(this.checkedNodes.indexOf(n)===-1&&!this.isLoaded&&this.checkDisabledState(n,i[s]),i[parseInt(s.toString(),10)][this.fields.hasChildren])for(var r=i[parseInt(s.toString(),10)][this.fields.id],l=new P(this.treeData).executeLocal(new ee().where(t.parentID,"equal",r,!1)),o=0;o<l.length;o++){var c=l[parseInt(o.toString(),10)][this.fields.id]?l[parseInt(o.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(c)===-1&&this.autoCheck&&this.checkDisabledState(c,l[o])}}for(var s=0;s<this.checkedNodes.length;s++){var p=this.fields,d=new P(this.treeData).executeLocal(new ee().where(p.id,"equal",this.checkedNodes[parseInt(s.toString(),10)],!0));if(d[0]&&this.autoCheck&&(this.getCheckedNodeDetails(p,d),this.checkIndeterminateState(d[0])),d.length>0){var f=d[0][this.fields.id]?d[0][this.fields.id].toString():null;this.checkedNodes.indexOf(f)>-1&&this.validNodes.indexOf(f)===-1&&this.validNodes.push(f)}for(var v=new P(this.treeData).executeLocal(new ee().where(p.parentID,"equal",this.checkedNodes[parseInt(s.toString(),10)],!0)),g=0;g<v.length;g++){var f=v[parseInt(g.toString(),10)][this.fields.id]?v[parseInt(g.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(f)===-1&&this.autoCheck&&this.checkDisabledState(f,v[g]),this.checkedNodes.indexOf(f)>-1&&this.validNodes.indexOf(f)===-1&&this.validNodes.push(f)}}}else if(this.dataType===2||this.fields.dataSource instanceof P&&this.isOffline){for(var g=0;g<this.treeData.length;g++){var m=this.treeData[parseInt(g.toString(),10)][this.fields.id]?this.treeData[parseInt(g.toString(),10)][this.fields.id].toString():"";this.treeData[parseInt(g.toString(),10)][this.fields.isChecked]&&!this.isLoaded&&this.checkedNodes.indexOf(m)===-1&&this.checkDisabledState(m,this.treeData[g]),this.checkedNodes.indexOf(m)>-1&&this.validNodes.indexOf(m)===-1&&this.validNodes.push(m);var C=I(this.fields.child.toString(),this.treeData[parseInt(g.toString(),10)]);C&&this.updateChildCheckState(C,this.treeData[parseInt(g.toString(),10)])}this.validNodes=this.enablePersistence?this.checkedNodes:this.validNodes}this.setProperties({checkedNodes:this.validNodes},!0)}},a.prototype.getCheckedNodeDetails=function(t,i){var s=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null,n=0,r=this.element.querySelector('[data-uid="'+i[0][this.fields.id]+'"]'),l=this.element.querySelector('[data-uid="'+i[0][this.fields.parentID]+'"]');if(!r&&!l){this.parentNodeCheck.indexOf(s)===-1&&this.parentNodeCheck.push(s);for(var o=this.getChildNodes(this.treeData,s),c=0;c<o.length;c++){var p=o[parseInt(c.toString(),10)][this.fields.id]?o[parseInt(c.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(p)!==-1&&n++,n===o.length&&this.checkedNodes.indexOf(s)===-1&&this.checkDisabledState(s)}var d=new P(this.treeData).executeLocal(new ee().where(t.id,"equal",s,!0));this.getCheckedNodeDetails(t,d)}else if(l){var f=M("."+ut,l);f||this.changeState(l,"indeterminate",null,!0,!0)}},a.prototype.updateParentCheckState=function(){var t=Ee("."+Mt,this.element),i,s=this.treeData;this.element.classList.contains("e-filtering")&&(s=this.DDTTreeData);for(var n=0;n<t.length;n++){var r=A(t[parseInt(n.toString(),10)],"."+de),l=r.getAttribute("data-uid").toString(),o=void 0;this.element.classList.contains("e-filtering")&&(o=new P(this.OldCheckedData).executeLocal(new ee().where("parentID","equal",l,!0))),this.dataType===1?i=new P(s).executeLocal(new ee().where(this.fields.parentID,"equal",l,!0)):i=this.getChildNodes(s,l);var c=0;if(i){for(var p=function(g){var m=i[parseInt(g.toString(),10)][d.fields.id].toString();(d.checkedNodes.indexOf(m)!==-1||d.element.classList.contains("e-filtering")&&o.findIndex(function(C){return C.id===m})!==-1)&&c++},d=this,f=0;f<i.length;f++)p(f);if(c===i.length){var v=r.getAttribute("data-uid");this.checkedNodes.indexOf(v)===-1&&this.checkDisabledState(v),this.changeState(r,"check",null,!0,!0)}else c===0&&this.checkedNodes.length===0&&this.changeState(r,"uncheck",null,!0,!0)}}},a.prototype.checkIndeterminateState=function(t){var i;if(this.dataType===1?i=this.element.querySelector('[data-uid="'+t[this.fields.parentID]+'"]'):i=this.element.querySelector('[data-uid="'+t[this.fields.id]+'"]'),i){var s=i.getAttribute("aria-checked");s!=="true"&&this.changeState(i,"indeterminate",null,!0,!0)}else this.dataType===2&&this.parentNodeCheck.indexOf(t[this.fields.id].toString())===-1&&this.parentNodeCheck.push(t[this.fields.id].toString())},a.prototype.updateChildCheckState=function(t,i){for(var s=0,n=i[this.fields.id]?i[this.fields.id].toString():"",r=0;r<t.length;r++){var l=t[parseInt(r.toString(),10)][this.fields.id]?t[parseInt(r.toString(),10)][this.fields.id].toString():"";t[parseInt(r.toString(),10)][this.fields.isChecked]&&!this.isLoaded&&this.checkedNodes.indexOf(l)===-1&&this.checkDisabledState(l,t[r]),this.checkedNodes.indexOf(n)!==-1&&this.checkedNodes.indexOf(l)===-1&&this.autoCheck&&this.checkDisabledState(l,t[r]),this.checkedNodes.indexOf(l)!==-1&&this.autoCheck&&s++,this.checkedNodes.indexOf(l)>-1&&this.validNodes.indexOf(l)===-1&&this.validNodes.push(l);var o=I(this.fields.child.toString(),t[parseInt(r.toString(),10)]);o&&o.length&&(this.parentCheckData.indexOf(i)===-1&&this.parentCheckData.push(i),this.updateChildCheckState(o,t[parseInt(r.toString(),10)])),s===t.length&&this.autoCheck&&this.checkedNodes.indexOf(n)===-1&&this.checkDisabledState(n,i)}if(s!==0&&this.autoCheck){this.checkIndeterminateState(i);for(var c=0;c<this.parentCheckData.length;c++)i!==this.parentCheckData[parseInt(c.toString(),10)]&&this.parentCheckData[parseInt(c.toString(),10)]&&this.checkIndeterminateState(this.parentCheckData[parseInt(c.toString(),10)])}this.parentCheckData=[]},a.prototype.beforeNodeCreate=function(t){if(this.showCheckBox){var i=an(this.createElement,!0,{cssClass:this.touchClass});i.classList.add(mt);var s=M("div."+we+", div."+ze,t.item),n=t.item.getAttribute("data-uid");t.item.childNodes[0].insertBefore(i,t.item.childNodes[0].childNodes[h(s)?0:1]);var r=I(t.fields.isChecked,t.curData);this.checkedNodes.indexOf(n)>-1?(M("."+Qt,i).classList.add(ut),t.item.setAttribute("aria-checked","true"),this.addCheck(t.item)):!h(r)&&r.toString()==="true"?(M("."+Qt,i).classList.add(ut),t.item.setAttribute("aria-checked","true"),this.addCheck(t.item)):t.item.setAttribute("aria-checked","false");var l=M("."+Qt,i);b.add(l,"mousedown",this.frameMouseHandler,this),b.add(l,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(t.item),this.allowMultiSelection&&!t.item.classList.contains(Oi)&&t.item.setAttribute("aria-selected","false");var o=t.fields;if(this.addActionClass(t,o.selected,Oi),this.addActionClass(t,o.expanded,Es),t.item.setAttribute("tabindex","-1"),b.add(t.item,"focus",this.focusIn,this),!h(this.nodeTemplateFn)){var c=t.item.querySelector("."+ci),p=t.item.getAttribute("data-uid");c.innerHTML="",this.renderNodeTemplate(t.curData,c,p)}var d={node:t.item,nodeData:t.curData,text:t.text};if(!this.isRefreshed&&(this.trigger("drawNode",d),t.curData[this.fields.selectable]===!1&&!this.showCheckBox)){t.item.classList.add(_i);var f=t.item.firstElementChild;f.style.cursor="not-allowed"}},a.prototype.frameMouseHandler=function(t){var i=M("."+Bu,t.target.parentElement);xi(t,i)},a.prototype.addActionClass=function(t,i,s){var n=t.curData,r=I(i,n);!h(r)&&r.toString()!=="false"&&t.item.classList.add(s)},a.prototype.getDataType=function(t,i){if(this.fields.dataSource instanceof P){for(var s=0;s<t.length;s++)if(this.isOffline){if(typeof i.child=="string"&&h(I(i.child,t[parseInt(s.toString(),10)]))&&!h(I(i.parentID,t[parseInt(s.toString(),10)])))return 1}else if(typeof i.child=="string"&&h(I(i.child,t[parseInt(s.toString(),10)])))return 1;return 2}for(var s=0,n=t.length;s<n;s++){if(typeof i.child=="string"&&(!h(I(i.child,t[parseInt(s.toString(),10)]))||Object.prototype.hasOwnProperty.call(t[parseInt(s.toString(),10)],i.child))||this.isChildObject())return 2;if(!h(I(i.parentID,t[parseInt(s.toString(),10)]))||!h(I(i.hasChildren,t[parseInt(s.toString(),10)])))return 1}return 1},a.prototype.getGroupedData=function(t,i){for(var s=new ee().group(i),n=Ve.getDataSource(t,s),r=[],l=0;l<n.length;l++){var o=n[parseInt(l.toString(),10)].items;r.push(o)}return r},a.prototype.getSortedData=function(t){return t&&this.sortOrder!=="None"&&(t=Ve.getDataSource(t,Ve.addSorting(this.sortOrder,this.fields.text))),t},a.prototype.finalizeNode=function(t,i,s){var n=this;if(i||this.updateAttributes(t),!s){var r=Ee("."+Es,t);if(!this.loadOnDemand&&this.fields.dataSource instanceof P&&(this.isInitalExpand=this.treeData.filter(function(o){return o[n.fields.expanded]===!0}).length>0?!0:this.isInitalExpand),!this.isInitalExpand)for(var l=0;l<r.length;l++)this.renderChildNodes(r[parseInt(l.toString(),10)]);w(r,Es)}i||this.updateList(),this.isLoaded&&this.updateCheckedProp()},a.prototype.updateAttributes=function(t){for(var i=Ee("."+or,t),s=0;s<i.length;s++)i[parseInt(s.toString(),10)].setAttribute("alt",or);if(this.isLoaded){for(var n=Ee("."+Oi,t),r=0;r<n.length;r++){this.selectNode(n[parseInt(r.toString(),10)],null);break}w(n,Oi)}for(var l=Ee("."+de+":not(."+Es+")",t),o=0;o<l.length;o++){var c=M("div."+Xe,l[parseInt(o.toString(),10)]);c&&c.classList.contains(we)&&this.disableExpandAttr(l[parseInt(o.toString(),10)])}},a.prototype.updateCheckedProp=function(){if(this.showCheckBox){var t=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:t},!0)}},a.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var t=Ee("li",this.element),i=void 0,s=0;s<t.length;s++)t[parseInt(s.toString(),10)].classList.contains(de)&&(i=M("."+Ae,t[parseInt(s.toString(),10)]),i?this.ensureParentCheckState(t[parseInt(s.toString(),10)]):this.ensureChildCheckState(t[parseInt(s.toString(),10)]));else for(var n=Ee("."+Mt,this.element),s=0;s<n.length;s++)n[parseInt(s.toString(),10)].classList.remove(Mt)},a.prototype.ensureParentCheckState=function(t){if(!h(t)){if(t.classList.contains(Rt))return;var i=t;t.classList.contains(de)&&(i=M("."+Ae,t));var s=Ee("."+mt+" ."+ut,i),n=Ee("."+Mt,i),r=Ee(this.checkDisabledChildren?"."+de:"."+de+":not(."+Li+")",i),l=t.getElementsByClassName(mt)[0],o=r.length,c=s.length,p=[],d=[],f=t.getAttribute("data-uid"),v=!0,g=!1;r.forEach(function(R){if(R instanceof HTMLElement){var Y=R.getAttribute("aria-checked");Y==="true"?g=!0:v=!1}});var m=!1;if(this.element.classList.contains("e-filtering")){var C=new P(this.OldCheckedData).executeLocal(new ee().where("parentID","equal",f,!0));c=C.length;var k=new P(this.OldCheckedData).executeLocal(new ee().where("hasChildren","equal",!0,!0));k.length>0&&g&&(this.OldCheckedData.some(function(R){return R.id===f})||this.parentNodeCheck.indexOf(f)!==-1)&&(c=k.length,m=!0);var T=[];this.dataType===1?T=new P(this.DDTTreeData).executeLocal(new ee().where(this.fields.parentID,"equal",f,!0)):T=this.getChildNodes(this.DDTTreeData,f),o=T.length}if(this.autoCheck&&this.showCheckBox&&!(this.fields.dataSource instanceof P)){var x=this.getSelectedChildNodeDetails(f);p=x,d=new P(this.checkActionNodes).executeLocal(new ee().where("parentID","equal",f,!0))}if(o===0&&c===0)return;o===c||m&&o>0&&(d.length===p.length||d.length!==p.length)&&d.length!==0&&p.length!==0&&v&&this.autoCheck&&this.showCheckBox?this.changeState(l,"check",null,!0,!0):c>0&&!m&&this.autoCheck&&this.showCheckBox?this.changeState(l,"indeterminate",null,!0,!0):c>0||n.length>0?this.changeState(l,"indeterminate",null,!0,!0):c===0&&this.changeState(l,"uncheck",null,!0,!0);var L=A(t,"."+Ae);if(!h(L)){var N=A(L,"."+de);this.ensureParentCheckState(N)}}},a.prototype.getSelectedChildNodeDetails=function(t){var i=this,s=typeof this.fields.child=="string"?this.fields.child:null,n=this.fields.id,r=this.fields.parentID,l=function(o){if(!h(s)&&s in o&&Array.isArray(o[s])){var c=o[n];if(!h(c))return c.toString()===t}else{var p=o[r];if(!h(p))return p.toString()===t}return!1};return this.checkedNodes.map(function(o){return i.getNodeObject(o)}).filter(function(o){return o&&typeof o=="object"&&s in o||i.dataType!==2&&typeof o=="object"&&(r in o||s in o)?l(o):!1})},a.prototype.ensureChildCheckState=function(t,i,s){var n=this;if(!h(t)){var r=M("."+Ae,t),l=void 0;if(!h(r)){var o=Array.from(r.querySelectorAll("li"));l=Ee("."+mt,r),this.isFilter&&(l=Array.from(l).filter(function(m){var C=m.closest("li").getAttribute("data-uid");return C!==null&&n.checkedNodes.indexOf(C)!==-1}),o=Array.from(o).filter(function(m){var C=m.getAttribute("data-uid");return C!==null&&n.checkedNodes.indexOf(C)!==-1}),l.length===0&&(l=Ee("."+mt,r),o=Array.from(r.querySelectorAll("li"))));for(var c=t.getElementsByClassName(Qt)[0].classList.contains(ut),p=t.getElementsByClassName(Qt)[0].classList.contains(Mt),d=void 0,f=0;f<l.length;f++){var v=o[parseInt(f.toString(),10)].getAttribute("data-uid");if(!h(this.currentLoadData)&&!h(I(this.fields.isChecked,this.currentLoadData[parseInt(f.toString(),10)])))d=I(this.fields.isChecked,this.currentLoadData[parseInt(f.toString(),10)])?"check":"uncheck",this.ele!==-1&&(d=c?"check":"uncheck"),d==="uncheck"&&!ni(this.parentNodeCheck)&&this.autoCheck&&this.parentNodeCheck.indexOf(v)!==-1&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(v),1),d="indeterminate");else{var g=l[parseInt(f.toString(),10)].getElementsByClassName(Qt)[0].classList.contains(ut);c||g&&!this.isLoaded||this.checkedNodes.indexOf(v)!==-1&&this.isLoaded&&(p||c)?d="check":o[parseInt(f.toString(),10)].classList.contains(Fu)&&!ni(this.parentNodeCheck)&&this.autoCheck&&(c||p)&&this.parentNodeCheck.indexOf(v)!==-1?(d="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(v),1)):this.dataType===1&&!ni(this.parentNodeCheck)&&this.autoCheck&&(c||p)&&this.parentNodeCheck.indexOf(v)!==-1?(d="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(v),1)):d="uncheck"}this.changeState(l[parseInt(f.toString(),10)],d,i,!0,!0)}}this.autoCheck&&this.isLoaded&&!s&&this.updateParentCheckState()}},a.prototype.doCheckBoxAction=function(t,i){if(h(t)){var f=Ee("."+mt,this.element);if(this.loadOnDemand)for(var v=0;v<f.length;v++){var n=A(f[parseInt(v.toString(),10)],"."+de);this.updateFieldChecked(f[parseInt(v.toString(),10)],i),this.changeState(f[parseInt(v.toString(),10)],i?"check":"uncheck",null,null,null,i),this.updateOldCheckedData([this.getNodeData(n)])}else for(var v=0;v<f.length;v++){var n=A(f[parseInt(v.toString(),10)],"."+de);this.updateFieldChecked(f[parseInt(v.toString(),10)],i),this.changeState(f[parseInt(v.toString(),10)],i?"check":"uncheck"),this.updateOldCheckedData([this.getNodeData(n)])}}else{t.reverse();for(var s=t.length-1;s>=0;s--){var n=this.getElement(t[parseInt(s.toString(),10)]);if(h(n)){var r=t[s-t.length]?t[s-t.length].toString():t[parseInt(s.toString(),10)]?t[parseInt(s.toString(),10)].toString():null;if(r!==""&&i&&r)this.setValidCheckedNode(r,t),this.dynamicCheckState(r,i);else if(this.checkedNodes.indexOf(r)!==-1&&r!==""&&!i){this.checkedNodes.splice(this.checkedNodes.indexOf(r),1);var l=this.getChildNodes(this.treeData,r);if(l){for(var o=0;o<l.length;o++){var c=l[parseInt(o.toString(),10)][this.fields.id]?l[parseInt(o.toString(),10)][this.fields.id].toString():null;if(this.checkedNodes.indexOf(c)!==-1){this.checkedNodes.splice(this.checkedNodes.indexOf(c),1);var p=this.element.querySelector('[data-uid="'+c+'"]');p&&this.changeState(p,"uncheck",null)}}this.parentNodeCheck.indexOf(r)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1)}r&&this.dynamicCheckState(r,i),this.updateField(this.treeData,this.fields,r,"isChecked",null)}continue}var d=M("."+Ae+" ."+mt,n);this.validateCheckNode(d,!i,n,null)}}if(t)for(var g=0;g<t.length-1;g++){var r=t[parseInt(g.toString(),10)]?t[parseInt(g.toString(),10)].toString():"";i||this.updateField(this.treeData,this.fields,r,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()},a.prototype.updateFieldChecked=function(t,i){var s=A(t,"."+de),n=s.getAttribute("data-uid"),r=this.getNodeData(s);r.isChecked==="true"&&!i&&this.updateField(this.treeData,this.fields,n,"isChecked",null)},a.prototype.dynamicCheckState=function(t,i){if(this.dataType===1){var s=0,n=new P(this.treeData).executeLocal(new ee().where(this.fields.id,"equal",t,!0));if(n[0]){var r=n[0][this.fields.id]?n[0][this.fields.id].toString():null,l=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,o=this.element.querySelector('[data-uid="'+l+'"]'),c=this.element.querySelector('[data-uid="'+r+'"]'),p=this.getChildNodes(this.treeData,l);if(p)for(var d=0;d<p.length;d++){var f=p[parseInt(d.toString(),10)][this.fields.id]?p[parseInt(d.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(f)!==-1&&s++}this.checkedNodes.indexOf(t)!==-1&&o&&r===t&&this.autoCheck?this.changeState(o,"indeterminate",null):this.checkedNodes.indexOf(t)===-1&&c&&r===t&&!i?this.changeState(c,"uncheck",null):this.checkedNodes.indexOf(t)!==-1&&c&&r===t&&i?this.changeState(c,"check",null):this.checkedNodes.indexOf(t)===-1&&!c&&o&&r===t&&this.autoCheck&&s!==0?this.changeState(o,"indeterminate",null):this.checkedNodes.indexOf(t)===-1&&!c&&o&&r===t&&this.autoCheck&&s===0?this.changeState(o,"uncheck",null):!c&&!o&&r===t&&this.autoCheck&&this.updateIndeterminate(t,i)}}else if(this.dataType===2||this.fields.dataSource instanceof P&&this.isOffline)for(var r=void 0,o=void 0,v=void 0,d=0;d<this.treeData.length;d++){r=this.treeData[parseInt(d.toString(),10)][this.fields.id]?this.treeData[parseInt(d.toString(),10)][this.fields.id].toString():"",o=this.element.querySelector('[data-uid="'+r+'"]'),v=o?M("."+ut,o):null,this.checkedNodes.indexOf(r)===-1&&o&&v&&!i&&this.changeState(o,"uncheck",null);var g=I(this.fields.child.toString(),this.treeData[parseInt(d.toString(),10)]);g&&this.updateChildIndeterminate(g,r,t,i,r)}},a.prototype.updateIndeterminate=function(t,i){var s=this.getTreeData(t),n=0,r;this.dataType===1&&(r=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null);var l=this.getChildNodes(this.treeData,r);if(l)for(var o=0;o<l.length;o++){var c=l[parseInt(o.toString(),10)][this.fields.id]?l[parseInt(o.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(c)!==-1&&n++}var p=this.element.querySelector('[data-uid="'+r+'"]');p&&i?this.changeState(p,"indeterminate",null):!i&&p&&this.parentNodeCheck.indexOf(r)===-1&&n!==0?this.changeState(p,"indeterminate",null):!i&&p&&this.parentNodeCheck.indexOf(r)===-1&&n===0?this.changeState(p,"uncheck",null):p||(!i&&this.checkedNodes.indexOf(r)===-1&&this.parentNodeCheck.indexOf(r)!==-1?this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1):i&&this.checkedNodes.indexOf(r)===-1&&this.parentNodeCheck.indexOf(r)===-1?this.parentNodeCheck.push(r):!i&&this.checkedNodes.indexOf(r)!==-1&&this.parentNodeCheck.indexOf(r)===-1&&n!==0&&this.parentNodeCheck.push(r),this.updateIndeterminate(r,i),this.checkedNodes.indexOf(r)!==-1&&!i&&this.checkedNodes.splice(this.checkedNodes.indexOf(r),1))},a.prototype.updateChildIndeterminate=function(t,i,s,n,r){for(var l=0,o=0;o<t.length;o++){var c=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():"";this.checkedNodes.indexOf(c)!==-1&&l++;var p=this.element.querySelector('[data-uid="'+i+'"]'),d=p?M("."+Mt,p):null,f=p?M("."+ut,p):null,v=this.element.querySelector('[data-uid="'+c+'"]'),g=v?M("."+ut,v):null;if(this.checkedNodes.indexOf(s)!==-1&&p&&c===s&&this.autoCheck)this.changeState(p,"indeterminate",null);else if(this.checkedNodes.indexOf(s)===-1&&p&&!v&&c===s&&!n)this.autoCheck?this.changeState(p,"uncheck",null):l!==0?this.changeState(p,"indeterminate",null):this.changeState(p,"uncheck",null);else if(this.checkedNodes.indexOf(s)===-1&&v&&c===s&&!n)this.changeState(v,"uncheck",null);else if(this.checkedNodes.indexOf(s)===-1&&d&&c===s&&this.autoCheck&&l===0&&!n)d.classList.remove(Mt);else if(this.checkedNodes.indexOf(s)===-1&&!v&&f&&c===s&&l===0)this.changeState(p,"uncheck",null);else if(this.checkedNodes.indexOf(c)===-1&&v&&g&&l===0)this.changeState(v,"uncheck",null);else if(!v&&!p&&c===s||this.parentNodeCheck.indexOf(i)!==-1&&this.autoCheck){var m=this.element.querySelector('[data-uid="'+r+'"]');n&&l!==0?this.changeState(m,"indeterminate",null):n&&l===t.length&&this.checkedNodes.indexOf(i)===-1?this.checkDisabledState(i):!n&&l===0&&this.parentNodeCheck.indexOf(i)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(i)),this.parentNodeCheck.indexOf(i)===-1&&this.parentNodeCheck.push(i)}var C=I(this.fields.child.toString(),t[parseInt(o.toString(),10)]);C&&this.updateChildIndeterminate(C,c,s,n,r)}},a.prototype.changeState=function(t,i,s,n,r,l){var o=this,c,p=A(t,"."+de);!this.checkDisabledChildren&&p&&(p.classList.contains(Li)||this.disableNode&&this.disableNode.indexOf(p.getAttribute("data-uid"))!==-1)||(t===p&&(t=M("."+mt,p)),n?this.nodeCheckAction(t,i,p,c,s,n,r,l):(this.checkActionNodes=[],c=this.getCheckEvent(p,i,s),this.trigger("nodeChecking",c,function(d){d.cancel||o.nodeCheckAction(t,i,p,d,s,n,r,l)})))},a.prototype.nodeCheckAction=function(t,i,s,n,r,l,o,c){var p,d=t.getElementsByClassName(Qt)[0];if(i==="check"&&!d.classList.contains(ut)?(d.classList.remove(Mt),d.classList.add(ut),this.addCheck(s),p="true"):i==="uncheck"&&(d.classList.contains(ut)||d.classList.contains(Mt))?(w([d],[ut,Mt]),this.removeCheck(s),p="false"):i==="indeterminate"&&this.autoCheck&&(d.classList.remove(ut),d.classList.add(Mt),this.removeCheck(s),p="mixed"),p=i==="check"?"true":i==="uncheck"?"false":p,h(p)||s.setAttribute("aria-checked",p),o){var f=[].concat([],this.checkActionNodes);n=this.getCheckEvent(s,i,r),ni(l)&&(n.data=f)}c!==void 0&&this.ensureStateChange(s,c),l||h(p)||(s.setAttribute("aria-checked",p),n.data[0].checked=p,this.trigger("nodeChecked",n),this.checkActionNodes=[])},a.prototype.addCheck=function(t){var i=t.getAttribute("data-uid");!h(i)&&this.checkedNodes.indexOf(i)===-1&&this.checkDisabledState(i)},a.prototype.removeCheck=function(t){var i=this.checkedNodes.indexOf(t.getAttribute("data-uid"));i>-1&&this.checkedNodes.splice(i,1)},a.prototype.getCheckEvent=function(t,i,s){this.checkActionNodes.push(this.getNodeData(t));var n=this.checkActionNodes;return{action:i,cancel:!1,isInteracted:!h(s),node:t,data:n}},a.prototype.finalize=function(){var t=M("."+Ae,this.element);h(t)||(t.setAttribute("role",ur.treeRole),this.setMultiSelect(this.allowMultiSelection),this.setNodeFocusable(),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=this.rootData[0]?Object.prototype.hasOwnProperty.call(this.rootData[0],this.fields.parentID):!1,this.doExpandAction())},a.prototype.setTextWrap=function(){(this.allowTextWrap?E:w)([this.element],Du),V.isIE&&(this.allowTextWrap?E:w)([this.element],Iu)},a.prototype.updateWrap=function(t){if(this.fullRowSelect)for(var i=t?Ee("."+de,t):this.liList,s=i.length,n=0;n<s;n++)this.calculateWrap(i[parseInt(n.toString(),10)])},a.prototype.calculateWrap=function(t){var i=M("."+Jt,t);i&&i.nextElementSibling&&(i.style.height=this.allowTextWrap?i.nextElementSibling.offsetHeight+"px":"")},a.prototype.doExpandAction=function(){var t=this,i=this.expandedNodes;if(!this.loadOnDemand&&this.fields.dataSource instanceof P&&(this.isInitalExpand=this.treeData.filter(function(l){return l[t.fields.expanded]===!0}).length>0?!0:this.isInitalExpand),this.isInitalExpand&&i.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof P)this.expandGivenNodes(i);else{for(var s=0;s<i.length;s++){var n=M('[data-uid="'+i[parseInt(s.toString(),10)]+'"]',this.element);if(h(n)){i[parseInt(s.toString(),10)]&&this.expandChildren.indexOf(i[parseInt(s.toString(),10)])===-1&&this.expandChildren.push(i[parseInt(s.toString(),10)].toString());continue}else{var r=M("."+we,M("."+Ze,n));h(r)||this.expandAction(n,r,null)}}this.afterFinalized()}else this.afterFinalized()},a.prototype.expandGivenNodes=function(t){var i=this;this.expandCallback(t[this.index],function(){i.index++,i.index<t.length?i.expandGivenNodes(t):i.afterFinalized()}),this.index>0&&(this.index=0)},a.prototype.expandCallback=function(t,i){var s=M('[data-uid="'+t+'"]',this.element);if(h(s))i();else{var n=M("."+we,M("."+Ze,s));h(n)||this.expandAction(s,n,null,!1,i),i()}},a.prototype.afterFinalized=function(){if(this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&!this.isNodeDropped){var t={data:this.treeData};this.trigger("dataBound",t)}this.isLoaded=!0,this.isNodeDropped=!1},a.prototype.doSelectionAction=function(){var t=Ee("."+Oi,this.element),i=this.selectedNodes;if(i.length>0){this.setProperties({selectedNodes:[]},!0);for(var s=0;s<i.length;s++){var n=M('[data-uid="'+i[parseInt(s.toString(),10)]+'"]',this.element);if(n&&!n.classList.contains("e-active")?this.selectNode(n,null,!0):this.selectedNodes.push(i[parseInt(s.toString(),10)]),!this.allowMultiSelection)break}}else this.selectGivenNodes(t);w(t,Oi)},a.prototype.selectGivenNodes=function(t){for(var i=0;i<t.length&&(t[parseInt(i.toString(),10)].classList.contains("e-disable")||this.selectNode(t[parseInt(i.toString(),10)],null,!0),!!this.allowMultiSelection);i++);},a.prototype.clickHandler=function(t){var i=V.isDevice&&t.originalEvent.changedTouches&&!V.isIos?document.elementFromPoint(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY):t.originalEvent.target;if(b.remove(this.element,"contextmenu",this.preventContextMenu),!(!i||this.dragStartAction)){var s=i.classList,n=A(i,"."+de);if(!n||n.classList.contains(_i)&&!(s.contains(we)||s.contains(ze)))return;if(t.originalEvent.which!==3){var r=M("."+Pu,n),l=M("."+Xe,n);if(this.removeHover(),this.setFocusElement(n),this.showCheckBox&&!n.classList.contains("e-disable")){var o=A(i,"."+mt);if(!h(o)){var c=M("."+Qt,o);this.validateCheckNode(o,c.classList.contains(ut),n,t.originalEvent),this.triggerClickEvent(t.originalEvent,n);return}}s.contains(we)?this.expandAction(n,i,t):s.contains(ze)?this.collapseNode(n,i,t):r&&l?l.classList.contains(lr)&&l.classList.contains(we)?this.expandAction(n,l,t):l.classList.contains(lr)&&l.classList.contains(ze)?this.collapseNode(n,l,t):!s.contains(Ae)&&!s.contains(de)&&this.toggleSelect(n,t.originalEvent,!1):!s.contains(Ae)&&!s.contains(de)&&this.toggleSelect(n,t.originalEvent,!1)}t.originalEvent.which===3&&(this.isRightClick=!0),this.triggerClickEvent(t.originalEvent,n)}},a.prototype.nodeCheckedEvent=function(t,i,s){var n=this.getCheckEvent(t,i?"uncheck":"check",s);n.data=n.data.splice(0,n.data.length-1),this.trigger("nodeChecked",n)},a.prototype.updateOldCheckedData=function(t){var i=this,s=new P(t),n=s.executeLocal(new ee().where("isChecked","equal","true",!0)),r=s.executeLocal(new ee().where("isChecked","equal","false",!0));if(r.length>0){var l=this.OldCheckedData.findIndex(function(c){return c.id===r[0].id});if(l!==-1){this.OldCheckedData.splice(l,1);var o=this.OldCheckedData.filter(function(c){return c.parentID===r[0].id});o.length>0&&o.forEach(function(c){var p=i.OldCheckedData.findIndex(function(d){return d.id===c.id});p!==-1&&i.OldCheckedData.splice(p,1)});return}}if(n.length>0){var l=this.OldCheckedData.findIndex(function(p){return p.id===n[0].id});if(l===-1){this.OldCheckedData.push(n[0]);return}}},a.prototype.triggerClickEvent=function(t,i){var s={event:t,node:i};this.trigger("nodeClicked",s)},a.prototype.expandNode=function(t,i,s){var n=this;if(this.renderReactTemplates(),i.classList.contains(ys)&&this.hideSpinner(i),this.initialRender||i.classList.add("interaction"),s!==!0||s===!0&&t.classList.contains("e-expanded")){if(this.preventExpand!==!0){w([i],we),E([i],ze);var r=0,l=0,o=M("."+Ae,t),c=t;if(this.isAnimate&&!this.isRefreshed){this.setHeight(c,o);var p=M("."+de+"."+Et,t);this.aniObj.animate(o,{name:this.animation.expand.effect,duration:this.animation.expand.duration===0&&zs==="Enable"?400:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(){c.style.overflow="hidden",!h(p)&&p instanceof HTMLElement&&p.classList.add(xs),r=c.offsetHeight,l=M("."+Ze,t).offsetHeight},progress:function(f){f.element.style.display="block",n.animateHeight(f,r,l)},end:function(f){f.element.style.display="block",!h(p)&&p instanceof HTMLElement&&p.classList.remove(xs),n.expandedNode(c,o,i)}})}else this.expandedNode(c,o,i)}}else{var d=M("."+Ae,t);d.style.display="none",this.fields.dataSource instanceof P&&(this.preventExpand=!1)}this.initialRender&&i.classList.add("interaction")},a.prototype.expandedNode=function(t,i,s){i.style.display="block",t.style.display="block",t.style.overflow="",t.style.height="",w([s],Xt),this.addExpand(t),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(t),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(t,null),this.expandArgs.isInteracted=this.isInteracted,this.trigger("nodeExpanded",this.expandArgs)),this.isHiddenItem&&this.collapseAll([this.getNodeData(t).id])},a.prototype.addExpand=function(t){t.setAttribute("aria-expanded","true"),w([t],rr);var i=t.getAttribute("data-uid");!h(i)&&this.expandedNodes.indexOf(i)===-1&&this.expandedNodes.push(i)},a.prototype.collapseNode=function(t,i,s){var n=this;if(!i.classList.contains(Xt)){E([i],Xt);var r;this.isLoaded?(r=this.getExpandEvent(t,s),this.isInteracted=r.isInteracted,this.trigger("nodeCollapsing",r,function(l){l.cancel?w([i],Xt):n.nodeCollapseAction(t,i,l)})):this.nodeCollapseAction(t,i,r)}},a.prototype.nodeCollapseAction=function(t,i,s){var n=this;w([i],ze),E([i],we);var r=0,l=0,o=M("."+Ae,t),c=t,p=M("."+de+"."+Et,t);this.isAnimate?this.aniObj.animate(o,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration===0&&zs==="Enable"?400:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(){c.style.overflow="hidden",!h(p)&&p instanceof HTMLElement&&p.classList.add(xs),r=M("."+Ze,t).offsetHeight,l=c.offsetHeight},progress:function(d){n.animateHeight(d,r,l)},end:function(d){d.element.style.display="none",!h(p)&&p instanceof HTMLElement&&p.classList.remove(xs),n.collapsedNode(c,o,i,s)}}):this.collapsedNode(c,o,i,s)},a.prototype.collapsedNode=function(t,i,s,n){i.style.display="none",t.style.overflow="",t.style.height="",w([s],Xt),this.removeExpand(t),this.isLoaded&&(n=this.getExpandEvent(t,null),n.isInteracted=this.isInteracted,this.trigger("nodeCollapsed",n))},a.prototype.removeExpand=function(t,i){i?t.removeAttribute("aria-expanded"):this.disableExpandAttr(t);var s=this.expandedNodes.indexOf(t.getAttribute("data-uid"));s>-1&&this.expandedNodes.splice(s,1)},a.prototype.disableExpandAttr=function(t){t.setAttribute("aria-expanded","false"),E([t],rr)},a.prototype.setHeight=function(t,i){i.style.display="block",i.style.visibility="hidden",t.style.height=t.offsetHeight+"px",i.style.display="none",i.style.visibility=""},a.prototype.animateHeight=function(t,i,s){if(!h(t.element.parentElement)){var n=(t.duration-t.timeStamp)/t.duration,r=(s-i)*n+i;t.element.parentElement.style.height=r+"px"}},a.prototype.renderChildNodes=function(t,i,s,n,r){var l=this,o=M("div."+Xe,t);if(!h(o)){this.showSpinner(o);var c;if(this.fields.dataSource instanceof P){var p=this.parents(t,"."+Ae).length,d=this.getChildFields(this.fields,p,1);if(h(d)||h(d.dataSource)){G(o),this.removeExpand(t,!0);return}this.treeList.push("false"),this.fields.dataSource instanceof P&&this.isOffline?(this.treeList.pop(),c=this.getChildNodes(this.treeData,t.getAttribute("data-uid")),this.loadChild(c,d,o,t,i,s,n)):d.dataSource.executeQuery(this.getQuery(d,t.getAttribute("data-uid"))).then(function(f){l.treeList.pop(),c=f.result,l.dataType===1&&(l.dataType=2),l.loadChild(c,d,o,t,i,s,n)}).catch(function(f){l.trigger("actionFailure",{error:f})})}else if(c=this.getChildNodes(this.treeData,t.getAttribute("data-uid"),!1,parseFloat(t.getAttribute("aria-level"))+1),this.currentLoadData=this.getSortedData(c),h(c)||c.length===0){G(o),o.classList.contains(ys)&&this.hideSpinner(o),this.removeExpand(t,!0);return}else this.listBaseOption.ariaAttributes.level=parseFloat(t.getAttribute("aria-level"))+1,t.appendChild(Ve.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(t,o,n),this.setSelectionForChildNodes(c),this.ensureCheckNode(t,r),this.finalizeNode(t,r,i),this.disableTreeNodes(c),this.renderSubChild(t,i,n,r)}},a.prototype.loadChild=function(t,i,s,n,r,l,o){if(this.currentLoadData=t,h(t)||t.length===0)G(s),this.removeExpand(n,!0);else{if(this.updateListProp(i),this.fields.dataSource instanceof P&&!this.isOffline){var c=n.getAttribute("data-uid"),p=this.getNodeObject(c);Pe("child",t,p)}this.listBaseOption.ariaAttributes.level=parseFloat(n.getAttribute("aria-level"))+1,n.appendChild(Ve.createList(this.createElement,t,this.listBaseOption)),this.expandNode(n,s,o),this.setSelectionForChildNodes(t),this.ensureCheckNode(n),this.finalizeNode(n),this.disableTreeNodes(t),this.renderSubChild(n,r,o)}l&&l(),r&&this.expandedNodes.push(n.getAttribute("data-uid")),this.treeList.length===0&&!this.isLoaded&&this.finalize()},a.prototype.disableTreeNodes=function(t){if(!(h(this.disableNode)||this.disableNode.length===0))for(var i=0;i<t.length;){var s=t[parseInt(i.toString(),10)][this.fields.id]?t[parseInt(i.toString(),10)][this.fields.id].toString():null;this.disableNode!==void 0&&this.disableNode.indexOf(s)!==-1&&this.doDisableAction([s]),i++}},a.prototype.setSelectionForChildNodes=function(t){if(!(h(this.selectedNodes)||this.selectedNodes.length===0)){var i;for(i=0;i<t.length;i++){var s=t[parseInt(i.toString(),10)][this.fields.id]?t[parseInt(i.toString(),10)][this.fields.id].toString():null;this.selectedNodes!==void 0&&this.selectedNodes.indexOf(s)!==-1&&this.doSelectionAction()}}},a.prototype.ensureCheckNode=function(t,i){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(t.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(t,null,i),(!i||M("."+ut,this.element)||M("."+Mt,this.element))&&this.ensureParentCheckState(t))),this.currentLoadData=null},a.prototype.getFields=function(t,i,s){return i===s?t:this.getFields(this.getChildMapper(t),i,s+1)},a.prototype.getChildFields=function(t,i,s){return i===s?this.getChildMapper(t):this.getChildFields(this.getChildMapper(t),i,s+1)},a.prototype.getChildMapper=function(t){return typeof t.child=="string"||h(t.child)?t:t.child},a.prototype.getChildNodes=function(t,i,s,n){var r=this;s===void 0&&(s=!1);var l;if(h(t))return l;if(this.dataType===1)return this.getChildGroup(this.groupedData,i,s);if(typeof this.fields.child=="string")return this.findChildNodes(t,this.fields.id,i)||this.findNestedChildNodes(t,i,n)||[];if(this.isChildObject()){for(var o=h(n)?this.fields.child:this.fields,c=1;c<n&&!h(o.child);){o=o.child;c++}this.updateListProp(o);var p=t.findIndex(function(m){return I(r.fields.id,m)&&I(r.fields.id,m).toString()===i});if(p!==-1)return I("child",t[parseInt(p.toString(),10)]);if(p===-1)for(var d=0,f=t.length;d<f;d++){var v=I("child",t[parseInt(d.toString(),10)]),g=h(v)?-1:v.findIndex(function(m){return I(r.fields.child.id,m)&&I(r.fields.child.id,m).toString()===i});if(g!==-1)return I("child",v[parseInt(g.toString(),10)]);if(!h(v)&&(l=this.getChildNodes(v,i,!1,n),l!==void 0))break}}return l},a.prototype.findChildNodes=function(t,i,s){var n=t.findIndex(function(r){var l=I(i,r);return l&&l.toString()===s});return n!==-1?I(this.fields.child,t[n]):null},a.prototype.findNestedChildNodes=function(t,i,s){for(var n=0,r=t;n<r.length;n++){var l=r[n],o=I(this.fields.child,l);if(!h(o)){var c=this.findChildNodes(o,this.fields.id,i);if(c)return c;var p=this.getChildNodes(o,i,!1,s);if(p&&p.length>0)return p}}},a.prototype.getChildGroup=function(t,i,s){var n=[];if(h(t))return n;for(var r=0,l=t.length;r<l;r++)if(!h(t[parseInt(r.toString(),10)][0])&&!h(I(this.fields.parentID,t[parseInt(r.toString(),10)][0]))){if(I(this.fields.parentID,t[parseInt(r.toString(),10)][0]).toString()===i)return t[parseInt(r.toString(),10)]}else if(s)return t[parseInt(r.toString(),10)];return n},a.prototype.renderSubChild=function(t,i,s,n){if(i)for(var r=Ee("."+we,t),l=0,o=r.length;l<o;l++){var c=r[parseInt(l.toString(),10)];if(t.querySelector(".e-icons")!==r[parseInt(l.toString(),10)]){var p=A(c,"."+de);this.expandArgs=this.getExpandEvent(p,null),s!==!0&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(p,i,null,s,n)}}},a.prototype.toggleSelect=function(t,i,s){t.classList.contains("e-disable")||(this.allowMultiSelection&&(i&&i.ctrlKey||s)&&this.isActive(t)?this.unselectNode(t,i):this.selectNode(t,i,s))},a.prototype.isActive=function(t){return!!t.classList.contains(Et)},a.prototype.selectNode=function(t,i,s){var n=this;if(h(t)||!this.allowMultiSelection&&this.isActive(t)&&!h(i)){this.setFocusElement(t);return}var r;this.isLoaded?(r=this.getSelectEvent(t,"select",i),this.trigger("nodeSelecting",r,function(l){!l.cancel&&!l.node.classList.contains(_i)&&n.nodeSelectAction(t,i,l,s)})):this.nodeSelectAction(t,i,r,s)},a.prototype.nodeSelectAction=function(t,i,s,n){if((!this.allowMultiSelection||!n&&(!i||i&&!(i.ctrlKey||i.metaKey)))&&this.removeSelectAll(),this.allowMultiSelection&&i&&i.shiftKey){this.startNode||(this.startNode=t);var r=this.liList.indexOf(this.startNode),l=this.liList.indexOf(t);if(r>l){var o=r;r=l,l=o}for(var c=r;c<=l;c++){var p=this.liList[parseInt(c.toString(),10)];Ci(p)&&!p.classList.contains("e-disable")&&this.addSelect(p)}}else this.startNode=t,this.addSelect(t);this.isLoaded&&(s.nodeData=this.getNodeData(t),this.trigger("nodeSelected",s),this.isRightClick=!1),this.isRightClick=!1},a.prototype.unselectNode=function(t,i){var s=this,n;this.isLoaded?(n=this.getSelectEvent(t,"un-select",i),this.trigger("nodeSelecting",n,function(r){r.cancel||s.nodeUnselectAction(t,r)})):this.nodeUnselectAction(t,n)},a.prototype.nodeUnselectAction=function(t,i){this.removeSelect(t),this.setFocusElement(t),this.isLoaded&&(i.nodeData=this.getNodeData(t),this.trigger("nodeSelected",i))},a.prototype.setFocusElement=function(t){if(!h(t)){var i=this.getFocusedNode();i&&(w([i],pi),i.setAttribute("tabindex","-1")),E([t],pi),t.setAttribute("tabindex","0"),b.add(t,"blur",this.focusOut,this),this.updateIdAttr(i,t)}},a.prototype.addSelect=function(t){t.setAttribute("aria-selected","true"),E([t],Et);var i=t.getAttribute("data-uid");!h(i)&&this.selectedNodes.indexOf(i)===-1&&this.selectedNodes.push(i)},a.prototype.removeSelect=function(t){this.allowMultiSelection?t.setAttribute("aria-selected","false"):t.removeAttribute("aria-selected"),w([t],Et);var i=this.selectedNodes.indexOf(t.getAttribute("data-uid"));i>-1&&this.selectedNodes.splice(i,1)},a.prototype.removeSelectAll=function(){for(var t=this.element.querySelectorAll("."+Et),i=0,s=t;i<s.length;i++){var n=s[i];this.allowMultiSelection?n.setAttribute("aria-selected","false"):n.removeAttribute("aria-selected")}w(t,Et),this.setProperties({selectedNodes:[]},!0)},a.prototype.getSelectEvent=function(t,i,s){var n=this.getNodeData(t);return{action:i,cancel:!1,isInteracted:!h(s),node:t,nodeData:n}},a.prototype.setExpandOnType=function(){this.expandOnType=this.expandOn==="Auto"?V.isDevice?"Click":"DblClick":this.expandOn},a.prototype.expandHandler=function(t){var i=V.isDevice&&t.originalEvent.changedTouches&&!V.isIos?document.elementFromPoint(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY):t.originalEvent.target;!i||i.classList.contains(bs)||i.classList.contains(Rt)||i.classList.contains(Ae)||i.classList.contains(de)||i.classList.contains(Xe)||this.showCheckBox&&A(i,"."+mt)||this.expandCollapseAction(A(i,"."+de),t)},a.prototype.expandCollapseAction=function(t,i){var s=M("div."+Xe,t);if(!(!s||s.classList.contains(Xt))){var n=s.classList;n.contains(we)?this.expandAction(t,s,i):n.contains(ze)&&this.collapseNode(t,s,i)}},a.prototype.expandAction=function(t,i,s,n,r,l){var o=this;i.classList.contains(Xt)||(E([i],Xt),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(t,s),this.isInteracted=this.expandArgs.isInteracted,this.trigger("nodeExpanding",this.expandArgs,function(c){c.cancel?w([i],Xt):o.nodeExpandAction(t,i,n,r,l)})):this.nodeExpandAction(t,i,n,r,l))},a.prototype.nodeExpandAction=function(t,i,s,n,r){var l=M("."+Ae,t);if(l&&l.nodeName==="UL")this.expandNode(t,i);else{this.isFirstRender=!0,this.renderChildNodes(t,s,n,null,r);for(var o=Ee("."+de,t),c=0;c<o.length;c++){var p=this.getId(o[parseInt(c.toString(),10)]);if(this.expandChildren.indexOf(p)!==-1&&this.expandChildren!==void 0){var d=M("."+we,M("."+Ze,o[parseInt(c.toString(),10)]));h(d)||this.expandAction(o[parseInt(c.toString(),10)],d,null),this.expandChildren.splice(this.expandChildren.indexOf(p),1)}}}},a.prototype.keyActionHandler=function(t){var i=this,s=t.target,n=this.getFocusedNode();if(s&&s.classList.contains(bs)){var r=s;t.action==="enter"?r.blur():t.action==="escape"&&(r.value=this.oldText,r.blur());return}t.preventDefault();var l={cancel:!1,event:t,node:n};this.trigger("keyPress",l,function(o){if(!o.cancel)switch(t.action){case"space":i.showCheckBox?i.checkNode(t):i.toggleSelect(n,t);break;case"moveRight":i.openNode(!i.enableRtl,t);break;case"moveLeft":i.openNode(!!i.enableRtl,t);break;case"shiftDown":i.shiftKeySelect(!0,t);break;case"moveDown":case"ctrlDown":case"csDown":i.navigateNode(!0);break;case"shiftUp":i.shiftKeySelect(!1,t);break;case"moveUp":case"ctrlUp":case"csUp":i.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":i.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":i.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":case"shiftSpace":case"ctrlSpace":i.toggleSelect(n,t);break;case"f2":i.allowEditing&&!n.classList.contains("e-disable")&&i.createTextbox(n);break;case"ctrlA":if(i.allowMultiSelection){var c=Ee("."+de+":not(."+Et+")",i.element);i.selectGivenNodes(c)}break}})},a.prototype.navigateToFocus=function(t){var i=this.getFocusedNode().querySelector("."+Ze),s=i.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!h(n)){var r=n.getBoundingClientRect();s.bottom>r.bottom?n.scrollTop+=s.bottom-r.bottom:s.top<r.top&&(n.scrollTop-=r.top-s.top)}var l=this.isVisibleInViewport(i);l||i.scrollIntoView(t)},a.prototype.isVisibleInViewport=function(t){var i=t.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)},a.prototype.getScrollParent=function(t){return h(t)?null:t.scrollHeight>t.clientHeight?t:this.getScrollParent(t.parentElement)},a.prototype.shiftKeySelect=function(t,i){if(this.allowMultiSelection){var s=this.getFocusedNode(),n=t?this.getNextNode(s):this.getPrevNode(s);this.removeHover(),this.setFocusElement(n),this.toggleSelect(n,i,!1),this.navigateToFocus(!t)}else this.navigateNode(t)},a.prototype.checkNode=function(t){var i=this.getFocusedNode(),s=M("."+mt,i),n=M(" ."+Qt,s).classList.contains(ut);i.classList.contains("e-disable")||i.getElementsByClassName("e-checkbox-disabled").length===0&&this.validateCheckNode(s,n,i,t)},a.prototype.validateCheckNode=function(t,i,s,n){var r=this,l=A(t,"."+de);this.checkActionNodes=[];var o=i?"false":"true";h(o)||l.setAttribute("aria-checked",o);var c=this.getCheckEvent(l,i?"uncheck":"check",n);this.trigger("nodeChecking",c,function(p){p.cancel||r.nodeCheckingAction(t,i,s,p,n)})},a.prototype.nodeCheckingAction=function(t,i,s,n,r){if(this.checkedElement.indexOf(s.getAttribute("data-uid"))===-1&&(this.checkedElement.push(s.getAttribute("data-uid")),this.autoCheck)){var l=this.getChildNodes(this.treeData,s.getAttribute("data-uid"));l!==null?this.allCheckNode(l,this.checkedElement,null,null,!1):l=null}if(this.changeState(t,i?"uncheck":"check",r,!0),this.autoCheck){this.ensureChildCheckState(s),this.updateOldCheckedData([this.getNodeData(s)]),this.ensureParentCheckState(A(A(s,"."+Ae),"."+de));var o=void 0;n.action==="check"?o=!0:n.action==="uncheck"&&(o=!1),this.ensureStateChange(s,o)}this.nodeCheckedEvent(t,i,r)},a.prototype.ensureStateChange=function(t,i){var s=this,n=M("."+Ae,t),r=t.getAttribute("data-uid"),l=this.fields;if(this.dataType===1&&this.autoCheck){var o=new P(this.treeData).executeLocal(new ee().where(l.parentID,"equal",r,!0)),c=o.filter(function(x){return s.checkedNodes.indexOf(x[l.id].toString())!==-1},this);this.checkedNodes.indexOf(r)!==-1&&c.length!==o.length&&this.isFilter&&c.length>0&&(o=c);for(var p=0;p<o.length;p++){var d=o[parseInt(p.toString(),10)][this.fields.id]?o[parseInt(p.toString(),10)][this.fields.id].toString():null,f=o[parseInt(p.toString(),10)][this.fields.isChecked]?o[parseInt(p.toString(),10)][this.fields.isChecked].toString():null;if(this.checkedNodes.indexOf(r)!==-1&&this.checkedNodes.indexOf(d)===-1){this.checkDisabledState(d,o[p]);var v=this.getChildNodes(this.treeData,d);this.getChildItems(v,i),this.parentNodeCheck.indexOf(d)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(d),1)}else if(this.checkedNodes.indexOf(r)===-1&&n===null&&this.checkedNodes.indexOf(d)!==-1){if(this.checkedNodes.splice(this.checkedNodes.indexOf(d),1),f==="true"&&this.updateField(this.treeData,this.fields,d,"isChecked",null),this.checkedNodes.indexOf(r)===-1&&n===null||this.parentNodeCheck.indexOf(d)!==-1){var g=this.getChildNodes(this.treeData,d);this.getChildItems(g,i),this.parentNodeCheck.indexOf(d)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(d),1)}}else{var v=this.getChildNodes(this.treeData,d);this.getChildItems(v,i)}}}else if(this.dataType===1&&!this.autoCheck)if(i)for(var p=0;p<this.treeData.length;p++){var k=this.treeData[parseInt(p.toString(),10)][this.fields.id]?this.treeData[parseInt(p.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(k)===-1&&this.checkDisabledState(k,this.treeData[p])}else{for(var m=new P(this.treeData).executeLocal(new ee().where(l.isChecked,"equal",!0,!1)),p=0;p<m.length;p++){var C=m[parseInt(p.toString(),10)][this.fields.id]?m[parseInt(p.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(C)!==-1&&this.checkedNodes.splice(this.checkedNodes.indexOf(C),1),this.updateField(this.treeData,this.fields,C,"isChecked",null)}this.checkedNodes=[]}else{var v=this.getChildNodes(this.treeData,r);if(v){var T=v.filter(function(L){var N=String(L[Object.keys(L)[0]]);return s.checkedNodes.indexOf(N)!==-1});T.length>0&&v.length&&this.isFilter&&(v=T),this.childStateChange(v,r,n,i)}}},a.prototype.checkDisabledState=function(t,i){var s=this.checkDisabledChildren;if(!s){var n=!0;if(this.loadOnDemand&&this.fields.htmlAttributes&&(i=h(i)?i:this.getNodeObject(t),!h(i))){var r=i[this.fields.htmlAttributes];r&&!h(r.class)&&r.class.indexOf(Li)!==-1&&(n=!1)}var l=M('[data-uid="'+t+'"]',this.element);s=l?!l.classList.contains(Li):this.disableNode.indexOf(t)===-1&&n}s&&this.checkedNodes.push(t)},a.prototype.getChildItems=function(t,i){for(var s=0;s<t.length;s++){var n=t[parseInt(s.toString(),10)][this.fields.id]?t[parseInt(s.toString(),10)][this.fields.id].toString():null,r=t[parseInt(s.toString(),10)][this.fields.isChecked]?t[parseInt(s.toString(),10)][this.fields.isChecked].toString():null;this.checkedNodes.indexOf(n)!==-1&&!i&&this.checkedNodes.splice(this.checkedNodes.indexOf(n),1),this.checkedNodes.indexOf(n)===-1&&i&&this.checkDisabledState(n,t[s]),r==="true"&&!i&&this.updateField(this.treeData,this.fields,n,"isChecked",null);var l=this.getChildNodes(this.treeData,n);l.length>0&&this.getChildItems(l,i)}},a.prototype.childStateChange=function(t,i,s,n){for(var r=0;r<t.length;r++){var l=t[parseInt(r.toString(),10)][this.fields.id]?t[parseInt(r.toString(),10)][this.fields.id].toString():"",o=t[parseInt(r.toString(),10)][this.fields.isChecked]?t[parseInt(r.toString(),10)][this.fields.isChecked].toString():null;this.autoCheck?this.checkedNodes.indexOf(i)!==-1&&this.checkedNodes.indexOf(l)===-1?(this.checkDisabledState(l,t[r]),this.parentNodeCheck.indexOf(l)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)):this.checkedNodes.indexOf(i)===-1&&this.checkedNodes.indexOf(l)!==-1&&!n&&(this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),o==="true"&&this.updateField(this.treeData,this.fields,l,"isChecked",null)):this.autoCheck||(n?this.checkedNodes.indexOf(l)===-1&&this.checkDisabledState(l,t[r]):(this.checkedNodes.indexOf(l)!==-1&&this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),this.updateField(this.treeData,this.fields,l,"isChecked",null),this.checkedNodes=[]));var c=this.getChildNodes([t[parseInt(r.toString(),10)]],l);c&&this.childStateChange(c,i,s,n)}},a.prototype.allCheckNode=function(t,i,s,n,r){if(t)for(var l=0;l<t.length;l++){var o=I(this.fields.id,t[parseInt(l.toString(),10)]),c=this.element.querySelector('[data-uid="'+o+'"]');r!==!1&&this.checkedElement.indexOf(o.toString())===-1&&(c===null&&!h(t[parseInt(l.toString(),10)][this.fields.isChecked])&&i.indexOf(o.toString())===-1||n===0||s===2)&&(t[parseInt(l.toString(),10)][this.fields.isChecked]!==!1||s===2?i.push(o.toString()):n=null,n=t[parseInt(l.toString(),10)][this.fields.isChecked]!==!1||s===2?0:null),i.indexOf(o.toString())===-1&&h(s)&&i.push(o.toString());var p=I(this.fields.child.toString(),t[parseInt(l.toString(),10)]);if(I(this.fields.hasChildren,t[parseInt(l.toString(),10)])===!0||p){var d=I(this.fields.id,t[parseInt(l.toString(),10)]),f=void 0;this.dataType===1?f=this.getChildNodes(this.treeData,d.toString()):f=p,f&&(h(r)?this.allCheckNode(f,i,s,n):this.allCheckNode(f,i,s,n,r),n=null)}n=null}},a.prototype.openNode=function(t,i){var s=this.getFocusedNode(),n=M("div."+Xe,s);if(t)if(n)n.classList.contains(we)?this.expandAction(s,n,i):this.focusNextNode(s,!0);else return;else if(n&&n.classList.contains(ze))this.collapseNode(s,n,i);else{var r=A(A(s,"."+Ae),"."+de);if(r)r.classList.contains("e-disable")||(this.setFocus(s,r),this.navigateToFocus(!0));else return}},a.prototype.navigateNode=function(t){var i=this.getFocusedNode();this.focusNextNode(i,t)},a.prototype.navigateRootNode=function(t){var i=this.getFocusedNode(),s=t?this.getRootNode():this.getEndNode();s.classList.contains("e-disable")||(this.setFocus(i,s),this.navigateToFocus(t))},a.prototype.getFocusedNode=function(){var t,i=M("."+de+'[tabindex="0"]',this.element);if(!h(i)){var s=i.getAttribute("aria-checked");(s==="mixed"||s==="false")&&(this.isFilter=!1)}return h(i)&&(t=M("."+de,this.element)),h(i)?h(t)?this.element.firstElementChild:t:i},a.prototype.focusNextNode=function(t,i){var s=i?this.getNextNode(t):this.getPrevNode(t);if(this.setFocus(t,s),this.navigateToFocus(!i),s.classList.contains("e-disable")){var n=s.lastChild;s.previousSibling==null&&s.classList.contains("e-level-1")?this.focusNextNode(s,!0):s.nextSibling==null&&s.classList.contains("e-node-collapsed")?this.focusNextNode(s,!1):s.nextSibling==null&&n.classList.contains(Ze)?this.focusNextNode(s,!1):this.focusNextNode(s,i)}},a.prototype.getNextNode=function(t){var i=this.liList.indexOf(t),s;do if(i++,s=this.liList[parseInt(i.toString(),10)],h(s))return t;while(!Ci(s));return s},a.prototype.getPrevNode=function(t){var i=this.liList.indexOf(t),s;do if(i--,s=this.liList[parseInt(i.toString(),10)],h(s))return t;while(!Ci(s));return s},a.prototype.getRootNode=function(){var t=0,i;do i=this.liList[parseInt(t.toString(),10)],t++;while(!Ci(i));return i},a.prototype.getEndNode=function(){var t=this.liList.length-1,i;do i=this.liList[parseInt(t.toString(),10)],t--;while(!Ci(i));return i},a.prototype.setFocus=function(t,i){w([t],pi),t.setAttribute("tabindex","-1"),i.classList.contains("e-disable")||(E([i],pi),i.setAttribute("tabindex","0"),i.focus(),b.add(i,"blur",this.focusOut,this),this.updateIdAttr(t,i))},a.prototype.updateIdAttr=function(t,i){this.element.removeAttribute("aria-activedescendant"),t&&t.removeAttribute("id"),i.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},a.prototype.focusIn=function(){if(!this.mouseDownStatus){var t=this.getFocusedNode();t.classList.contains("e-disable")?(t.setAttribute("tabindex","-1"),this.navigateNode(!0)):(t.setAttribute("tabindex","0"),E([t],pi),b.add(t,"blur",this.focusOut,this)),this.mouseDownStatus=!1}},a.prototype.focusOut=function(t){var i=this.getFocusedNode();t.target===i&&(w([i],pi),b.remove(i,"blur",this.focusOut))},a.prototype.onMouseOver=function(t){if(!V.isDevice){var i=t.target,s=i.classList,n=A(i,"."+de);if(!n||s.contains(Ae)||s.contains(de)){this.removeHover();return}else n&&!n.classList.contains("e-disable")&&this.setHover(n)}},a.prototype.setHover=function(t){!t.classList.contains(gs)&&!t.classList.contains(_i)&&(this.removeHover(),E([t],gs))},a.prototype.onMouseLeave=function(){this.removeHover()},a.prototype.removeHover=function(){var t=Ee("."+gs,this.element);t&&t.length&&w(t,gs)},a.prototype.getNodeData=function(t,i){if(!h(t)&&t.classList.contains(de)&&!h(A(t,"."+tr))&&A(t,"."+tr).classList.contains(Rt)){var s=t.getAttribute("data-uid"),n=this.getText(t,i),r=A(t.parentNode,"."+de),l=r?r.getAttribute("data-uid"):null,o=t.classList.contains(Et),c=!t.classList.contains(_i),p=t.getAttribute("aria-expanded")==="true",d=t.getAttribute("aria-expanded")!==null?!0:(M("."+we,t)||M("."+ze,t))!=null,f=null,v=M("."+mt,t);return this.showCheckBox&&v&&(f=t.getAttribute("aria-checked")),{id:s,text:n,parentID:l,selected:o,selectable:c,expanded:p,isChecked:f,hasChildren:d}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},a.prototype.getText=function(t,i){if(i){var s=this.getNodeObject(t.getAttribute("data-uid")),n=parseFloat(t.getAttribute("aria-level")),r=this.getFields(this.fields,n,1);return I(r.text,s)}return M("."+ci,t).textContent},a.prototype.getExpandEvent=function(t,i){var s=this.getNodeData(t);return{cancel:!1,isInteracted:!h(i),node:t,nodeData:s,event:i}},a.prototype.renderNodeTemplate=function(t,i,s){var n=this.nodeTemplateFn(t,this,"nodeTemplate"+s,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,i,this.root);n&&(n=Array.prototype.slice.call(n),ye(n,i))},a.prototype.destroyTemplate=function(t){this.clearTemplate(["nodeTemplate"+t.getAttribute("data-uid")])},a.prototype.reRenderNodes=function(){this.updateListProp(this.fields),V.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",h(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},a.prototype.setCssClass=function(t,i){!h(t)&&t!==""&&w([this.element],t.split(" ")),!h(i)&&i!==""&&E([this.element],i.split(" "))},a.prototype.editingHandler=function(t){var i=t.target;if(!(!i||i.classList.contains(Rt)||i.classList.contains(Ae)||i.classList.contains(de)||i.classList.contains(Xe)||i.classList.contains(bs)||i.classList.contains(ir))){var s=A(i,"."+de);this.createTextbox(s)}},a.prototype.createTextbox=function(t){var i=this,s=M("."+Cs,this.element);s&&s.blur();var n=M("."+ci,t);this.updateOldText(t);var r=this.createElement("input",{className:Cs,attrs:{value:this.oldText}}),l=this.getEditEvent(t,null,r.outerHTML);this.trigger("nodeEditing",l,function(o){if(!o.cancel){var c=n.offsetWidth+5,p=c+"px";E([t],Ia),h(i.nodeTemplateFn)||i.destroyTemplate(t),i.isReact?setTimeout(function(){i.renderTextBox(l,n,p)},5):i.renderTextBox(l,n,p)}})},a.prototype.renderTextBox=function(t,i,s){i.innerHTML=t.innerHtml;var n=M("."+Cs,i);this.inputObj=z.createInput({element:n,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.style.width=s,n.focus();var r=n;r.setSelectionRange(0,r.value.length),this.wireInputEvents(n)},a.prototype.updateOldText=function(t){var i=t.getAttribute("data-uid");this.editData=this.getNodeObject(i);var s=parseFloat(t.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,s,1),this.oldText=I(this.editFields.text,this.editData)},a.prototype.inputFocusOut=function(t){if(M("."+Cs,this.element)){var i=t.target,s=i.value,n=A(i,"."+ci),r=A(i,"."+de);G(this.inputObj.container),z.destroy({element:i,properties:this.properties}),this.fields.dataSource instanceof P&&!this.isOffline?this.crudOperation("update",null,r,s,null,null,!0):this.appendNewText(r,n,s,!0),b.remove(i,"blur",this.inputFocusOut),this.inputObj=null,G(i),i=null}},a.prototype.appendNewText=function(t,i,s,n){var r=this,l=this.getEditEvent(t,s,null);this.trigger("nodeEdited",l,function(o){s=o.cancel?o.oldText:o.newText,r.updateText(t,i,s,n),o.oldText!==s&&r.triggerEvent("nodeEdited",[r.getNode(t)])})},a.prototype.updateText=function(t,i,s,n){var r=Pe(this.editFields.text,s,this.editData);if(h(this.nodeTemplateFn))this.enableHtmlSanitizer?i.innerText=yt.sanitize(s):i.innerHTML=s;else{i.innerText="";var l=t.getAttribute("data-uid");this.renderNodeTemplate(r,i,l),this.renderReactTemplates()}n&&(w([t],Ia),t.focus(),b.add(t,"blur",this.focusOut,this),E([t],pi)),this.allowTextWrap&&this.calculateWrap(t)},a.prototype.getElement=function(t){return h(t)?null:typeof t=="string"?this.element.querySelector('[data-uid="'+t+'"]'):typeof t=="object"?yn(t):null},a.prototype.getId=function(t){return h(t)?null:typeof t=="string"?t:typeof t=="object"?yn(t).getAttribute("data-uid"):null},a.prototype.getEditEvent=function(t,i,s){var n=this.getNodeData(t);return{cancel:!1,newText:i,node:t,nodeData:n,oldText:this.oldText,innerHtml:s}},a.prototype.getNodeObject=function(t){var i;if(h(t))return i;if(this.dataType===1)for(var s=0,n=this.treeData.length;s<n;s++){var r=I(this.fields.id,this.treeData[parseInt(s.toString(),10)]);if(!h(this.treeData[parseInt(s.toString(),10)])&&!h(r)&&r.toString()===t)return this.treeData[parseInt(s.toString(),10)]}else return this.getChildNodeObject(this.treeData,this.fields,t);return i},a.prototype.getChildNodeObject=function(t,i,s){var n;if(h(t))return n;for(var r=0,l=t.length;r<l;r++){var o=I(i.id,t[parseInt(r.toString(),10)]);if(t[parseInt(r.toString(),10)]&&o&&o.toString()===s)return t[parseInt(r.toString(),10)];if(typeof i.child=="string"&&!h(I(i.child,t[parseInt(r.toString(),10)]))){var c=I(i.child,t[parseInt(r.toString(),10)]);if(n=this.getChildNodeObject(c,this.getChildMapper(i),s),n!==void 0)break}else if(this.fields.dataSource instanceof P&&!h(I("child",t[parseInt(r.toString(),10)]))){var p="child";if(n=this.getChildNodeObject(I(p,t[parseInt(r.toString(),10)]),this.getChildMapper(i),s),n!==void 0)break}else if(this.isChildObject()){var d="child",c=I(d,t[parseInt(r.toString(),10)]);if(n=this.getChildNodeObject(c,this.getChildMapper(i),s),n!==void 0)break}}return n},a.prototype.setDragAndDrop=function(t){t&&!this.disabled?this.initializeDrag():this.destroyDrag()},a.prototype.initializeDrag=function(){var t=this,i;this.dragObj=new hl(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+Ze,enableTapHold:!0,tapHoldThreshold:100,helper:function(s){t.dragTarget=s.sender.target;var n=A(t.dragTarget,"."+Rt),r=A(t.dragTarget,"."+Ze);if(t.dragLi=A(t.dragTarget,"."+de),t.fullRowSelect&&!r&&t.dragTarget.classList.contains(Jt)&&(r=t.dragTarget.nextElementSibling),!t.dragTarget||!s.element.isSameNode(n)||!r||t.dragTarget.classList.contains(Rt)||t.dragTarget.classList.contains(Ae)||t.dragTarget.classList.contains(de)||t.dragLi.classList.contains("e-disable"))return!1;var l=r.cloneNode(!0);if(h(M("div."+Xe,l))){var o=t.createElement("div",{className:Xe+" "+we});l.insertBefore(o,l.children[0])}var c=Ou+" "+Rt+" "+t.cssClass+" "+(t.enableRtl?sr:"");i=t.createElement("div",{className:c}),i.appendChild(l);var p=t.selectedNodes.length;if(p>1&&t.allowMultiSelection&&t.dragLi.classList.contains(Et)){var d=t.createElement("span",{className:Nu,innerHTML:""+p});i.appendChild(d)}return document.body.appendChild(i),document.body.style.cursor="",t.dragData=t.getNodeData(t.dragLi),i},dragStart:function(s){E([t.element],Oa);var n=A(s.target,".e-list-item"),r;n&&(r=parseInt(n.getAttribute("aria-level"),10));var l=t.getDragEvent(s.event,t,null,s.target,null,i,r);l.draggedNode.classList.contains(Ia)?(t.dragObj.intDestroy(s.event),t.dragCancelAction(i)):t.trigger("nodeDragStart",l,function(o){o.cancel?(t.dragObj.intDestroy(s.event),t.dragCancelAction(i)):t.dragStartAction=!0})},drag:function(s){t.dragObj.setProperties({cursorAt:{top:!h(s.event.targetTouches)||V.isDevice?60:-20}}),t.dragAction(s,i)},dragStop:function(s){w([t.element],Oa),s.target.classList.contains("e-sibling")||t.removeVirtualEle();var n=s.target,r=!1,l=A(n,"."+nr);(!n||!l)&&(G(s.helper),document.body.style.cursor="");var o=A(n,".e-list-item"),c;o&&(c=parseInt(o.getAttribute("aria-level"),10));var p=t.getDragEvent(s.event,t,n,n,null,s.helper,c);p.preventTargetExpand=r,t.trigger("nodeDragStop",p,function(d){t.dragParent=d.draggedParentNode,t.preventExpand=d.preventTargetExpand,d.cancel&&(s.helper.parentNode&&G(s.helper),document.body.style.cursor="",n.classList.contains("e-sibling")&&t.removeVirtualEle()),t.dragStartAction=!1})}}),this.dropObj=new no(this.element,{out:function(s){!h(s)&&!s.target.classList.contains(Yi)&&t.dropObj.dragData.default&&t.dropObj.dragData.default.helper.classList.contains(Rt)&&(document.body.style.cursor="not-allowed")},over:function(){document.body.style.cursor=""},drop:function(s){t.dropAction(s),t.removeVirtualEle()}})},a.prototype.dragCancelAction=function(t){G(t),w([this.element],Oa),this.dragStartAction=!1},a.prototype.getOffsetX=function(t,i){var s=t.changedTouches;return s&&s.length>0?s[0].clientX-i.getBoundingClientRect().left:t.offsetX},a.prototype.getOffsetY=function(t,i){var s=t.changedTouches;return s&&s.length>0?s[0].clientY-i.getBoundingClientRect().top:t.offsetY},a.prototype.dragAction=function(t,i){var s=A(t.target,"."+nr),n=A(t.target,"."+Ze),r=M("div."+Xe,i);w([r],[Ss,Ki,La,Na]),this.isDropIn=!1,this.removeVirtualEle(),document.body.style.cursor="";var l=t.target.classList,o=t.event,c=this.getOffsetY(o,t.target),p=this.getOffsetX(o,t.target);if(this.fullRowSelect&&!n&&!h(l)&&l.contains(Jt)&&(n=t.target.nextElementSibling),s){var d=A(t.target,"."+de),f=A(t.target,"."+mt),v=A(t.target,"."+ze),g=A(t.target,"."+we);if(!s.classList.contains(Rt)||n&&!d.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,d))if(this.hasTemplate&&d){var m=M(this.fullRowSelect?"."+Jt:"."+Ze,d);if(t&&!g&&!v&&c<7&&!f||g&&c<5||v&&p<3){var C=this.fullRowSelect?1:0;this.appendIndicator(d,r,C)}else if(t&&!g&&!v&&!f&&m&&c>m.offsetHeight-10||g&&c>19||v&&p>19){var C=this.fullRowSelect?2:1;this.appendIndicator(d,r,C)}else E([r],Ss),this.isDropIn=!0}else if(d&&t&&!g&&!v&&c<7&&!f||g&&c<5||v&&p<3){var C=this.fullRowSelect?1:0;this.appendIndicator(d,r,C)}else if(d&&t&&!g&&!v&&t.target.offsetHeight>0&&c>t.target.offsetHeight-10&&!f||g&&c>19||v&&p>19){var C=this.fullRowSelect?2:1;this.appendIndicator(d,r,C)}else E([r],Ss),this.isDropIn=!0;else t.target.nodeName==="LI"&&!d.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,d)?(E([r],Ki),this.renderVirtualEle(t)):t.target.classList.contains(Yi)?E([r],Ki):E([r],La)}else E([r],Na),document.body.style.cursor="not-allowed";var k=A(t.target,".e-list-item"),T;k&&(T=parseInt(k.getAttribute("aria-level"),10));var x=this.getDragEvent(t.event,this,t.target,t.target,null,i,T);x.dropIndicator&&w([r],x.dropIndicator),this.trigger("nodeDragging",x),x.dropIndicator&&E([r],x.dropIndicator)},a.prototype.appendIndicator=function(t,i,s){E([i],Ki);var n=this.createElement("div",{className:Yi});t.insertBefore(n,t.children[parseInt(s.toString(),10)])},a.prototype.dropAction=function(t){for(var i=t.event,s=this.getOffsetY(i,t.target),n=t.target,r,l,o=!1,c=[],p=[],d=t.dragData.draggable,f=0;f<d.ej2_instances.length;f++)if(d.ej2_instances[parseInt(f.toString(),10)]instanceof e){r=d.ej2_instances[parseInt(f.toString(),10)];break}if(r&&r.dragTarget){var v=r.dragTarget,g=A(v,"."+de),m=A(n,"."+de);if(p.push(g),m==null&&n.classList.contains(Rt)&&(m=n.firstElementChild),G(t.droppedElement),document.body.style.cursor="",!m||m.isSameNode(g)||this.isDescendant(g,m)){this.fields.dataSource instanceof P||(this.preventExpand=!1);return}if(r.allowMultiSelection&&g.classList.contains(Et)){var C=Ee("."+Et,r.element);if(p=C,t.target.offsetHeight<=33&&s>t.target.offsetHeight-10&&s>6)for(var f=C.length-1;f>=0;f--)m.isSameNode(C[parseInt(f.toString(),10)])||this.isDescendant(C[parseInt(f.toString(),10)],m)||this.appendNode(n,C[parseInt(f.toString(),10)],m,t,r,s);else for(var f=0;f<C.length;f++)m.isSameNode(C[parseInt(f.toString(),10)])||this.isDescendant(C[parseInt(f.toString(),10)],m)||this.appendNode(n,C[parseInt(f.toString(),10)],m,t,r,s)}else this.appendNode(n,g,m,t,r,s);l=parseInt(g.getAttribute("aria-level"),10),o=!0}this.fields.dataSource instanceof P||(this.preventExpand=!1);for(var f=0;f<p.length;f++)c.push(this.getNode(p[parseInt(f.toString(),10)]));this.trigger("nodeDropped",this.getDragEvent(t.event,r,n,t.target,t.dragData.draggedElement,null,l,o)),r.element.id!==this.element.id&&(r.triggerEvent("nodeDropped",c),this.isNodeDropped=!0,this.fields.dataSource=this.treeData),this.triggerEvent("nodeDropped",c)},a.prototype.appendNode=function(t,i,s,n,r,l){var o=A(t,"."+mt),c=A(n.target,"."+ze),p=A(n.target,"."+we);!i.classList.contains("e-disable")&&!o&&(p&&n.event.offsetY<5||c&&n.event.offsetX<3||p&&n.event.offsetY>19||c&&n.event.offsetX>19||!p&&!c)?t.nodeName==="LI"?this.dropAsSiblingNode(i,s,n,r):t.firstElementChild&&t.classList.contains(Rt)?t.firstElementChild.nodeName==="UL"&&this.dropAsSiblingNode(i,s,n,r):t.classList.contains("e-icon-collapsible")||t.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(i,s,n,r):this.dropAsChildNode(i,s,r,null,n,l,null,t):this.dropAsChildNode(i,s,r,null,n,l,!0,t),this.showCheckBox&&this.ensureIndeterminate()},a.prototype.dropAsSiblingNode=function(t,i,s,n){var r=A(i,"."+Ae),l=A(t,"."+Ae),o=A(l,"."+de),c;if(s.target.offsetHeight>0&&s.event.offsetY>s.target.offsetHeight-2?c=!1:s.event.offsetY<2?c=!0:(s.target.classList.contains("e-icon-expandable")||s.target.classList.contains("e-icon-collapsible"))&&(s.event.offsetY<5||s.event.offsetX<3?c=!0:(s.event.offsetY>15||s.event.offsetX>17)&&(c=!1)),s.target.classList.contains("e-icon-expandable")||s.target.classList.contains("e-icon-collapsible")){var p=s.target.closest("li");r.insertBefore(t,c?p:p.nextElementSibling)}else r.insertBefore(t,c?s.target:s.target.nextElementSibling);this.moveData(t,i,r,c,n),this.updateElement(l,o),this.updateAriaLevel(t),n.element.id===this.element.id?this.updateList():(n.updateInstance(),this.updateInstance())},a.prototype.dropAsChildNode=function(t,i,s,n,r,l,o,c){var p=A(t,"."+Ae),d=A(p,"."+de),f=A(i,"."+Ae),v;if(r&&r.target&&(v=M(this.fullRowSelect?"."+Jt:"."+Ze,i)),r&&(l<7&&!c.classList.contains("e-sibling")||c.classList.contains("e-sibling")&&!i.lastChild.classList.contains("e-sibling"))&&!o)f.insertBefore(t,i),this.moveData(t,i,f,!0,s);else if(r&&r.target.offsetHeight>0&&l>r.target.offsetHeight-10&&!o&&!this.hasTemplate)f.insertBefore(t,i.nextElementSibling),this.moveData(t,i,f,!1,s);else if(this.hasTemplate&&v&&l>v.offsetHeight-10&&!o)f.insertBefore(t,i.nextElementSibling),this.moveData(t,i,f,!1,s);else{var g=this.expandParent(i),m=h(n)?null:g.childNodes[parseInt(n.toString(),10)];g.insertBefore(t,m),this.moveData(t,m,g,!0,s)}this.updateElement(p,d),this.updateAriaLevel(t),s.element.id===this.element.id?this.updateList():(s.updateInstance(),this.updateInstance())},a.prototype.moveData=function(t,i,s,n,r){var l=A(s,"."+de),o=this.getId(t),c=r.updateChildField(r.treeData,r.fields,o,null,null,!0),p=this.getId(i),d=this.getDataPos(this.treeData,this.fields,p),f=this.getId(l);if(this.dataType===1){this.updateField(this.treeData,this.fields,f,"hasChildren",!0);var v=h(d)?this.treeData.length:n?d:d+1;if(h(f)&&!this.hasPid)delete c[0][this.fields.parentID];else{var g=this.isNumberTypeId?parseFloat(f):f;Pe(this.fields.parentID,g,c[0])}if(this.treeData.splice(v,0,c[0]),r.element.id!==this.element.id){var m=r.removeChildNodes(o);v++;for(var C=0,k=m.length;C<k;C++)this.treeData.splice(v,0,m[parseInt(C.toString(),10)]),v++;r.groupedData=r.getGroupedData(r.treeData,r.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,f,c,n?d:d+1)},a.prototype.expandParent=function(t){var i=M("div."+we+", div."+ze,t);i&&i.classList.contains(we)&&this.preventExpand!==!0&&this.expandAction(t,i,null);var s=M("."+Ae,t);if(this.preventExpand===!0&&!s&&i&&this.renderChildNodes(t),s=M("."+Ae,t),!h(s)&&this.preventExpand&&t.getAttribute("aria-expanded")!=="true"&&(s.style.display="none"),!h(s)&&this.preventExpand===!1&&(s.style.display="block"),h(s)&&this.preventExpand===!0){h(i)&&Ve.generateIcon(this.createElement,t,we,this.listBaseOption);var n=M("div."+we+", div."+ze,t);n&&n.classList.add("e-icon-expandable"),s=Ve.generateUL(this.createElement,[],null,this.listBaseOption),t.appendChild(s),n?w([n],ze):Ve.generateIcon(this.createElement,t,we,this.listBaseOption),t.setAttribute("aria-expanded","false"),s.style.display="none"}if(h(s)){var r=this.expandArgs;(h(r)||r&&r.name!=="nodeExpanding")&&this.trigger("nodeExpanding",this.getExpandEvent(t,null)),h(i)&&Ve.generateIcon(this.createElement,t,ze,this.listBaseOption);var n=M("div."+we+", div."+ze,t);n?w([n],we):(Ve.generateIcon(this.createElement,t,ze,this.listBaseOption),n=M("div."+Xe,t),w([n],we)),s=Ve.generateUL(this.createElement,[],null,this.listBaseOption),t.appendChild(s),this.addExpand(t),this.trigger("nodeExpanded",this.getExpandEvent(t,null))}var l=M("div."+ze,t);return!h(s)&&l&&this.preventExpand&&t.getAttribute("aria-expanded")!=="true"&&(w([l],ze),t.setAttribute("aria-expanded","false"),E([l],we)),s},a.prototype.updateElement=function(t,i){if(i&&t.childElementCount===0){var s=M("div."+Xe,i);G(t),G(s);var n=this.getId(i);this.updateField(this.treeData,this.fields,n,"hasChildren",!1),this.removeExpand(i,!0)}},a.prototype.updateAriaLevel=function(t){var i=this.parents(t,"."+Ae).length;t.setAttribute("aria-level",""+i),this.updateChildAriaLevel(M("."+Ae,t),i+1)},a.prototype.updateChildAriaLevel=function(t,i){if(!h(t))for(var s=t.childNodes,n=0,r=s.length;n<r;n++){var l=s[parseInt(n.toString(),10)];l.setAttribute("aria-level",""+i),this.updateChildAriaLevel(M("."+Ae,l),i+1)}},a.prototype.renderVirtualEle=function(t){var i,s=t.event,n=this.getOffsetY(s,t.target);n>t.target.offsetHeight-2?i=!1:n<2&&(i=!0);var r=this.createElement("div",{className:Yi}),l=this.fullRowSelect?i?1:2:i?0:1;t.target.insertBefore(r,t.target.children[parseInt(l.toString(),10)])},a.prototype.removeVirtualEle=function(){var t=M("."+Yi);t&&G(t)},a.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},a.prototype.getDragEvent=function(t,i,s,n,r,l,o,c){var p=s?A(s,"."+de):null,d=p?this.getNodeData(p):null,f=i?i.dragLi:r,v=i?i.dragData:null,g=s?this.parents(s,"."+de):null,m=i.dragLi.parentElement,C=i.dragLi?A(m,"."+de):null,k=null,T=null,x=[Ki,Ss,La,Na],L=null,N=c===!0?f:p,R=N?A(N,".e-list-parent"):null,Y=0,Oe=null;if(C=i.dragLi&&C===null?A(m,"."+Rt):C,C=c===!0?this.dragParent:C,l)for(;Y<4;){if(M("."+Xe,l).classList.contains(x[parseInt(Y.toString(),10)])){L=x[parseInt(Y.toString(),10)];break}Y++}if(R){var xe=0;for(Y=0;Y<R.childElementCount;Y++)if(xe=c!==!0&&R.children[parseInt(Y.toString(),10)]===f&&p!==f?++xe:xe,c!==!0&&R.children[parseInt(Y.toString(),10)].classList.contains("e-hover")){T=t.offsetY>=23?Y+1:Y;break}else if(R.children[parseInt(Y.toString(),10)]===N){T=(t.offsetY>=23,Y);break}T=xe!==0?--T:T,Oe=this.isDropIn?"Inside":t.offsetY<7?"Before":"After"}if(s&&(g.length===0?k=null:s.classList.contains(de)?k=g[0]:k=g[1]),p===f&&(k=p),s&&n.offsetHeight<=33&&t.offsetY<n.offsetHeight-10&&t.offsetY>6&&(k=p,c!==!0)){o=++o;var H=k?M(".e-list-parent",k):null;if(T=H?H.children.length:0,!(this.fields.dataSource instanceof P)&&H===null&&k){var j=k.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,k.getAttribute("data-uid").toString()):null;T=j?j.length:0}}return{cancel:!1,clonedNode:l,event:t,draggedNode:f,draggedNodeData:v,droppedNode:p,droppedNodeData:d,dropIndex:T,dropLevel:o,draggedParentNode:C,dropTarget:k,dropIndicator:L,target:n,position:Oe}},a.prototype.addFullRow=function(t){var i=this.liList.length;if(t)for(var s=0;s<i;s++)this.createFullRow(this.liList[parseInt(s.toString(),10)]);else for(var s=0;s<i;s++){var n=M("."+Jt,this.liList[parseInt(s.toString(),10)]);G(n)}},a.prototype.createFullRow=function(t){var i=this.createElement("div",{className:Jt});t.insertBefore(i,t.childNodes[0])},a.prototype.addMultiSelect=function(t){if(t)for(var i=Ee("."+de+':not([aria-selected="true"])',this.element),s=0,n=i;s<n.length;s++){var r=n[s];r.setAttribute("aria-selected","false")}else for(var i=Ee("."+de+'[aria-selected="false"]',this.element),l=0,o=i;l<o.length;l++){var r=o[l];r.removeAttribute("aria-selected")}},a.prototype.collapseByLevel=function(t,i,s,n){if(n=h(n)?1:n,i>0&&!h(t))for(var r=this.getVisibleNodes(s,t.childNodes),l=0,o=r.length;l<o;l++){var c=r[parseInt(l.toString(),10)],p=M("."+ze,M("."+Ze,c));n>=i&&!h(p)&&this.collapseNode(c,p,null),this.collapseByLevel(M("."+Ae,c),i,s,n+1)}},a.prototype.collapseAllNodes=function(t){for(var i=this.getVisibleNodes(t,Ee("."+ze,this.element)),s=0,n=i.length;s<n;s++){var r=i[parseInt(s.toString(),10)],l=A(r,"."+de);this.collapseNode(l,r,null)}},a.prototype.expandByLevel=function(t,i,s){if(i>0&&!h(t))for(var n=this.getVisibleNodes(s,t.childNodes),r=0,l=n.length;r<l;r++){var o=n[parseInt(r.toString(),10)],c=M("."+we,M("."+Ze,o));h(c)||this.expandAction(o,c,null),this.expandByLevel(M("."+Ae,o),i-1,s)}},a.prototype.expandAllNodes=function(t){for(var i=this.getVisibleNodes(t,Ee("."+we,this.element)),s=0,n=i;s<n.length;s++){var r=n[s],l=A(r,"."+de);this.expandAction(l,r,null,!0,null,!0)}},a.prototype.getVisibleNodes=function(t,i){var s=Array.prototype.slice.call(i);if(t)for(var n=0;n<s.length;n++)Ci(s[parseInt(n.toString(),10)])||(s.splice(n,1),n--);return s},a.prototype.removeNode=function(t){var i=A(t,"."+Ae),s=A(i,"."+de);h(this.nodeTemplateFn)||this.destroyTemplate(t),G(t),this.updateElement(i,s),this.removeData(t)},a.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},a.prototype.updateList=function(){this.liList=Array.prototype.slice.call(Ee("."+de,this.element))},a.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var t=Ee("."+Et,this.element);this.selectGivenNodes(t)},a.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var t=Ee('[aria-expanded="true"]',this.element),i=0,s=t.length;i<s;i++)this.addExpand(t[parseInt(i.toString(),10)])},a.prototype.removeData=function(t){if(this.dataType===1){var i=new P(this.treeData),s=this.getId(t),n={},r=this.isNumberTypeId?parseFloat(s):s;n[this.fields.id]=r,i.remove(this.fields.id,n),this.removeChildNodes(s)}else{var s=this.getId(t);this.updateChildField(this.treeData,this.fields,s,null,null,!0)}},a.prototype.removeChildNodes=function(t){for(var i=this.getChildGroup(this.groupedData,t,!1),s=[],n=0,r=i.length;n<r;n++){var l=new P(this.treeData),o=I(this.fields.id,i[parseInt(n.toString(),10)]).toString(),c={},p=this.isNumberTypeId?parseFloat(o):o;c[this.fields.id]=p;var d=l.remove(this.fields.id,c);s.push(d[0]),this.removeChildNodes(o)}return s},a.prototype.doGivenAction=function(t,i,s){for(var n=0,r=t.length;n<r;n++){var l=this.getElement(t[parseInt(n.toString(),10)]);if(!h(l)){var o=M("."+i,M("."+Ze,l));h(o)||(s?this.expandAction(l,o,null):this.collapseNode(l,o,null))}}},a.prototype.addGivenNodes=function(t,i,s,n,r){if(t.length!==0){var l=this.getSortedData(t),o=i?parseFloat(i.getAttribute("aria-level"))+1:1;n&&this.updateMapper(o);var c=Ve.createListItemFromJson(this.createElement,l,this.listBaseOption,o),p=this.getId(i),d;h(i)||(d=M("div."+Xe,i)),this.dataType===1&&d&&d.classList.contains(we)&&this.preventExpand&&!h(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")&&(this.preventExpand=!0),this.dataType!==1&&(this.addChildData(this.treeData,this.fields,p,t,s),this.isFirstRender=!1);var f;r?f=r:f=i?this.expandParent(i):M("."+Ae,this.element);var v=h(s)?null:f.childNodes[parseInt(s.toString(),10)];if(!this.isFirstRender||this.dataType===1){var g=this.expandArgs;if(v||this.sortOrder==="None"){for(var m=0;m<c.length;m++)f.insertBefore(c[parseInt(m.toString(),10)],v);if(this.dataType===1&&!h(i)&&!this.preventExpand&&!h(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var C=M("div."+Xe,i);C&&C.classList.contains(we)&&(h(g)||g.name!=="nodeExpanding")&&this.expandAction(i,C,null)}}if(!v&&(this.sortOrder==="Ascending"||this.sortOrder==="Descending"))if(f.childNodes.length===0){for(var m=0;m<c.length;m++)f.insertBefore(c[parseInt(m.toString(),10)],v);if(this.dataType===1&&!h(i)&&!this.preventExpand&&!h(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var C=M("div."+Xe,i);C&&C.classList.contains(we)&&(h(g)||g.name!=="nodeExpanding")&&this.expandAction(i,C,null)}}else for(var k=f.childNodes,m=0;m<c.length;m++)for(var T=0;T<k.length;T++){var x=this.sortOrder==="Ascending"?k[parseInt(T.toString(),10)].textContent.toUpperCase()>c[parseInt(m.toString(),10)].innerText.toUpperCase():k[parseInt(T.toString(),10)].textContent.toUpperCase()<c[parseInt(m.toString(),10)].innerText.toUpperCase();if(x){f.insertBefore(c[parseInt(m.toString(),10)],k[parseInt(T.toString(),10)]);break}f.insertBefore(c[parseInt(m.toString(),10)],k[k.length])}}if(this.dataType===1){this.updateField(this.treeData,this.fields,p,"hasChildren",!0);for(var L=this.getId(v),N=h(L)?this.treeData.length:this.getDataPos(this.treeData,this.fields,L),T=0;T<t.length;T++){if(!h(p)){var R=this.isNumberTypeId?parseFloat(p):p;Pe(this.fields.parentID,R,t[parseInt(T.toString(),10)])}this.treeData.splice(N,0,t[parseInt(T.toString(),10)]),N++}}this.finalizeNode(f)}},a.prototype.updateMapper=function(t){var i=t===1?this.fields:this.getChildFields(this.fields,t-1,1);this.updateListProp(i)},a.prototype.updateListProp=function(t){var i=this.getActualProperties(t);this.listBaseOption.fields=i,this.listBaseOption.fields.url=Object.prototype.hasOwnProperty.call(i,"navigateUrl")?i.navigateUrl:"navigateUrl"},a.prototype.getDataPos=function(t,i,s){for(var n=null,r=0,l=t.length;r<l;r++){var o=I(i.id,t[parseInt(r.toString(),10)]);if(t[parseInt(r.toString(),10)]&&o&&o.toString()===s)return r;if(typeof i.child=="string"&&!h(I(i.child,t[parseInt(r.toString(),10)]))){var c=I(i.child,t[parseInt(r.toString(),10)]);if(n=this.getDataPos(c,this.getChildMapper(i),s),n!==null)break}else if(this.fields.dataSource instanceof P&&!h(I("child",t[parseInt(r.toString(),10)]))){var p=I("child",t[parseInt(r.toString(),10)]);if(n=this.getDataPos(p,this.getChildMapper(i),s),n!==null)break}}return n},a.prototype.addChildData=function(t,i,s,n,r){var l;if(h(s)){r=h(r)?t.length:r;for(var o=0,c=n.length;o<c;o++)t.splice(r,0,n[parseInt(o.toString(),10)]),r++;return l}for(var p=0,d=t.length;p<d;p++){var f=I(i.id,t[parseInt(p.toString(),10)]);if(t[parseInt(p.toString(),10)]&&f&&f.toString()===s){if(typeof i.child=="string"&&Object.prototype.hasOwnProperty.call(t[parseInt(p.toString(),10)],i.child)&&t[parseInt(p.toString(),10)][i.child]!==null||this.fields.dataSource instanceof P&&Object.prototype.hasOwnProperty.call(t[parseInt(p.toString(),10)],"child")){var v=typeof i.child=="string"?i.child:"child",g=I(v,t[parseInt(p.toString(),10)]);h(g)&&(g=[]),r=h(r)?g.length:r;for(var o=0,c=n.length;o<c;o++)g.splice(r,0,n[parseInt(o.toString(),10)]),r++}else{var v=typeof i.child=="string"?i.child:"child";t[parseInt(p.toString(),10)][""+v]=n}return!0}else if(typeof i.child=="string"&&!h(I(i.child,t[parseInt(p.toString(),10)]))){var m=I(i.child,t[parseInt(p.toString(),10)]);if(l=this.addChildData(m,this.getChildMapper(i),s,n,r),l!==void 0)break}else if(this.fields.dataSource instanceof P&&!h(I("child",t[parseInt(p.toString(),10)]))){var g=I("child",t[parseInt(p.toString(),10)]);if(l=this.addChildData(g,this.getChildMapper(i),s,n,r),l!==void 0)break}}return l},a.prototype.doDisableAction=function(t){var i=this.nodeType(t),s=this.checkValidId(i);this.validArr=[];for(var n=0,r=s.length;n<r;n++){var l=s[parseInt(n.toString(),10)][this.fields.id].toString();l&&this.disableNode.indexOf(l)===-1&&this.disableNode.push(l);var o=this.getElement(l);o&&(o.setAttribute("aria-disabled","true"),E([o],Li))}},a.prototype.doEnableAction=function(t){for(var i=this.nodeType(t),s=0,n=i.length;s<n;s++){var r=this.getElement(i[parseInt(s.toString(),10)]),l=i[parseInt(s.toString(),10)];l&&this.disableNode.indexOf(l)!==-1&&this.disableNode.splice(this.disableNode.indexOf(l),1),r&&(r.removeAttribute("aria-disabled"),w([r],Li))}},a.prototype.nodeType=function(t){for(var i=[],s=0,n=t.length;s<n;s++){var r=void 0;typeof t[parseInt(s.toString(),10)]=="string"?r=t[parseInt(s.toString(),10)]?t[parseInt(s.toString(),10)].toString():null:typeof t[parseInt(s.toString(),10)]=="object"&&(r=t[parseInt(s.toString(),10)]?t[parseInt(s.toString(),10)].getAttribute("data-uid").toString():null),i.indexOf(r)===-1&&i.push(r)}return i},a.prototype.checkValidId=function(t){var i=this;if(this.dataType===1)this.validArr=this.treeData.filter(function(l){return t.indexOf(l[i.fields.id]?l[i.fields.id].toString():null)!==-1});else if(this.dataType===2)for(var s=0;s<this.treeData.length;s++){var n=this.treeData[parseInt(s.toString(),10)][this.fields.id]?this.treeData[parseInt(s.toString(),10)][this.fields.id].toString():null;t.indexOf(n)!==-1&&this.validArr.push(this.treeData[parseInt(s.toString(),10)]);var r=I(this.fields.child.toString(),this.treeData[parseInt(s.toString(),10)]);r&&this.filterNestedChild(r,t)}return this.validArr},a.prototype.filterNestedChild=function(t,i){for(var s=0;s<t.length;s++){var n=t[parseInt(s.toString(),10)][this.fields.id]?t[parseInt(s.toString(),10)][this.fields.id].toString():null;i.indexOf(n)!==-1&&this.validArr.push(t[parseInt(s.toString(),10)]);var r=I(this.fields.child.toString(),t[parseInt(s.toString(),10)]);r&&this.filterNestedChild(r,i)}},a.prototype.setTouchClass=function(){var t=A(this.element,"."+Ru);this.touchClass=h(t)?"":Mu},a.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var t=this.selectedNodes,i=0,s=t.length;i<s;i++)this.updateField(this.treeData,this.fields,t[parseInt(i.toString(),10)],"selected",!0);for(var n=this.expandedNodes,r=0,l=n.length;r<l;r++)this.updateField(this.treeData,this.fields,n[parseInt(r.toString(),10)],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);for(var o=this.checkedNodes,c=0,l=o.length;c<l;c++)this.updateField(this.treeData,this.fields,o[parseInt(c.toString(),10)],"isChecked",!0)}},a.prototype.removeField=function(t,i,s){if(!(h(t)||h(i)))for(var n=0,r=t.length;n<r;n++){for(var l=0;l<s.length;l++){var o=this.getMapperProp(i,s[parseInt(l.toString(),10)]);h(t[parseInt(n.toString(),10)][""+o])||delete t[parseInt(n.toString(),10)][""+o]}typeof i.child=="string"&&!h(I(i.child,t[parseInt(n.toString(),10)]))?this.removeField(I(i.child,t[parseInt(n.toString(),10)]),this.getChildMapper(i),s):this.fields.dataSource instanceof P&&!h(I("child",t[parseInt(n.toString(),10)]))&&this.removeField(I("child",t[parseInt(n.toString(),10)]),this.getChildMapper(i),s)}},a.prototype.getMapperProp=function(t,i){switch(i){case"selected":return h(t.selected)?"selected":t.selected;case"expanded":return h(t.expanded)?"expanded":t.expanded;case"isChecked":return h(t.isChecked)?"isChecked":t.isChecked;case"hasChildren":return h(t.hasChildren)?"hasChildren":t.hasChildren;default:return i}},a.prototype.updateField=function(t,i,s,n,r){if(!h(s))if(this.dataType===1){var l=this.isNumberTypeId?parseFloat(s):s,o=new P(this.treeData).executeLocal(new ee().where(i.id,"equal",l,!1));Pe(this.getMapperProp(i,n),r,o[0])}else this.updateChildField(t,i,s,n,r)},a.prototype.updateChildField=function(t,i,s,n,r,l){var o;if(h(t))return o;for(var c=0,p=t.length;c<p;c++){var d=I(i.id,t[parseInt(c.toString(),10)]);if(t[parseInt(c.toString(),10)]&&!h(d)&&d.toString()===s)return l?o=t.splice(c,1):(Pe(this.getMapperProp(i,n),r,t[parseInt(c.toString(),10)]),o=[]),o;if(typeof i.child=="string"&&!h(I(i.child,t[parseInt(c.toString(),10)]))){var f=I(i.child,t[parseInt(c.toString(),10)]);if(o=this.updateChildField(f,this.getChildMapper(i),s,n,r,l),o!==void 0)break}else if(this.fields.dataSource instanceof P&&!h(I("child",t[parseInt(c.toString(),10)]))){var v=I("child",t[parseInt(c.toString(),10)]);if(o=this.updateChildField(v,this.getChildMapper(i),s,n,r,l),o!==void 0)break}}return o},a.prototype.triggerEvent=function(t,i){if(this.renderReactTemplates(),t==="addNodes"){for(var s=[],n=0;n<i.length;n++)s.push(this.getNode(this.getElement(h(i[parseInt(n.toString(),10)][this.fields.id])?I(this.fields.id,i[parseInt(n.toString(),10)]).toString():null)));i=s}var r={data:this.treeData,action:t,nodeData:i};this.trigger("dataSourceChanged",r)},a.prototype.wireInputEvents=function(t){b.add(t,"blur",this.inputFocusOut,this)},a.prototype.wireEditingEvents=function(t){var i=this;t&&!this.disabled?this.touchEditObj=new is(this.element,{tap:function(s){i.isDoubleTapped(s)&&s.tapCount===2&&(s.originalEvent.preventDefault(),i.editingHandler(s.originalEvent))}}):this.touchEditObj&&this.touchEditObj.destroy()},a.prototype.wireClickEvent=function(t){var i=this;t?this.touchClickObj=new is(this.element,{tap:function(s){i.clickHandler(s)}}):this.touchClickObj&&this.touchClickObj.destroy()},a.prototype.wireExpandOnEvent=function(t){var i=this;t?this.touchExpandObj=new is(this.element,{tap:function(s){(i.expandOnType==="Click"||i.expandOnType==="DblClick"&&i.isDoubleTapped(s)&&s.tapCount===2)&&s.originalEvent.which!==3&&i.expandHandler(s)}}):this.touchExpandObj&&this.touchExpandObj.destroy()},a.prototype.mouseDownHandler=function(t){this.mouseDownStatus=!0,(t.shiftKey||t.ctrlKey)&&t.preventDefault(),t.ctrlKey&&this.allowMultiSelection&&b.add(this.element,"contextmenu",this.preventContextMenu,this)},a.prototype.preventContextMenu=function(t){t.preventDefault()},a.prototype.wireEvents=function(){b.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),this.expandOnType!=="None"&&this.wireExpandOnEvent(!0),b.add(this.element,"mouseover",this.onMouseOver,this),b.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new Ct(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},a.prototype.unWireEvents=function(){b.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),b.remove(this.element,"mouseover",this.onMouseOver),b.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},a.prototype.parents=function(t,i){for(var s=[],n=t.parentNode;!h(n);)Xa(n,i)&&s.push(n),n=n.parentNode;return s},a.prototype.isDoubleTapped=function(t){var i=t.originalEvent.target,s;return i&&t.tapCount&&(t.tapCount===1?this.firstTap=A(i,"."+de):t.tapCount===2&&(s=A(i,"."+de))),this.firstTap===s},a.prototype.isDescendant=function(t,i){for(var s=i.parentNode;!h(s);){if(s===t)return!0;s=s.parentNode}return!1},a.prototype.showSpinner=function(t){E([t],ys),Xs({target:t,width:V.isDevice?16:14},this.createElement),Js(t)},a.prototype.hideSpinner=function(t){Qs(t),t.innerHTML="",w([t],ys)},a.prototype.setCheckedNodes=function(t){t=JSON.parse(JSON.stringify(t)),t.length>1&&typeof this.nodeChecked=="function"&&this.nodeChecked.length>0&&(this.isFilter=!0),this.uncheckAll(this.checkedNodes),this.setIndeterminate(t),t.length>0&&this.checkAll(t)},a.prototype.setValidCheckedNode=function(t,i){if(i===void 0&&(i=[]),this.dataType===1){var s=this.fields,n=new P(this.treeData).executeLocal(new ee().where(s.id,"equal",t,!0));if(n[0]&&(this.setChildCheckState(n,t,n[0],i),this.autoCheck)){for(var r=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,l=this.getChildNodes(this.treeData,r),o=0,c=0;c<l.length;c++){var p=l[parseInt(c.toString(),10)][this.fields.id].toString();this.checkedNodes.indexOf(p)!==-1&&o++}o===l.length&&this.checkedNodes.indexOf(r)===-1&&r&&this.checkDisabledState(r)}}else if(this.dataType===2)for(var d=0;d<this.treeData.length;d++){var f=this.treeData[parseInt(d.toString(),10)][this.fields.id]?this.treeData[parseInt(d.toString(),10)][this.fields.id].toString():"";if(f===t&&this.checkedNodes.indexOf(t)===-1){this.checkDisabledState(t);break}var v=I(this.fields.child.toString(),this.treeData[parseInt(d.toString(),10)]);v&&this.setChildCheckState(v,t,this.treeData[parseInt(d.toString(),10)],i)}},a.prototype.setChildCheckState=function(t,i,s,n){n===void 0&&(n=[]);var r,l=0;if(this.dataType===1){s&&(r=s[this.fields.id]?s[this.fields.id].toString():null);for(var o=0;o<t.length;o++){var c=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():null;s&&r&&this.autoCheck&&this.checkedNodes.indexOf(r)!==-1&&this.checkedNodes.indexOf(c)===-1&&this.checkDisabledState(c,t[o]),c===i&&this.checkedNodes.indexOf(i)===-1&&this.checkDisabledState(i);var p=this.getChildNodes(this.treeData,c),d=n.length===1&&n[0]===c;(p.length===i.length||d)&&this.setChildCheckState(p,i,s)}}else{s&&(r=s[this.fields.id]?s[this.fields.id].toString():"");for(var o=0;o<t.length;o++){var f=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():"",d=[i].length===1&&n.length===0;s&&r&&this.autoCheck&&this.checkedNodes.indexOf(r)!==-1&&this.checkedNodes.indexOf(f)===-1&&(f===i||d)&&this.checkDisabledState(f,t[o]),f===i&&this.checkedNodes.indexOf(i)===-1&&this.checkDisabledState(i);var p=I(this.fields.child.toString(),t[parseInt(o.toString(),10)]);p&&this.setChildCheckState(p,i,t[parseInt(o.toString(),10)]),this.checkedNodes.indexOf(f)!==-1&&this.autoCheck&&l++,l===t.length&&this.checkedNodes.indexOf(r)===-1&&this.autoCheck&&this.checkDisabledState(r,s)}}},a.prototype.setIndeterminate=function(t){for(var i=0;i<t.length;i++)this.setValidCheckedNode(t[parseInt(i.toString(),10)],t)},a.prototype.updatePosition=function(t,i,s,n){if(this.dataType===1){var r=this.getDataPos(this.treeData,this.fields,t);if(this.treeData.splice(r,1,i),s){this.removeChildNodes(t);for(var l=0;l<n.length;l++)this.treeData.splice(r,0,n[parseInt(l.toString(),10)]),r++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,t,[i],void 0)},a.prototype.updateChildPosition=function(t,i,s,n,r){for(var l,o=0,c=t.length;o<c;o++){var p=I(i.id,t[parseInt(o.toString(),10)]);if(t[parseInt(o.toString(),10)]&&p&&p.toString()===s)return t[parseInt(o.toString(),10)]=n[0],!0;if(typeof i.child=="string"&&!h(I(i.child,t[parseInt(o.toString(),10)]))){var d=I(i.child,t[parseInt(o.toString(),10)]);if(l=this.updateChildPosition(d,this.getChildMapper(i),s,n,r),l!==void 0)break}else if(this.fields.dataSource instanceof P&&!h(I("child",t[parseInt(o.toString(),10)]))){var f=I("child",t[parseInt(o.toString(),10)]);if(l=this.updateChildPosition(f,this.getChildMapper(i),s,n,r),l!==void 0)break}}return l},a.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},a.prototype.crudOperation=function(t,i,s,n,r,l,o){var c=this,p=this.fields.dataSource,d=[],f=this.getQuery(this.fields),v=this.fields.id,g,m={addedRecords:[],deletedRecords:[],changedRecords:[]},C=[];i?C=this.nodeType(i):s&&(typeof s=="string"?C[0]=s.toString():typeof s=="object"&&(C[0]=s.getAttribute("data-uid").toString()));for(var k=0,T=C.length;k<T;k++){var x=this.getElement(C[parseInt(k.toString(),10)]);if(!h(x)){var L=this.getNodeObject(C[parseInt(k.toString(),10)]);d.push(L)}}switch(t){case"delete":i.length===1?g=p.remove(v,d[0],f.fromTable,f):(m.deletedRecords=d,g=p.saveChanges(m,v,f.fromTable,f)),g.then(function(){return c.deleteSuccess(C)}).catch(function(R){return c.dmFailure(R)});break;case"update":d[0][this.fields.text]=n,g=p.update(v,d[0],f.fromTable,f),g.then(function(){return c.editSucess(s,n,o)}).catch(function(R){return c.dmFailure(R,s,o)});break;case"insert":if(r.length===1)g=p.insert(r[0],f.fromTable,f);else{for(var N=[],k=0,T=r.length;k<T;k++)N.push(r[parseInt(k.toString(),10)]);m.addedRecords=N,g=p.saveChanges(m,v,f.fromTable,f)}g.then(function(){var R=c.getElement(s);c.addSuccess(r,R,l),c.preventExpand=!1}).catch(function(R){return c.dmFailure(R)});break}},a.prototype.deleteSuccess=function(t){for(var i=[],s=0,n=t.length;s<n;s++){var r=this.getElement(t[parseInt(s.toString(),10)]);i.push(this.getNode(r)),!h(r)&&this.removeNode(r)}this.updateInstance(),this.dataType===1&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent("removeNode",i)},a.prototype.editSucess=function(t,i,s){var n=this.getElement(t),r=M("."+ci,n);this.appendNewText(n,r,i,s)},a.prototype.addSuccess=function(t,i,s){var n=this,r,l=i?i.querySelector("."+Xe):null;i&&l&&l.classList.contains(we)&&i.querySelector("."+Ae)===null?this.renderChildNodes(i,null,function(){r=i.querySelector("."+Ae),n.addGivenNodes(t,i,s,!0,r),n.triggerEvent("addNodes",t)}):(this.addGivenNodes(t,i,s,!0),this.triggerEvent("addNodes",t))},a.prototype.dmFailure=function(t,i,s){i&&this.updatePreviousText(i,s),this.trigger("actionFailure",{error:t})},a.prototype.updatePreviousText=function(t,i){var s=this.getElement(t),n=M("."+ci,s);this.updateText(s,n,this.oldText,i)},a.prototype.getHierarchicalParentId=function(t,i,s){var n=this,r=i.findIndex(function(c){return c[n.fields.id]&&c[n.fields.id].toString()===t});if(r===-1)for(var l=0;l<i.length;l++){var o=I(this.fields.child.toString(),i[parseInt(l.toString(),10)]);if(!h(o))if(r=o.findIndex(function(c){return c[n.fields.id]&&c[n.fields.id].toString()===t}),r===-1)this.getHierarchicalParentId(t,o,s);else{s.push(i[parseInt(l.toString(),10)][this.fields.id].toString()),this.getHierarchicalParentId(i[parseInt(l.toString(),10)][this.fields.id].toString(),this.treeData,s);break}}return s},a.prototype.onPropertyChanged=function(t,i){for(var s=0,n=Object.keys(t);s<n.length;s++){var r=n[s];switch(r){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var l=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(l,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":JSON.stringify(i.checkedNodes)!==JSON.stringify(t.checkedNodes)&&this.showCheckBox&&(this.checkedNodes=i.checkedNodes,this.setCheckedNodes(t.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=t.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(i.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:h(t.expandedNodes)?[]:t.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),this.expandOnType!=="None"&&!this.disabled&&this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,(!this.isReact||this.isReact&&!(this.fields.dataSource instanceof P))&&(this.element.classList.contains("e-filtering")||(this.DDTTreeData=JSON.parse(JSON.stringify(this.fields.dataSource))),this.reRenderNodes()),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(this.loadOnDemand===!1&&!this.onLoaded){for(var o=this.element.querySelectorAll("li"),c=0;c<o.length;)o[parseInt(c.toString(),10)].getAttribute("aria-expanded")!=="true"&&this.renderChildNodes(o[parseInt(c.toString(),10)],!0,null,!0),c++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:t.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"checkDisabledChildren":this.reRenderNodes();break;case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:t.fullRowNavigable},!0),this.listBaseOption.itemNavigable=t.fullRowNavigable,this.reRenderNodes();break}}},a.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),this.ulElement=null,this.liList=null,this.startNode=null,this.firstTap=null,this.expandArgs=null,this.dragLi=null,this.dragTarget=null,this.dragParent=null,this.dragObj=null,this.dropObj=null,this.inputObj=null,this.touchEditObj=null,this.touchExpandObj=null,this.touchClickObj=null,u.prototype.destroy.call(this)},a.prototype.addNodes=function(t,i,s,n){if(!h(t)){t=JSON.parse(JSON.stringify(t));var r=this.getElement(i);if(this.preventExpand=n,this.fields.dataSource instanceof P)this.isOffline?this.addSuccess(t,r,s):this.crudOperation("insert",null,i,null,t,s,this.preventExpand);else if(this.dataType===2)this.addGivenNodes(t,r,s);else{if(r)this.addGivenNodes(t,r,s);else{t=this.getSortedData(t);for(var l=0;l<t.length;l++){var o=I(this.fields.parentID,t[parseInt(l.toString(),10)]);r=o&&this.getElement(o.toString()),!h(o)&&h(r)&&(this.isHiddenItem=!0,this.preventExpand=!1,this.ensureVisible(o),this.preventExpand=n,this.isHiddenItem=!1,r=this.getElement(o.toString())),this.addGivenNodes([t[parseInt(l.toString(),10)]],r,s)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.setNodeFocusable(),this.updateCheckedStateFromDS(),this.showCheckBox&&r&&this.ensureParentCheckState(r),this.fields.dataSource instanceof P||(this.preventExpand=!1,this.triggerEvent("addNodes",t))}},a.prototype.beginEdit=function(t){var i=this.getElement(t);h(i)||this.disabled||this.createTextbox(i)},a.prototype.checkAll=function(t){this.showCheckBox&&this.doCheckBoxAction(t,!0)},a.prototype.collapseAll=function(t,i,s){h(t)?i>0?this.collapseByLevel(M("."+Ae,this.element),i,s):this.collapseAllNodes(s):this.doGivenAction(t,ze,!1)},a.prototype.disableNodes=function(t){h(t)||this.doDisableAction(t)},a.prototype.enableNodes=function(t){h(t)||this.doEnableAction(t)},a.prototype.ensureVisible=function(t){var i=[];if(this.dataType===1)for(var s=this.getTreeData(t);s.length!==0&&!h(s[0][this.fields.parentID]);)i.push(s[0][this.fields.parentID].toString()),s=this.getTreeData(s[0][this.fields.parentID].toString());else this.dataType===2&&(i=this.getHierarchicalParentId(t,this.treeData,i));this.expandAll(i.reverse(),null,null,this.isHiddenItem);var n=this.getElement(t);if(!h(n)){if(typeof t=="object"){var r=this.parents(n,"."+de);this.expandAll(r)}setTimeout(function(){n.scrollIntoView({behavior:"smooth"})},450)}},a.prototype.expandAll=function(t,i,s,n){this.isAnimate=!n,h(t)?i>0?this.expandByLevel(M("."+Ae,this.element),i,s):(this.expandAllNodes(s),(!this.loadOnDemand||this.element.classList.contains("e-filtering"))&&(this.updateAttributes(this.element),this.updateList())):this.doGivenAction(t,we,!0),this.isAnimate=!0},a.prototype.getAllCheckedNodes=function(){var t=this.checkedNodes;return t},a.prototype.getDisabledNodes=function(){var t=this.disableNode;return t},a.prototype.getNode=function(t){var i=this.getElement(t);return this.getNodeData(i,!0)},a.prototype.getTreeData=function(t){var i=this.getId(t);if(this.updatePersistProp(),h(i))return this.treeData;var s=this.getNodeObject(i);return h(s)?[]:[s]},a.prototype.moveNodes=function(t,i,s,n){if(!(h(t)||t.length===0)){var r=this.getElement(i),l=[];h(r)&&(this.isHiddenItem=!0,this.ensureVisible(i),this.isHiddenItem=!1,r=this.getElement(i));for(var o=0;o<t.length;o++){var c=this.getElement(t[parseInt(o.toString(),10)]);l.push(this.getNode(c)),!(h(c)||r.isSameNode(c)||this.isDescendant(c,r))&&(this.preventExpand=n,this.dropAsChildNode(c,r,this,s,null,null,null,r))}this.fields.dataSource instanceof P||(this.preventExpand=!1),this.triggerEvent("moveNodes",l)}},a.prototype.refreshNode=function(t,i){if(!(h(t)||h(i))){var s=!1;if(this.dataType===1&&i.length>1)s=!0;else if(this.dataType===2&&i.length===1){var n=I(this.fields.child.toString(),i[0]);h(n)||(s=!0)}var r=this.getElement(t),l=r?r.getAttribute("data-uid"):t?t.toString():null;this.refreshData=this.getNodeObject(l),i=JSON.parse(JSON.stringify(i));var o,c;if(this.dataType===1&&s){for(var p=0;p<i.length;p++)if(h(i[parseInt(p.toString(),10)][this.fields.parentID])){c=i[parseInt(p.toString(),10)],i.splice(p,1);break}o=ae({},this.refreshData,c)}else o=ae({},this.refreshData,i[0]);if(h(r)){this.updatePosition(l,o,s,i);return}this.isRefreshed=!0;var d=parseFloat(r.getAttribute("aria-level")),f=Ve.createListItemFromJson(this.createElement,[o],this.listBaseOption,d),v=M("."+Ae,r),g=I(this.fields.child.toString(),o);if(s&&v||s&&!h(g)){var m=r.parentElement,C=Array.prototype.indexOf.call(m.childNodes,r);ft(r),m.insertBefore(f[0],m.childNodes[parseInt(C.toString(),10)]),this.updatePosition(l,o,s,i),s&&v&&this.expandAll([l])}else{var k=M("."+Ze,r),T=M("."+Ze,f[0]),x=M("div."+Xe,k),L=M("div."+Xe,T);x&&L&&(L.classList.contains(we)&&x.classList.contains(ze)?(w([L],we),E([L],ze)):L.classList.contains(ze)&&x.classList.contains(we)?(w([L],ze),E([L],we)):x.classList.contains("interaction")&&E([L],"interaction")),ft(k);var N=M("."+Jt,r);N.parentNode.insertBefore(T,N.nextSibling),this.updatePosition(l,o,s,i)}if(r=this.getElement(t),o[this.fields.tooltip]&&r.setAttribute("title",o[this.fields.tooltip]),Object.prototype.hasOwnProperty.call(o,this.fields.htmlAttributes)&&o[this.fields.htmlAttributes]){var R={};Ri(R,o[this.fields.htmlAttributes]),R.class?(E([r],R.class.split(" ")),delete R.class):Q(r,R)}this.selectedNodes.indexOf(l)!==-1&&(r.setAttribute("aria-selected","true"),E([r],Et)),this.isRefreshed=!1,this.triggerEvent("refreshNode",[this.getNode(r)])}},a.prototype.removeNodes=function(t){h(t)||(this.fields.dataSource instanceof P&&!this.isOffline?this.crudOperation("delete",t):this.deleteSuccess(t))},a.prototype.updateNode=function(t,i){var s=this;if(!(h(t)||h(i)||!this.allowEditing)){var n=this.getElement(t);if(!h(n)){var r=M("."+ci,n);this.updateOldText(n);var l=this.getEditEvent(n,null,null);this.trigger("nodeEditing",l,function(o){o.cancel||(s.fields.dataSource instanceof P&&!s.isOffline?s.crudOperation("update",null,t,i,null,null,!1):s.appendNewText(n,r,i,!1))})}}},a.prototype.uncheckAll=function(t){this.showCheckBox&&this.doCheckBoxAction(t,!1)},a.prototype.setNodeFocusable=function(){var t=M("."+de,this.element);t&&(t.setAttribute("tabindex","0"),this.updateIdAttr(null,t))};var e;return ue([y(!1)],a.prototype,"allowDragAndDrop",void 0),ue([y(!1)],a.prototype,"allowEditing",void 0),ue([y(!1)],a.prototype,"allowMultiSelection",void 0),ue([y(!1)],a.prototype,"allowTextWrap",void 0),ue([Nt({},Hu)],a.prototype,"animation",void 0),ue([y()],a.prototype,"checkedNodes",void 0),ue([y(!0)],a.prototype,"checkDisabledChildren",void 0),ue([y("")],a.prototype,"cssClass",void 0),ue([y(!1)],a.prototype,"disabled",void 0),ue([y(null)],a.prototype,"dragArea",void 0),ue([y(!0)],a.prototype,"enableHtmlSanitizer",void 0),ue([y(!1)],a.prototype,"enablePersistence",void 0),ue([y()],a.prototype,"expandedNodes",void 0),ue([y("Auto")],a.prototype,"expandOn",void 0),ue([Nt({},Vu)],a.prototype,"fields",void 0),ue([y(!0)],a.prototype,"fullRowSelect",void 0),ue([y(!0)],a.prototype,"loadOnDemand",void 0),ue([y()],a.prototype,"locale",void 0),ue([y()],a.prototype,"nodeTemplate",void 0),ue([y()],a.prototype,"selectedNodes",void 0),ue([y("None")],a.prototype,"sortOrder",void 0),ue([y(!1)],a.prototype,"showCheckBox",void 0),ue([y(!0)],a.prototype,"autoCheck",void 0),ue([y(!1)],a.prototype,"fullRowNavigable",void 0),ue([q()],a.prototype,"actionFailure",void 0),ue([q()],a.prototype,"created",void 0),ue([q()],a.prototype,"dataBound",void 0),ue([q()],a.prototype,"dataSourceChanged",void 0),ue([q()],a.prototype,"drawNode",void 0),ue([q()],a.prototype,"destroyed",void 0),ue([q()],a.prototype,"keyPress",void 0),ue([q()],a.prototype,"nodeChecked",void 0),ue([q()],a.prototype,"nodeChecking",void 0),ue([q()],a.prototype,"nodeClicked",void 0),ue([q()],a.prototype,"nodeCollapsed",void 0),ue([q()],a.prototype,"nodeCollapsing",void 0),ue([q()],a.prototype,"nodeDragging",void 0),ue([q()],a.prototype,"nodeDragStart",void 0),ue([q()],a.prototype,"nodeDragStop",void 0),ue([q()],a.prototype,"nodeDropped",void 0),ue([q()],a.prototype,"nodeEdited",void 0),ue([q()],a.prototype,"nodeEditing",void 0),ue([q()],a.prototype,"nodeExpanded",void 0),ue([q()],a.prototype,"nodeExpanding",void 0),ue([q()],a.prototype,"nodeSelected",void 0),ue([q()],a.prototype,"nodeSelecting",void 0),a=e=ue([ot],a),a}(Tt),dn=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),re=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},pr="e-rtl",qu="e-ddt",dr="e-ddt-hidden",fr="e-input-group-icon e-ddt-icon e-icons",gt="e-show-chip",di="e-show-clear",Ba="e-show-dd-icon",et="e-chip-input",fi="e-input-focus",vr="e-input-group",mr="e-icon-anim",zu="e-clear-icon e-icons",ju="e-chips-wrapper",Uu="e-chips-collection",Pa="e-chips",gr="e-chipcontent",Ra="e-chips-close",De="e-icon-hide",As="e-ddt-icon-hide",Gu="e-ddt e-popup",yr="e-list-parent",Yu="e-popup-content",br="e-dropdown",Cr="e-disabled",Ku="e-icons",ks="e-selectall-parent",ws="e-hide-selectall",_u="e-bigger",$u="e-small",Sr="e-all-text",Ma="e-frame",$i="e-check",Fa="e-checkbox-wrapper",Er="e-filter-wrap",xr="e-ddt-icon",Ar="e-ddt-footer",kr="e-ddt-header",Xu="e-ddt-nodata",vi="e-no-data",Ju="HeaderTemplate",Qu="FooterTemplate",Zu="NoRecordsTemplate",ec="ActionFailureTemplate",tc="CustomTemplate",Va="e-remain",Ha="e-overflow",mi="e-show-text",Xi="e-total-count",Ni="e-wrap-count",ic=function(u){dn(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return re([y("child")],a.prototype,"child",void 0),re([y([])],a.prototype,"dataSource",void 0),re([y("expanded")],a.prototype,"expanded",void 0),re([y("hasChildren")],a.prototype,"hasChildren",void 0),re([y("htmlAttributes")],a.prototype,"htmlAttributes",void 0),re([y("iconCss")],a.prototype,"iconCss",void 0),re([y("imageUrl")],a.prototype,"imageUrl",void 0),re([y("parentValue")],a.prototype,"parentValue",void 0),re([y(null)],a.prototype,"query",void 0),re([y("selectable")],a.prototype,"selectable",void 0),re([y("selected")],a.prototype,"selected",void 0),re([y(null)],a.prototype,"tableName",void 0),re([y("text")],a.prototype,"text",void 0),re([y("tooltip")],a.prototype,"tooltip",void 0),re([y("value")],a.prototype,"value",void 0),a}(Dt),sc=function(u){dn(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return re([y(!1)],a.prototype,"autoCheck",void 0),re([y(!0)],a.prototype,"checkDisabledChildren",void 0),re([y("Auto")],a.prototype,"expandOn",void 0),re([y(!1)],a.prototype,"loadOnDemand",void 0),a}(Dt),ac=function(u){dn(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.filterTimer=null,i.isFilteredData=!1,i.isFilterRestore=!1,i.selectedData=[],i.filterDelayTime=300,i.isClicked=!1,i.documentClickContext=i.onDocumentClick.bind(i),i.isCheckAllCalled=!1,i.isFromFilterChange=!1,i}return a.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},a.prototype.getLocaleName=function(){return"drop-down-tree"},a.prototype.preRender=function(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.clearIconWidth=0,this.headerTemplateId=""+this.element.id+Ju,this.footerTemplateId=""+this.element.id+Qu,this.actionFailureTemplateId=""+this.element.id+ec,this.noRecordsTemplateId=""+this.element.id+Zu,this.customTemplateId=""+this.element.id+tc,this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}},a.prototype.render=function(){var e=M("#"+this.element.id+"_tree",document);if(e){var t=M("#"+this.element.id+"_options",document);G(t||e.parentElement)}this.element.tagName==="INPUT"?(this.inputEle=this.element,h(this.inputEle.getAttribute("role"))&&(this.inputEle.setAttribute("aria-expanded","false"),this.inputEle.setAttribute("role","combobox"),this.inputEle.setAttribute("aria-haspopup","tree"),this.inputEle.setAttribute("aria-controls",this.element.id+"_options")),h(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(h(this.element.id)?this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}):this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text",id:this.element.id+"_textbox"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=z.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[fr]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains(vr)||this.inputWrapper.classList.add(vr),this.showDropDownIcon&&this.inputWrapper.classList.add(Ba),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add(qu),this.setElementWidth(this.width),this.updateDataAttribute(),this.setHTMLAttributes(),this.setAttributes(),this.popupDiv=this.createElement("div",{className:Yu}),this.popupDiv.classList.add(br),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),this.destroyPopupOnHide||document.body.appendChild(this.popupDiv),this.wireTreeEvents(),E([this.popupDiv],As),this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof P,(this.allowMultiSelection||this.showCheckBox)&&(this.mode!=="Delimiter"&&this.createChip(),!this.wrapText&&this.mode!=="Custom"&&(this.overFlowWrapper=this.createElement("span",{className:Ha+" "+De}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement),this.mode!=="Box"&&E([this.overFlowWrapper],mi))),this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView()),this.wireEvents();var i=M("."+yr,this.treeObj.element);i&&i.getAttribute("aria-multiselectable")&&i.removeAttribute("aria-multiselectable"),this.setOldValue(),this.isRemoteData||(this.isInitialized=!0),this.hasTemplate=this.itemTemplate||this.headerTemplate||this.footerTemplate||this.actionFailureTemplate||this.noRecordsTemplate||this.customTemplate||this.valueTemplate,this.renderComplete()},a.prototype.hideCheckAll=function(e){var t=h(this.popupEle)?null:this.popupEle.querySelector("."+ks);h(t)||(e&&!t.classList.contains(ws)?E([t],ws):!e&&t.classList.contains(ws)&&w([t],ws))},a.prototype.renderFilter=function(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:Er});var e=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(e),nt([this.filterContainer],this.popupEle),this.filterObj=new qs({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter"),this.keyboardModule=new Ct(this.filterObj.element,{keyAction:this.filterKeyAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},a.prototype.filterKeyAction=function(e){var t=this,i={cancel:!1,event:e},s;this.trigger("keyPress",i,function(n){if(!n.cancel)switch(e.action){case"altUp":t.isPopupOpen&&t.hidePopup();break;case"shiftTab":E([t.inputWrapper],[fi]);break;case"moveDown":e.preventDefault(),t.filterObj.element.blur(),s=t.treeObj.element.querySelector("li"),s&&s.focus();break}})},a.prototype.filterChangeHandler=function(e){var t=this;h(e.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout(function(){t.filterHandler(e.value,e.event)},this.filterDelayTime))},a.prototype.isChildObject=function(){return typeof this.treeObj.fields.child=="object"},a.prototype.filterHandler=function(e,t){var i=this;this.isFromFilterChange=!0,this.isFilteredData||(this.isRemoteData&&(this.treeObj.expandedNodes=[]),this.treeData=this.treeObj.getTreeData());var s=this.cloneFields(this.fields),n={cancel:!1,preventDefaultAction:!1,event:t,text:e.trim(),fields:s};this.trigger("filtering",n,function(r){if(!r.cancel){var l=!1,o=void 0;if(i.isFilteredData=!0,r.text===""?(i.isFilteredData=!1,i.isFilterRestore=!0,o=i.cloneFields(i.fields),i.treeObj.element.classList.remove("e-filtering")):r.preventDefaultAction?(o=r.fields,i.treeObj.element.classList.add("e-filtering")):(i.treeDataType===1?o=i.selfReferencefilter(r.text,r.fields):i.fields.dataSource instanceof P?(o=i.remoteDataFilter(r.text,r.fields),o.child=i.fields.child,i.treeObj.fields=i.getTreeFields(r.fields),i.treeObj.dataBind(),l=!0):o=i.nestedFilter(r.text,r.fields),i.treeObj.element.classList.add("e-filtering")),i.hideCheckAll(i.isFilteredData),l)return;if(i.isRemoteData&&(i.isChildObject()?o.child=i.fields.child:o=r.fields),i.treeObj.fields=i.getTreeFields(o),i.treeObj.dataBind(),i.popupObj&&i.popupObj.refreshPosition(),i.hasTemplate&&i.portals&&i.treeObj.portals){for(var c=0;c<i.treeObj.portals.length;c++)i.portals.indexOf(i.treeObj.portals[c])===-1&&i.portals.push(i.treeObj.portals[c]);i.isReact&&i.renderReactTemplates()}}})},a.prototype.remoteDataFilter=function(e,t){var i=this;return t.dataSource=this.treeData.map(function(s){return i.remoteChildFilter(e,s)}).filter(function(s){return!h(s)}),t},a.prototype.remoteChildFilter=function(e,t,i,s){var n=this.isChildObject()?t.child:t[this.fields.child];if(h(n))return this.isMatchedNode(e,t,i,s)?t:null;for(var r=[],l=0;l<n.length;l++){var o=this.remoteChildFilter(e,n[l],!0,!0);h(o)||r.push(o)}var c=Object.assign({},t);return s=!1,r.length!==0?c.child=r:(c.child=null,c=this.isMatchedNode(e,c)?c:null),c},a.prototype.nestedFilter=function(e,t){for(var i=[],s=0;s<this.treeData.length;s++){var n=this.nestedChildFilter(e,this.treeData[parseInt(s.toString(),10)]);h(n)||i.push(n)}return t.dataSource=i,t},a.prototype.nestedChildFilter=function(e,t){var i=t[this.fields.child];if(h(i))return this.isMatchedNode(e,t)?t:null;for(var s=[],n=0;n<i.length;n++){var r=this.nestedChildFilter(e,i[parseInt(n.toString(),10)]);h(r)||s.push(r)}var l=Object.assign({},t);return s.length!==0?(l[this.fields.child]=s,l):(l[this.fields.child]=null,this.isMatchedNode(e,l)?l:null)},a.prototype.selfReferencefilter=function(e,t){for(var i=[],s=[],n=0;n<this.treeData.length;n++)this.isMatchedNode(e,this.treeData[n])&&i.push(this.treeData[n]);for(var n=0;n<i.length;n++)if(s.indexOf(i[n])===-1){s.push(i[n]);for(var r=i[parseInt(n.toString(),10)][this.fields.parentValue];!h(r);){for(var l=null,o=0;o<this.treeData.length;o++){var c=this.treeData[parseInt(o.toString(),10)][this.fields.value];if(!h(c)&&c===r){l=this.treeData[o];break}}if(!h(l)&&s.indexOf(l)===-1)s.push(l),r=l[this.fields.parentValue];else break}}return t.dataSource=s,t},a.prototype.isMatchedNode=function(e,t,i,s){var n,r=i&&s&&this.isChildObject();if(n=r?t[this.fields.child.text]:t[this.fields.text],!n&&!h(this.fields.child.text)){for(var l=this.fields.child;!t[l.text];)l=l.child;n=t[l.text]}return this.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),this.ignoreAccent&&(n=B.ignoreDiacritics(n),e=B.ignoreDiacritics(e)),this.filterType==="StartsWith"?n.slice(0,e.length)===e:this.filterType==="EndsWith"?n.slice(-e.length)===e:n.indexOf(e)!==-1},a.prototype.wireEvents=function(){b.add(this.inputWrapper,"mouseup",this.dropDownClick,this),b.add(this.inputWrapper,"focus",this.focusIn,this),b.add(this.inputWrapper,"blur",this.focusOut,this),b.add(this.inputWrapper,"mousemove",this.mouseIn,this),b.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),b.add(this.overAllClear,"mousedown",this.clearAll,this),b.add(window,"resize",this.windowResize,this);var e=A(this.inputWrapper,"form");e&&b.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new Ct(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},a.prototype.wireTreeEvents=function(){this.keyboardModule=new Ct(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},a.prototype.wireCheckAllWrapperEvents=function(){this.keyboardModule=new Ct(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},a.prototype.unWireEvents=function(){b.remove(this.inputWrapper,"mouseup",this.dropDownClick),b.remove(this.inputWrapper,"focus",this.focusIn),b.remove(this.inputWrapper,"blur",this.focusOut),b.remove(this.inputWrapper,"mousemove",this.mouseIn),b.remove(this.inputWrapper,"mouseout",this.onMouseLeave),b.remove(this.overAllClear,"mousedown",this.clearAll),b.remove(window,"resize",this.windowResize);var e=A(this.inputWrapper,"form");e&&b.remove(e,"reset",this.resetValueHandler),this.keyboardModule.destroy(),this.showSelectAll&&this.checkAllParent&&b.remove(this.checkAllParent,"mouseup",this.clickHandler),document.removeEventListener("mousedown",this.documentClickContext)},a.prototype.dropDownClick=function(e){if(!(!this.enabled||this.readonly)){if(this.isClearButtonClick){this.isClearButtonClick=!1;return}this.isPopupOpen?this.hidePopup():(this.focusIn(e),this.renderPopup()),this.showOverAllClear()}},a.prototype.mouseIn=function(){(this.enabled||!this.readonly)&&this.showOverAllClear()},a.prototype.onMouseLeave=function(){this.inputFocus||(E([this.overAllClear],De),w([this.inputWrapper],di))},a.prototype.getDirective=function(){return"EJS-DROPDOWNTREE"},a.prototype.focusOut=function(e){if(!(!this.enabled||this.readonly||!this.inputFocus)&&!((V.isIE||V.info.name==="edge")&&e.target===this.inputWrapper)){var t=e.relatedTarget;t!==this.inputEle&&h(t)&&(e.target!==this.inputWrapper||!this.isPopupOpen)&&this.onFocusOut(e)}},a.prototype.onFocusOut=function(e){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(this.clearIconWidth=M(".e-clear-icon",this.inputWrapper).offsetWidth,E([this.overAllClear],De),w([this.inputWrapper],di)),w([this.inputWrapper],[fi]),this.allowMultiSelection||this.showCheckBox){var t=this.value?!!this.value.length:!1;this.mode!=="Delimiter"&&this.mode!=="Custom"&&this.chipWrapper&&this.mode==="Default"&&(E([this.chipWrapper],De),w([this.inputWrapper],gt),w([this.inputEle],et)),t&&this.mode!=="Custom"&&this.showOrHideValueTemplate(!0),!this.wrapText&&t&&this.updateView()}this.changeOnBlur&&this.triggerChangeEvent(e),this.removeValue=!1,this.setOldValue(),this.trigger("blur")},a.prototype.updateView=function(){!this.showCheckBox&&!this.allowMultiSelection||this.mode==="Custom"||this.inputFocus||(this.mode!=="Box"?E([this.inputWrapper,this.overFlowWrapper],mi):E([this.inputWrapper],gt),this.value&&this.value.length!==0&&(this.inputWrapper.contains(this.chipWrapper)&&E([this.chipWrapper],De),E([this.inputEle],et),this.updateOverFlowView()),this.ensurePlaceHolder())},a.prototype.triggerChangeEvent=function(e){var t=this.ddtCompareValues(this.oldValue,this.value);if((!t||this.isChipDelete)&&!this.removeValue){var i={e,oldValue:this.oldValue,value:this.value,isInteracted:!!e,element:this.element};this.trigger("change",i),this.setOldValue()}},a.prototype.ddtCompareValues=function(e,t){if(e===null||t===null){var i=e===null||e.length===0?t===e:!1;return i}else if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0},a.prototype.focusIn=function(e){if(!(!this.enabled||this.readonly||this.inputFocus)){this.showOverAllClear(),this.inputFocus=!0,E([this.inputWrapper],[fi]),(this.allowMultiSelection||this.showCheckBox)&&(this.mode!=="Delimiter"&&this.inputFocus&&(this.chipWrapper&&this.value&&this.value.length!==0&&(w([this.chipWrapper],De),E([this.inputEle],et),this.showOrHideValueTemplate(!1,!0)),E([this.inputWrapper],gt),this.popupObj&&this.popupObj.refreshPosition()),!this.wrapText&&this.mode!=="Custom"&&(this.inputWrapper.contains(this.overFlowWrapper)&&E([this.overFlowWrapper],De),this.mode==="Delimiter"?(w([this.inputWrapper],gt),w([this.inputEle],et),this.showOrHideValueTemplate(!0)):E([this.inputWrapper],gt),w([this.inputWrapper],mi),this.ensurePlaceHolder()));var t={isInteracted:!!e,event:e};this.trigger("focus",t)}},a.prototype.treeAction=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,function(s){if(s.cancel)e.stopImmediatePropagation();else switch(e.action){case"escape":case"altUp":t.inputWrapper.focus(),e.preventDefault(),t.isPopupOpen&&t.hidePopup();break;case"tab":t.isPopupOpen&&t.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":t.showCheckBox||(t.isValueChange=!0,t.keyEventArgs=e);break;case"space":t.isValueChange=!0,t.keyEventArgs=e;break;case"ctrlA":t.allowMultiSelection&&t.selectAll(!0);break}})},a.prototype.keyActionHandler=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,function(s){if(!s.cancel)switch(e.action){case"escape":case"altUp":t.isPopupOpen&&t.hidePopup();break;case"shiftTab":t.isPopupOpen&&t.hidePopup(),t.inputFocus&&t.onFocusOut();break;case"altDown":t.isPopupOpen||(t.showPopup(),e.preventDefault());break;case"moveDown":t.showSelectAll&&t.showCheckBox&&t.checkAllParent.focus();break;case"tab":!t.isPopupOpen&&t.inputFocus&&t.onFocusOut();break}})},a.prototype.checkAllAction=function(e){var t=this,i={cancel:!1,event:e},s;this.trigger("keyPress",i,function(n){if(!n.cancel)switch(e.action){case"space":t.clickHandler(e);break;case"moveDown":e.preventDefault(),s=t.treeObj.element.querySelector('li[tabindex="0"]')||t.treeObj.element.querySelector("li"),s.focus(),E([s],["e-node-focus"]);break}})},a.prototype.windowResize=function(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())},a.prototype.resetValueHandler=function(e){var t=A(this.inputWrapper,"form");t&&e.target===t&&(this.isDynamicChange=!0,this.setProperties({value:null},!0),this.resetValue(!0),this.isDynamicChange=!1)},a.prototype.getAriaAttributes=function(){return{}},a.prototype.updateOverFlowView=function(){if(this.overFlowWrapper.classList.remove(Xi),w([this.overFlowWrapper],De),this.value&&this.value.length){var e="",t=void 0,i=void 0,s=void 0,n=1,r=void 0,l=void 0,o=0;this.overFlowWrapper.innerHTML="";var c={overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"};this.l10n=new St(this.getLocaleName(),c,this.locale);var p=this.l10n.getConstant("overflowCountTemplate"),d=this.l10n.getConstant("totalCountTemplate"),f=this.createElement("span",{className:Va});this.overFlowWrapper.appendChild(f),f.innerText=p.replace("${count}",this.value.length.toString());var v=f.offsetWidth;if(ft(f),this.showDropDownIcon&&(o=M("."+xr,this.inputWrapper).offsetWidth),!h(this.value))if(this.mode!=="Box"){if(this.valueTemplate){l=this.updateChipAndValueTemplate(!1,o,v),this.checkRemainingTemplate(l,f,p,d),this.updateDelimMode();return}for(var g=0;!h(this.value[g]);g++)if(e+=g===0?"":this.delimiterChar+" ",i=this.getOverflowVal(g),e+=i,i=this.overFlowWrapper.innerHTML,this.enableHtmlSanitizer?this.overFlowWrapper.innerText=yt.sanitize(e):this.overFlowWrapper.innerHTML=e,r=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,r+o+this.clearIconWidth>t){for(s!==void 0&&s!==""&&(i=s,g=n+1),this.overFlowWrapper.innerHTML=i,l=this.value.length-g,r=this.overFlowWrapper.offsetWidth;r+v+o+this.clearIconWidth>=t&&r!==0&&this.overFlowWrapper.innerHTML!=="";){var m=this.overFlowWrapper.innerHTML.split(this.delimiterChar);m.pop(),this.overFlowWrapper.innerHTML=m.join(this.delimiterChar),l++,r=this.overFlowWrapper.offsetWidth}break}else r+v+o+this.clearIconWidth<=t?(s=e,n=g):g===0&&(s="",n=-1)}else l=this.updateChipAndValueTemplate(!0,o,v);this.checkRemainingTemplate(l,f,p,d)}else this.overFlowWrapper.innerHTML="",E([this.overFlowWrapper],De);this.updateDelimMode()},a.prototype.checkRemainingTemplate=function(e,t,i,s){e>0&&this.overFlowWrapper.appendChild(this.updateRemainTemplate(t,e,i,s)),this.mode==="Box"&&!this.overFlowWrapper.classList.contains(Xi)&&E([t],Ni)},a.prototype.updateChipAndValueTemplate=function(e,t,i){t===void 0&&(t=0);var s="",n,r,l,o=1,c,p;E([e?this.chipWrapper:this.valueTemplateContainer],De);for(var d=(e?this.chipWrapper:this.valueTemplateContainer).cloneNode(!0),f=e?Ee("."+Pa,d):Array.prototype.slice.call(d.children),v=0;v<f.length;v++)if(r=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(f[v]),s=this.overFlowWrapper.innerHTML,c=this.overFlowWrapper.offsetWidth,n=this.inputWrapper.offsetWidth,c+t+this.clearIconWidth>n){for(l!==void 0&&l!==""&&(r=l,v=o+1),this.overFlowWrapper.innerHTML=r,p=this.value.length-v,c=this.overFlowWrapper.offsetWidth;c+i+t+this.clearIconWidth>=n&&c!==0&&this.overFlowWrapper.innerHTML!=="";)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),p++,c=this.overFlowWrapper.offsetWidth;break}else c+i+t+this.clearIconWidth<=n?(l=s,o=v):v===0&&(l="",o=-1);return p},a.prototype.updateRemainTemplate=function(e,t,i,s){return this.overFlowWrapper.firstChild&&this.overFlowWrapper.firstChild.nodeType===3&&this.overFlowWrapper.firstChild.nodeValue===""&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),e.innerHTML="",e.innerText=this.overFlowWrapper.firstChild&&(this.overFlowWrapper.firstChild.nodeType===3||this.mode==="Box"||this.valueTemplateContainer)?i.replace("${count}",t.toString()):s.replace("${count}",t.toString()),this.overFlowWrapper.firstChild&&(this.overFlowWrapper.firstChild.nodeType===3||this.mode==="Box")?w([this.overFlowWrapper],Xi):(E([this.overFlowWrapper],Xi),w([this.overFlowWrapper],Ni)),e},a.prototype.getOverflowVal=function(e){var t=this.getSelectedData(this.value[parseInt(e.toString(),10)]);return I(this.treeSettings.loadOnDemand?this.fields.text:"text",t)},a.prototype.updateDelimMode=function(){this.mode!=="Box"?M("."+Va,this.overFlowWrapper)&&!this.overFlowWrapper.classList.contains(Xi)?(E([this.overFlowWrapper],Ni),E([this.overFlowWrapper],mi)):(this.overFlowWrapper.classList.remove(Ni),w([this.overFlowWrapper],Ni)):M("."+Va,this.overFlowWrapper)&&this.overFlowWrapper.classList.remove(Ni)},a.prototype.createHiddenElement=function(){this.allowMultiSelection||this.showCheckBox?this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:dr,tabindex:"-1",multiple:"","aria-label":this.getModuleName()}}):this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:dr,"aria-label":this.getModuleName()}}),nt([this.hiddenElement],this.inputWrapper),this.validationAttribute()},a.prototype.createClearIcon=function(){this.overAllClear=this.createElement("span",{className:zu}),E([this.overAllClear],De),w([this.inputWrapper],di),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},a.prototype.validationAttribute=function(){var e=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",e),this.inputEle.removeAttribute("name");for(var t=["required","aria-required","form"],i=0;i<t.length;i++){var s=this.inputEle.getAttribute(t[i]);s&&(this.hiddenElement.setAttribute(t[i],s),this.inputEle.removeAttribute(t[i]))}},a.prototype.createChip=function(){if(!this.inputWrapper.contains(this.chipWrapper)){this.chipWrapper=this.createElement("span",{className:ju}),this.chipCollection=this.createElement("span",{className:Uu}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),E([this.inputWrapper],gt);var e=this.getValidMode();e&&this.value!==null&&this.value&&this.value.length!==0?E([this.inputEle],et):(this.value===null||this.value&&this.value.length===0||this.checkWrapper)&&E([this.chipWrapper],De)}},a.prototype.getValidMode=function(){return this.allowMultiSelection||this.showCheckBox?this.mode==="Box"?!0:!!(this.mode==="Default"&&this.inputFocus):!1},a.prototype.createSelectAllWrapper=function(){this.checkAllParent=this.createElement("div",{className:ks,attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:Sr}),this.selectAllSpan.textContent="";var e=A(this.element,"."+_u),t=h(e)?"":$u;this.checkBoxElement=an(this.createElement,!0,{cssClass:t}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),b.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()},a.prototype.clickHandler=function(e){var t;if(e.currentTarget&&e.currentTarget.classList.contains(ks)?t=e.currentTarget.firstElementChild.lastElementChild:t=e.target,this.checkWrapper=A(t,"."+Fa),!h(this.checkWrapper)){this.isClicked=!0;var i=M("."+Ma,this.checkWrapper);this.changeState(this.checkWrapper,i.classList.contains($i)?"uncheck":"check",e),this.isClicked=!1}e.preventDefault()},a.prototype.changeState=function(e,t,i){var s,n=e.getElementsByClassName(Ma)[0];t==="check"&&!n.classList.contains($i)?(n.classList.add($i),s="true",this.isReverseUpdate||(this.setOldValue(),this.isCheckAllCalled=!0,this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!0)):t==="uncheck"&&n.classList.contains($i)&&(n.classList.remove($i),s="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!1)),this.setMultiSelect(),this.ensurePlaceHolder(),s=t==="check"?"true":"false",h(s)||e.parentElement.setAttribute("aria-checked",s)},a.prototype.setLocale=function(e){if(this.selectAllSpan)if(this.selectAllText!=="Select All"||this.unSelectAllText!=="Unselect All"){var t=e?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";for(var i=Ie(t),s=e?"unSelectAllText":"selectAllText",n=0,r=i({},this,s,null,!this.isStringTemplate);n<r.length;n++){var l=r[n];this.selectAllSpan.textContent=l.textContent}}else this.selectAllSpan.textContent=e?this.unSelectAllText:this.selectAllText},a.prototype.setAttributes=function(){this.inputEle.setAttribute("tabindex","-1"),this.inputEle.setAttribute("aria-label",this.getModuleName());var e=this.element.getAttribute("id");this.hiddenElement.id=e+"_hidden",this.inputWrapper.setAttribute("tabindex",this.inputWrapper.classList.contains("e-disabled")?"-1":"0"),this.inputWrapper.setAttribute("aria-label",this.getModuleName()),Q(this.inputWrapper,this.getAriaAttributes())},a.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(i==="class")this.inputWrapper.classList.add(this.htmlAttributes[""+i]);else if(i==="disabled")this.setProperties({enabled:!1},!0),this.setEnable();else if(i==="readonly")this.setProperties({readonly:!0},!0),this.dataBind();else if(i==="style")this.inputWrapper.style.cssText=this.htmlAttributes[""+i];else{var s=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],n=["name","required"];i.indexOf("data")===0||n.indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):s.indexOf(i)>-1?i==="placeholder"?z.setPlaceholder(this.htmlAttributes[""+i],this.inputEle):this.inputEle.setAttribute(i,this.htmlAttributes[""+i]):this.inputEle.setAttribute(i,this.htmlAttributes[""+i])}}},a.prototype.updateDataAttribute=function(){for(var e=this.htmlAttributes,t=["class","style","id","type"],i={},s=0;s<this.element.attributes.length;s++)t.indexOf(this.element.attributes[s].name)===-1&&this.element.attributes[s].name!=="readonly"&&(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));ae(i,e,i),this.setProperties({htmlAttributes:i},!0)},a.prototype.showOverAllClear=function(){if(!(!this.enabled||this.readonly)&&this.overAllClear){var e=this.value?!!this.value.length:!1;e&&this.showClearButton?(w([this.overAllClear],De),E([this.inputWrapper],di)):(E([this.overAllClear],De),w([this.inputWrapper],di))}},a.prototype.setTreeValue=function(){if(this.value!==null&&this.value.length!==0){var e=void 0;if(this.showCheckBox||this.allowMultiSelection){for(var t=this.value.length-1;t>=0;t--)e=this.treeObj.getTreeData(this.value[t])[0],h(e)&&this.value.splice(t,1);this.value.length!==0&&this.setValidValue()}else e=this.treeObj.getTreeData(this.value[0])[0],h(e)?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:e[this.fields.text]},!0),this.setValidValue())}},a.prototype.setTreeText=function(){if(!(this.value!==null&&!this.isInitialized)&&this.text!==null){var e=void 0,t=[];if(this.showCheckBox||this.allowMultiSelection){for(var i=this.text.split(this.delimiterChar),s=0;s<i.length;s++)e=this.getItems(i[s]),h(e)||t.push(e[this.fields.value].toString());t.length!==0?(this.setOldValue(),this.setProperties({value:t},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else e=this.getItems(this.text),h(e)?this.setProperties({text:this.currentText},!0):(this.setOldValue(),this.setProperties({value:[e[this.fields.value].toString()]},!0),this.setValidValue())}},a.prototype.setSelectedValue=function(){this.value!==null&&this.value.length!==0||this.isInitialized||(this.setOldValue(),this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),Pe("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value)},a.prototype.setValueTemplate=function(){var e=this;if(this.valueTemplate){var t=this.initializeValueTemplate();this.getValueTemplateElement(this.value[0],t),this.hasTemplate&&this.portals&&(this.treeObj.portals&&(this.portals=this.portals.concat(this.treeObj.portals.filter(function(i){return!e.portals.includes(i)}))),this.isReact&&this.renderReactTemplates(this.reactCallBack)),this.showOrHideValueTemplate(!0)}},a.prototype.getValueTemplateElement=function(e,t){var i=this.getNodeData(e,this.isFilteredData?this.treeData:this.treeItems),s=t(i,this,"valueTemplate",this.element.id+"valueTemplate",this.isStringTemplate,void 0,this.valueTemplateContainer);s&&(s=Array.prototype.slice.call(s),ye(s,this.valueTemplateContainer))},a.prototype.setValidValue=function(){var e=this;if(!this.showCheckBox&&!this.allowMultiSelection){z.setValue(this.text,this.inputEle,this.floatLabelType),this.setValueTemplate();var t=this.value[0].toString();this.treeObj.selectedNodes[0]!==t&&(Pe("selectedNodes",[t],this.treeObj),this.fields.dataSource instanceof P&&this.updateSelectedValues())}else{if(this.showCheckBox){var i=this.value.length!==this.treeObj.checkedNodes.length||this.value.filter(function(s){return e.treeObj.checkedNodes.indexOf(s)===-1}).length>0;(i||this.treeSettings.autoCheck)&&(this.treeObj.checkedNodes=this.value.slice(),this.treeObj.dataBind(),this.setMultiSelect())}else this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues();this.treeObj.dataBind()}this.currentText=this.text,this.currentValue=this.value,!h(this.value)&&this.value.length>0&&!h(this.currentText)&&this.inputWrapper.setAttribute("aria-label",this.currentText.replace(/,/g,", ")),this.isInitialized&&this.triggerChangeEvent()},a.prototype.getItems=function(e){var t;if(this.treeDataType===1)for(var i=0;i<this.treeItems.length;i++){var s=I(this.fields.text,this.treeItems[parseInt(i.toString(),10)]);if(!h(this.treeItems[i])&&!h(s)&&s===e){t=this.treeItems[i];break}}else t=this.getNestedItems(this.treeItems,this.fields,e);return t},a.prototype.getNestedItems=function(e,t,i){for(var s,n=0,r=e.length;n<r;n++){var l=I(this.fields.text,e[parseInt(n.toString(),10)]);if(e[n]&&l&&l.toString()===i)return e[n];if(typeof t.child=="string"&&!h(I(t.child,e[n]))){var o=I(t.child,e[parseInt(n.toString(),10)]);if(s=this.getNestedItems(o,this.getChildType(t),i),s!==void 0)break}else if(this.fields.dataSource instanceof P&&!h(I("child",e[n]))){var c="child";if(s=this.getNestedItems(I(c,e[parseInt(n.toString(),10)]),this.getChildType(t),i),s!==void 0)break}}return s},a.prototype.getChildType=function(e){return typeof e.child=="string"||h(e.child)?e:e.child},a.prototype.renderTree=function(){this.treeObj=new Wu({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),nodeExpanded:this.onNodeExpanded.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,enableHtmlSanitizer:this.enableHtmlSanitizer,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate,checkDisabledChildren:this.treeSettings.checkDisabledChildren}),this.treeObj.root=this.root?this.root:this,this.treeObj.appendTo(this.tree)},a.prototype.renderPopup=function(){var e=this;this.isFilteredData&&(this.treeObj.element.classList.remove("e-filtering"),this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));var t=!1,i={cancel:!1};this.trigger("beforeOpen",i,function(s){if(s.cancel?t=!0:(E([e.inputWrapper],[mr]),e.isReact&&e.isFilterRestore&&e.treeObj.refresh(),e.isFirstRender?(e.popupEle=e.createElement("div",{id:e.element.id+"_options",className:Gu+" "+(e.cssClass!=null?e.cssClass:"")}),e.popupEle.setAttribute("role","region"),e.popupEle.setAttribute("aria-label",e.element.id),document.body.appendChild(e.popupEle),e.createPopup(e.popupEle)):(e.popupEle=e.popupObj.element,e.isReact&&e.isFilterRestore&&(e.isFilteredData=!0,e.popupEle.removeChild(e.filterContainer)))),(e.isFirstRender&&!t||e.isFilteredData)&&(e.isFilteredData=!1,nt([e.popupDiv],e.popupEle),w([e.popupDiv],As),e.allowFiltering&&e.renderFilter(),e.showCheckBox&&e.showSelectAll&&!e.popupDiv.classList.contains(vi)&&(e.createSelectAllWrapper(),e.popupEle.insertBefore(e.checkAllParent,e.popupDiv)),e.headerTemplate&&e.setHeaderTemplate(),e.footerTemplate&&e.setFooterTemplate(),e.isFirstRender=!1,e.hasTemplate&&e.portals&&(e.treeObj.portals&&(e.portals=e.portals.concat(e.treeObj.portals.filter(function(d){return!e.portals.includes(d)}))),e.isReact&&e.renderReactTemplates(e.reactCallBack))),!t){if(Q(e.inputEle,{"aria-expanded":"true"}),e.popupObj.show(null,e.zIndex===1e3?e.inputEle:null),w([e.popupEle],As),e.updatePopupHeight(),e.popupObj.refreshPosition(),!(e.showSelectAll||e.allowFiltering)&&!e.popupDiv.classList.contains(vi)&&e.treeItems.length>0){var n=e.value!=null&&e.text!=null?e.treeObj.element.querySelector('[data-uid="'+e.value[0]+'"]'):null;if(n)e.treeObj.element.querySelector("li").setAttribute("tabindex","-1"),n.setAttribute("tabindex","0");else{var r=e.treeObj.element.querySelector(".e-node-focus");n=e.treeObj.element.querySelector('li[tabindex="0"]:not(.e-disable)')||e.treeObj.element.querySelector("li:not(.e-disable)"),e.removeFocus(n,r)}e.updateFocus(n)}if(e.treeObj.checkedNodes.length>0&&!e.isFilterRestore){var l=e.treeObj.element.querySelectorAll("li:not(.e-disable)"),o=e.treeObj.element.querySelectorAll("li[aria-checked=true]");if(o.length===l.length&&e.checkBoxElement){var c=A(e.checkBoxElement,"."+Fa);e.changeState(c,"check"),e.checkSelectAll=!1}}if(e.showSelectAll&&!e.allowFiltering){var r=e.treeObj.element.querySelector(".e-node-focus"),n=e.popupEle.querySelector(".e-selectall-parent");e.removeFocus(n,r),e.updateFocus(n)}if(e.allowFiltering){var n=e.treeObj.element.querySelector("li.e-node-focus");h(n)||w([n],"e-node-focus"),w([e.inputWrapper],[fi]),e.filterObj.element.focus()}var p={popup:e.popupObj};e.trigger("open",p)}})},a.prototype.removeFocus=function(e,t){t&&t!==e&&(t.setAttribute("tabindex","-1"),w([t],"e-node-focus"))},a.prototype.updateFocus=function(e){h(e)||(e.focus(),E([e],["e-node-focus"]))},a.prototype.reactCallBack=function(){h(this.popupObj)||(this.updatePopupHeight(),this.popupObj.refreshPosition())},a.prototype.updatePopupHeight=function(){if(!this.isFirstRender){var e=this.getHeight();if(this.popupEle.style.maxHeight=e,this.allowFiltering){var t=Math.round(this.filterContainer.getBoundingClientRect().height);e=fe(parseInt(e,10)-t+"px")}if(this.headerTemplate){var t=Math.round(this.header.getBoundingClientRect().height);e=fe(parseInt(e,10)-t+"px")}if(this.showCheckBox&&this.showSelectAll&&!this.popupDiv.classList.contains(vi)){var t=Math.round(this.checkAllParent.getBoundingClientRect().height);e=fe(parseInt(e,10)-t+"px")}if(this.footerTemplate){var t=Math.round(this.footer.getBoundingClientRect().height);e=fe(parseInt(e,10)-t+"px")}var i=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);i=i+parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),e=fe(parseInt(e,10)-i+"px"),this.popupDiv.style.maxHeight=e}},a.prototype.createPopup=function(e){var t=this;this.isFirstRender&&(this.popupObj=new Vi(e,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:function(){t.isPopupOpen=!1},open:function(){document.addEventListener("mousedown",t.documentClickContext),t.isPopupOpen=!0},targetExitViewport:function(){V.isDevice||t.hidePopup()}}))},a.prototype.setElementWidth=function(e){var t=this.inputWrapper;h(e)||(typeof e=="number"?t.style.width=fe(e):typeof e=="string"&&(t.style.width=e.match(/px|%|em/)?e:fe(e)))},a.prototype.setWidth=function(){var e=fe(this.popupWidth);return e.indexOf("%")>-1?e=(this.inputWrapper.offsetWidth*parseFloat(e)/100).toString()+"px":typeof this.popupWidth=="string"&&(e=this.popupWidth.match(/px|em/)?this.popupWidth:e),e},a.prototype.getHeight=function(){var e=fe(this.popupHeight);return e.indexOf("%")>-1?e=(document.documentElement.clientHeight*parseFloat(e)/100).toString()+"px":typeof this.popupHeight=="string"&&(e=this.popupHeight.match(/px|em/)?this.popupHeight:e),e},a.prototype.onDocumentClick=function(e){var t=e.target,i=A(t,"."+yr),s=A(t,"."+Er),n=A(t,"."+kr),r=A(t,"."+Ar),l=t.classList.contains(br)?!0:Xa(t,".e-ddt .e-popup")||Xa(t,".e-ddt .e-treeview");this.isPopupOpen&&(!h(this.inputWrapper)&&this.inputWrapper.contains(t)||i||l||n||r)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&t.classList.contains(Ra)||this.isPopupOpen&&(t.classList.contains(ks)||t.classList.contains(Sr)||t.classList.contains(Ma)))?(this.isDocumentClick=!1,e.preventDefault()):!h(this.inputWrapper)&&!this.inputWrapper.contains(t)&&this.inputFocus&&!s&&this.focusOut(e)},a.prototype.onActionFailure=function(e){this.trigger("actionFailure",e),this.l10nUpdate(!0),E([this.popupDiv],vi)},a.prototype.OnDataBound=function(e){this.treeItems=e.data,this.treeItems.length<=0?(this.l10nUpdate(),E([this.popupDiv],vi),this.hideCheckAll(!0)):this.popupDiv.classList.contains(vi)&&this.treeItems.length>=1&&(w([this.popupDiv],vi),this.hideCheckAll(!1)),this.isFilteredData||(this.treeDataType=this.getTreeDataType(this.treeItems,this.fields)),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView(),this.treeObj.element.focus(),this.isInitialized=!0);var t={data:e.data};this.trigger("dataBound",t),this.filterObj===null&&(this.isFilteredData=!1),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.showSelectAll||(this.isFilterRestore=!1))},a.prototype.restoreFilterSelection=function(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]},a.prototype.setCssClass=function(e,t){var i=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];!h(t)&&t!==""&&w(i,t.split(" ")),!h(e)&&e!==""&&E(i,e.split(" "))},a.prototype.setEnableRTL=function(e){e?this.inputWrapper.classList.add(pr):this.inputWrapper.classList.remove(pr),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=e,this.treeObj.dataBind())},a.prototype.setEnable=function(){z.setEnabled(this.enabled,this.inputEle),this.enabled?(w([this.inputWrapper],Cr),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),E([this.inputWrapper],Cr),this.inputWrapper&&this.inputWrapper.classList.contains(fi)&&w([this.inputWrapper],[fi]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))},a.prototype.cloneFields=function(e){var t={dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:this.cloneChildField(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,selectable:e.selectable,tableName:e.tableName,tooltip:e.tooltip};return t},a.prototype.cloneChildField=function(e){if(typeof e=="string")return e;var t={dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:e.child?this.cloneChildField(e.child):null,hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,selectable:e.selectable,tableName:e.tableName,tooltip:e.tooltip};return t},a.prototype.getTreeFields=function(e){var t={dataSource:e.dataSource,id:e.value,text:e.text,parentID:e.parentValue,child:this.getTreeChildren(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,isChecked:e.selected,htmlAttributes:e.htmlAttributes,query:e.query,selectable:e.selectable,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip};return t},a.prototype.getTreeChildren=function(e){if(typeof e=="string")return e;if(!h(e)){e=this.getActualProperties(e);var t=e;return e.value&&(t.id=e.value),e.parentValue&&(t.parentID=e.parentValue),e.child&&(t.child=this.getTreeChildren(e.child)),e.selected&&this.showCheckBox&&(t.isChecked=e.selected),t}return null},a.prototype.getTreeDataType=function(e,t){if(this.fields.dataSource instanceof P){for(var i=0;i<e.length;i++)if(typeof t.child=="string"&&h(I(t.child,e[i])))return 1;return 2}h(this.fields.dataSource)&&(this.fields.dataSource=[]);for(var i=0,s=this.fields.dataSource.length;i<s;i++){if(typeof t.child=="string"&&!h(I(t.child,this.fields.dataSource[i])))return 2;if(!h(I(t.parentValue,this.fields.dataSource[i]))||!h(I(t.hasChildren,this.fields.dataSource[i])))return 1}return 1},a.prototype.setFields=function(){this.resetValue(),this.hasTemplate&&this.updateTemplate(),this.treeObj.fields=this.getTreeFields(this.fields),this.setProperties({value:this.oldValue},!0),this.treeObj.dataBind(),this.updateValue(this.value)},a.prototype.getEventArgs=function(e){var t=e.data,i=e.nodeData,s;this.showCheckBox&&(e.action==="check"?s="select":e.action==="uncheck"&&(s="un-select"));var n={action:this.showCheckBox?s:e.action,isInteracted:this.isClicked?!0:e.isInteracted,item:e.node,itemData:this.showCheckBox?t[0]:i};return n},a.prototype.onBeforeSelect=function(e){e.isInteracted&&(this.setOldValue(),this.value===null&&this.setProperties({value:[]},!0))},a.prototype.updateHiddenValue=function(){this.allowMultiSelection||this.showCheckBox||(this.value&&this.value.length?this.hiddenElement.innerHTML='<option selected value ="'+this.value[0]+'">'+this.text+"</option>":this.hiddenElement.innerHTML="")},a.prototype.onNodeSelected=function(e){if(!this.showCheckBox){var t=this.getEventArgs(e);this.trigger("select",t);var i;if(e.isInteracted){var s=I("id",e.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[s]},!0),this.itemTemplate?i=I("text",this.treeObj.getNode(s)):i=I("text",e.nodeData).toString(),z.setValue(i,this.inputEle,this.floatLabelType),this.setProperties({text:i},!0),this.currentText=this.text,this.currentValue=this.value,this.setValueTemplate(),!h(this.value)&&this.value.length>0&&this.inputWrapper.setAttribute("aria-label",e.nodeData.text.toString()),Q(this.inputWrapper,{"aria-describedby":this.element.id}),Q(this.inputWrapper,{"aria-activedescendant":s.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}},a.prototype.onNodeClicked=function(e){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(e.event),this.isNodeSelected=!1);var t=e.event.target;if((t.classList.contains("e-fullrow")||t.classList.contains("e-list-text"))&&this.showCheckBox){this.isClicked=!0;var i=this.treeObj.getNode(e.node);i.isChecked==="true"?this.treeObj.uncheckAll([e.node]):this.treeObj.checkAll([e.node]),this.isClicked=!1,this.setMultiSelect(),this.ensurePlaceHolder()}!this.changeOnBlur&&(this.allowMultiSelection||this.showCheckBox)&&this.triggerChangeEvent(e.event)},a.prototype.onNodeChecked=function(e){var t=this.getEventArgs(e);if(this.trigger("select",t),this.isFilteredData&&e.action==="uncheck"){var i=I("id",e.data[0]).toString();this.removeSelectedData(i,!0)}if((!this.isChipDelete&&e.isInteracted||!this.isFilteredData&&e.action==="check"&&this.isFromFilterChange)&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){var s=this.treeObj.element.querySelectorAll("li:not(.e-disable)"),n=this.treeObj.element.querySelectorAll("li[aria-checked=true]"),r=A(this.checkBoxElement,"."+Fa);r&&e.action==="uncheck"&&(e.isInteracted||n.length===0||!h(e.data[0])&&e.data[0].isChecked==="false")||!e.isInteracted&&this.isFilterRestore?(this.isFilterRestore=!1,this.isReverseUpdate=!0,this.changeState(r,"uncheck"),this.isReverseUpdate=!1):r&&e.action==="check"&&n.length===s.length&&(e.isInteracted||this.isCheckAllCalled||!h(e.data[0])&&e.data[0].isChecked==="true")&&(this.isReverseUpdate=!0,this.isCheckAllCalled=!1,this.changeState(r,"check"),this.isReverseUpdate=!1)}this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)},a.prototype.beforeCheck=function(e){e.isInteracted&&this.setOldValue()},a.prototype.onNodeExpanded=function(){if(this.hasTemplate&&this.portals&&this.treeObj.portals){for(var e=0;e<this.treeObj.portals.length;e++)this.portals.indexOf(this.treeObj.portals[e])===-1&&this.portals.push(this.treeObj.portals[e]);this.renderReactTemplates()}},a.prototype.updateClearButton=function(e){if(e?this.inputWrapper.contains(this.overAllClear)?(w([this.overAllClear],De),E([this.inputWrapper],di)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):(E([this.overAllClear],De),w([this.inputWrapper],di)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper)for(var t=Ee("."+Ra,this.chipWrapper),i=0;i<t.length;i++)e?w([t[i]],De):E([t[i]],De)},a.prototype.updateDropDownIconState=function(e){var t=M("."+xr,this.inputWrapper);e?(t?w([t],De):z.appendSpan(fr,this.inputWrapper,this.createElement),E([this.inputWrapper],Ba)):(E([t],De),w([this.inputWrapper],Ba))},a.prototype.updateMode=function(){if(this.mode!=="Custom")if(this.mode!=="Delimiter"){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var e=this.getValidMode();this.chipWrapper.classList.contains(De)&&e?(w([this.chipWrapper],De),this.showOrHideValueTemplate(!1,!0),E([this.inputWrapper],gt)):e||(E([this.chipWrapper],De),w([this.inputWrapper],gt),this.showOrHideValueTemplate(!0));var t=this.value!==null?this.value.length!==0:!1;e&&t?E([this.inputEle],et):w([this.inputEle],et)}else this.inputEle.classList.contains(et)&&(w([this.inputEle],et),this.chipWrapper&&(E([this.chipWrapper],De),w([this.inputWrapper],gt),this.showOrHideValueTemplate(!0)))},a.prototype.ensurePlaceHolder=function(){(h(this.value)||this.value!==null&&this.value.length===0)&&(w([this.inputEle],et),this.chipWrapper&&(E([this.chipWrapper],De),this.showOrHideValueTemplate(!0)))},a.prototype.ensureClearIconPosition=function(e){e!=="Never"&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},a.prototype.setMultiSelectValue=function(e){var t=this;if(!this.isFilteredData)this.setProperties({value:this.isFromFilterChange&&e&&e.length===0?this.value:e},!0),this.isFromFilterChange=!1,e&&e.length!==0&&!this.showCheckBox&&!this.ddtCompareValues(this.treeObj.selectedNodes,this.value.slice())&&(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind());else{var i=h(this.value)?[]:this.value;i=i.filter(function(n){var r=t.treeObj.getTreeData(n);return Array.isArray(r)?r.every(function(l){return l.selected}):!0});for(var s=0;s<e.length;s++)(h(this.value)||this.value.indexOf(e[s])===-1)&&i.push(e[s]);this.setProperties({value:i},!0)}},a.prototype.setMultiSelect=function(){if(this.showCheckBox&&!this.isDynamicChange)this.setMultiSelectValue(this.treeObj.checkedNodes.slice());else{var e=this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null;this.setMultiSelectValue(e),this.showCheckBox&&this.value!==null&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())}this.selectedText=[];var t=this.allowMultiSelection?!0:!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!t&&(w([this.inputEle],et),G(this.chipWrapper));var i=this.getValidMode();i&&this.value!==null&&(E([this.inputEle],et),this.chipWrapper&&(w([this.chipWrapper],De),this.showOrHideValueTemplate(!1,!0)));var s=this.value?!!this.value.length:!1;this.chipWrapper&&this.mode==="Box"&&!s&&(E([this.chipWrapper],De),w([this.inputEle],et),this.showOrHideValueTemplate(!0)),this.updateSelectedValues()},a.prototype.getSelectedData=function(e){var t=null;if(this.isFilteredData){for(var i=0;i<this.selectedData.length;i++)if(I(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[i]).toString()===e){t=this.selectedData[i];break}}return h(t)&&(this.treeSettings.loadOnDemand?t=this.getNodeData(e,this.treeItems):t=this.treeObj.getNode(e),h(t)||this.selectedData.push(t)),t},a.prototype.getNodeData=function(e,t){var i;if(h(e))return i;if(this.treeDataType===1)for(var s=0,n=t.length;s<n;s++){var r=I(this.fields.value,t[s]);if(!h(t[s])&&!h(r)&&r.toString()===e)return t[s]}else return this.getChildNodeData(t,this.fields,e);return i},a.prototype.getChildNodeData=function(e,t,i){var s;if(h(e))return s;for(var n=0,r=e.length;n<r;n++){var l=I(t.value,e[n]);if(e[n]&&l&&l.toString()===i)return e[n];if(typeof t.child=="string"&&!h(I(t.child,e[n]))){var o=I(t.child,e[n]);if(s=this.getChildNodeData(o,this.getChildMapperFields(t),i),s!==void 0)break}else if(this.fields.dataSource instanceof P&&!h(I("child",e[n]))){var c="child";if(s=this.getChildNodeData(I(c,e[n]),this.getChildMapperFields(t),i),s!==void 0)break}}return s},a.prototype.getChildMapperFields=function(e){return typeof e.child=="string"||h(e.child)?e:e.child},a.prototype.removeSelectedData=function(e,t){var i=h(this.value)?[]:this.value.slice();i.splice(i.indexOf(e),1),this.setProperties({value:i},t);for(var s=0;s<this.selectedData.length;s++)if(I(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[s]).toString()===e){this.selectedData.splice(s,1);break}},a.prototype.initializeValueTemplate=function(){if(!this.valueTemplate)return null;if(this.valueTemplateContainer)for(;this.valueTemplateContainer.firstChild;)this.valueTemplateContainer.removeChild(this.valueTemplateContainer.firstChild);else this.valueTemplateContainer=this.createElement("span",{className:Ha+" "+mi+" e-input-value "+De});return this.inputWrapper.insertBefore(this.valueTemplateContainer,this.inputEle),this.templateComplier(this.valueTemplate)},a.prototype.showOrHideValueTemplate=function(e,t){t===void 0&&(t=!1),!(!this.valueTemplateContainer||this.mode==="Box")&&(e?(w([this.valueTemplateContainer],De),E([this.inputWrapper],gt),E([this.inputEle],et)):(E([this.valueTemplateContainer],De),t||(w([this.inputWrapper],gt),w([this.inputEle],et))))},a.prototype.updateSelectedValues=function(){var e=this;this.dataValue="";var t,i,s="",n;this.hiddenElement.innerHTML="";var r="";if((!this.isChipDelete||this.treeSettings.autoCheck)&&this.inputWrapper.contains(this.chipWrapper)&&(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!h(this.value)){for(var l=this.initializeValueTemplate(),o=0,c=this.value.length;o<c;o++)n=this.getSelectedData(this.value[o]),i=I(this.treeSettings.loadOnDemand?this.fields.text:"text",n),this.selectedText.push(i),t=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+t,s+=","+t):(this.dataValue+=t,s+=t),this.mode!=="Custom"&&this.mode!=="Delimiter"&&(!this.isChipDelete||this.treeSettings.autoCheck)&&(this.allowMultiSelection||this.showCheckBox)&&this.setChipValues(t,this.value[o]),r+='<option selected value ="'+this.value[o]+'">'+this.selectedText[this.selectedText.length-1]+"</option>",this.valueTemplate&&this.getValueTemplateElement(this.value[o],l);this.hasTemplate&&this.portals&&(this.treeObj.portals&&(this.portals=this.portals.concat(this.treeObj.portals.filter(function(d){return!e.portals.includes(d)}))),this.isReact&&this.renderReactTemplates(this.reactCallBack)),this.selectedText.length>=1&&this.setProperties({text:s},!0),this.hiddenElement.innerHTML=r,this.mode==="Custom"&&(this.allowMultiSelection||this.showCheckBox)&&this.setTagValues()}var p=this.getValidMode();this.mode!=="Custom"&&this.mode!=="Box"&&(this.allowMultiSelection||this.showCheckBox)&&!p&&(this.chipWrapper&&(E([this.chipWrapper],De),w([this.inputWrapper],gt)),this.showOrHideValueTemplate(!0)),z.setValue(this.dataValue,this.inputEle,this.floatLabelType),s===""?this.setProperties({text:null},!0):this.setProperties({text:s},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value,!h(this.value)&&this.value.length>0&&!h(this.currentText)?this.inputWrapper.setAttribute("aria-label",this.currentText.replace(/,/g,", ")):this.inputWrapper.setAttribute("aria-label",this.getModuleName())},a.prototype.setChipValues=function(e,t){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var i=this.createElement("span",{className:Pa,attrs:{"data-value":t}}),s=this.createElement("span",{className:gr}),n=this.createElement("span",{className:Ra+" "+Ku});this.enableHtmlSanitizer?s.innerText=yt.sanitize(e):s.innerHTML=e,i.appendChild(s),this.chipCollection.appendChild(i),this.showClearButton&&(i.appendChild(n),b.add(n,"mouseup",this.removeChip,this))},a.prototype.setTagValues=function(){if(this.value===null||this.text==null||this.value.length===0){this.inputWrapper.contains(this.chipWrapper)&&E([this.chipWrapper],De);return}this.inputWrapper.contains(this.chipWrapper)||this.createChip(),this.inputWrapper.classList.contains(gt)||E([this.inputWrapper],gt);var e=this.createElement("span",{className:Pa});this.inputEle.classList.contains(et)||E([this.inputEle],et),this.chipWrapper.classList.contains(De)&&(w([this.chipWrapper],De),this.showOrHideValueTemplate(!1,!0));var t=this.createElement("span",{className:gr}),i=this.customTemplate,s=this.customTemplateId,n="customTemplate",r=this.templateComplier(i),l=r({value:this.value,text:this.text},this,n,s,this.isStringTemplate,void 0,t);l&&(l=Array.prototype.slice.call(l),ye(l,t)),e.appendChild(t),this.chipCollection.appendChild(e),this.isReact&&this.renderReactTemplates()},a.prototype.setSelectAllWrapper=function(e){this.isFirstRender||(e&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&(G(this.checkAllParent),this.checkAllParent=null))},a.prototype.setHeaderTemplate=function(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),E([this.header],kr));var e=this.templateComplier(this.headerTemplate),t=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,void 0,this.header);t&&(t=Array.prototype.slice.call(t),ye(t,this.header)),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)},a.prototype.templateComplier=function(e){if(e)try{return typeof e!="function"&&document.querySelectorAll(e).length?Ie(document.querySelector(e).innerHTML.trim()):Ie(e)}catch(t){return Ie(e)}return Ie(e)},a.prototype.setFooterTemplate=function(){this.footer?this.isReact&&typeof this.footerTemplate=="function"?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),E([this.footer],Ar));var e=this.templateComplier(this.footerTemplate),t=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,void 0,this.footer);t&&(t=Array.prototype.slice.call(t),ye(t,this.footer)),ye([this.footer],this.popupEle)},a.prototype.clearAll=function(e){!this.enabled||this.readonly||(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&(this.popupObj&&this.popupObj.refreshPosition(),this.wrapText||this.updateOverflowWrapper(!0)),e&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(e))},a.prototype.removeChip=function(e){if(!(!this.enabled||this.readonly)){e.target.classList.contains("e-chips-close")&&!this.isPopupOpen&&(e.stopPropagation(),e.preventDefault());var t=e.target.parentElement,i=t.getAttribute("data-value");this.chipCollection&&t&&ft(t),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData(i,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([i]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(e),this.isChipDelete=!1,this.ensurePlaceHolder()}},a.prototype.resetValue=function(e){Array.isArray(this.value)&&this.value.length===0&&this.text==null||(z.setValue(null,this.inputEle,this.floatLabelType),e||(this.setOldValue(),this.setProperties({value:[]},!0),this.showOrHideValueTemplate(!1)),(h(this.value)||this.value.length===0)&&this.inputWrapper.setAttribute("aria-label",this.getModuleName()),this.dataValue=null,this.setProperties({text:null},!0),this.selectedData=[],Pe("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.uncheckAll(),this.setMultiSelect(),this.clearCheckAll()),this.oldValue===null&&!e?this.removeValue=!0:e&&this.triggerChangeEvent(),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.wrapText||this.updateOverflowWrapper(!0),this.ensurePlaceHolder()))},a.prototype.clearCheckAll=function(){this.showSelectAll&&this.value&&this.value.length===0&&this.setLocale(!1)},a.prototype.setOldValue=function(){this.oldValue=Array.isArray(this.value)?this.value.slice():this.value},a.prototype.selectAllItems=function(e){if(this.showCheckBox)e?(this.isCheckAllCalled=!0,this.treeObj.checkAll()):this.treeObj.uncheckAll(),this.checkSelectAll=e;else if(this.allowMultiSelection)if(!e)this.treeObj.selectedNodes=[];else{for(var t=Ee("li",this.treeObj.element),i=void 0,s=[],n=0;n<t.length;n++)i=t[n].getAttribute("data-uid").toString(),s.push(i);this.treeObj.selectedNodes=s}this.updateMode(),this.setMultiSelect(),this.wrapText||(e?this.updateView():this.updateOverflowWrapper(!0))},a.prototype.updateTreeSettings=function(e){if(e==="autoCheck")this.treeObj.autoCheck=this.treeSettings.autoCheck;else if(e==="loadOnDemand")this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else if(e==="expandOn"){this.treeObj.expandOn=this.treeSettings.expandOn,this.treeObj.dataBind();return}else e==="checkDisabledChildren"&&(this.treeObj.checkDisabledChildren=this.treeSettings.checkDisabledChildren);this.treeObj.dataBind(),this.setMultiSelect(),this.updateValue(this.value)},a.prototype.updateCheckBoxState=function(e){this.hasTemplate&&this.updateTemplate(),this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.showCheckBox=e,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1},a.prototype.updateTemplate=function(){this.popupObj&&(this.clearTemplate(),this.portals=[],this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)},a.prototype.l10nUpdate=function(e){if(this.noRecord?this.noRecord.innerHTML="":this.noRecord=this.createElement("div"),this.noRecordsTemplate!=="No Records Found"||this.actionFailureTemplate!=="The Request Failed"){var t=e?this.actionFailureTemplate:this.noRecordsTemplate,i=e?this.actionFailureTemplateId:this.noRecordsTemplateId,s=e?"actionFailureTemplate":"noRecordsTemplate",n=this.templateComplier(t),r=n({},this,s,i,this.isStringTemplate,void 0,this.noRecord);r&&(r=Array.prototype.slice.call(r),ye(r,this.noRecord))}else{var l={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"};this.l10n=new St(this.getLocaleName(),l,this.locale),this.noRecord.innerHTML=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")}E([this.noRecord],Xu),nt([this.noRecord],this.popupDiv),this.treeObj&&this.treeObj.element.removeAttribute("aria-activedescendant")},a.prototype.updateRecordTemplate=function(e){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(e),this.hasTemplate&&this.updateTemplate())},a.prototype.updateOverflowWrapper=function(e){e?this.inputWrapper.contains(this.overFlowWrapper)&&e&&(this.overFlowWrapper.innerHTML=""):this.inputWrapper.contains(this.overFlowWrapper)||(this.overFlowWrapper=this.createElement("span",{className:Ha+" "+De}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement))},a.prototype.updateMultiSelection=function(e){this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.allowMultiSelection=e,this.treeObj.dataBind(),this.updateOption(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()},a.prototype.updateAllowFiltering=function(e){this.isFirstRender||(e?this.renderFilter():this.destroyFilter())},a.prototype.updateFilterPlaceHolder=function(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))},a.prototype.updateValue=function(e){this.isDynamicChange=!0,h(e)||e.length===0?this.resetValue(!0):(this.setTreeValue(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue(),this.isDynamicChange=!1},a.prototype.updateText=function(e){h(e)?this.resetValue():(this.setTreeText(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue()},a.prototype.updateModelMode=function(){var e=this.allowMultiSelection?!0:!!this.showCheckBox;if(e){if(!this.wrapText){var t=M(".e-overflow:not(.e-input-value)",this.inputWrapper);t&&(t.innerHTML="")}this.updateMode(),this.setMultiSelect(),!this.wrapText&&this.value&&this.value.length!==0&&(this.updateOverFlowView(),E([this.inputEle],et),this.mode==="Box"?w([this.overFlowWrapper,this.inputWrapper],mi):E([this.overFlowWrapper,this.inputWrapper],mi))}},a.prototype.updateOption=function(){!this.hiddenElement.hasAttribute("multiple")&&(this.allowMultiSelection||this.showCheckBox)?this.hiddenElement.setAttribute("multiple",""):this.hiddenElement.hasAttribute("multiple")&&!this.allowMultiSelection&&!this.showCheckBox&&this.hiddenElement.removeAttribute("multiple")},a.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];switch(n){case"width":this.setElementWidth(e.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":z.setPlaceholder(e.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":z.setReadonly(e.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":z.removeFloating(this.inputObj),z.addFloating(this.inputEle,e.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(e.floatLabelType);break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(e.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":JSON.stringify(t.value)!==JSON.stringify(e.value)&&(this.oldValue=t.value,this.updateValue(e.value));break;case"text":this.updateText(e.text);break;case"allowMultiSelection":this.updateMultiSelection(e.allowMultiSelection);break;case"mode":if(!this.showCheckBox&&!this.allowMultiSelection)return;this.mode==="Custom"?(this.overFlowWrapper&&G(this.overFlowWrapper),this.chipWrapper&&G(this.chipWrapper),this.setTagValues()):(t.mode==="Custom"&&this.updateOverflowWrapper(this.wrapText),this.updateModelMode());break;case"delimiterChar":if(this.mode==="Box")return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(e.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(e.showCheckBox),this.wrapText||this.updateOverflowWrapper(!0),this.updatePopupHeight(),this.updateOption();break;case"treeSettings":for(var r=0,l=Object.keys(e.treeSettings);r<l.length;r++){var o=l[r];this.updateTreeSettings(o)}break;case"customTemplate":if(this.mode!=="Custom")return;this.chipCollection.innerHTML="",this.setTagValues();break;case"sortOrder":this.hasTemplate&&this.updateTemplate(),this.treeObj.sortOrder=e.sortOrder,this.treeObj.dataBind(),this.updateValue(this.value);break;case"showDropDownIcon":this.updateDropDownIconState(e.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=e.zIndex,this.popupObj.dataBind());break;case"headerTemplate":this.updateTemplate();break;case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.updateTemplate(),this.treeObj.nodeTemplate=e.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes();break;case"wrapText":this.updateOverflowWrapper(this.wrapText),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText?this.updateView():(E([this.overFlowWrapper],De),this.chipWrapper&&this.mode==="Box"?w([this.chipWrapper],De):(w([this.inputWrapper],gt),w([this.inputEle],et)),this.ensurePlaceHolder());break}}},a.prototype.clear=function(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)},a.prototype.destroy=function(){for(this.clearTemplate(),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.setProperties({text:null},!0),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),G(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),z.setValue(null,this.inputEle,this.floatLabelType),G(this.inputWrapper),G(this.popupDiv),G(this.hiddenElement),z.setRipple(!1,[this.inputObj]),this.element.classList.remove("e-input"),(this.showCheckBox||this.allowMultiSelection||this.value&&this.valueTemplateContainer)&&this.element.classList.remove(et),G(this.inputObj.container),this.inputObj.buttons.length&&G(this.inputObj.buttons[0]),this.inputObj=null;this.hiddenElement.options.length>0;)this.hiddenElement.remove(0);if(this.hiddenElement.innerHTML="",this.hiddenElement=null,this.inputWrapper.innerHTML="",this.inputWrapper=null,this.popupDiv=null,this.tree=null,this.popupObj=null,this.treeObj=null,this.overAllClear=null,this.chipCollection)for(var e=Ee(".e-chips-close",this.chipCollection),t=0,i=e;t<i.length;t++){var s=i[t];b.remove(s,"mouseup",this.removeChip)}this.chipWrapper=null,this.chipCollection=null,this.checkAllParent=null,this.selectAllSpan=null,this.checkBoxElement=null,this.checkWrapper=null,this.popupEle=null,this.header=null,this.footer=null,this.overFlowWrapper=null,this.keyboardModule=null,u.prototype.destroy.call(this),this.setProperties({value:[]},!0)},a.prototype.destroyFilter=function(){this.filterObj&&(this.filterObj.destroy(),G(this.filterObj.element),G(this.filterContainer),this.filterObj=null)},a.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isReact&&this.clearTemplate(["headerTemplate","footerTemplate","itemTemplate","actionFailureTemplate","noRecordsTemplate"]),this.popupObj&&(this.popupObj.destroy(),G(this.popupObj.element))},a.prototype.ensureVisible=function(e){this.treeObj.ensureVisible(e)},a.prototype.getData=function(e){return this.treeObj.getTreeData(e)},a.prototype.hidePopup=function(){var e={popup:this.popupObj,cancel:!1};this.trigger("close",e),!e.cancel&&(this.inputWrapper.classList.remove(mr),this.popupEle&&E([this.popupEle],As),Q(this.inputEle,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&(this.inputWrapper.focus(),this.allowFiltering&&E([this.inputWrapper],[fi])),this.isFilteredData&&(this.treeObj.treeData=this.treeData),this.destroyPopupOnHide&&(this.isFirstRender=!0,this.destroyPopup())))},a.prototype.selectAll=function(e){this.selectAllItems(e)},a.prototype.showPopup=function(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())},a.prototype.getModuleName=function(){return"dropdowntree"},re([y("The Request Failed")],a.prototype,"actionFailureTemplate",void 0),re([y(!1)],a.prototype,"allowFiltering",void 0),re([y(!1)],a.prototype,"allowMultiSelection",void 0),re([y(!0)],a.prototype,"changeOnBlur",void 0),re([y("")],a.prototype,"cssClass",void 0),re([y("${value.length} item(s) selected")],a.prototype,"customTemplate",void 0),re([y(",")],a.prototype,"delimiterChar",void 0),re([y(!0)],a.prototype,"enabled",void 0),re([Nt({},ic)],a.prototype,"fields",void 0),re([y(null)],a.prototype,"filterBarPlaceholder",void 0),re([y("StartsWith")],a.prototype,"filterType",void 0),re([y("Never")],a.prototype,"floatLabelType",void 0),re([y(null)],a.prototype,"footerTemplate",void 0),re([y(!1)],a.prototype,"ignoreAccent",void 0),re([y(!0)],a.prototype,"ignoreCase",void 0),re([y(null)],a.prototype,"headerTemplate",void 0),re([y({})],a.prototype,"htmlAttributes",void 0),re([y(null)],a.prototype,"itemTemplate",void 0),re([y("Default")],a.prototype,"mode",void 0),re([y("No Records Found")],a.prototype,"noRecordsTemplate",void 0),re([y(null)],a.prototype,"placeholder",void 0),re([y("300px")],a.prototype,"popupHeight",void 0),re([y("100%")],a.prototype,"popupWidth",void 0),re([y(!1)],a.prototype,"readonly",void 0),re([y(!1)],a.prototype,"showSelectAll",void 0),re([y("Select All")],a.prototype,"selectAllText",void 0),re([y(!1)],a.prototype,"showCheckBox",void 0),re([y(!0)],a.prototype,"destroyPopupOnHide",void 0),re([y(!0)],a.prototype,"enableHtmlSanitizer",void 0),re([y(!0)],a.prototype,"showClearButton",void 0),re([y(!0)],a.prototype,"showDropDownIcon",void 0),re([y("None")],a.prototype,"sortOrder",void 0),re([y(null)],a.prototype,"text",void 0),re([Nt({},sc)],a.prototype,"treeSettings",void 0),re([y("Unselect All")],a.prototype,"unSelectAllText",void 0),re([y(null)],a.prototype,"value",void 0),re([y(null)],a.prototype,"valueTemplate",void 0),re([y("100%")],a.prototype,"width",void 0),re([y(1e3)],a.prototype,"zIndex",void 0),re([y(!1)],a.prototype,"wrapText",void 0),re([q()],a.prototype,"actionFailure",void 0),re([q()],a.prototype,"beforeOpen",void 0),re([q()],a.prototype,"change",void 0),re([q()],a.prototype,"close",void 0),re([q()],a.prototype,"blur",void 0),re([q()],a.prototype,"created",void 0),re([q()],a.prototype,"dataBound",void 0),re([q()],a.prototype,"destroyed",void 0),re([q()],a.prototype,"filtering",void 0),re([q()],a.prototype,"focus",void 0),re([q()],a.prototype,"keyPress",void 0),re([q()],a.prototype,"open",void 0),re([q()],a.prototype,"select",void 0),a=re([ot],a),a}(Tt),tn="e-float-line",as="e-float-text",Fi="e-label-top",ki="e-label-bottom";function wr(u,a,e,t,i,s,n){var r=Wt("span",{className:tn}),l=Wt("label",{className:as}),o=e.getAttribute("id")?e.getAttribute("id"):$e("ej2_multiselect");e.id=o,!h(e.id)&&e.id!==""&&(l.id="label_"+e.id.replace(/ /g,"_"),l.setAttribute("for",e.id),Q(t,{"aria-labelledby":l.id})),!h(t.placeholder)&&t.placeholder!==""&&(l.innerText=sn(t.placeholder),t.removeAttribute("placeholder")),l.innerText=sn(n),a.appendChild(r),a.appendChild(l),u.classList.add("e-float-input"),nc(i,l),s==="Always"&&(l.classList.contains(ki)&&w([l],ki),E([l],Fi))}function nc(u,a){u&&u.length>0?(E([a],Fi),w([a],ki)):(w([a],Fi),E([a],ki))}function rc(u,a,e,t,i,s,n){var r=a.querySelector("."+as),l=a.querySelector("."+tn),o;h(r)?(o=n!==null?n:"",Tr(i,t,o)):(o=r.innerText,G(e.querySelector("."+as)),Tr(i,t,o),h(l)||G(e.querySelector("."+tn))),u.classList.remove("e-float-input")}function Tr(u,a,e){u&&u.length?a.placeholder="":a.placeholder=e}function lc(u,a){u.classList.add("e-input-focus");var e=a.querySelector("."+as);h(e)||(E([e],Fi),e.classList.contains(ki)&&w([e],ki))}function oc(u,a,e,t,i){u.classList.remove("e-input-focus");var s=a.querySelector("."+as);e&&e.length<=0&&t==="Auto"&&!h(s)&&(s.classList.contains(Fi)&&w([s],Fi),E([s],ki))}function sn(u){var a="";if(!h(u)&&u!==""){var e=document.createElement("span");e.innerHTML='<input  placeholder="'+u+'"/>';var t=e.children[0];a=t.placeholder}return a}var hc=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),he=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},gi="e-input-focus",Ji="e-disabled",uc="e-multiselect e-input-group e-control-wrapper",cc="e-multi-select-wrapper",pc="e-mob-wrapper",Ne="e-hide-listitem",dc="e-delim-view",fc="e-chips-collection",Bi="e-chips",vc="e-chipcontent",Ts="e-chips-close",ei="e-chip-selected",mc="e-searcher",Dr="e-delimiter",Ds="e-zero-size",gc="e-remain",Ir="e-chips-close e-close-hooker",Or="e-delim-values",yc="e-ddl e-popup e-multi-select-list-wrapper",bc="e-dropdownbase",Lr="e-rtl",Wa="e-close-icon-hide",Cc="e-mob-chip",Sc="e-ddl-footer",Ec="e-ddl-header",Nr="e-ddl-disable-icon",Br="e-ms-spinner-icon",xc="e-multi-hidden",Ac="destroy",Pr="e-input-group-icon e-ddl-icon",Rr="e-icon-anim",Is="e-delim-total",kc="e-multiselect-box",wc="e-filter-parent",Mr="e-search-custom-width",qa="e-input-filter",Tc="e-resizer-right e-icons",za=function(u){hc(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.clearIconWidth=0,i.previousFilterText="",i.storedSelectAllHeight=0,i.isUpdateHeaderHeight=!1,i.isUpdateFooterHeight=!1,i.isBlurDispatching=!1,i.isFilterPrevented=!1,i.isFilteringAction=!1,i.isValidKey=!1,i.selectAllEventData=[],i.selectAllEventEle=[],i.preventSetCurrentData=!1,i.isSelectAllLoop=!1,i.scrollFocusStatus=!1,i.keyDownStatus=!1,i}return a.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add(Lr):this.overAllWrapper.classList.remove(Lr),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},a.prototype.requiredModules=function(){var e=[];if(this.enableVirtualization&&e.push({args:[this],member:"VirtualScroll"}),this.mode==="CheckBox"){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},a.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];switch(i){case"class":{var s=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();s!==""&&(E([this.overAllWrapper],s.split(" ")),E([this.popupWrapper],s.split(" ")));break}case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(i,this.htmlAttributes[""+i]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:{var n=["id"],r=["name","required","aria-required","form"],l=["title","role","style","class"];n.indexOf(i)>-1?this.element.setAttribute(i,this.htmlAttributes[""+i]):i.indexOf("data")===0||r.indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):l.indexOf(i)>-1?this.overAllWrapper.setAttribute(i,this.htmlAttributes[""+i]):i!=="size"&&!h(this.inputElement)&&this.inputElement.setAttribute(i,this.htmlAttributes[""+i]);break}}}},a.prototype.updateReadonly=function(e){h(this.inputElement)||(e||this.mode==="CheckBox"?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly"))},a.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(Wa)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(Wa))},a.prototype.updateCssClass=function(){if(!h(this.cssClass)&&this.cssClass!==""){var e=this.cssClass;e=this.cssClass.replace(/\s+/g," ").trim(),e!==""&&(E([this.overAllWrapper],e.split(" ")),E([this.popupWrapper],e.split(" ")))}},a.prototype.updateOldPropCssClass=function(e){!h(e)&&e!==""&&(e=e.replace(/\s+/g," ").trim(),e!==""&&(w([this.overAllWrapper],e.split(" ")),w([this.popupWrapper],e.split(" "))))},a.prototype.onPopupShown=function(e){var t=this;if(V.isDevice&&this.mode==="CheckBox"&&this.allowFiltering){var i=this;window.onpopstate=function(){i.hidePopup(),i.inputElement.focus()},history.pushState({},"")}var s={name:"FadeIn",duration:100},n={popup:this.popupObj,event:e,cancel:!1,animation:s};this.trigger("open",n,function(r){r.cancel||(t.focusAtFirstListItem(!0),t.popupObj&&document.body.appendChild(t.popupObj.element),t.mode==="CheckBox"&&t.enableGroupCheckBox&&!h(t.fields.groupBy)&&t.updateListItems(t.list.querySelectorAll("li.e-list-item"),t.mainList.querySelectorAll("li.e-list-item")),(t.mode==="CheckBox"||t.showDropDownIcon)&&E([t.overAllWrapper],[Rr]),t.refreshPopup(),t.renderReactTemplates(),t.popupObj&&t.popupObj.show(r.animation,t.zIndex===1e3?t.element:null),t.isReact&&setTimeout(function(){if(t.popupHeight&&t.list&&t.popupHeight!=="auto"){var l=typeof t.popupHeight=="string"?parseInt(t.popupHeight,10):t.popupHeight;if(!t.isUpdateHeaderHeight&&t.headerTemplate&&t.header){var o=t.list.style.maxHeight===""?l:parseInt(t.list.style.maxHeight,10);t.list.style.maxHeight=(o-t.header.offsetHeight).toString()+"px",t.isUpdateHeaderHeight=!0}if(!t.isUpdateFooterHeight&&t.footerTemplate&&t.footer){var o=t.list.style.maxHeight===""?l:parseInt(t.list.style.maxHeight,10);t.list.style.maxHeight=(o-t.footer.offsetHeight).toString()+"px",t.isUpdateFooterHeight=!0}}},15),Q(t.inputElement,{"aria-expanded":"true","aria-owns":t.element.id+"_popup","aria-controls":t.element.id}),t.updateAriaActiveDescendant(),t.isFirstClick&&(t.enableVirtualization||t.loadTemplate()),t.mode==="CheckBox"&&t.showSelectAll&&b.add(t.popupObj.element,"click",t.clickHandler,t))})},a.prototype.updateVirtualReOrderList=function(e){var t=this.getForQuery(this.value,!0).clone();if(this.isVirtualReorder=!0,this.enableVirtualization&&this.dataSource instanceof P?this.resetList(this.selectedListData,this.fields,t):this.resetList(this.dataSource,this.fields,t),this.isVirtualReorder=!1,this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+O.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var i=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});i.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(i)}this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()),e&&this.loadTemplate()},a.prototype.updateListItems=function(e,t){for(var i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i]);this.deselectHeader()},a.prototype.loadTemplate=function(){if(this.refreshListItems(null),this.enableVirtualization&&this.list&&this.mode==="CheckBox"){var e=this.list.querySelectorAll(".e-reorder")[0];this.list.querySelector(".e-virtual-ddl-content")&&e&&this.list.querySelector(".e-virtual-ddl-content").removeChild(e)}this.mode==="CheckBox"&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",e:this}),this.isPreventScrollAction=!0},a.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&this.mode!=="CheckBox"||this.mode==="CheckBox"&&!this.enableSelectionOrder)&&!h(this.value)&&this.value.length>0){var e=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",e);h(t)||this.scrollBottom(t,void 0,!1,null,!0)}if(this.enableVirtualization){var i=this.list.querySelector("."+O.focus);this.isKeyBoardAction=!1,this.scrollBottom(i,void 0,!1,null,!0)}},a.prototype.focusAtFirstListItem=function(e){if(this.ulElement&&this.ulElement.querySelector("li."+O.li)){var t=void 0;if(this.mode==="CheckBox"){this.removeFocus();return}else if(this.enableVirtualization){if(this.fields.disabled){if(t=this.ulElement.querySelector("li."+O.li+":not(.e-virtual-list):not(.e-hide-listitem):not(."+Ji+")"),e&&this.viewPortInfo&&this.viewPortInfo.startIndex!==0){var i=this.ulElement.querySelectorAll("li."+O.li+":not(.e-virtual-list):not(.e-hide-listitem)");t=i&&i.length>0?i[2]:t}}else if(t=this.ulElement.querySelector("li."+O.li+":not(.e-virtual-list):not(.e-hide-listitem)"),e&&this.viewPortInfo&&this.viewPortInfo.startIndex!==0){var i=this.ulElement.querySelectorAll("li."+O.li+":not(.e-virtual-list):not(.e-hide-listitem)");t=i&&i.length>0?i[2]:t}}else this.fields.disabled?t=this.ulElement.querySelector("li."+O.li+":not(."+Ne+"):not(."+Ji+")"):t=this.ulElement.querySelector("li."+O.li+":not(."+Ne+")");t!==null&&(this.removeFocus(),this.addListFocus(t))}},a.prototype.focusAtLastListItem=function(e){var t;if(e)t=wi(e,this.liCollections,"StartsWith",this.ignoreCase);else if(this.value&&this.value.length){var i=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];wi(i,this.liCollections,"StartsWith",this.ignoreCase)}else t=null;t&&t.item!==null&&(this.addListFocus(t.item),((this.allowCustomValue||this.allowFiltering)&&this.isPopupOpen()&&this.closePopupOnSelect&&!this.enableVirtualization||this.closePopupOnSelect&&!this.enableVirtualization)&&this.scrollBottom(t.item,t.index))},a.prototype.getAriaAttributes=function(){var e={"aria-disabled":"false",role:"combobox","aria-expanded":"false"};return e},a.prototype.updateListARIA=function(){h(this.ulElement)||Q(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"list"});var e=!!(!h(this.inputElement)&&this.inputElement.disabled);!this.isPopupOpen()&&!h(this.inputElement)&&Q(this.inputElement,this.getAriaAttributes()),e&&Q(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},a.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var t=this.htmlAttributes;ae(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}},a.prototype.removelastSelection=function(e){var t=this.chipCollectionWrapper.querySelector("span."+ei);if(t!==null){this.removeSelectedChip(e);return}var i=this.chipCollectionWrapper.querySelectorAll("span."+Bi),s=i[i.length-1].getAttribute("data-value");h(this.value)||(this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice());var n=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(s)):this.getFormattedValue(s);this.allowCustomValue&&(s!=="false"&&n===!1||!h(n)&&n.toString()==="NaN")&&(n=s),this.removeValue(n,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},a.prototype.onActionFailure=function(e){u.prototype.onActionFailure.call(this,e),this.renderPopup(),this.onPopupShown()},a.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,this.mode==="CheckBox"&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),this.targetInputElement.value},a.prototype.getForQuery=function(e,t){var i,s=this.isPrimitiveData?"":this.fields.value;if(this.enableVirtualization&&e)if(t){for(var n=this.viewPortInfo.startIndex,r=n+this.viewPortInfo.endIndex<=e.length&&e[n+this.viewPortInfo.endIndex]?n+this.viewPortInfo.endIndex:e.length,l=n;l<r;l++){var o=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",e[l]):e[l];l===n?i=new be(s,"equal",o):i=i.or(s,"equal",o)}return new ee().where(i)}else{for(var l=0;l<e.length;l++){var o=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",e[l]):e[l];this.isaddNonPresentItems?i=l===0?new be(s,"equal",e[l]):i.or(s,"equal",e[l]):i=l===0?i=new be(s,"notequal",o):i.and(s,"notequal",o)}return new ee().where(i)}else for(var l=0;l<e.length;l++)l===0?i=new be(s,"equal",e[l]):i=i.or(s,"equal",e[l]);return this.dataSource instanceof P&&this.dataSource.adaptor instanceof Us?new ee().where(i):this.getQuery(this.query).clone().where(i)},a.prototype.onActionComplete=function(e,t,i,s){var n=this;if(this.dataSource instanceof P&&!h(i)&&!this.virtualGroupDataSource&&(this.totalItemCount=i.count),this.value&&t&&t.length>0&&this.allowFiltering&&this.mode!=="CheckBox"&&!this.enableVirtualization&&!this.isFilterPrevented&&!this.allowCustomValue&&this.isFilteringAction){var r=t.every(function(v){var g=I(n.fields.value?n.fields.value:"",v);return n.value.some(function(m){var C=n.allowObjectBinding?I(n.fields.value?n.fields.value:"",m):m;return g===C})});r&&(e.innerHTML="",t=[])}u.prototype.onActionComplete.call(this,e,t,i),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof P)||this.dataSource instanceof P&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering);var l=this;if(!h(this.value)&&!this.allowCustomValue&&!this.enableVirtualization&&this.listData&&this.listData.length>0)for(var o=0;o<this.value.length;o++){var c=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",l.value[o]):l.value[o],p=this.findListElement(this.allowFiltering&&!h(this.mainList)?this.mainList:e,"li","data-value",c);!p&&!(this.dataSource instanceof P)&&(this.value.splice(o,1),o-=1)}var d=[];if(h(this.value)||(d=this.presentItemValue(this.ulElement)),d.length>0&&this.dataSource instanceof P&&!h(this.value)&&this.listData!=null?(this.isaddNonPresentItems=!0,this.addNonPresentItems(d,this.ulElement,this.listData),this.isaddNonPresentItems=!1):this.updateActionList(e,t,i),this.dataSource instanceof P&&this.allowCustomValue&&!this.isCustomRendered&&this.inputElement.value&&this.inputElement.value!==""){var f=new ee;f=this.allowFiltering?f.where(this.fields.text,"startswith",this.inputElement.value,this.ignoreCase,this.ignoreAccent):f,this.checkForCustomValue(f,this.fields),this.isCustomRendered=!0,this.remoteCustomValue=this.enableVirtualization?!1:this.remoteCustomValue}this.mode==="CheckBox"&&this.enableGroupCheckBox&&!h(this.fields.groupBy)&&!h(this.fields.disabled)&&this.disableGroupHeader(),this.dataSource instanceof P&&this.mode==="CheckBox"&&this.allowFiltering&&this.removeFocus()},a.prototype.updateActionList=function(e,t,i,s){this.mode==="CheckBox"&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),!this.mainList&&!this.mainData?(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections):(h(this.mainData)||this.mainData.length===0)&&(this.mainData=t),!((this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&this.inputElement.value!==""&&(this.checkForCustomValue(this.tempQuery,this.fields),this.isCustomRendered))&&(this.value&&this.value.length&&(this.mode!=="CheckBox"&&!h(this.inputElement)&&this.inputElement.value.trim()!==""||this.mode==="CheckBox"||(this.keyCode===8||this.keyCode===46)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof P&&this.inputElement.value==="")&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),h(this.setInitialValue)||this.setInitialValue(),h(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(!h(this.text)&&(h(this.value)||this.value.length===0)&&this.initialTextUpdate(),!this.enableVirtualization||this.enableVirtualization&&!(this.dataSource instanceof P)?this.initialValueUpdate():this.isRemoveSelection||this.initialValueUpdate(this.listData,!0),this.initialUpdate(),this.refreshPlaceHolder(),this.mode!=="CheckBox"&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown(i)))},a.prototype.refreshSelection=function(){var e,t,i=this.hideSelectedItem?Ne:O.selected;if(!h(this.value)){for(var s=0;!h(this.value[s]);s++)if(e=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[s]):this.value[s],t=this.findListElement(this.list,"li","data-value",e),t){if(E([t],i),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains(O.group)&&(!t.nextElementSibling||t.nextElementSibling.classList.contains(O.group))&&E([t.previousElementSibling],i),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(Ne)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains(O.focus)){w([t],O.focus);var n=t.parentElement.querySelectorAll("."+O.li+":not(."+Ne+"):not(."+Ji+")");n.length>0?(E([n[0]],O.focus),this.updateAriaActiveDescendant()):this.list&&this.list.querySelectorAll("."+O.li).length>0||(this.l10nUpdate(),E([this.list],O.noData))}if(t.setAttribute("aria-selected","true"),this.mode==="CheckBox"&&t.classList.contains("e-active")){var r=t.getElementsByClassName("e-check").length;if(r===0){var l={module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:t,e:null};this.notify("updatelist",l)}}}}this.checkSelectAll(),this.checkMaxSelection()},a.prototype.hideGroupItem=function(e){var t,i,s=this.hideSelectedItem?Ne:O.selected;i=t=this.findListElement(this.ulElement,"li","data-value",e);var n=0,r=0,l=!0,o=!0;do t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(Ne)&&t.previousElementSibling.classList.contains(O.li)&&(l=!1),!l||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains(O.group)?n=10:t=t.previousElementSibling,i&&i.nextElementSibling&&!i.nextElementSibling.classList.contains(Ne)&&i.nextElementSibling.classList.contains(O.li)&&(o=!1),!o||!i||i.nextElementSibling&&i.nextElementSibling.classList.contains(O.group)?r=10:i=i.nextElementSibling;while(n<10||r<10);l&&o&&!t.previousElementSibling.classList.contains(Ne)?E([t.previousElementSibling],s):l&&o&&t.previousElementSibling.classList.contains(Ne)&&w([t.previousElementSibling],s)},a.prototype.getValidLi=function(){var e=this.ulElement.querySelector("li."+O.li+":not(."+Ne+")");return h(e)?this.liCollections[0]:e},a.prototype.checkSelectAll=function(){var e=h(this.fields.disabled)?this.list.querySelectorAll("li.e-list-group-item.e-active").length:this.list.querySelectorAll("li.e-list-group-item.e-active:not(.e-disabled)").length,t=this.list.querySelectorAll("li.e-list-item"),i=this.enableVirtualization?this.list.querySelectorAll("li."+O.li+":not(.e-virtual-list)").length:h(this.fields.disabled)?this.list.querySelectorAll("li."+O.li).length:this.list.querySelectorAll("li."+O.li+":not(.e-disabled)").length,s=this.list.querySelectorAll("li."+O.selected).length;if(this.enableGroupCheckBox&&!h(this.fields.groupBy)&&(s=s-e),!this.enableVirtualization&&(i===s||s===this.maximumSelectionLength)&&this.mode==="CheckBox"&&this.showSelectAll||this.enableVirtualization&&this.mode==="CheckBox"&&this.showSelectAll&&this.value&&this.value.length===this.totalItemCount?this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check"}):i!==s&&this.mode==="CheckBox"&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var n=0;n<t.length;n++)this.findGroupStart(t[n]);this.deselectHeader()}},a.prototype.openClick=function(e){!this.openOnClick&&this.mode!=="CheckBox"&&!this.isPopupOpen()?this.targetElement()!==""?this.showPopup():this.hidePopup(e):!this.openOnClick&&this.mode==="CheckBox"&&!this.isPopupOpen()&&this.showPopup()},a.prototype.keyUp=function(e){if(this.mode==="CheckBox"&&!this.openOnClick){var t=String.fromCharCode(e.keyCode),i=t.match(/\w/);h(i)||(this.isValidKey=!0)}if(this.isValidKey=this.isPopupOpen()&&e.keyCode===8||this.isValidKey,this.isValidKey=e.ctrlKey&&e.keyCode===86?!1:this.isValidKey,this.isValidKey&&this.inputElement)switch(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),e.keyCode){default:this.search(e)}},a.prototype.filter=function(e,t,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,i)},a.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new ee;if(this.isFiltered){if(this.enableVirtualization&&!h(this.customFilterQuery))return t=this.customFilterQuery.clone(),this.virtualFilterQuery(t);if(!this.enableVirtualization)return t}if(this.filterAction){if(this.targetElement()!==null&&!this.enableVirtualization||this.enableVirtualization&&this.targetElement()!==null&&this.targetElement().trim()!==""){var i=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof P)&&i==="string"||i==="number")t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent);else if(this.enableVirtualization&&this.targetElement()!==""&&!this.isClearAllAction||!this.enableVirtualization){var s=this.fields;t.where(h(s.text)?"":s.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}}return this.enableVirtualization&&this.viewPortInfo.endIndex!==0&&!this.virtualSelectAll?this.virtualFilterQuery(t):this.virtualSelectAll?e?e.take(this.maximumSelectionLength).requiresCount():this.query?this.query.take(this.maximumSelectionLength).requiresCount():new ee().take(this.maximumSelectionLength).requiresCount():t}else return this.enableVirtualization&&this.viewPortInfo.endIndex!==0&&!this.virtualSelectAll?this.virtualFilterQuery(t):this.virtualSelectAll?e?e.take(this.maximumSelectionLength).requiresCount():this.query?this.query.take(this.maximumSelectionLength).requiresCount():new ee().take(this.maximumSelectionLength).requiresCount():e||(this.query?this.query:new ee)},a.prototype.virtualFilterQuery=function(e){for(var t=this.getTakeValue(),i=!0,s=!0,n=0;n<e.queries.length;n++)this.getModuleName()==="multiselect"&&(e.queries[n].e&&e.queries[n].e.condition==="or"||e.queries[n].e&&e.queries[n].e.operator==="equal")&&(i=!1),e.queries[n].fn==="onSkip"&&(s=!1),e.queries[n].fn;var r=0;if(e&&e.queries.length>0)for(var n=0;n<e.queries.length;n++)e.queries[n].fn==="onTake"&&(r=t<=e.queries[n].e.nos?e.queries[n].e.nos:t);if(r<=0&&this.query&&this.query.queries.length>0)for(var n=0;n<this.query.queries.length;n++)this.query.queries[n].fn==="onTake"&&(r=t<=this.query.queries[n].e.nos?this.query.queries[n].e.nos:t);if(e&&e.queries.length>0)for(var n=0;n<e.queries.length;n++)e.queries[n].fn==="onTake"&&(r=e.queries[n].e.nos<=r?r:e.queries[n].e.nos,e.queries.splice(n,1),--n);return(this.allowFiltering&&s||!i||!this.allowFiltering&&s)&&!this.isVirtualReorder&&(i?e.skip(this.virtualItemStartIndex):e.skip(this.viewPortInfo.startIndex)),this.isIncrementalRequest?e.take(this.incrementalEndIndex):r>0?e.take(r):e.take(t),e.requiresCount(),this.customFilterQuery=null,e},a.prototype.getTakeValue=function(){return this.allowFiltering&&V.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},a.prototype.dataUpdater=function(e,t,i){this.isDataFetched=!1;var s=this.list.classList.contains(O.noData);if(this.targetElement().trim()===""){var n=this.enableVirtualization?this.list.cloneNode(!0):this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;if(this.backCommand||this.enableVirtualization&&this.mode==="CheckBox"&&this.value&&this.value.length>0){this.remoteCustomValue=!1;var r=!1;if(this.allowCustomValue&&n.querySelectorAll("li").length===0&&this.mainData.length>0&&(this.mainData=[]),this.enableVirtualization){if(this.allowFiltering&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.value&&this.value.length>0&&this.mode==="CheckBox")this.notify("setCurrentViewDataAsync",{component:this.getModuleName(),module:"VirtualScroll"}),r=!0;else if(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(e,i,t),this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.UpdateSkeleton(),(s||this.allowCustomValue)&&!this.list.classList.contains(O.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")){var l=this.createElement("div",{className:"e-virtual-ddl-content"});l.style.cssText=this.getTransformValues(),this.list.appendChild(l).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});o.style.cssText=this.GetVirtualTrackHeight(),document.getElementsByClassName("e-multi-select-list-wrapper")[0].querySelector(".e-dropdownbase").appendChild(o)}}}this.onActionComplete(n,this.mainData),this.value&&this.value.length&&this.refreshSelection(),this.keyCode!==8&&this.focusAtFirstListItem(),r||this.notify("reOrder",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",e:this})}}else{if(this.enableVirtualization&&this.allowFiltering&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null,this.list.querySelector(".e-list-parent.e-reorder")&&this.list.querySelector(".e-list-parent.e-reorder").remove()),this.resetList(e,i,t),this.enableVirtualization&&(s||this.allowCustomValue)&&!this.list.classList.contains(O.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")){var l=this.createElement("div",{className:"e-virtual-ddl-content"});l.style.cssText=this.getTransformValues(),this.list.appendChild(l).appendChild(this.list.querySelector(".e-list-parent"))}if(this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),!this.list.querySelector(".e-virtual-ddl")){var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});o.style.cssText=this.GetVirtualTrackHeight(),document.getElementsByClassName("e-multi-select-list-wrapper")[0].querySelector(".e-dropdownbase").appendChild(o)}}this.allowCustomValue&&(e instanceof P?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,i))}this.enableVirtualization&&this.allowFiltering&&this.getFilteringSkeletonCount(),this.refreshPopup(),this.allowResize&&this.setResize(),this.mode==="CheckBox"&&this.removeFocus()},a.prototype.checkForCustomValue=function(e,t){var i=!this.getValueByText(this.inputElement.value,this.ignoreCase),s=t||this.fields;if(this.allowCustomValue&&i){var n=this.inputElement.value,r=!h(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if(r&&typeof r!="string"&&typeof r!="number"&&typeof r!="boolean"){var l={};Pe(s.text,n,l),typeof I(this.fields.value?this.fields.value:"value",r)=="number"&&this.fields.value!==this.fields.text?Pe(s.value,Math.random(),l):Pe(s.value,n,l);var o={};if(this.allowObjectBinding){var c=this.listData&&this.listData.length>0?Object.keys(this.listData[0]):this.firstItem?Object.keys(this.firstItem):Object.keys(l),p=typeof I(this.fields.value?this.fields.value:"value",r)=="number"&&this.fields.value!==this.fields.text;c.forEach(function(m){o[m]=m===t.value||m===t.text?m===t.text&&p?I(t.text,l):I(t.value,l):null})}if(l=this.allowObjectBinding?o:l,this.enableVirtualization){this.virtualCustomData=l;var d=this.dataSource instanceof P?JSON.parse(JSON.stringify(this.listData)):JSON.parse(JSON.stringify(this.dataSource));this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0&&d.concat(this.virtualCustomSelectData),d.splice(0,0,l),this.isCustomDataUpdated=!0;var f=this.totalItemCount;this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.resetList(d,s,e),this.isCustomDataUpdated=!1,this.totalItemCount=this.enableVirtualization&&this.dataSource instanceof P?f:this.totalItemCount}else{this.dataSource instanceof P&&this.allowCustomValue&&this.allowFiltering&&(this.remoteCustomValue=!1);var d=JSON.parse(JSON.stringify(this.listData));d.splice(0,0,l),this.resetList(d,s,e)}}else if(this.listData){var d=JSON.parse(JSON.stringify(this.listData));d.splice(0,0,this.inputElement.value),d[0]=typeof r=="number"&&!isNaN(parseFloat(d[0]))?parseFloat(d[0]):d[0],d[0]=typeof r=="boolean"?d[0]==="true"?!0:d[0]==="false"?!1:d[0]:d[0],this.resetList(d,s)}}else if(this.listData&&this.mainData&&!i&&this.allowCustomValue){if(this.allowFiltering&&this.isRemoteSelection&&this.remoteCustomValue)this.isRemoteSelection=!1,this.enableVirtualization||this.resetList(this.listData,s,e);else if(!this.allowFiltering&&this.list){var v=this.list.querySelectorAll("li."+O.li+":not(.e-hide-listitem)"),g=wi(this.targetElement(),v,"StartsWith",this.ignoreCase);g&&g.item!==null&&this.addListFocus(g.item)}}this.value&&this.value.length&&this.refreshSelection()},a.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},a.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.keyboardEvent=null,this.isKeyBoardAction=!1,!!this.enabled){if(e.target===this.overAllClear){e.preventDefault();return}if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&e.target.classList.toString().indexOf(Ts)!==-1){this.isPopupOpen()&&this.refreshPopup();return}!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&e.target.className===Pr)?this.showPopup(e):(this.hidePopup(e),this.mode==="CheckBox"&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(gi)||this.overAllWrapper.classList.add(gi)))}this.targetElement()&&this.targetElement()!==""||e.preventDefault(),this.checkAndScrollParent()}},a.prototype.checkAndScrollParent=function(){var e=this.overAllWrapper?this.overAllWrapper.parentElement:null;if(e){var t=parseFloat(getComputedStyle(this.overAllWrapper).height),i=parseFloat(getComputedStyle(e).maxHeight);!isNaN(i)&&t>i&&(e.scrollTop=e.scrollHeight)}},a.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove(Ji),this.inputElement.removeAttribute("disabled"),Q(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add(Ji),this.inputElement.setAttribute("disabled","true"),Q(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},a.prototype.onBlurHandler=function(e,t){var i;if(this.isBlurDispatching&&this.isAngular){this.isBlurDispatching=!1;return}if(h(e)||(i=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i)){this.mode!=="CheckBox"?this.inputElement.focus():this.floatLabelType==="Auto"&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&E([this.overAllWrapper],"e-valid-input");return}if(this.floatLabelType==="Auto"&&this.overAllWrapper.classList.contains("e-outline")&&this.mode==="CheckBox"&&(h(this.value)||this.value.length===0)&&w([this.overAllWrapper],"e-valid-input"),this.mode==="CheckBox"&&V.isIE&&!h(e)&&!t){this.inputFocus=!1,this.overAllWrapper.classList.remove(gi);return}if(this.scrollFocusStatus){h(e)||e.preventDefault(),this.inputElement.focus(),this.scrollFocusStatus=!1;return}if(this.inputFocus=!1,this.overAllWrapper.classList.remove(gi),this.addTagOnBlur){var s=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),n=this.findListElement(this.list,"li","data-value",s),r=this.hideSelectedItem?Ne:O.selected,l=!!(n&&!n.classList.contains(r));l&&(this.updateListSelection(n,e),this.mode==="Delimiter"&&this.updateDelimeter(this.delimiterChar))}this.updateDataList(),this.refreshListItems(null),this.mode!=="Box"&&this.mode!=="CheckBox"&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(e),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,V.isDevice&&this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),oc(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder(),(this.allowFiltering||this.enableSelectionOrder===!0&&this.mode==="CheckBox")&&!h(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize(),z.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!h(this.overAllWrapper)&&!h(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.isBlurDispatching=!0,this.isAngular&&this.dispatchEvent(this.inputElement,"blur")},a.prototype.calculateWidth=function(){var e;if(this.overAllWrapper){if(!this.showDropDownIcon||this.overAllWrapper.querySelector(".e-label-top"))e=this.overAllWrapper.clientWidth-2*parseInt(getComputedStyle(this.inputElement).paddingRight,10);else{var t=this.dropIcon.offsetWidth+parseInt(getComputedStyle(this.dropIcon).marginRight,10);e=this.overAllWrapper.clientWidth-(t+2*parseInt(getComputedStyle(this.inputElement).paddingRight,10))}this.floatLabelType!=="Never"&&z.calculateWidth(e,this.overAllWrapper,this.getModuleName())}},a.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else h(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)},a.prototype.setPlaceholderSize=function(e){h(this.value)||this.value.length===0?this.dropIcon.offsetWidth!==0?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":E([this.searchWrapper],Mr):h(this.value)||(this.searchWrapper.removeAttribute("style"),w([this.searchWrapper],Mr))},a.prototype.refreshInputHight=function(){h(this.searchWrapper)||((!this.value||!this.value.length)&&(h(this.text)||this.text==="")?this.searchWrapper.classList.remove(Ds):this.searchWrapper.classList.add(Ds))},a.prototype.validateValues=function(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())},a.prototype.updateValueState=function(e,t,i){var s=t||[],n=i||[];if(this.initStatus&&this.validateValues(s,n)){var r={e,oldValue:(this.allowObjectBinding,i),value:(this.allowObjectBinding,t),isInteracted:!!e,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",r),this.enableVirtualization&&this.enableSelectionOrder&&this.mode==="CheckBox"&&(this.preventSetCurrentData=!1),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}this.selectedValueInfo=this.viewPortInfo},a.prototype.updateTempValue=function(){this.value?this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice():this.tempValues=this.value},a.prototype.updateAriaActiveDescendant=function(){!h(this.ulElement)&&!h(this.ulElement.getElementsByClassName("e-item-focus")[0])&&Q(this.inputElement,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id})},a.prototype.pageUpSelection=function(e,t){var i=this.list.querySelectorAll("li."+O.li+":not(."+Ne+"):not(.e-reorder-hide)"),s=e>=0?i[e+1]:i[0];if(this.fields.disabled&&s&&!this.enableVirtualization){for(;s&&(s.classList.contains("e-disabled")||s.classList.contains(Ne)||s.classList.contains(".e-reorder-hide")||s.classList.contains("e-list-group-item"));)s=s.previousElementSibling;if(!s)return}this.enableVirtualization&&t&&(s=this.liCollections.length>=e&&e>=0?this.liCollections[e]:this.liCollections[this.skeletonCount]),!h(s)&&s.classList.contains("e-virtual-list")&&(s=this.liCollections[this.skeletonCount]),this.enableVirtualization?(!h(s)&&!s.classList.contains("e-item-focus")?(this.isKeyBoardAction=!0,this.addListFocus(s),this.scrollTop(s,this.getIndexByValue(s.getAttribute("data-value")),this.keyboardEvent.keyCode)):this.viewPortInfo.startIndex===0&&(this.isKeyBoardAction=!0,this.scrollTop(s,this.getIndexByValue(s.getAttribute("data-value")),this.keyboardEvent.keyCode)),this.previousFocusItem=s):(this.isKeyBoardAction=!0,this.addListFocus(s),this.scrollTop(s,this.getIndexByValue(s.getAttribute("data-value")),this.keyboardEvent.keyCode))},a.prototype.pageDownSelection=function(e,t){var i=this.getItems(),s=this.list.querySelectorAll("li."+O.li+":not(."+Ne+"):not(.e-reorder-hide)"),n=e<=s.length?s[e-1]:s[s.length-1];if(this.fields.disabled&&n&&!this.enableVirtualization){for(;n&&(n.classList.contains("e-disabled")||n.classList.contains(Ne)||n.classList.contains(".e-reorder-hide")||n.classList.contains("e-list-group-item"));)n=n.nextElementSibling;if(!n)return}this.enableVirtualization&&this.skeletonCount>0&&(n=e<i.length?this.liCollections[e]:this.liCollections[i.length-1]),this.enableVirtualization&&t&&(n=e<=i.length?this.liCollections[e]:this.liCollections[i.length-1]),this.isKeyBoardAction=!0,this.addListFocus(n),this.previousFocusItem=n,this.scrollBottom(n,this.getIndexByValue(n.getAttribute("data-value")),!1,this.keyboardEvent.keyCode)},a.prototype.getItems=function(){return this.list||u.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+O.li).length>0?this.ulElement.querySelectorAll("."+O.li+":not(."+Ne+")"):[]},a.prototype.focusInHandler=function(e){var t=this;if(this.enabled){if(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&(this.mode!=="Delimiter"&&this.mode!=="CheckBox"?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.mode!=="CheckBox"&&(this.viewWrapper.style.display="none")),this.mode!=="CheckBox"&&this.searchWrapper.classList.remove(Ds),this.checkPlaceholderSize(),this.focused){var i={isInteracted:!!e,event:e};this.trigger("focus",i),this.focused=!1}return this.overAllWrapper.classList.contains(gi)||this.overAllWrapper.classList.add(gi),lc(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),this.allowResize&&this.setResize(),setTimeout(function(){t.calculateWidth()},150),!0}else return!1},a.prototype.showDelimWrapper=function(){this.mode==="CheckBox"?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add(Dr)},a.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove(Dr)},a.prototype.expandTextbox=function(){var e=5;if(this.placeholder){var t=this.placeholder.charCodeAt(0),i=44032<=t&&t<=55215?1.5:19968<=t&&t<=40959?2:1;e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length*i}this.inputElement.value.length>e?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=e},a.prototype.isPopupOpen=function(){return this.popupWrapper!==null&&this.popupWrapper.parentElement!==null},a.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())},a.prototype.checkTextLength=function(){return this.targetElement().length<1},a.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(e),this.mode==="CheckBox"&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(e),e.preventDefault());break}},a.prototype.updatePopupPosition=function(){this.refreshPopup()},a.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+O.focus);if(!h(e))if(this.inputElement.setAttribute("aria-activedescendant",e.id),this.allowFiltering){var t=this.popupWrapper.querySelector("."+qa);t&&t.setAttribute("aria-activedescendant",e.id)}else this.mode==="CheckBox"&&this.overAllWrapper.setAttribute("aria-activedescendant",e.id)},a.prototype.homeNavigation=function(e,t){if(this.removeFocus(),this.enableVirtualization){if(e)this.enableVirtualization&&this.viewPortInfo.startIndex!==0&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query));else if(this.enableVirtualization&&(!this.value&&this.viewPortInfo.endIndex!==this.totalItemCount||this.value&&this.value.length>0&&this.viewPortInfo.endIndex!==this.totalItemCount+this.value.length)){this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex();var i=new ee().clone();this.value&&this.value.length>0&&(i=this.getForQuery(this.value).clone(),i=i.skip(this.totalItemCount-this.itemCount)),this.resetList(this.dataSource,this.fields,i)}}this.UpdateSkeleton();var s=this.ulElement.querySelectorAll("li."+O.li+":not(."+Ne+"):not(.e-reorder-hide)");if(s.length>0){var n=s[e?0:s.length-1];this.enableVirtualization&&e&&(n=s[this.skeletonCount]),this.removeFocus(),n.classList.add(O.focus),this.enableVirtualization&&e?this.scrollTop(n,void 0,this.keyboardEvent.keyCode):t||this.scrollBottom(n,void 0,!1,this.keyboardEvent.keyCode),this.updateAriaActiveDescendant()}},a.prototype.updateSelectionList=function(){if(!h(this.value)&&this.value.length)for(var e=0;e<this.value.length;e++){var t=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[e]):this.value[e],i=this.getElementByValue(t);i&&!i.classList.contains(O.selected)&&i.classList.add("e-active")}},a.prototype.handleVirtualKeyboardActions=function(e,t){var i=this.list.querySelector("."+O.focus),s;switch(this.isKeyBoardAction=!0,e.keyCode){case 40:this.arrowDown(e,!0);break;case 38:this.arrowUp(e,!0);break;case 33:e.preventDefault(),i&&(s=this.getIndexByValue(this.previousFocusItem.getAttribute("data-value"))-1,this.pageUpSelection(s,!0),this.updateAriaAttribute());break;case 34:e.preventDefault(),i&&(s=this.getIndexByValue(this.previousFocusItem.getAttribute("data-value")),this.pageDownSelection(s,!0),this.updateAriaAttribute());break;case 35:case 36:this.isMouseScrollAction=!0,this.homeNavigation(e.keyCode===36,!0),this.isPreventScrollAction=!0;break}this.keyboardEvent=null,this.isScrollChanged=!0,this.isKeyBoardAction=!1},a.prototype.onKeyDown=function(e){if(!(this.readonly||!this.enabled&&this.mode!=="CheckBox")&&(this.preventSetCurrentData=!1,this.keyboardEvent=e,this.isPreventKeyAction&&this.enableVirtualization&&e.preventDefault(),this.keyCode=e.keyCode,this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124))){if(e.altKey){this.popupKeyActions(e);return}else if(this.isPopupOpen()){var t=this.list.querySelector("."+O.focus),i=void 0;switch(e.keyCode){case 36:case 35:this.isMouseScrollAction=!0,this.isKeyBoardAction=!0,this.homeNavigation(e.keyCode===36);break;case 33:e.preventDefault(),t&&(i=this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(i-this.getPageCount()-1),this.updateAriaAttribute());return;case 34:e.preventDefault(),t&&(i=this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(i+this.getPageCount()),this.updateAriaAttribute());return;case 38:this.isKeyBoardAction=!0,this.arrowUp(e);break;case 40:this.isKeyBoardAction=!0,this.arrowDown(e);break;case 27:e.preventDefault(),this.isKeyBoardAction=!0,this.hidePopup(e),this.mode==="CheckBox"&&this.inputElement.focus(),this.isKeyBoardAction=!1;return;case 13:e.preventDefault(),this.isKeyBoardAction=!0,this.mode!=="CheckBox"&&this.selectByKey(e),this.checkPlaceholderSize(),this.isKeyBoardAction=!1;return;case 32:this.isKeyBoardAction=!0,this.spaceKeySelection(e),this.isKeyBoardAction=!1;return;case 9:e.preventDefault(),this.isKeyBoardAction=!0,this.hidePopup(e),this.inputElement.focus(),this.overAllWrapper.classList.add(gi)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:e.preventDefault(),this.escapeAction();return}this.checkTextLength()&&this.keyNavigation(e),this.mode==="CheckBox"&&this.enableSelectionOrder&&(this.allowFiltering&&(this.previousFilterText=this.targetElement()),this.checkBackCommand(e)),this.expandTextbox(),this.mode==="CheckBox"&&this.showSelectAll||this.refreshPopup(),this.allowResize&&this.setResize(),this.isKeyBoardAction=!1}},a.prototype.arrowDown=function(e,t){e.preventDefault(),this.moveByList(1,t),this.keyAction=!0,(document.activeElement.classList.contains(qa)||this.mode==="CheckBox"&&!this.allowFiltering&&document.activeElement!==this.list)&&b.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()},a.prototype.arrowUp=function(e,t){e.preventDefault(),this.keyAction=!0;var i=this.list.querySelectorAll("li."+O.li+":not(."+Ne+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&this.mode==="CheckBox"&&!h(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+O.li+",li."+O.group+":not(."+Ne+"):not(.e-reorder-hide)"));var s=this.list.querySelector("li."+O.focus);this.focusFirstListItem=h(this.liCollections[0])?!1:this.liCollections[0].classList.contains("e-item-focus");var n=Array.prototype.slice.call(i).indexOf(s);n<=0&&this.mode==="CheckBox"&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"focus"})),this.moveByList(-1,t),this.updateAriaAttribute()},a.prototype.spaceKeySelection=function(e){if(this.mode==="CheckBox"){var t=this.list.querySelector("li."+O.focus),i=document.getElementsByClassName("e-selectall-parent")[0];if((!h(t)||i&&i.classList.contains("e-item-focus"))&&(e.preventDefault(),this.keyAction=!0),this.selectByKey(e),this.keyAction){var s=this.list.querySelector("li."+O.focus);!h(s)&&i&&i.classList.contains("e-item-focus")&&s.classList.remove("e-item-focus")}}this.checkPlaceholderSize()},a.prototype.checkBackCommand=function(e){(e.keyCode===8&&this.allowFiltering?this.targetElement()!==this.previousFilterText:this.targetElement()==="")?this.backCommand=!1:this.backCommand=!0},a.prototype.keyNavigation=function(e){if(this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e);break}else if(e.keyCode===8&&this.mode==="Delimiter"&&this.value&&this.value.length){e.preventDefault();var t=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];this.removeValue(this.value[this.value.length-1],e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}},a.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},a.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.allowObjectBinding&&(e=this.tempValues?this.tempValues.slice():[]),this.value&&this.validateValues(this.value,e)&&(this.mode!=="CheckBox"&&(this.value=e,(this.allowFiltering||this.allowCustomValue)&&this.refreshListItems(null),this.initialValueUpdate()),this.mode!=="Delimiter"&&this.mode!=="CheckBox"?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},a.prototype.scrollBottom=function(e,t,i,s,n){i===void 0&&(i=!1),s===void 0&&(s=null),n===void 0&&(n=!1),(!h(e)&&e.classList.contains("e-virtual-list")||this.enableVirtualization&&h(e))&&(e=this.liCollections[this.skeletonCount]);var r=e&&!isNaN(parseInt(window.getComputedStyle(e).marginBottom,10))?parseInt(window.getComputedStyle(e).marginBottom,10):0;this.isUpwardScrolling=!1;var l=this.list.querySelectorAll(".e-virtual-list").length,o=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,c=this.virtualListInfo&&this.virtualListInfo.startIndex?e.offsetTop+this.virtualListInfo.startIndex*(e.offsetHeight+r):e.offsetTop,p=this.list.offsetHeight,d=c-l*(e.offsetHeight+r)+(e.offsetHeight+r)-this.list.scrollTop,f=this.list.scrollTop+d-p,v=!1,g=c-l*(e.offsetHeight+r)+(e.offsetHeight+r)-this.list.scrollTop;if(g=this.fields.groupBy&&!h(this.fixedHeaderElement)?g-this.fixedHeaderElement.offsetHeight:g,t===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(d>p||!(g>0&&this.list.offsetHeight>g)){var m=e?e.getAttribute("data-value"):null,C=s===34?this.getPageCount()-1:1;!this.enableVirtualization||this.isKeyBoardAction||i?this.isKeyBoardAction&&this.enableVirtualization&&o&&m===o&&s!==35&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.list.scrollTop+=(e.offsetHeight+r)*C,this.isPreventKeyAction=this.isScrollerAtEnd()?!1:this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&s===35?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):(s===34&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=f):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?n&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight+this.listItemHeight*2:this.virtualListInfo.startIndex*this.listItemHeight:0,v=this.isKeyBoardAction}this.isKeyBoardAction=v},a.prototype.scrollTop=function(e,t,i){i===void 0&&(i=null);var s=this.list.querySelectorAll(".e-virtual-list").length,n=e&&!isNaN(parseInt(window.getComputedStyle(e).marginBottom,10))?parseInt(window.getComputedStyle(e).marginBottom,10):0,r=this.virtualListInfo&&this.virtualListInfo.startIndex?e.offsetTop+this.virtualListInfo.startIndex*(e.offsetHeight+n):e.offsetTop,l=r-s*(e.offsetHeight+n)-this.list.scrollTop,o=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;l=this.fields.groupBy&&!ni(this.fixedHeaderElement)?l-this.fixedHeaderElement.offsetHeight:l;var c=r-s*(e.offsetHeight+n)+(e.offsetHeight+n)-this.list.scrollTop,p=this.enableVirtualization&&this.getModuleName()==="autocomplete"&&l<=0;if(t===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(l<0||p){var d=e?e.getAttribute("data-value"):null,f=i===33?this.getPageCount()-2:1;this.enableVirtualization&&this.isKeyBoardAction&&o&&d===o&&i!==36&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTop-=(e.offsetHeight+n)*f,this.isPreventKeyAction=this.list.scrollTop!==0?this.isPreventKeyAction:!1,this.isPreventScrollAction=!1):this.enableVirtualization&&i===36?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):(i===33&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+l)}else c>0&&this.list.offsetHeight>c||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!h(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},a.prototype.isScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},a.prototype.selectListByKey=function(e){var t=this.list.querySelector("li."+O.focus),i=this.value&&this.value.length?this.value.length:0,s;if(t!==null){if(e.preventDefault(),t.classList.contains("e-active")&&(i=i-1),this.isValidLI(t)&&i<this.maximumSelectionLength){this.updateListSelection(t,e),this.addListFocus(t),this.mode==="CheckBox"?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!h(this.fields.groupBy)&&(s=t.firstElementChild.lastElementChild,this.findGroupStart(s),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e);var n=this.targetElement().trim()!=="";this.makeTextBoxEmpty(),this.mode!=="CheckBox"&&this.refreshListItems(t.textContent,n),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()}else!this.isValidLI(t)&&i<this.maximumSelectionLength&&(s=t.firstElementChild.lastElementChild,s.classList.contains("e-check")?this.selectAllItem(!1,e,t):this.selectAllItem(!0,e,t));this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup(e)}var r=document.getElementsByClassName("e-selectall-parent")[0];if(r&&r.classList.contains("e-item-focus")){var l=r.childNodes[0];if(l.classList.contains("e-check")){l.classList.remove("e-check");var o={module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",o),this.selectAllItem(!1,e,t)}else{l.classList.add("e-check");var o={module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",o),this.selectAllItem(!0,e,t)}}this.refreshPlaceHolder()},a.prototype.refreshListItems=function(e,t){if((this.allowFiltering||this.mode==="CheckBox"&&this.enableSelectionOrder===!0||this.allowCustomValue)&&this.mainList&&this.listData){var i=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;if(this.enableVirtualization)if(this.allowCustomValue&&this.virtualCustomData&&e==null&&this.virtualCustomData&&this.viewPortInfo&&this.viewPortInfo.startIndex===0&&this.viewPortInfo.endIndex===this.itemCount)this.virtualCustomData=null,this.renderItems(this.mainData,this.fields);else if(this.allowFiltering&&t){if(this.updateInitialData(),this.onActionComplete(i,this.mainData),this.isVirtualTrackHeight=!1,this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0){var s=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});s.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(s)}}else this.onActionComplete(this.list,this.listData);else this.onActionComplete(i,this.mainData);this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}else!h(this.fields.groupBy)&&this.value&&this.value.length&&this.refreshSelection()},a.prototype.removeSelectedChip=function(e){var t=this.chipCollectionWrapper.querySelector("span."+ei),i;if(t!==null){h(this.value)||(this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice()),i=t.nextElementSibling,i!==null&&(this.removeChipSelection(),this.addChipSelection(i,e));var s=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(t.getAttribute("data-value"))):t.getAttribute("data-value");this.removeValue(s,e),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty()}this.closePopupOnSelect&&this.hidePopup(e),this.checkPlaceholderSize()},a.prototype.moveByTop=function(e){var t=this.list.querySelectorAll("li."+O.li),i;t.length>1&&(this.removeFocus(),i=e?0:t.length-1,this.addListFocus(t[i]),this.scrollBottom(t[i],i)),this.updateAriaAttribute()},a.prototype.clickHandler=function(e){var t=e.target,i=t.className,s=document.getElementsByClassName("e-selectall-parent")[0];(i==="e-input-filter e-input"||i==="e-input-group e-control-wrapper e-input-focus")&&s.classList.contains("e-item-focus")&&s.classList.remove("e-item-focus")},a.prototype.moveByList=function(e,t){if(this.list){var i=this.list.querySelectorAll("li."+O.li+":not(."+Ne+"):not(.e-reorder-hide)");this.mode==="CheckBox"&&this.enableGroupCheckBox&&!h(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+O.li+",li."+O.group+":not(."+Ne+"):not(.e-reorder-hide)"));var s=this.list.querySelector("li."+O.focus);this.enableVirtualization&&t&&!h(this.currentFocuedListElement)&&(s=this.getElementByValue(this.getFormattedValue(this.currentFocuedListElement.getAttribute("data-value"))));var n=-1,r=document.getElementsByClassName("e-selectall-parent")[0];if(this.mode==="CheckBox"&&this.showSelectAll&&e===1&&!h(r)&&!r.classList.contains("e-item-focus")&&this.list.getElementsByClassName("e-item-focus").length===0&&this.liCollections.length>1)!this.focusFirstListItem&&r.classList.contains("e-item-focus")?r.classList.remove("e-item-focus"):r.classList.contains("e-item-focus")||r.classList.add("e-item-focus");else if(i.length){this.mode==="CheckBox"&&this.showSelectAll&&!h(r&&e===-1)&&(!this.focusFirstListItem&&r.classList.contains("e-item-focus")?r.classList.remove("e-item-focus"):this.focusFirstListItem&&!r.classList.contains("e-item-focus")&&r.classList.add("e-item-focus"));for(var l=0;l<i.length;l++)if(i[l]===s){n=l;break}if(e>0)n<i.length-1&&(this.removeFocus(),this.enableVirtualization&&t?this.addListFocus(i[n]):this.enableVirtualization&&i[n+1].classList.contains("e-virtual-list")?this.addListFocus(i[this.skeletonCount]):this.addListFocus(i[++n]),n>-1&&(this.updateCheck(i[n]),this.scrollBottom(i[n],n),this.currentFocuedListElement=i[n]));else if(n>0)if(this.enableVirtualization){var o=i[n-1].classList.contains("e-virtual-list"),c=t?n:n-1;(t||!o)&&this.removeFocus(),(t||!o)&&(this.addListFocus(i[c]),this.updateCheck(i[c]),this.scrollTop(i[c],n),this.currentFocuedListElement=i[c])}else this.removeFocus(),this.addListFocus(i[--n]),this.updateCheck(i[n]),this.scrollTop(i[n],n)}}var p=this.list?this.list.querySelector(".e-item-focus"):null;if(this.isDisabledElement(p)){if(this.list.querySelectorAll(".e-list-item:not(.e-hide-listitem):not(.e-disabled)").length===0||this.keyCode===38&&this.mode==="CheckBox"&&this.enableGroupCheckBox&&!h(this.fields.groupBy)&&p===this.list.querySelector("li.e-list-group-item")){this.removeFocus();return}var l=this.getIndexByValue(p.getAttribute("data-value"));l===0&&(e=1),l===this.list.querySelectorAll(".e-list-item:not(.e-hide-listitem)").length-1&&(e=-1),this.moveByList(e)}},a.prototype.getElementByValue=function(e){for(var t,i=this.getItems(),s=0,n=i;s<n.length;s++){var r=n[s];if(this.getFormattedValue(r.getAttribute("data-value"))===e){t=r;break}}return t},a.prototype.updateCheck=function(e){if(this.mode==="CheckBox"&&this.enableGroupCheckBox&&!h(this.fields.groupBy)){var t=e.firstElementChild.lastElementChild;t.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active")}},a.prototype.moveBy=function(e,t){var i,s=this.chipCollectionWrapper.querySelectorAll("span."+Bi),n=this.chipCollectionWrapper.querySelector("span."+ei);n===null?e<0&&this.addChipSelection(s[s.length-1],t):e<0?(i=n.previousElementSibling,i!==null&&(this.removeChipSelection(),this.addChipSelection(i,t))):(i=n.nextElementSibling,this.removeChipSelection(),i!==null&&this.addChipSelection(i,t))},a.prototype.chipClick=function(e){if(this.enabled){var t=A(e.target,"."+Bi);this.removeChipSelection(),this.addChipSelection(t,e)}},a.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},a.prototype.addChipSelection=function(e,t){E([e],ei),this.trigger("chipSelection",t)},a.prototype.onChipRemove=function(e){if(!(e.which===3||e.button===2)&&this.enabled&&!this.readonly){var t=e.target.parentElement,i=t.getAttribute("data-value"),s=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(i)):this.getFormattedValue(i);if(this.allowCustomValue&&(i!=="false"&&s===!1||!h(s)&&s.toString()==="NaN")&&(s=i),this.isPopupOpen()&&this.mode!=="CheckBox"&&this.hidePopup(e),this.inputFocus||this.inputElement.focus(),this.removeValue(s,e),s=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",s):s,h(this.findListElement(this.list,"li","data-value",s))&&this.mainList&&this.listData){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&this.floatLabelType==="Never"?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},a.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},a.prototype.refreshPlaceHolder=function(){this.placeholder&&this.floatLabelType==="Never"?this.value&&this.value.length||!h(this.text)&&this.text!==""?this.inputElement.placeholder="":this.inputElement.placeholder=sn(this.placeholder):this.setFloatLabelType(),this.expandTextbox()},a.prototype.removeAllItems=function(e,t,i,s,n){var r=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(e),l=this.value.slice(0);l.splice(r,1),this.setProperties({value:[].concat([],l)},!0),s.setAttribute("aria-selected","false");var o=this.hideSelectedItem?Ne:O.selected;w([s],o),this.notify("activeList",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:s,e:this,index:r}),this.invokeCheckboxSelection(s,t,i);var c=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",e):e;this.updateMainList(!0,c,n),this.updateChipStatus()},a.prototype.invokeCheckboxSelection=function(e,t,i){this.notify("updatelist",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:t}),this.updateAriaActiveDescendant(),this.value&&this.value.length!==this.mainData.length&&this.mode==="CheckBox"&&this.showSelectAll&&!(this.isSelectAll||i)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"})},a.prototype.removeValue=function(e,t,i,s){var n=this,r=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(this.getFormattedValue(e));r===-1&&this.allowCustomValue&&!h(e)&&(r=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(e.toString()));var l=t&&t.target;s=s||l&&l.classList.contains("e-close-hooker")?!0:null;var o=this.hideSelectedItem?Ne:O.selected;if(r!==-1){var c=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",e):e,p=this.virtualSelectAll?null:this.findListElement(this.list,"li","data-value",c),d=this.allowObjectBinding?e:this.getDataByValue(e),f={e:t,item:p,itemData:d,isInteracted:!!t,cancel:!1};this.trigger("removing",f,function(v){if(v.cancel)n.removeIndex++;else{n.isRemoveSelection=n.enableVirtualization?!0:n.isRemoveSelection,n.currentRemoveValue=n.allowObjectBinding?I(n.fields.value?n.fields.value:"",e):e,n.virtualSelectAll=!1;var g=n.value.slice(0);if(g.splice(r,1),n.enableVirtualization&&n.mode==="CheckBox"&&n.selectedListData.splice(r,1),n.setProperties({value:[].concat([],g)},!0),n.enableVirtualization){var m=r===0&&n.text.split(n.delimiterChar)&&n.text.split(n.delimiterChar).length===1?n.text.replace(n.text.split(n.delimiterChar)[r],""):r===0?n.text.replace(n.text.split(n.delimiterChar)[r]+n.delimiterChar,""):n.text.replace(n.delimiterChar+n.text.split(n.delimiterChar)[r],"");n.setProperties({text:m.toString()},!0)}if(p!==null){var C=n.allowObjectBinding?I(n.fields.value?n.fields.value:"",e):e,k=n.findListElement(n.mainList,"li","data-value",C);p.setAttribute("aria-selected","false"),w([p],o),k&&(k.setAttribute("aria-selected","false"),w([p,k],o)),n.notify("activeList",{module:"CheckBoxSelection",enable:n.mode==="CheckBox",li:p,e:n,index:r}),n.invokeCheckboxSelection(p,t,s)}var T=n.allowObjectBinding?I(n.fields.value?n.fields.value:"",e):e;n.hideSelectedItem&&n.fields.groupBy&&p&&n.hideGroupItem(T),n.hideSelectedItem&&n.fixedHeaderElement&&n.fields.groupBy&&n.mode!=="CheckBox"&&n.isPopupOpen()&&u.prototype.scrollStop.call(n),n.updateMainList(!0,T),n.removeChip(T,s),n.updateChipStatus();var x=n.value&&n.value.length?n.value.length:0;if(x<n.maximumSelectionLength){var L=n.list.querySelectorAll("li."+O.li+":not(.e-active)");w(L,"e-disable")}n.trigger("removed",v);var N=t&&t.currentTarget,R=N&&N.classList.contains("e-selectall-parent")?!0:null;if(!n.changeOnBlur&&!s&&t&&i&&!R&&n.isSelectAllTarget&&n.updateValueState(t,n.value,n.tempValues),i&&(n.selectAllEventData.push(d),n.selectAllEventEle.push(p)),i===1){n.changeOnBlur||n.updateValueState(t,n.value,n.tempValues);var Y={event:t,items:n.selectAllEventEle,itemData:n.selectAllEventData,isInteracted:!!t,isChecked:!1};n.trigger("selectedAll",Y),n.selectAllEventData=[],n.selectAllEventEle=[]}s&&(i===1||i===null)&&n.clearAllCallback(t,s),n.isPopupOpen()&&p&&p.parentElement.classList.contains("e-reorder")&&(n.hideSelectedItem&&n.value&&Array.isArray(n.value)&&n.value.length>0&&n.totalItemsCount(),n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}))}})}},a.prototype.updateMainList=function(e,t,i){if(this.allowFiltering||this.mode==="CheckBox"){var s=i||this.findListElement(this.mainList,"li","data-value",t);s&&(e?(s.setAttribute("aria-selected","false"),w([s],this.hideSelectedItem?Ne:O.selected),this.mode==="CheckBox"&&w([s.firstElementChild.lastElementChild],"e-check")):(s.setAttribute("aria-selected","true"),E([s],this.hideSelectedItem?Ne:O.selected),this.mode==="CheckBox"&&E([s.firstElementChild.lastElementChild],"e-check")))}},a.prototype.removeChip=function(e,t){if(this.chipCollectionWrapper&&!(this.enableVirtualization&&t)){var i=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);i&&ft(i)}},a.prototype.setWidth=function(e){h(e)||(typeof e=="number"?this.overAllWrapper.style.width=fe(e):typeof e=="string"&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:fe(e)))},a.prototype.updateChipStatus=function(){this.value&&this.value.length?(h(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),(this.mode==="Delimiter"||this.mode==="CheckBox")&&this.showDelimWrapper(),this.showOverAllClear()):(h(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),h(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},a.prototype.indexOfObjectInArray=function(e,t){for(var i=function(r){var l=t[r];if(Object.keys(e).every(function(o){return l.hasOwnProperty(o)&&l[o]===e[o]}))return{value:r}},s=0;s<t.length;s++){var n=i(s);if(typeof n=="object")return n.value}return-1},a.prototype.addValue=function(e,t,i){this.value||(this.value=[]);var s=this.allowObjectBinding?this.getDataByValue(e):e;if(this.allowObjectBinding&&!this.isObjectInArray(this.getDataByValue(e),this.value)||!this.allowObjectBinding&&this.value.indexOf(s)<0){if(this.setProperties({value:[].concat([],this.value,[s])},!0),this.enableVirtualization&&!this.isSelectAllLoop){var n=this.viewWrapper.innerHTML,r=void 0;n+=this.value.length===1?"":this.delimiterChar+" ",r=this.getOverflowVal(this.value.length-1),n+=r,r=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,n)}if(this.enableVirtualization&&this.mode==="CheckBox"){var l=[];this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];var r=t,o=this.text!=null&&this.text!==""?this.text+this.delimiterChar+r:r;l.push(o),this.setProperties({text:l.toString()},!0)}}var c=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),c&&(this.addListFocus(c),this.addListSelection(c)),this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},a.prototype.checkMaxSelection=function(){var e=this.value&&this.value.length?this.value.length:0;if(e===this.maximumSelectionLength){var t=this.list.querySelectorAll("li."+O.li+".e-active");w(t,"e-disable");var i=this.list.querySelectorAll("li."+O.li+":not(.e-active)");E(i,"e-disable")}if(e<this.maximumSelectionLength){var s=this.list.querySelectorAll("li."+O.li);w(s,"e-disable")}},a.prototype.dispatchSelect=function(e,t,i,s,n,r,l){var o=this,c=this.listData;if(this.initStatus&&!s){e=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",e):e;var p=r||this.getDataByValue(e),d={e:t,item:i,itemData:p,isInteracted:!!t,cancel:!1};this.trigger("select",d,function(f){if(!f.cancel){if(n&&(o.selectAllEventData.push(p),o.selectAllEventEle.push(i)),n===1){var v={event:t,items:o.selectAllEventEle,itemData:o.selectAllEventData,isInteracted:!!t,isChecked:!0};o.trigger("selectedAll",v),o.selectAllEventData=[]}o.allowCustomValue&&o.isServerRendered&&o.listData!==c&&(o.listData=c),e=o.allowObjectBinding?o.getDataByValue(e):e,o.enableVirtualization&&(h(o.selectedListData)?o.selectedListData=[o.getDataByValue(e)]:r?Array.isArray(o.selectedListData)?o.selectedListData.push(r):o.selectedListData=[o.selectedListData,r]:Array.isArray(o.selectedListData)?o.selectedListData.push(o.getDataByValue(e)):o.selectedListData=[o.selectedListData,o.getDataByValue(e)]),(o.enableVirtualization&&e||!o.enableVirtualization)&&o.updateListSelectEventCallback(e,i,t,l),o.hideSelectedItem&&o.fixedHeaderElement&&o.fields.groupBy&&o.mode!=="CheckBox"&&u.prototype.scrollStop.call(o)}})}},a.prototype.addChip=function(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)},a.prototype.removeChipFocus=function(){var e=this.chipCollectionWrapper.querySelectorAll("span."+Bi+"."+ei);if(w(e,ei),V.isDevice)for(var t=this.chipCollectionWrapper.querySelectorAll("span."+Ts.split(" ")[0]),i=0;i<t.length;i++)t[i].style.display="none"},a.prototype.onMobileChipInteraction=function(e){var t=A(e.target,"."+Bi),i=t.querySelector("span."+Ts.split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains(ei)||(this.removeChipFocus(),i.style.display="",t.classList.add(ei)),this.refreshPopup(),e.preventDefault())},a.prototype.multiCompiler=function(e){var t=!1;if(typeof e!="function"&&e)try{t=!!Ee(e,document).length}catch(i){t=!1}return t},a.prototype.encodeHtmlEntities=function(e){return e.replace(/[\u00A0-\u9999<>&]/g,function(t){return"&#"+t.charCodeAt(0)+";"})},a.prototype.getChip=function(e,t,i){var s=this,n={text:t,value:t},r=this.createElement("span",{className:Bi,attrs:{"data-value":t,title:e}}),l,o=this.createElement("span",{className:vc}),c=this.createElement("span",{className:Ts});if(this.mainData&&(n=this.getDataByValue(t)),this.valueTemplate&&!h(n)){var p=this.multiCompiler(this.valueTemplate);typeof this.valueTemplate!="function"&&p?l=Ie(M(this.valueTemplate,document).innerHTML.trim()):l=Ie(this.valueTemplate);var d=l(n,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,o);d&&d.length>0&&ye(d,o),this.renderReactTemplates()}else this.enableHtmlSanitizer?o.innerText=e:o.innerHTML=this.encodeHtmlEntities(e.toString());r.appendChild(o);var f={isInteracted:!!i,itemData:n,e:i,setClass:function(v){E([r],v)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",f,function(v){v.cancel||(V.isDevice?(r.classList.add(Cc),ye([c],r),c.style.display="none",b.add(r,"click",s.onMobileChipInteraction,s)):(b.add(r,"mousedown",s.chipClick,s),s.showClearButton&&r.appendChild(c)),b.add(c,"mousedown",s.onChipRemove,s),s.chipCollectionWrapper.appendChild(r),!s.changeOnBlur&&i&&s.updateValueState(i,s.value,s.tempValues))})},a.prototype.calcPopupWidth=function(){var e=fe(this.popupWidth);if(e.indexOf("%")>-1){var t=this.componentWrapper.offsetWidth*parseFloat(e)/100;e=t.toString()+"px"}return e},a.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},a.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},a.prototype.listOption=function(e,t){var i=!h(t.iconCss),s=h(t.properties)?t:t.properties;return this.listCurrentOptions=t.text!==null||t.value!==null?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},ae(this.listCurrentOptions,this.listCurrentOptions,t,!0),this.mode==="CheckBox"&&this.notify("listoption",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",dataSource:e,fieldProperty:s}),this.listCurrentOptions},a.prototype.renderPopup=function(){var e=this;if(this.list||u.prototype.render.call(this),this.popupObj&&document.body.contains(this.popupObj.element)&&this.allowFiltering){this.refreshPopup();return}if(!this.popupObj&&!h(this.popupWrapper)){document.body.appendChild(this.popupWrapper);var t=this.popupWrapper.querySelector("."+wc);this.mode==="CheckBox"&&!this.allowFiltering&&t&&this.filterParent&&(t.remove(),this.filterParent=null);var i=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),i-=this.header.offsetHeight,this.isUpdateHeaderHeight=this.header.offsetHeight!==0),ye([this.list],this.popupWrapper),!this.list.classList.contains(O.noData)&&this.getItems()[1]&&(this.listItemHeight=this.getItems()[1].offsetHeight+parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom,10)),this.enableVirtualization&&!this.list.classList.contains(O.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")&&this.list.querySelector(".e-list-parent")){var s=this.createElement("div",{className:"e-virtual-ddl-content"});s.style.cssText=this.getTransformValues(),this.list.appendChild(s).appendChild(this.list.querySelector(".e-list-parent"))}else this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues());if(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+O.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&this.totalItemsCount(),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var n=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});n.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(n)}}if(this.footerTemplate&&(this.setFooterTemplate(),i-=this.footer.offsetHeight,this.isUpdateFooterHeight=this.footer.offsetHeight!==0),this.mode==="CheckBox"&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),i-=this.selectAllHeight):this.mode==="CheckBox"&&!this.showSelectAll&&!this.headerTemplate&&!this.footerTemplate?(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),i=parseInt(this.popupHeight,10)):this.mode==="CheckBox"&&!this.showSelectAll&&(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),i=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(i-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(i-=this.footer.offsetHeight)),this.mode==="CheckBox"){var r={module:"CheckBoxSelection",enable:this.mode==="CheckBox",popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",r),i-=this.searchBoxHeight),E([this.popupWrapper],"e-checkbox")}this.popupHeight!=="auto"?(this.list.style.maxHeight=fe(i),this.popupWrapper.style.maxHeight=fe(this.popupHeight)):this.list.style.maxHeight=fe(this.popupHeight),this.popupObj=new Vi(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){if(e.popupObj.element.parentElement){e.popupObj.unwireScrollEvents();var l=e.popupWrapper.querySelector("."+qa);e.mode==="CheckBox"&&l&&document.activeElement===l&&l.blur(),G(e.popupObj.element)}},open:function(){if(e.popupObj.resolveCollision(),!e.isFirstClick){var l=e.list.querySelector("ul");l&&(e.mode!=="CheckBox"&&(e.allowFiltering||e.allowCustomValue)&&e.targetElement().trim()!==""||(e.mainList=l.cloneNode?l.cloneNode(!0):l)),e.isFirstClick=!0}e.popupObj.wireScrollEvents(),!(e.mode!=="CheckBox"&&(e.allowFiltering||e.allowCustomValue)&&e.targetElement().trim()!=="")&&!e.enableVirtualization&&(e.loadTemplate(),e.enableVirtualization&&e.mode==="CheckBox"&&e.UpdateSkeleton()),e.isPreventScrollAction=!0,e.setScrollPosition(),!e.list.classList.contains(O.noData)&&e.getItems()[1]&&e.getItems()[1].offsetHeight!==0&&(e.listItemHeight=e.getItems()[1].offsetHeight+parseInt(window.getComputedStyle(e.getItems()[1]).marginBottom,10),e.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(e.list.getElementsByClassName("e-virtual-ddl-content")[0].style=e.getTransformValues())),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:e.mode==="CheckBox",value:"focus"}),e.enableVirtualization&&(e.notify("bindScrollEvent",{module:"VirtualScroll",component:e.getModuleName(),enable:e.enableVirtualization}),setTimeout(function(){e.value?e.updateSelectionList():e.viewPortInfo&&e.viewPortInfo.offsets.top&&(e.list.scrollTop=e.viewPortInfo.offsets.top)},5))},targetExitViewport:function(){V.isDevice||e.hidePopup()}}),this.checkCollision(this.popupWrapper),this.popupContentElement=this.popupObj.element.querySelector(".e-content"),this.mode==="CheckBox"&&V.isDevice&&this.allowFiltering&&this.isDeviceFullScreen&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),this.allowResize&&this.setResize(),this.popupObj.close(),this.popupWrapper.style.visibility=""}},a.prototype.checkCollision=function(e){if(!(this.mode==="CheckBox"&&V.isDevice&&this.allowFiltering&&this.isDeviceFullScreen)){var t=_s(e);t.length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision()}},a.prototype.setHeaderTemplate=function(){var e;this.header&&this.header.remove(),this.header=this.createElement("div"),E([this.header],Ec);var t=this.multiCompiler(this.headerTemplate);typeof this.headerTemplate!="function"&&t?e=Ie(M(this.headerTemplate,document).innerHTML.trim()):e=Ie(this.headerTemplate);var i=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);i&&i.length>0&&ye(i,this.header),this.mode==="CheckBox"&&this.showSelectAll?nt([this.header],this.popupWrapper):ye([this.header],this.popupWrapper),b.add(this.header,"mousedown",this.onListMouseDown,this)},a.prototype.setFooterTemplate=function(){var e;this.footer&&this.footer.remove(),this.footer=this.createElement("div"),E([this.footer],Sc);var t=this.multiCompiler(this.footerTemplate);typeof this.footerTemplate!="function"&&t?e=Ie(M(this.footerTemplate,document).innerHTML.trim()):e=Ie(this.footerTemplate);var i=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);i&&i.length>0&&ye(i,this.footer),ye([this.footer],this.popupWrapper),b.add(this.footer,"mousedown",this.onListMouseDown,this)},a.prototype.updateInitialData=function(){var e=this.selectData;if(this.renderItems(e,this.fields),this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.previousStartIndex=0,this.previousEndIndex=this.itemCount,this.dataSource instanceof P?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.getSkeletonCount(),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof P)||this.dataSource instanceof P&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.UpdateSkeleton(),this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0){var t=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});t.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(t)}this.listData=e,this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()),this.enableVirtualization&&this.notify("setGeneratedData",{module:"VirtualScroll"})},a.prototype.clearAll=function(e){if(this.enabled&&!this.readonly){var t=void 0;if(this.setDynValue=!1,this.isClearAllAction=!0,this.value&&this.value.length>0){this.allowFiltering&&(this.refreshListItems(null),this.mode==="CheckBox"&&this.targetInputElement&&(this.targetInputElement.value=""));var i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length;t=this.value[this.removeIndex])this.removeValue(t,e,null,!0);this.selectedElementID=null,this.inputElement.removeAttribute("aria-activedescendant")}else this.clearAllCallback(e);this.checkAndResetCache(),z.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!h(this.overAllWrapper)&&!h(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.enableVirtualization&&(this.updateInitialData(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.isCustomDataUpdated||this.notify("setGeneratedData",{module:"VirtualScroll"})),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=this.itemCount),this.isClearAllAction=!1}this.isClearAllItem=!0,b.add(document,"mouseup",this.preventSelection,this)},a.prototype.preventSelection=function(e){this.isClearAllItem&&e.stopPropagation(),this.isClearAllItem=!1,b.remove(document,"mouseup",this.preventSelection)},a.prototype.clearAllCallback=function(e,t){var i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&this.mode!=="CheckBox"||this.allowCustomValue)){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),this.mode!=="Box"&&(!this.inputFocus||this.mode==="CheckBox")&&this.updateDelimView(),this.inputElement.value!==""&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.allowResize&&this.setResize(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,i),this.mode!=="CheckBox"&&this.inputElement.focus()),this.mode==="CheckBox"&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(h(this.value)||this.value.length===0)&&this.updateValueState(e,this.value,this.tempValues)),!this.changeOnBlur&&t&&(h(this.value)||this.value.length===0)&&this.updateValueState(e,this.value,this.tempValues),this.mode==="CheckBox"&&this.enableGroupCheckBox&&!h(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},a.prototype.windowResize=function(){this.refreshPopup(),(!this.inputFocus||this.mode==="CheckBox")&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()},a.prototype.resetValueHandler=function(e){if(!h(this.inputElement)){var t=A(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=i}}},a.prototype.wireEvent=function(){b.add(this.componentWrapper,"mousedown",this.wrapperClick,this),b.add(window,"resize",this.windowResize,this),b.add(this.inputElement,"focus",this.focusInHandler,this),b.add(this.inputElement,"keydown",this.onKeyDown,this),b.add(this.inputElement,"keyup",this.keyUp,this),this.mode!=="CheckBox"&&b.add(this.inputElement,"input",this.onInput,this),b.add(this.inputElement,"blur",this.onBlurHandler,this),b.add(this.componentWrapper,"mouseover",this.mouseIn,this);var e=A(this.inputElement,"form");e&&b.add(e,"reset",this.resetValueHandler,this),b.add(this.componentWrapper,"mouseout",this.mouseOut,this),b.add(this.overAllClear,"mousedown",this.clearAll,this),b.add(this.inputElement,"paste",this.pasteHandler,this)},a.prototype.onInput=function(e){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,V.isDevice&&V.info.name==="mozilla"&&this.search(e)},a.prototype.pasteHandler=function(e){var t=this;setTimeout(function(){t.expandTextbox(),t.search(e)})},a.prototype.search=function(e){var t=this;if(this.preventSetCurrentData=!1,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,h(e)||(this.keyCode=e.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(e),this.openClick(e),this.checkTextLength()&&!this.allowFiltering&&!h(e)&&e.keyCode!==8)this.focusAtFirstListItem();else{var i=this.targetElement();if(this.allowFiltering){this.allowCustomValue&&(this.isRemoteSelection=!0),this.checkAndResetCache(),this.isRequesting=!1;var s={preventDefaultAction:!1,text:this.targetElement(),updateData:function(v,g,m){s.cancel||(t.isFiltered=!0,t.customFilterQuery=g,t.remoteFilterAction=!0,t.isCustomFiltering=!0,t.dataUpdater(v,g,m))},event:e,cancel:!1};this.trigger("filtering",s,function(v){t.isFilterPrevented=v.cancel,v.cancel||!t.isFiltered&&!v.preventDefaultAction&&(t.filterAction=!0,t.isFilteringAction=!0,t.dataSource instanceof P&&t.allowCustomValue&&(t.isCustomRendered=!1),t.dataUpdater(t.dataSource,null,t.fields),t.isFilteringAction=!1)})}else if(this.allowCustomValue){var n=new ee;n=this.allowFiltering&&i!==""?n.where(this.fields.text,"startswith",i,this.ignoreCase,this.ignoreAccent):n,this.enableVirtualization?this.dataUpdater(this.dataSource,n,this.fields):this.dataUpdater(this.mainData,n,this.fields),this.UpdateSkeleton()}else{var r=this.list.querySelectorAll("li."+O.li+":not(.e-hide-listitem)"),l=this.typeOfData(this.listData).typeof,o=wi(this.targetElement(),r,"StartsWith",this.ignoreCase);if(this.enableVirtualization&&this.targetElement().trim()!==""&&!this.allowFiltering){var c=!1;for((this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||this.incrementalEndIndex===0)&&(c=!0,this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),c=!1),(this.viewPortInfo.startIndex!==0||c)&&this.updateIncrementalView(0,this.itemCount),o=wi(this.targetElement(),this.incrementalLiCollections,this.filterType,!0,this.listData,this.fields,l);h(o)&&this.incrementalEndIndex<this.totalItemCount&&(this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),c=!0,(this.viewPortInfo.startIndex!==0||c)&&this.updateIncrementalView(0,this.itemCount),o=wi(this.targetElement(),this.incrementalLiCollections,this.filterType,!0,this.listData,this.fields,l),!!h(o));)if(h(o)&&this.incrementalEndIndex>=this.totalItemCount){this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100;break}if(o.index&&(!(this.viewPortInfo.startIndex>=o.index)||!(o.index>=this.viewPortInfo.endIndex))){var p=o.index-(this.itemCount/2-2)>0?o.index-(this.itemCount/2-2):0,d=p+this.itemCount>this.totalItemCount?this.totalItemCount:p+this.itemCount;p!==this.viewPortInfo.startIndex&&this.updateIncrementalView(p,d)}if(h(o.item))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var f=this.getIndexByValue(o.item.getAttribute("data-value"))-this.skeletonCount;if(f>this.itemCount/2){var p=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,d=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,d)}o.item=this.getElementByValue(o.item.getAttribute("data-value"))}o&&o.item&&(o.item=this.getElementByValue(o.item.getAttribute("data-value")))}o&&o.item?(this.addListFocus(o.item),this.list.scrollTop=o.item.offsetHeight*o.index):this.targetElement()!==""?this.removeFocus():this.focusAtFirstListItem()}}this.enableVirtualization&&this.allowFiltering&&this.getFilteringSkeletonCount()},a.prototype.preRender=function(){this.allowFiltering===null&&(this.allowFiltering=this.mode==="CheckBox"),this.preventSetCurrentData=!1,this.initializeData(),this.updateDataAttribute(this.htmlAttributes),u.prototype.preRender.call(this)},a.prototype.getLocaleName=function(){return"multi-select"},a.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0,this.isCustomRendered=!1,this.isRemoteSelection=!1,this.isSelectAllTarget=!0,this.isaddNonPresentItems=!1,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},a.prototype.updateData=function(e,t,i){var s="",n=this.mode==="Delimiter"||this.mode==="CheckBox",r=[],l,o=this.listData;if(this.enableVirtualization||(this.listData=this.mainData),!h(this.hiddenElement)&&!this.enableVirtualization&&(this.hiddenElement.innerHTML=""),!h(this.value)){for(var c=this.value.length,p="",d=function(x){var L=f.allowObjectBinding?I(f.fields.value?f.fields.value:"",f.value[x]):f.value[x],N=f.findListElement(h(f.mainList)?f.ulElement:f.mainList,"li","data-value",L);if(f.enableVirtualization&&(N=f.findListElement(h(f.list)?f.ulElement:f.list,"li","data-value",L)),h(N)&&!f.allowCustomValue&&!f.enableVirtualization&&f.listData&&f.listData.length>0)f.value.splice(x,1),x-=1,c-=1;else{if(f.listData)if(f.enableVirtualization){n&&!f.isDynamicRemoteVirtualData&&(s=f.delimiterWrapper&&f.delimiterWrapper.innerHTML===""?s:f.delimiterWrapper.innerHTML);var R=f.allowObjectBinding?I(f.fields.value?f.fields.value:"",f.value[f.value.length-1]):f.value[f.value.length-1];if(f.isRemoveSelection)s=f.text.replace(/,/g,e+" ")+e+" ",r=f.text.split(e);else{l=i&&n?f.text:f.getTextByValue(R);var Y=f.isDynamicRemoteVirtualData&&R!=null&&R!==""&&!i?f.getTextByValue(R):i?f.text:f.text&&f.text!==""?f.text+f.delimiterChar+l:l;s+=l+e+" ",r.push(Y),p=f.hiddenElement.innerHTML}if(t&&t.currentTarget&&t.currentTarget.classList.contains("e-chips-close")||t&&t.key==="Backspace"){var Oe=t.target.parentElement.getAttribute("data-value");if(t.key==="Backspace"){var xe=f.hiddenElement.lastChild;xe&&f.hiddenElement.removeChild(xe)}else f.hiddenElement.childNodes.forEach(function(H){H.value===Oe&&H.parentNode.removeChild(H)});p=f.hiddenElement.innerHTML}else p+="<option selected value='"+R+"'>"+x+"</option>";return v=x,"break"}else l=f.getTextByValue(L);else l=L;s+=l+e+" ",r.push(l)}p+='<option selected value="'+L+'">'+x+"</option>",v=x},f=this,v,g=0;g<c;g++){var m=d(g);if(g=v,m==="break")break}h(this.hiddenElement)||(this.isRemoveSelection?(this.findListElement(this.hiddenElement,"option","value",this.currentRemoveValue)&&this.hiddenElement.removeChild(this.findListElement(this.hiddenElement,"option","value",this.currentRemoveValue)),this.isRemoveSelection=!1):this.hiddenElement.innerHTML=p)}var C=t&&t.target&&t.target.classList.contains("e-chips-close");(!this.enableVirtualization||this.enableVirtualization&&this.mode!=="CheckBox"&&!C)&&this.setProperties({text:r.toString()},!0),n&&(this.updateWrapperText(this.delimiterWrapper,s),this.delimiterWrapper.setAttribute("id",$e("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));var k=t&&t.target,T=k&&k.classList.contains("e-close-hooker")?!0:null;(!this.changeOnBlur&&t&&!T||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=o,this.addValidInputClass()},a.prototype.initialTextUpdate=function(){if(h(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),t=[],i=0;e.length>i;i++){var s=this.getValueByText(e[i]);h(s)?this.allowCustomValue&&t.push(e[i]):t.push(s)}if(t&&t.length){var n=this.allowObjectBinding?this.getDataByValue(t):t;this.setProperties({value:n},!0)}}},a.prototype.renderList=function(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&this.list.querySelector(".e-ul").childElementCount===0)&&(e=!0),u.prototype.render.call(this,null,e),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.unwireListEvents(),this.wireListEvents()},a.prototype.initialValueUpdate=function(e,t){if(this.list){var i=void 0,s=void 0,n=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!h(this.value))for(var r=0;!h(this.value[r]);r++){n=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[r]):this.value[r],s=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",n);var l=!1;if(this.enableVirtualization){if(i=null,e!=null&&e.length>0){for(var o=0;o<e.length;o++)if(this.isPrimitiveData&&e[o]===n||!this.isPrimitiveData&&I(this.fields.value?this.fields.value:"value",e[o])===n){i=this.isPrimitiveData?e[o]:I(this.fields.text,e[o]),this.enableVirtualization&&(h(this.selectedListData)?this.selectedListData=[e[o]]:Array.isArray(this.selectedListData)?this.selectedListData.push(e[o]):this.selectedListData=[this.selectedListData,e[o]]);break}}h(i)&&this.allowCustomValue&&(!(this.dataSource instanceof P)||this.dataSource instanceof P&&t)&&(i=this.getTextByValue(n),l=!0)}else i=this.getTextByValue(n);if(s&&s.getAttribute("aria-selected")!=="true"||s&&s.getAttribute("aria-selected")==="true"&&this.hideSelectedItem&&(this.mode==="Box"||this.mode==="Default")||this.enableVirtualization&&n!=null&&i!=null&&!l){var c=[],p=this.isDynamicRemoteVirtualData&&i!=null&&i!==""&&r===0?i:this.text!=null&&this.text!==""&&!this.text.includes(i)?this.text+this.delimiterChar+i:i;c.push(p),this.setProperties({text:c.toString()},!0),this.addChip(i,n),this.addListSelection(s)}else if(!this.enableVirtualization&&n&&this.allowCustomValue||this.enableVirtualization&&n&&this.allowCustomValue&&(!(this.dataSource instanceof P)||this.dataSource instanceof P&&t)){var d=this.listData.length,f={};Pe(this.fields.text,n,f),Pe(this.fields.value,n,f);var v=this.popupWrapper.querySelector("."+O.noData);this.enableVirtualization||this.addItem(f,d),this.enableVirtualization&&(this.virtualCustomSelectData&&this.virtualCustomSelectData.length>=0?this.virtualCustomSelectData.push(f):this.virtualCustomSelectData=[f]),s=s||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",n),this.popupWrapper.contains(v)&&(this.list.setAttribute("style",v.getAttribute("style")),this.popupWrapper.replaceChild(this.list,v),this.wireListEvents());var c=[],p=this.text!=null&&this.text!==""?this.text+this.delimiterChar+i:i;c.push(p),this.setProperties({text:c.toString()},!0),this.addChip(i,n),this.addListSelection(s)}}this.mode==="CheckBox"?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,null,t),this.mode==="CheckBox"&&this.showSelectAll&&(h(this.value)||!this.value.length)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"}),this.mode==="Box"||this.mode==="Default"&&this.inputFocus?this.chipCollectionWrapper.style.display="":(this.mode==="Delimiter"||this.mode==="CheckBox")&&this.showDelimWrapper()}},a.prototype.updateActionCompleteData=function(e,t){this.value&&(!this.allowObjectBinding&&this.value.indexOf(e.getAttribute("data-value"))>-1||this.allowObjectBinding&&this.isObjectInArray(this.getDataByValue(e.getAttribute("data-value")),this.value))&&(this.mainList=this.ulElement,this.hideSelectedItem&&E([e],Ne))},a.prototype.updateAddItemList=function(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector("."+O.noData)&&e?(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),ft(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"))},a.prototype.updateDataList=function(){if(this.mainList&&this.ulElement&&!(this.isFiltered||this.filterAction||this.targetElement().trim())){var e=this.mainList.childElementCount<this.ulElement.childElementCount,t=this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0]&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount,i=this.itemTemplate&&this.ulElement.childElementCount>0&&!(this.ulElement.childElementCount<this.mainList.childElementCount)&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0);(e||t||i)&&(this.mainList=this.ulElement)}},a.prototype.isValidLI=function(e){return e&&!e.classList.contains(O.disabled)&&!e.classList.contains(O.group)&&e.classList.contains(O.li)},a.prototype.updateListSelection=function(e,t,i){var s=e.getAttribute("data-value"),n=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(s)):this.getFormattedValue(s);this.allowCustomValue&&(s!=="false"&&n===!1||!h(n)&&n.toString()==="NaN")&&(n=s),this.removeHover(),!this.value||!this.allowObjectBinding&&this.value.indexOf(n)===-1||this.allowObjectBinding&&this.indexOfObjectInArray(n,this.value)===-1?this.dispatchSelect(n,t,e,e.getAttribute("aria-selected")==="true",i):this.removeValue(n,t,i),this.checkAndScrollParent()},a.prototype.updateListSelectEventCallback=function(e,t,i,s){var n=this;e=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",e):e;var r=s||this.getTextByValue(e);if((this.allowCustomValue||this.allowFiltering)&&!this.findListElement(this.mainList,"li","data-value",e)&&(!this.enableVirtualization||this.enableVirtualization&&this.virtualCustomData)){var l=t&&t.cloneNode(!0),o=this.fields.value?this.fields.value:"value";this.allowCustomValue&&this.mainData.length&&typeof I(o,this.mainData[0])=="number"&&(e=isNaN(parseFloat(e.toString()))?e:parseFloat(e.toString()));var c=this.getDataByValue(e),p={newData:c,cancel:!1};this.trigger("customValueSelection",p,function(d){d.cancel||(n.enableVirtualization&&n.virtualCustomData?(n.virtualCustomSelectData&&n.virtualCustomSelectData.length>=0?n.virtualCustomSelectData.push(c):n.virtualCustomSelectData=[c],n.remoteCustomValue=!1,n.addValue(e,r,i)):(ye([l],n.mainList),n.mainData.push(c),n.remoteCustomValue=!1,n.addValue(e,r,i)))})}else this.remoteCustomValue=!1,this.addValue(e,r,i)},a.prototype.removeListSelection=function(){var e=this.hideSelectedItem?Ne:O.selected,t=this.list.querySelectorAll("."+e),i=t.length;if(t&&t.length)for(w(t,e);i>0;)t[i-1].setAttribute("aria-selected","false"),i--;if(!h(this.mainList)){var s=this.mainList.querySelectorAll("."+e),n=s.length;if(s&&s.length)for(w(s,e);n>0;)s[n-1].setAttribute("aria-selected","false"),this.mode==="CheckBox"&&(t&&t.length>n-1&&w([t[n-1].firstElementChild.lastElementChild],"e-check"),w([s[n-1].firstElementChild.lastElementChild],"e-check")),n--}},a.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+O.hover);e&&e.length&&w(e,O.hover)},a.prototype.removeFocus=function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll("."+O.focus),t=this.mainList.querySelectorAll("."+O.focus);e&&e.length&&(w(e,O.focus),w(t,O.focus))}},a.prototype.addListHover=function(e){this.enabled&&this.isValidLI(e)?(this.removeHover(),E([e],O.hover)):e!==null&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&this.mode==="CheckBox"&&!h(this.fields.groupBy)&&(this.removeHover(),E([e],O.hover))},a.prototype.addListFocus=function(e){this.enabled&&(this.isValidLI(e)||this.fields.disabled&&this.isDisabledElement(e))?(this.removeFocus(),E([e],O.focus),this.updateAriaActiveDescendant()):this.enableGroupCheckBox&&this.mode==="CheckBox"&&!h(this.fields.groupBy)&&(E([e],O.focus),this.updateAriaActiveDescendant())},a.prototype.addListSelection=function(e,t){var i=this.hideSelectedItem?Ne:O.selected;if(this.isValidLI(e)&&!e.classList.contains(O.hover)){if(E([e],i),this.updateMainList(!1,e.getAttribute("data-value"),t),e.setAttribute("aria-selected","true"),this.mode==="CheckBox"&&e.classList.contains("e-active")){var s=e.getElementsByClassName("e-check").length;s===0&&this.notify("updatelist",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),this.selectedElementID=e.id}},a.prototype.updateDelimeter=function(e,t,i){this.updateData(e,t,i)},a.prototype.onMouseClick=function(e){var t=this;if(!this.isClearAllItem){this.keyCode=null,this.scrollFocusStatus=!1,this.keyboardEvent=null;var i=e.target,s=A(i,"."+O.li);if(this.enableVirtualization&&s&&s.classList.contains("e-virtual-list"))return;var n=A(i,"."+O.group);if(n&&this.enableGroupCheckBox&&this.mode==="CheckBox"&&this.fields.groupBy)i=i.classList.contains("e-list-group-item")?i.firstElementChild.lastElementChild:e.target,i.classList.contains("e-check")?(this.selectAllItem(!1,e),i.classList.remove("e-check"),i.classList.remove("e-stop"),A(i,".e-list-group-item").classList.remove("e-active"),i.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),i.classList.remove("e-stop"),i.classList.add("e-check"),A(i,".e-list-group-item").classList.add("e-active"),i.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(s)){var r=this.value&&this.value.length?this.value.length:0;s.classList.contains("e-active")&&(r=r-1),r<this.maximumSelectionLength&&(this.updateListSelection(s,e),this.checkPlaceholderSize(),this.addListFocus(s),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?this.mode!=="CheckBox"&&(this.focusAtLastListItem(s.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),this.mode==="CheckBox"?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(function(){t.updateDelimeter(t.delimiterChar,e)},0):this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.allowResize&&this.setResize(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup(e):e.preventDefault();var l=this.targetElement().trim()!=="";this.makeTextBoxEmpty(),this.findGroupStart(i),this.mode!=="CheckBox"&&this.refreshListItems(h(s)?null:s.textContent,l)}else e.preventDefault();if(this.enableVirtualization&&this.hideSelectedItem){var o=this.list.querySelectorAll("li."+O.li+":not(."+Ne+"):not(.e-reorder-hide):not(.e-virtual-list)");if(o.length){var c=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;if(o.length<c+2){var p=this.getForQuery(this.value).clone();if(p=p.skip(this.virtualItemStartIndex),this.resetList(this.dataSource,this.fields,p),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+O.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var d=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});d.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(d)}this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}}}this.refreshPlaceHolder(),this.deselectHeader()}}},a.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&this.mode==="CheckBox"&&!h(this.fields.groupBy)){var t=0,i=0,s=0,n=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),n=this.findGroupAttrtibutes(e,i,s,t,0),n=this.findGroupAttrtibutes(e,n[0],n[1],n[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e=e.previousElementSibling,e!=null););this.updateCheckBox(e,n[0],n[1],n[2])}},a.prototype.findGroupAttrtibutes=function(e,t,i,s,n){for(;!e.classList.contains("e-list-group-item")&&(this.fields.disabled&&this.isDisabledElement(e)||(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,s++),e=n?e.nextElementSibling:e.previousElementSibling,e!=null););return[t,i,s]},a.prototype.updateCheckBox=function(e,t,i,s){if(!(e===null||!h(this.fields.disabled)&&s===0)){var n=e.getElementsByClassName("e-frame")[0];s===t?(n.classList.remove("e-stop"),n.classList.add("e-check"),A(n,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):s===i?(n.classList.remove("e-check"),n.classList.remove("e-stop"),A(n,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(n.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),A(n,".e-list-group-item").classList.add("e-active"),n.classList.add("e-check")):(n.classList.remove("e-check"),n.classList.add("e-stop"),A(n,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}},a.prototype.disableGroupHeader=function(){var e=this.list.querySelectorAll("li.e-list-group-item");if(e)for(var t=0;t<e.length;t++){for(var i=!0,s=e[t].nextElementSibling;!s.classList.contains("e-list-group-item");){if(!this.isDisabledElement(s)){i=!1;break}if(s=s.nextElementSibling,s==null)break}i&&this.disableListItem(e[t])}},a.prototype.deselectHeader=function(){var e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&w(t,"e-disable"),e===this.maximumSelectionLength&&E(t,"e-disable")},a.prototype.onMouseOver=function(e){var t=A(e.target,"."+O.li);t===null&&this.mode==="CheckBox"&&!h(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=A(e.target,"."+O.group)),this.addListHover(t)},a.prototype.onMouseLeave=function(){this.removeHover()},a.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},a.prototype.onDocumentClick=function(e){if(this.mode!=="CheckBox"){var t=e.target;!(!h(this.popupObj)&&A(t,'[id="'+this.popupObj.element.id+'"]'))&&!this.overAllWrapper.contains(e.target)?this.scrollFocusStatus=!1:this.scrollFocusStatus=(V.isIE||V.info.name==="edge")&&document.activeElement===this.inputElement}},a.prototype.wireListEvents=function(){h(this.list)||(b.add(document,"mousedown",this.onDocumentClick,this),b.add(this.list,"mousedown",this.onListMouseDown,this),b.add(this.list,"mouseup",this.onMouseClick,this),b.add(this.list,"mouseover",this.onMouseOver,this),b.add(this.list,"mouseout",this.onMouseLeave,this))},a.prototype.unwireListEvents=function(){b.remove(document,"mousedown",this.onDocumentClick),this.list&&(b.remove(this.list,"mousedown",this.onListMouseDown),b.remove(this.list,"mouseup",this.onMouseClick),b.remove(this.list,"mouseover",this.onMouseOver),b.remove(this.list,"mouseout",this.onMouseLeave))},a.prototype.hideOverAllClear=function(){(!this.value||!this.value.length||this.inputElement.value==="")&&(this.overAllClear.style.display="none")},a.prototype.showOverAllClear=function(){(this.value&&this.value.length||this.inputElement.value!=="")&&this.showClearButton&&this.readonly!==!0?this.overAllClear.style.display="":this.overAllClear.style.display="none"},a.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},a.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},a.prototype.showSpinner=function(){if(h(this.spinnerElement)){var e=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");this.overAllClear.style.display!=="none"||e?this.spinnerElement=e||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:Ir+" "+Br}),this.componentWrapper.appendChild(this.spinnerElement)),Xs({target:this.spinnerElement,width:V.isDevice?"16px":"14px"},this.createElement),E([this.spinnerElement],Nr),Js(this.spinnerElement)}},a.prototype.hideSpinner=function(){h(this.spinnerElement)||(Qs(this.spinnerElement),w([this.spinnerElement],Nr),this.spinnerElement.classList.contains(Br)?G(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},a.prototype.updateWrapperText=function(e,t){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=this.encodeHtmlEntities(t):e.innerText=t},a.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),h(this.viewWrapper)||(this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove(Is)),this.value&&this.value.length){var e="",t=void 0,i=void 0,s=1,n=void 0,r=void 0,l=0,o=void 0;this.enableVirtualization||this.updateWrapperText(this.viewWrapper,e);var c={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},p=new St(this.getLocaleName(),c,this.locale);p.getConstant("actionFailureTemplate")===""&&(p=new St("dropdowns",c,this.locale)),p.getConstant("noRecordsTemplate")===""&&(p=new St("dropdowns",c,this.locale));var d=p.getConstant("overflowCountTemplate"),f=p.getConstant("totalCountTemplate"),v=this.createElement("span",{className:gc}),g=d.replace("${count}",this.value.length.toString());v.innerText=g,this.viewWrapper.appendChild(v),this.renderReactTemplates();var m=v.offsetWidth;if(ft(v),this.showDropDownIcon&&(l=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!h(this.value)&&(this.allowCustomValue||this.listData&&this.listData.length>0))for(var C=0;!h(this.value[C]);C++){var k=this.text&&this.text.split(this.delimiterChar);if(this.enableVirtualization?k&&(e+=C===0?"":this.delimiterChar+" ",t=k[C],e+=t,t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e)):(e+=C===0?"":this.delimiterChar+" ",t=this.getOverflowVal(C),e+=t,t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e)),n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10),o=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),n+l+this.clearIconWidth>o){for(i!==void 0&&i!==""&&(t=i,C=s+1),this.updateWrapperText(this.viewWrapper,t),r=this.value.length-C,n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10);n+m+l+this.clearIconWidth>o&&n!==0&&this.viewWrapper.innerHTML!=="";){var T=[];this.viewWrapper.innerHTML=T.join(this.delimiterChar),r=this.value.length,n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10)}break}else n+m+l+this.clearIconWidth<=o?(i=e,s=C):C===0&&(i="",s=-1)}if(r>0){var x=o-l-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(v,this.viewWrapper,r,d,f,x)),this.updateRemainWidth(this.viewWrapper,x),this.updateRemainingText(v,l,r,d,f)}}else h(this.viewWrapper)||(this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none")},a.prototype.checkClearIconWidth=function(){this.showClearButton&&(this.clearIconWidth=parseInt(window.getComputedStyle(this.overAllClear).width,10))},a.prototype.updateRemainWidth=function(e,t){e.classList.contains(Is)&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingRight,10)&&(e.style.width=t+"px")},a.prototype.updateRemainTemplate=function(e,t,i,s,n,r){t.firstChild&&t.firstChild.nodeType===3&&t.firstChild.nodeValue===""&&t.removeChild(t.firstChild),e.innerHTML="";var l=s.replace("${count}",i.toString()),o=n.replace("${count}",i.toString());return e.innerText=t.firstChild&&t.firstChild.nodeType===3?l:o,t.firstChild&&t.firstChild.nodeType===3?t.classList.remove(Is):(t.classList.add(Is),this.updateRemainWidth(t,r)),e},a.prototype.updateRemainingText=function(e,t,i,s,n){var r=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),l=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(l+t>=r&&l!==0&&this.viewWrapper.firstChild&&this.viewWrapper.firstChild.nodeType===3){for(;l+t>r&&l!==0&&this.viewWrapper.firstChild&&this.viewWrapper.firstChild.nodeType===3;){var o=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);o.pop(),this.viewWrapper.firstChild.nodeValue=o.join(this.delimiterChar),this.viewWrapper.firstChild.nodeValue===""&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,l=this.viewWrapper.offsetWidth}var c=r-t;this.updateRemainTemplate(e,this.viewWrapper,i,s,n,c)}},a.prototype.getOverflowVal=function(e){var t;if(this.mainData&&this.mainData.length){var i=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[e]):this.value[e];if(this.mode==="CheckBox"){var s=this.listData;this.listData=this.mainData,t=this.getTextByValue(i),this.listData=s}else t=this.getTextByValue(i)}else t=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[e]):this.value[e];return t},a.prototype.unWireEvent=function(){if(h(this.componentWrapper)||b.remove(this.componentWrapper,"mousedown",this.wrapperClick),b.remove(window,"resize",this.windowResize),!h(this.inputElement)){b.remove(this.inputElement,"focus",this.focusInHandler),b.remove(this.inputElement,"keydown",this.onKeyDown),this.mode!=="CheckBox"&&b.remove(this.inputElement,"input",this.onInput),b.remove(this.inputElement,"keyup",this.keyUp);var e=A(this.inputElement,"form");e&&b.remove(e,"reset",this.resetValueHandler),b.remove(this.inputElement,"blur",this.onBlurHandler)}h(this.componentWrapper)||(b.remove(this.componentWrapper,"mouseover",this.mouseIn),b.remove(this.componentWrapper,"mouseout",this.mouseOut)),h(this.overAllClear)||b.remove(this.overAllClear,"mousedown",this.clearAll),h(this.inputElement)||b.remove(this.inputElement,"paste",this.pasteHandler)},a.prototype.resizingWireEvent=function(){b.add(document,"mousemove",this.resizePopup,this),b.add(document,"mouseup",this.stopResizing,this),b.add(document,"touchmove",this.resizePopup,this),b.add(document,"touchend",this.stopResizing,this)},a.prototype.resizingUnWireEvent=function(){b.remove(document,"mousemove",this.resizePopup),b.remove(document,"mouseup",this.stopResizing),b.remove(document,"touchmove",this.resizePopup),b.remove(document,"touchend",this.stopResizing)},a.prototype.selectAllItem=function(e,t,i){var s;if(h(this.list)||(s=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)')),this.value&&this.value.length&&t&&t.target&&A(t.target,".e-close-hooker")&&this.allowFiltering&&(s=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)')),this.enableGroupCheckBox&&this.mode==="CheckBox"&&!h(this.fields.groupBy)){var n=t?this.groupTemplate?A(t.target,".e-list-group-item"):t.target:null;if(n=t&&t.keyCode===32?i:n,n=n&&n.classList.contains("e-frame")?n.parentElement.parentElement:n,n&&n.classList.contains("e-list-group-item")){var r=n.nextElementSibling;if(h(r))return;for(;r.classList.contains("e-list-item");){if(!(this.fields.disabled&&this.isDisabledElement(r)))if(e){if(!r.firstElementChild.lastElementChild.classList.contains("e-check")){var l=this.value&&this.value.length?this.value.length:0;r.classList.contains("e-active")&&(l-=1),l<this.maximumSelectionLength&&this.updateListSelection(r,t)}}else r.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(r,t);if(r=r.nextElementSibling,r==null)break}if(n.classList.contains("e-list-group-item")){var o=this.list.getElementsByClassName("e-item-focus")[0];o&&o.classList.remove("e-item-focus"),e?n.classList.add("e-active"):n.classList.remove("e-active"),n.classList.add("e-item-focus"),this.updateAriaActiveDescendant()}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,s,e)}else this.updateValue(t,s,e);this.addValidInputClass()},a.prototype.virtualSelectionAll=function(e,t,i){var s=this,n=0,r=t.length,l=this.maximumSelectionLength;if(e){this.virtualSelectAll=!0,r=this.virtualSelectAllData&&this.virtualSelectAllData.length!==0?this.virtualSelectAllData.length:r,this.listData=this.virtualSelectAllData;var o=this.createListItems(this.virtualSelectAllData.slice(0,30),this.fields),c=o.querySelectorAll("li"),p=document.createDocumentFragment();c.forEach(function(m){p.appendChild(m.cloneNode(!0))}),t.forEach(function(m){p.appendChild(m.cloneNode(!0))});var d=p.childNodes;if(this.virtualSelectAllData instanceof Array){for(;n<r&&n<=50&&n<l;){if(this.isSelectAllTarget=r===n+1,d[n]){var f=this.allowObjectBinding?this.getDataByValue(d[n].getAttribute("data-value")):this.getFormattedValue(d[n].getAttribute("data-value"));if(!this.allowObjectBinding&&this.value&&this.value.indexOf(f)>=0||this.allowObjectBinding&&this.indexOfObjectInArray(f,this.value)>=0){n++;continue}this.updateListSelection(d[n],i,r-n)}else{var f=I(this.fields.value?this.fields.value:"",this.virtualSelectAllData[n]);if(f=this.allowObjectBinding?this.getDataByValue(f):f,!this.allowObjectBinding&&this.value&&this.value.indexOf(f)>=0||this.allowObjectBinding&&this.indexOfObjectInArray(f,this.value)>=0){n++;continue}this.value&&f!=null&&Array.isArray(this.value)&&(!this.allowObjectBinding&&this.value.indexOf(f)<0||this.allowObjectBinding&&!this.isObjectInArray(f,this.value))&&this.dispatchSelect(f,i,null,!1,r)}n++}r>50&&setTimeout(function(){if(s.virtualSelectAllData&&s.virtualSelectAllData.length>0&&s.virtualSelectAllData.map(function(C){if(s.value&&C[s.fields.value]!=null&&Array.isArray(s.value)&&(!s.allowObjectBinding&&s.value.indexOf(C[s.fields.value])<0||s.allowObjectBinding&&!s.isObjectInArray(C[s.fields.value],s.value))){var k=C[s.fields.value],T=C[s.fields.text].toString();s.dispatchSelect(k,i,null,!1,r,C,T)}}),s.updatedataValueItems(i),s.isSelectAllLoop=!1,s.changeOnBlur||(s.updateValueState(i,s.value,s.tempValues),s.isSelectAll=s.isSelectAll?!s.isSelectAll:s.isSelectAll),s.updateHiddenElement(!0),s.popupWrapper&&t[n-1]&&t[n-1].classList.contains("e-item-focus")){var m=document.getElementsByClassName("e-selectall-parent")[0];m&&m.classList.contains("e-item-focus")&&t[n-1].classList.remove("e-item-focus")}s.checkSelectAll()},0)}}else this.virtualSelectAllData&&this.virtualSelectAllData.length>0&&this.virtualSelectAllData.map(function(m){s.virtualSelectAll=!0,s.removeValue(s.value[n],i,s.value.length-n)}),this.updatedataValueItems(i),this.changeOnBlur||(this.updateValueState(i,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement(),this.setProperties({value:[]},!0),this.virtualSelectAll=!1,!h(this.viewPortInfo.startIndex)&&!h(this.viewPortInfo.endIndex)&&this.notify("setCurrentViewDataAsync",{component:this.getModuleName(),module:"VirtualScroll"});this.checkSelectAll();var v=this.list.getElementsByClassName("e-virtual-ddl")[0];v&&(v.style=this.GetVirtualTrackHeight()),this.UpdateSkeleton();var g=this.list.getElementsByClassName("e-virtual-ddl-content")[0];g&&(g.style=this.getTransformValues())},a.prototype.updateValue=function(e,t,i){var s=this,n=t.length,r={event:e,items:i?t:[],itemData:i?this.listData:[],isInteracted:!!e,isChecked:i,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",r),t&&t.length||this.enableVirtualization&&!i){var l=0,o=0;if(this.enableGroupCheckBox?o=i?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:o=i?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,r.preventSelectEvent){for(var c=0;c<t.length&&c<o;c++){this.removeHover();var p=t[c].getAttribute("data-value"),d=this.getFormattedValue(p);d=this.allowObjectBinding?this.getDataByValue(d):d;var f=this.mainList?this.mainList.querySelectorAll(i?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[c]:null;i?(this.value=this.value?this.value:[],(!this.allowObjectBinding&&this.value.indexOf(d)<0||this.allowObjectBinding&&!this.isObjectInArray(d,this.value))&&this.setProperties({value:[].concat([],this.value,[d])},!0),this.removeFocus(),this.addListSelection(t[c],f),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(d,e,!1,t[c],f),this.enableGroupCheckBox&&this.findGroupStart(t[c])}if(!i){var v=this.value&&this.value.length?this.value.length:0;if(v<this.maximumSelectionLength){var g=this.list.querySelectorAll("li."+O.li+":not(.e-active)");w(g,"e-disable")}}var m={event:e,items:i?t:[],itemData:i?this.listData:[],isInteracted:!!e,isChecked:i};this.trigger("selectedAll",m)}else if(this.enableVirtualization)this.virtualSelectAllState=i,this.virtualSelectAll=!0,this.CurrentEvent=e,this.virtualSelectAllData||this.resetList(this.dataSource,this.fields,new ee),this.virtualSelectAllData&&this.virtualSelectionAll(i,t,e);else{for(;l<n&&l<=50&&l<o;)this.isSelectAllTarget=n===l+1,this.updateListSelection(t[l],e,n-l),this.enableGroupCheckBox&&this.findGroupStart(t[l]),l++;n>50&&setTimeout(function(){for(;l<n&&l<o;)s.isSelectAllTarget=n===l+1,s.updateListSelection(t[l],e,n-l),s.enableGroupCheckBox&&s.findGroupStart(t[l]),l++;if(s.updatedataValueItems(e),s.changeOnBlur||(s.updateValueState(e,s.value,s.tempValues),s.isSelectAll=s.isSelectAll?!s.isSelectAll:s.isSelectAll),s.updateHiddenElement(),s.popupWrapper&&t[l-1].classList.contains("e-item-focus")){var C=document.getElementsByClassName("e-selectall-parent")[0];C&&C.classList.contains("e-item-focus")&&t[l-1].classList.remove("e-item-focus")}},0)}}this.updatedataValueItems(e),this.checkPlaceholderSize(),n<=50&&!r.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),(this.enableVirtualization&&this.value&&this.value.length>0||!this.enableVirtualization)&&this.updateHiddenElement())},a.prototype.updateHiddenElement=function(e){var t=this,i="",s="",n="",r=[];this.mode==="CheckBox"&&(this.value.map(function(l,o){i+='<option selected value ="'+l+'">'+o+"</option>",e||(t.listData?n=t.getTextByValue(l):n=l,s+=n+t.delimiterChar+" ",r.push(n))}),this.hiddenElement.innerHTML=i,e||(this.updateWrapperText(this.delimiterWrapper,s),this.setProperties({text:r.toString()},!0)),this.delimiterWrapper.setAttribute("id",$e("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.refreshInputHight(),this.refreshPlaceHolder())},a.prototype.updatedataValueItems=function(e){this.deselectHeader(),this.textboxValueUpdate(e)},a.prototype.textboxValueUpdate=function(e){var t=e&&e.target&&(A(e.target,".e-selectall-parent")||A(e.target,".e-close-hooker"));this.mode!=="Box"&&!this.isPopupOpen()&&!(this.mode==="CheckBox"&&(this.isSelectAll||t))?this.updateDelimView():this.searchWrapper.classList.remove(Ds),this.mode==="CheckBox"?(this.updateDelimView(),(!(t||this.isSelectAll)&&this.isSelectAllTarget||this.isSelectAll&&this.isSelectAllTarget)&&this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()},a.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},a.prototype.updateDataSource=function(e){this.checkAndResetCache(),h(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())},a.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},a.prototype.selectAllItems=function(e,t){var i=this;if(h(this.list))this.selectAllAction=function(){if(i.mode==="CheckBox"&&i.showSelectAll){var n={module:"CheckBoxSelection",enable:i.mode==="CheckBox",value:e?"check":"uncheck"};i.notify("checkSelectAll",n)}i.selectAllItem(e,t),i.selectAllAction=null},u.prototype.render.call(this);else{if(this.selectAllAction=null,this.mode==="CheckBox"&&this.showSelectAll){var s={value:e?"check":"uncheck",enable:this.mode==="CheckBox",module:"CheckBoxSelection"};this.notify("checkSelectAll",s)}this.selectAllItem(e,t)}(!(this.dataSource instanceof P)||this.dataSource instanceof P&&this.virtualSelectAllData)&&(this.virtualSelectAll=!1)},a.prototype.getPersistData=function(){return this.addOnPersist(["value"])},a.prototype.onPropertyChanged=function(e,t){(e.dataSource&&!h(Object.keys(e.dataSource))||e.query&&!h(Object.keys(e.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),this.getModuleName()==="multiselect"&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];switch(n){case"query":case"dataSource":this.mode==="CheckBox"&&this.showSelectAll&&(h(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.fields.disabled&&(this.text=this.text&&!this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?this.text:null),this.updateVal(this.value,this.value,"text");break;case"value":if(this.fields.disabled&&this.removeDisabledItemsValue(this.value),this.updateVal(this.value,t.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.isPopupOpen()&&this.mode==="CheckBox"&&this.list&&this.list.querySelector(".e-active.e-disable")){var r=this.list.querySelectorAll("li."+O.li+".e-active.e-disable");w(r,"e-disable")}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":this.mode!=="Box"&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(t.cssClass),this.updateCssClass(),this.calculateWidth();break;case"enableRtl":this.enableRTL(e.enableRtl),u.prototype.onPropertyChanged.call(this,e,t);break;case"allowResize":if(this.allowResize=e.allowResize,!this.allowResize&&this.popupObj){var l=parseInt(this.popupHeight,10);this.popupHeight!=="auto"?(this.list.style.maxHeight=fe(l),this.popupWrapper.style.height=fe(this.popupHeight),this.popupWrapper.style.maxHeight=fe(this.popupHeight)):this.list.style.maxHeight=fe(this.popupHeight)}break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass(),z.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!h(this.overAllWrapper)&&!h(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){var l=parseInt(this.popupHeight,10);this.popupHeight!=="auto"?(this.list.style.maxHeight=fe(l),this.popupWrapper.style.maxHeight=fe(this.popupHeight)):this.list.style.maxHeight=fe(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":this.mode==="CheckBox"&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;case"fields":h(this.fields.groupBy)&&this.removeScrollEvent();break;default:{var o=this.getPropObject(n,e,t);u.prototype.onPropertyChanged.call(this,o.newProperty,o.oldProperty)}break}}},a.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},a.prototype.totalItemsCount=function(){var e;if(this.dataSource instanceof P?this.remoteDataCount>=0?e=this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):e=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.mode==="CheckBox")this.totalItemCount=e!==0?e:this.totalItemCount;else if(this.hideSelectedItem){if(this.totalItemCount=e!==0&&this.value?e-this.value.length:this.totalItemCount,this.allowCustomValue&&this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0)for(var t=0;t<this.virtualCustomSelectData.length;t++)for(var i=0;i<this.value.length;i++){var s=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[i]):this.value[i],n=I(this.fields.value?this.fields.value:"",this.virtualCustomSelectData[t]);s===n&&(this.totalItemCount+=1)}}else this.totalItemCount=e!==0?e:this.totalItemCount,this.allowCustomValue&&this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0&&(this.totalItemCount+=this.virtualCustomSelectData.length)},a.prototype.presentItemValue=function(e){for(var t=[],i=0;i<this.value.length;i++){var s=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[i]):this.value[i],n=this.findListElement(this.allowFiltering&&!h(this.mainList)?this.mainList:e,"li","data-value",s);if(!n){var r=this.allowObjectBinding?this.getDataByValue(this.value[i]):this.value[i];t.push(r)}}return t},a.prototype.addNonPresentItems=function(e,t,i,s){var n=this;this.dataSource.executeQuery(this.getForQuery(e)).then(function(r){r.result.length>0&&n.addItem(r.result,i.length),n.updateActionList(t,i,s)})},a.prototype.updateVal=function(e,t,i){if(!this.list)this.onLoadSelect();else if(this.dataSource instanceof P&&(!this.listData||!(this.mainList&&this.mainData)))this.onLoadSelect();else{var s=[];if(!h(this.value)&&!this.allowCustomValue&&(s=this.presentItemValue(this.ulElement)),i==="value"&&s.length>0&&this.dataSource instanceof P&&!h(this.value)&&this.listData!=null)this.mainData=null,this.setDynValue=!0,this.isaddNonPresentItems=!0,this.addNonPresentItems(s,this.ulElement,this.listData),this.isaddNonPresentItems=!1;else{if(i==="text"&&(this.initialTextUpdate(),e=this.value),(h(this.value)||this.value.length===0)&&(this.tempValues=t),this.allowCustomValue&&(this.mode==="Default"||this.mode==="Box")&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.enableVirtualization?this.enableVirtualization&&!(this.dataSource instanceof P)?this.initialValueUpdate(this.dataSource,!0):this.isInitRemoteVirtualData||(this.isDynamicRemoteVirtualData=!0,this.initialValueUpdate(this.listData,!0),this.isDynamicRemoteVirtualData=!1,this.initialUpdate()):this.initialValueUpdate(),this.mode!=="Box"&&!this.inputFocus&&this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),this.mode!=="CheckBox"&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()}}this.changeOnBlur||this.updateValueState(null,e,t)},a.prototype.addItem=function(e,t){u.prototype.addItem.call(this,e,t)},a.prototype.hidePopup=function(e){var t=this,i=100;if(this.isPopupOpen()){var s={name:"FadeOut",duration:100,delay:i};this.customFilterQuery=null;var n={popup:this.popupObj,cancel:!1,animation:s,event:e||null};this.trigger("close",n,function(r){if(!r.cancel){t.fields.groupBy&&t.mode!=="CheckBox"&&t.fixedHeaderElement&&(ft(t.fixedHeaderElement),t.fixedHeaderElement=null),t.beforePopupOpen=!1,t.overAllWrapper.classList.remove(Rr);var l=t.mode==="CheckBox"?t.targetElement():null;if(t.popupObj.hide(new bt(r.animation)),Q(t.inputElement,{"aria-expanded":"false"}),t.inputElement.removeAttribute("aria-owns"),t.inputElement.removeAttribute("aria-activedescendant"),t.allowFiltering&&t.notify("inputFocus",{module:"CheckBoxSelection",enable:t.mode==="CheckBox",value:"clear"}),t.popupObj.hide(),w([document.body,t.popupObj.element],"e-popup-full-page"),b.remove(t.list,"keydown",t.onKeyDown),t.mode==="CheckBox"&&t.showSelectAll&&b.remove(t.popupObj.element,"click",t.clickHandler),t.list&&t.list.parentElement&&t.allowResize){t.resizer&&t.list.parentElement.contains(t.resizer)&&t.list.parentElement.removeChild(t.resizer),t.list.parentElement.classList.contains("e-resize")&&t.list.parentElement.classList.remove("e-resize"),t.list.parentElement.style.boxSizing="",t.list.parentElement.style.paddingBottom="";var o=parseInt(t.popupHeight,10);t.list.style.maxHeight=fe(o),t.list.parentElement.style.height=fe(t.popupHeight),t.list.parentElement.style.maxHeight=fe(t.popupHeight)}t.resizer&&(b.remove(t.resizer,"mousedown",t.startResizing),t.resizer.remove()),t.enableVirtualization&&t.mode==="CheckBox"&&t.value&&t.value.length>0&&t.enableSelectionOrder&&(t.viewPortInfo.startIndex=t.virtualItemStartIndex=0,t.viewPortInfo.endIndex=t.virtualItemEndIndex=t.viewPortInfo.startIndex>0?t.viewPortInfo.endIndex:t.itemCount,t.virtualListInfo=t.viewPortInfo,t.previousStartIndex=0,t.previousEndIndex=t.itemCount);var c=void 0;t.dataSource instanceof P?t.remoteDataCount>=0?t.totalItemCount=t.dataCount=t.remoteDataCount:t.resetList(t.dataSource):c=t.dataSource&&t.dataSource.length?t.dataSource.length:0,t.enableVirtualization&&(t.allowFiltering||t.allowCustomValue)&&(t.targetElement()||l)&&t.totalItemCount!==c&&(t.checkAndResetCache(),t.updateInitialData()),t.virtualCustomData&&t.viewPortInfo&&t.viewPortInfo.startIndex===0&&t.viewPortInfo.endIndex===t.itemCount&&t.renderItems(t.mainData,t.fields),t.virtualCustomData=null,t.isVirtualTrackHeight=!1}})}},a.prototype.showPopup=function(e){var t=this;if(this.enabled){this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null;var i={cancel:!1};this.trigger("beforeOpen",i,function(s){if(!s.cancel){if(!t.ulElement){t.beforePopupOpen=!0,t.mode==="CheckBox"&&V.isDevice&&t.allowFiltering&&t.isDeviceFullScreen&&t.notify("popupFullScreen",{module:"CheckBoxSelection",enable:t.mode==="CheckBox"}),u.prototype.render.call(t,e);return}t.mode==="CheckBox"&&V.isDevice&&t.allowFiltering&&t.isDeviceFullScreen&&t.notify("popupFullScreen",{module:"CheckBoxSelection",enable:t.mode==="CheckBox"});var n=t.ulElement.querySelectorAll("li.e-list-item").length,r=t.ulElement.querySelectorAll("li."+O.li+"."+Ne).length;if(n>0&&n===r&&r===t.mainData.length&&!(t.targetElement()!==""&&t.allowCustomValue)){t.beforePopupOpen=!1;return}if(t.onPopupShown(e),t.enableVirtualization&&t.listData&&t.listData.length&&(!h(t.value)&&(t.getModuleName()==="dropdownlist"||t.getModuleName()==="combobox")&&t.removeHover(),t.beforePopupOpen||(t.hideSelectedItem&&t.value&&Array.isArray(t.value)&&t.value.length>0&&t.totalItemsCount(),!t.preventSetCurrentData&&!h(t.viewPortInfo.startIndex)&&!h(t.viewPortInfo.endIndex)&&t.notify("setCurrentViewDataAsync",{component:t.getModuleName(),module:"VirtualScroll"}))),t.enableVirtualization&&!t.allowFiltering&&t.selectedValueInfo!=null&&t.selectedValueInfo.startIndex>0&&t.value!=null&&t.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0}),t.enableVirtualization)t.updatevirtualizationList();else if(t.value&&t.value.length){var l=void 0;t.getItems();for(var o=0,c=t.value;o<c.length;o++){var p=c[o],d=t.allowObjectBinding?I(t.fields.value?t.fields.value:"",p):p;l=t.getElementByValue(d),l&&t.addListSelection(l)}}t.allowResize&&t.setResize(),t.preventSetCurrentData=!0}})}},a.prototype.selectAll=function(e){this.isSelectAll=!0,this.selectAllItems(e)},a.prototype.getModuleName=function(){return"multiselect"},a.prototype.clear=function(){var e=this;this.selectAll(!1),this.value&&this.value.length?setTimeout(function(){e.setProperties({value:null},!0)},0):this.setProperties({value:null},!0)},a.prototype.render=function(){!h(this.value)&&this.value.length>0&&(this.value=this.value.slice()),this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.selectAllEventEle=[],this.searchWrapper=this.createElement("span",{className:mc+" "+(this.mode==="Box"?kc:"")}),this.viewWrapper=this.createElement("span",{className:dc+" "+Or}),this.viewWrapper.style.display="none",this.overAllClear=this.createElement("span",{className:Ir}),this.overAllClear.style.display="none",this.componentWrapper=this.createElement("div",{className:cc}),this.overAllWrapper=this.createElement("div",{className:uc}),this.mode==="CheckBox"&&E([this.overAllWrapper],"e-checkbox"),V.isDevice&&this.componentWrapper.classList.add(pc),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:yc}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),this.mode==="Delimiter"||this.mode==="CheckBox"?(this.delimiterWrapper=this.createElement("span",{className:Or}),this.delimiterWrapper.style.display="none",this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:fc}),this.chipCollectionWrapper.style.display="none",this.mode==="Default"?this.chipCollectionWrapper.setAttribute("id",$e("chip_default")):this.mode==="Box"&&this.chipCollectionWrapper.setAttribute("id",$e("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),this.mode!=="Box"&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!V.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(Wa),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:bc,attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0",role:"combobox"}}),(this.mode==="Default"||this.mode==="Box")&&this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),h(this.inputElement)||(Q(this.inputElement,{"aria-expanded":"false"}),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName())),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),this.floatLabelType!=="Never"?wr(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):this.floatLabelType==="Never"&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):$e("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:xc,tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),this.mode!=="CheckBox"&&this.hideOverAllClear(),!h(A(this.element,"fieldset"))&&A(this.element,"fieldset").disabled&&(this.enabled=!1),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering,this.mode==="CheckBox"),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount,this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),z.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!h(this.overAllWrapper)&&!h(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.renderComplete()},a.prototype.setResize=function(){var e=16;if(this.list&&this.list.parentElement&&h(this.list.parentElement.querySelector(".e-resizer-right.e-icons"))&&(this.resizer=this.createElement("div",{id:this.element.id+"_resize-popup",className:Tc})),this.mode==="CheckBox"&&this.showSelectAll&&this.selectAllHeight&&this.selectAllHeight!==0&&(this.storedSelectAllHeight=this.selectAllHeight),this.list&&this.list.parentElement){this.list.parentElement.classList.add("e-resize"),this.popupHeight.toString().toLowerCase()!=="auto"&&(this.list.parentElement.style.height="100%"),this.list.parentElement.style.boxSizing="border-box";var t=this.mode==="CheckBox"&&this.searchBoxHeight?this.searchBoxHeight+e+(this.showSelectAll?this.storedSelectAllHeight:0):e;this.list.parentElement.style.paddingBottom=t+"px",this.list.parentElement.appendChild(this.resizer),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px"}this.resizer&&(b.add(this.resizer,"mousedown",this.startResizing,this),b.add(this.resizer,"touchstart",this.startResizing,this))},a.prototype.startResizing=function(e){this.isResizing=!0,this.trigger("resizeStart",e);var t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;this.list&&this.list.parentElement&&(this.originalWidth=this.list.parentElement.offsetWidth,this.originalHeight=this.list.parentElement.offsetHeight,this.originalMouseX=t,this.originalMouseY=i),this.resizingWireEvent(),e&&e.preventDefault()},a.prototype.resizePopup=function(e){if(this.isResizing){this.trigger("resizing",e);var t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,s=t-this.originalMouseX,n=i-this.originalMouseY,r=100,l=130;if(this.resizeWidth=Math.max(this.originalWidth+s,r),this.resizeHeight=Math.max(this.originalHeight+n,l),this.list&&this.list.parentElement){var o=parseInt(window.getComputedStyle(this.list.parentElement).minWidth,10),c=parseInt(window.getComputedStyle(this.list.parentElement).minHeight,10);o=o||100,c=c||120,this.resizeWidth=Math.max(this.originalWidth+s,o),this.resizeHeight=Math.max(this.originalHeight+n,c),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.fixedHeaderElement&&this.ulElement&&(this.fixedHeaderElement.style.width=this.ulElement.offsetWidth+"px")}e&&e.preventDefault()}},a.prototype.stopResizing=function(e){this.isResizing&&(this.isResizing=!1,this.trigger("resizeStop",e),this.resizingUnWireEvent()),e&&e.preventDefault()},a.prototype.getListHeight=function(){var e=this.createElement("div",{className:"e-dropdownbase"}),t=this.createElement("li",{className:"e-list-item"}),i=fe(this.popupHeight);e.style.height=parseInt(i,10).toString()+"px",e.appendChild(t),document.body.appendChild(e),this.virtualListHeight=e.getBoundingClientRect().height;var s=Math.ceil(t.getBoundingClientRect().height)+parseInt(window.getComputedStyle(t).marginBottom,10);return e.remove(),s},a.prototype.removeDisabledItemsValue=function(e){if(e){for(var t=[],i=0,s=0;s<e.length;s++){var n=e[s];typeof n=="object"&&(n=JSON.parse(JSON.stringify(n))[this.fields.value]),n!=null&&!this.isDisabledItemByIndex(this.getIndexByValue(n))&&(t[i++]=e[s])}this.value=t.length>0?t:null}},a.prototype.checkInitialValue=function(){var e=this;this.fields.disabled&&this.removeDisabledItemsValue(this.value);var t=this.dataSource instanceof Array?this.dataSource.length>0:!h(this.dataSource);if(!(this.value&&this.value.length)&&h(this.text)&&!t&&this.element.tagName==="SELECT"&&this.element.options.length>0){for(var i=this.element.options,s=[],n="",r=0,l=i.length;r<l;r++){var o=i[r];if(!h(o.getAttribute("selected")))if(o.getAttribute("value")){var c=this.allowObjectBinding?this.getDataByValue(o.getAttribute("value")):o.getAttribute("value");s.push(c)}else n+=o.text+this.delimiterChar}s.length>0?this.setProperties({value:s},!0):n!==""&&this.setProperties({text:n},!0),(s.length>0||n!=="")&&(this.refreshInputHight(),this.refreshPlaceHolder())}if((this.value&&this.value.length||!h(this.text))&&(this.list||u.prototype.render.call(this)),this.fields.disabled&&(this.text=this.text&&!this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?this.text:null),!h(this.text)&&(h(this.value)||this.value.length===0)&&this.initialTextUpdate(),this.value&&this.value.length){var p;if(this.enableVirtualization){for(var d=this.isPrimitiveData?"":this.fields.value,f=void 0,v=0;v<this.value.length;v++){var c=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",this.value[v]):this.value[v];v===0?f=new be(d,"equal",c):f=f.or(d,"equal",c)}this.dataSource instanceof P?this.dataSource.executeQuery(new ee().where(f)).then(function(g){g.result.length>0&&(p=g.result,e.initStatus=!1,e.isInitRemoteVirtualData=!0,setTimeout(function(){e.initialValueUpdate(p,!0),e.initialUpdate(),e.isInitRemoteVirtualData=!1},100),e.initStatus=!0)}):p=new P(this.dataSource).executeLocal(new ee().where(f))}this.dataSource instanceof P?this.setInitialValue=function(){e.initStatus=!1,(!e.enableVirtualization||e.enableVirtualization&&!(e.dataSource instanceof P))&&e.initialValueUpdate(p),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(p,!0),this.initialUpdate()),this.updateTempValue()}else this.initialUpdate();this.initStatus=!0,this.checkAutoFocus(),h(this.text)||this.element.setAttribute("data-initial-value",this.text)},a.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},a.prototype.updatevirtualizationList=function(){if(this.value&&this.value.length){for(var e=void 0,t=0,i=this.value;t<i.length;t++){var s=i[t],n=this.allowObjectBinding?I(this.fields.value?this.fields.value:"",s):s;e=this.getElementByValue(n),e&&this.addListSelection(e)}if(this.enableVirtualization&&this.hideSelectedItem){var r=this.list.querySelectorAll("li."+O.li+":not(."+Ne+"):not(.e-reorder-hide):not(.e-virtual-list)");if(r.length){var l=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;if(r.length<l+2){var o=this.getForQuery(this.value).clone();o=o.skip(this.viewPortInfo.startIndex),this.resetList(this.dataSource,this.fields,o)}}}}},a.prototype.setFloatLabelType=function(){rc(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,this.floatLabelType,this.placeholder),this.floatLabelType!=="Never"&&wr(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},a.prototype.addValidInputClass=function(){h(this.overAllWrapper)||(!h(this.value)&&this.value.length||this.floatLabelType==="Always"?E([this.overAllWrapper],"e-valid-input"):w([this.overAllWrapper],"e-valid-input"))},a.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:Pr}),this.componentWrapper.appendChild(this.dropIcon),E([this.componentWrapper],["e-down-icon"])):h(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),w([this.componentWrapper],["e-down-icon"]))},a.prototype.initialUpdate=function(){this.mode!=="Box"&&!(this.setDynValue&&this.mode==="Default"&&this.inputFocus)&&this.updateDelimView(),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},a.prototype.disableItem=function(e){if(this.fields.disabled){this.list||this.renderList();var t=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if(typeof e=="string")t=this.getIndexByValue(e);else if(typeof e=="object"){if(e instanceof HTMLLIElement){for(var i=0;i<this.liCollections.length;i++)if(this.liCollections[i]===e){t=this.getIndexByValue(e.getAttribute("data-value"));break}}else for(var s=JSON.parse(JSON.stringify(e))[this.fields.value],i=0;i<this.listData.length;i++)if(JSON.parse(JSON.stringify(this.listData[i]))[this.fields.value]===s){t=this.getIndexByValue(s);break}}else t=e;var n=t<this.liCollections.length&&t>-1;if(n&&!JSON.parse(JSON.stringify(this.listData[t]))[this.fields.disabled]){var r=this.liCollections[t];if(r){this.disableListItem(r);var l=JSON.parse(JSON.stringify(this.listData[t]));if(l[this.fields.disabled]=!0,this.listData[t]=l,r.classList.contains(O.focus)&&this.removeFocus(),r.classList.contains(Ne)||r.classList.contains(O.selected)){var o=this.value;this.removeDisabledItemsValue(this.value),this.updateVal(this.value,o,"value")}this.mode==="CheckBox"&&this.enableGroupCheckBox&&!h(this.fields.groupBy)&&this.disableGroupHeader()}}}}},a.prototype.destroy=function(){this.isReact&&this.clearTemplate(),h(this.popupObj)||(this.popupObj.hide(),this.popupObj.destroy()),this.notify(Ac,{}),this.unwireListEvents(),this.unWireEvent();var e=["readonly","aria-disabled","placeholder","aria-label","aria-expanded"],t=e.length;if(!h(this.inputElement))for(;t>0;)this.inputElement.removeAttribute(e[t-1]),t--;for(h(this.element)||(this.element.removeAttribute("data-initial-value"),this.element.style.display="block"),this.overAllWrapper&&this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()?ft(this.overAllWrapper):(this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),ft(this.overAllWrapper))),this.popupWrapper&&this.popupWrapper.parentElement&&this.popupWrapper.parentElement.remove();this.searchWrapper&&this.searchWrapper.firstChild;)this.searchWrapper.removeChild(this.searchWrapper.firstChild);this.searchWrapper&&this.searchWrapper.parentElement&&this.searchWrapper.parentElement.remove(),this.viewWrapper&&this.viewWrapper.parentElement&&this.viewWrapper.parentElement.remove(),this.overAllClear&&this.overAllClear.parentElement&&this.overAllClear.parentElement.remove(),this.delimiterWrapper&&this.delimiterWrapper.parentElement&&this.delimiterWrapper.parentElement.remove();var i=this.overAllWrapper.querySelector("select.e-multi-hidden");for(i&&i.parentElement&&i.parentElement.remove();this.componentWrapper&&this.componentWrapper.firstChild;)this.componentWrapper.removeChild(this.componentWrapper.firstChild);for(this.componentWrapper&&this.componentWrapper.parentElement&&(this.componentWrapper.removeAttribute("class"),this.componentWrapper.parentElement.remove());this.popupWrapper&&this.popupWrapper.firstChild;)this.popupWrapper.removeChild(this.popupWrapper.firstChild);if(this.inputElement)for(var s=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-label","aria-hidden","tabindex","aria-controls","aria-describedby","size","role","type","class"],n=0;n<s.length;n++)this.inputElement.removeAttribute(s[n]);this.inputElement&&this.inputElement.remove(),this.list=null,this.popupObj=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.componentWrapper=null,this.overAllClear=null,this.overAllWrapper=null,this.hiddenElement=null,this.searchWrapper=null,this.viewWrapper=null,this.chipCollectionWrapper=null,this.targetInputElement=null,this.popupWrapper=null,this.inputElement=null,this.delimiterWrapper=null,this.liCollections=null,this.popupContentElement=null,this.header=null,this.mainList=null,this.mainListCollection=null,this.footer=null,this.selectAllEventEle=null,u.prototype.destroy.call(this)},he([Nt({text:null,value:null,iconCss:null,groupBy:null,disabled:null},Hl)],a.prototype,"fields",void 0),he([y(!1)],a.prototype,"enablePersistence",void 0),he([y(null)],a.prototype,"groupTemplate",void 0),he([y("No records found")],a.prototype,"noRecordsTemplate",void 0),he([y("Request failed")],a.prototype,"actionFailureTemplate",void 0),he([y("None")],a.prototype,"sortOrder",void 0),he([y(!0)],a.prototype,"enabled",void 0),he([y(!0)],a.prototype,"enableHtmlSanitizer",void 0),he([y(!1)],a.prototype,"enableVirtualization",void 0),he([y([])],a.prototype,"dataSource",void 0),he([y(null)],a.prototype,"query",void 0),he([y("StartsWith")],a.prototype,"filterType",void 0),he([y(1e3)],a.prototype,"zIndex",void 0),he([y(!1)],a.prototype,"ignoreAccent",void 0),he([y()],a.prototype,"locale",void 0),he([y(!1)],a.prototype,"enableGroupCheckBox",void 0),he([y(null)],a.prototype,"cssClass",void 0),he([y("100%")],a.prototype,"width",void 0),he([y("300px")],a.prototype,"popupHeight",void 0),he([y("100%")],a.prototype,"popupWidth",void 0),he([y(null)],a.prototype,"placeholder",void 0),he([y(null)],a.prototype,"filterBarPlaceholder",void 0),he([y({})],a.prototype,"htmlAttributes",void 0),he([y(null)],a.prototype,"valueTemplate",void 0),he([y(null)],a.prototype,"headerTemplate",void 0),he([y(null)],a.prototype,"footerTemplate",void 0),he([y(null)],a.prototype,"itemTemplate",void 0),he([y(null)],a.prototype,"allowFiltering",void 0),he([y(!0)],a.prototype,"isDeviceFullScreen",void 0),he([y(!0)],a.prototype,"changeOnBlur",void 0),he([y(!1)],a.prototype,"allowCustomValue",void 0),he([y(!0)],a.prototype,"showClearButton",void 0),he([y(1e3)],a.prototype,"maximumSelectionLength",void 0),he([y(!1)],a.prototype,"readonly",void 0),he([y(!1)],a.prototype,"allowResize",void 0),he([y(null)],a.prototype,"text",void 0),he([y(null)],a.prototype,"value",void 0),he([y(!1)],a.prototype,"allowObjectBinding",void 0),he([y(!0)],a.prototype,"hideSelectedItem",void 0),he([y(!0)],a.prototype,"closePopupOnSelect",void 0),he([y("Default")],a.prototype,"mode",void 0),he([y(",")],a.prototype,"delimiterChar",void 0),he([y(!0)],a.prototype,"ignoreCase",void 0),he([y(!1)],a.prototype,"showDropDownIcon",void 0),he([y("Never")],a.prototype,"floatLabelType",void 0),he([y(!1)],a.prototype,"showSelectAll",void 0),he([y("Select All")],a.prototype,"selectAllText",void 0),he([y("Unselect All")],a.prototype,"unSelectAllText",void 0),he([y(!0)],a.prototype,"enableSelectionOrder",void 0),he([y(!0)],a.prototype,"openOnClick",void 0),he([y(!1)],a.prototype,"addTagOnBlur",void 0),he([q()],a.prototype,"change",void 0),he([q()],a.prototype,"removing",void 0),he([q()],a.prototype,"removed",void 0),he([q()],a.prototype,"beforeSelectAll",void 0),he([q()],a.prototype,"selectedAll",void 0),he([q()],a.prototype,"beforeOpen",void 0),he([q()],a.prototype,"open",void 0),he([q()],a.prototype,"close",void 0),he([q()],a.prototype,"blur",void 0),he([q()],a.prototype,"focus",void 0),he([q()],a.prototype,"chipSelection",void 0),he([q()],a.prototype,"resizeStop",void 0),he([q()],a.prototype,"resizing",void 0),he([q()],a.prototype,"resizeStart",void 0),he([q()],a.prototype,"filtering",void 0),he([q()],a.prototype,"tagging",void 0),he([q()],a.prototype,"customValueSelection",void 0),a=he([ot],a),a}(Wl),Dc="e-icons",Os="e-frame",yi="e-check",Fr="e-checkbox-wrapper",Qi="e-stop",Ic="e-selectall-parent",Oc="e-input-group-icon e-back-icon e-icons",Vr="e-input-group-icon e-clear-icon e-icons",Lc="e-input-filter",Nc="e-filter-parent",Bc="e-ddl-device-filter",ja="e-clear-icon",Hr="e-popup-full-page",Pc="e-ddl-device",Wr="e-input-focus",Rc=function(){function u(a){this.activeLi=[],this.activeEle=[],this.parent=a,this.removeEventListener(),this.addEventListener()}return u.prototype.getModuleName=function(){return"CheckBoxSelection"},u.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlurHandler,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),this.parent.on("selectAllText",this.setLocale,this),this.parent.on("filterBarPlaceholder",this.setPlaceholder,this),b.add(document,"mousedown",this.onDocumentClick,this),this.parent.on("addItem",this.checboxCreate,this),this.parent.on("popupFullScreen",this.setPopupFullScreen,this))},u.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlurHandler),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),this.parent.off("selectAllText",this.setLocale),this.parent.off("filterBarPlaceholder",this.setPlaceholder),this.parent.off("addItem",this.checboxCreate),this.parent.off("popupFullScreen",this.setPopupFullScreen))},u.prototype.listOption=function(a){var e=this;if(h(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(i){e.checboxCreate(i)};else{var t=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(i){e.checboxCreate(i),t.apply(e,[i])}}},u.prototype.setPlaceholder=function(a){z.setPlaceholder(a.filterBarPlaceholder,this.filterInput)},u.prototype.checboxCreate=function(a){var e;if(h(a.item)?e=a:e=a.item,this.parent.enableGroupCheckBox||e.className!=="e-list-group-item "&&e.className!=="e-list-group-item"){var t=an(this.parent.createElement),i=M("div."+Dc,e);return e.insertBefore(t,e.childNodes[h(i)?0:1]),M("."+Os,t),this.parent.enableGroupCheckBox&&this.parent.popupWrapper.classList.add("e-multiselect-group"),e}else return e},u.prototype.setSelectAll=function(){this.parent.showSelectAll?(h(this.checkAllParent)&&(this.checkAllParent=this.parent.createElement("div",{className:Ic}),this.selectAllSpan=this.parent.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(h(this.parent.filterParent)?ye([this.checkAllParent],this.parent.popupWrapper):ye([this.checkAllParent],this.parent.filterParent)),this.parent.headerTemplate||(h(this.parent.filterParent)?nt([this.checkAllParent],this.parent.popupWrapper):this.parent.filterParent.parentNode.insertBefore(this.checkAllParent,this.parent.filterParent.nextSibling)),b.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")||this.parent.listData&&this.parent.listData.length<=1&&!this.parent.enableVirtualization&&!this.parent.isDynamicDataChange||this.parent.isDynamicDataChange&&this.parent.listData&&this.parent.listData.length<=1?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):h(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},u.prototype.destroy=function(){this.removeEventListener(),b.remove(document,"mousedown",this.onDocumentClick),this.checkAllParent=null,this.clearIconElement=null,this.filterInput=null,this.filterInputObj=null,this.checkWrapper=null,this.selectAllSpan=null},u.prototype.listSelection=function(a){var e;if(!h(a.e))a.li.querySelector(".e-checkbox-wrapper .e-frame"),e=h(a.e.target)?a.li.querySelector(".e-checkbox-wrapper").childNodes[1]:a.e.target.classList.contains("e-frame")&&(!this.parent.showSelectAll||this.checkAllParent&&!this.checkAllParent.contains(a.e.target))?a.e.target:a.li.querySelector(".e-checkbox-wrapper").childNodes[1];else{var t=a.li.querySelector(".e-checkbox-wrapper");e=t?t.childNodes[1]:a.li.lastElementChild.childNodes[1]}if((this.parent.itemTemplate||this.parent.enableGroupCheckBox)&&(e=a.li.firstElementChild.childNodes[1]),h(e)||(this.checkWrapper=A(e,"."+Fr)),!h(this.checkWrapper)){var i=M("."+Os,this.checkWrapper),s=!1;this.validateCheckNode(this.checkWrapper,i.classList.contains(yi),a.li,a.e,s)}},u.prototype.validateCheckNode=function(a,e,t,i,s){this.changeState(a,e?"uncheck":"check",i,!0,s)},u.prototype.clickHandler=function(a){var e;a.currentTarget.classList.contains(this.checkAllParent.className)||a.currentTarget.classList.value===this.checkAllParent.className?e=a.currentTarget.firstElementChild.lastElementChild:e=a.currentTarget,this.checkWrapper=A(e,"."+Fr);var t=!0;if(!h(this.checkWrapper)){var i=M("."+Os,this.checkWrapper);this.validateCheckNode(this.checkWrapper,i.classList.contains(yi),null,a,t)}a.preventDefault()},u.prototype.changeState=function(a,e,t,i,s){var n=a.getElementsByClassName(Os)[0];e==="check"&&!n.classList.contains(yi)?(n.classList.remove(Qi),n.classList.add(yi),s&&(this.parent.selectAllItems(!0,t),this.setLocale(!0))):e==="uncheck"&&(n.classList.contains(yi)||n.classList.contains(Qi))?(w([n],[yi,Qi]),s&&(this.parent.selectAllItems(!1,t),this.setLocale())):e==="indeterminate"&&!n.classList.contains(Qi)&&(w([n],[yi]),n.classList.add(Qi),s&&(this.parent.selectAllItems(!1,t),this.setLocale()))},u.prototype.setSearchBox=function(a){if(h(this.parent.filterParent)){this.parent.filterParent=this.parent.createElement("span",{className:Nc}),this.filterInput=this.parent.createElement("input",{attrs:{type:"text"},className:Lc}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var e=!1;return V.isDevice&&this.parent.isDeviceFullScreen&&(e=!0,this.parent.mobFilter=!1),this.filterInputObj=z.createInput({element:this.filterInput,buttons:e?[Oc,Vr]:[Vr],properties:{placeholder:this.parent.filterBarPlaceholder}},this.parent.createElement),h(this.parent.cssClass)||(this.parent.cssClass.split(" ").indexOf("e-outline")!==-1?E([this.filterInputObj.container],"e-outline"):this.parent.cssClass.split(" ").indexOf("e-filled")!==-1&&E([this.filterInputObj.container],"e-filled")),ye([this.filterInputObj.container],this.parent.filterParent),nt([this.parent.filterParent],a.popupElement),Q(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","aria-label":"multiselect","aria-expanded":"true","aria-controls":a.popupElement.id}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+ja),!V.isDevice&&this.clearIconElement&&(b.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),b.add(this.filterInput,"input",this.parent.onInput,this.parent),b.add(this.filterInput,"keyup",this.parent.keyUp,this.parent),b.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),b.add(this.filterInput,"blur",this.onBlurHandler,this),b.add(this.filterInput,"paste",this.parent.pasteHandler,this.parent),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},u.prototype.clickOnBackIcon=function(a){this.parent.hidePopup(),w([document.body,this.parent.popupObj.element],Hr),this.parent.inputElement.focus()},u.prototype.clearText=function(a){this.parent.targetInputElement.value="",this.parent.allowFiltering&&this.parent.targetInputElement.value===""&&this.parent.search(null),this.parent.refreshListItems(null),this.parent.refreshPopup(),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),(!this.parent.enableVirtualization||this.parent.enableVirtualization&&(h(this.parent.value)||this.parent.value&&this.parent.value.length===0))&&this.setReorder(a),this.boundPreventListSelection=this.preventListSelection.bind(this),this.parent.popupWrapper.addEventListener("mouseup",this.boundPreventListSelection,!0),a.preventDefault()},u.prototype.preventListSelection=function(a){a.stopPropagation(),this.parent.popupWrapper.removeEventListener("mouseup",this.boundPreventListSelection,!0),this.boundPreventListSelection=null},u.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add(Pc),this.parent.popupObj.element.classList.add(Bc),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector("."+ja),this.clearIconElement.style.visibility="hidden",b.add(this.backIconElement,"click",this.clickOnBackIcon,this),b.add(this.clearIconElement,"click",this.clearText,this)},u.prototype.setSearchBoxPosition=function(){var a=this.filterInput.parentElement.getBoundingClientRect().height,e=0,t=0,i=0;this.checkAllParent&&(e=this.checkAllParent.getBoundingClientRect().height),this.parent.header&&(i=this.parent.header.getBoundingClientRect().height),this.parent.footer&&(t=this.parent.footer.getBoundingClientRect().height),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-a-e-i-t+"px",this.parent.list.style.height=window.innerHeight-a-e-i-t+"px";var s=this.filterInput.parentElement.querySelector("."+ja);G(this.filterInput),s.parentElement.insertBefore(this.filterInput,s)},u.prototype.setPopupFullScreen=function(){this.parent&&this.parent.popupObj&&(Q(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),E([document.body,this.parent.popupObj.element],Hr),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%")},u.prototype.targetElement=function(){return h(this.clearIconElement)||(this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=this.parent.targetInputElement.value===""?"hidden":"visible"),this.parent.targetInputElement.value},u.prototype.onBlurHandler=function(a){if(!this.parent.element.classList.contains("e-listbox")){var e=void 0;if(this.parent.keyAction)return;if(V.isIE&&(e=!h(a)&&a.target),V.isIE||(e=!h(a)&&a.relatedTarget),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(e)&&!V.isIE&&this.filterInput){this.filterInput.focus();return}if(this.parent.scrollFocusStatus&&this.filterInput){a.preventDefault(),this.filterInput.focus(),this.parent.scrollFocusStatus=!1;return}this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(a,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove(Wr),this.parent.trigger("blur"),this.parent.focused=!0),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&!V.isDevice&&this.parent.hidePopup()}},u.prototype.onDocumentClick=function(a){if(this.parent.getLocaleName()!=="listbox"){var e=a.target;!h(this.parent.popupObj)&&A(e,'[id="'+this.parent.popupObj.element.id+'"]')&&(this.filterInput&&this.filterInput.value!==""||a.preventDefault()),!(!h(this.parent.popupObj)&&A(e,'[id="'+this.parent.popupObj.element.id+'"]'))&&!h(this.parent.overAllWrapper)&&!this.parent.overAllWrapper.contains(a.target)?(this.parent.overAllWrapper.classList.contains(O.focus)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.scrollFocusStatus=!1,this.parent.hidePopup(),this.parent.onBlurHandler(a,!0),this.parent.focused=!0):this.parent.scrollFocusStatus=(V.isIE||V.info.name==="edge")&&document.activeElement===this.filterInput,!h(this.parent.overAllWrapper)&&!this.parent.overAllWrapper.contains(a.target)&&this.parent.overAllWrapper.classList.contains("e-input-focus")&&!this.parent.isPopupOpen()&&(V.isIE?this.parent.onBlurHandler():this.parent.onBlurHandler(a)),this.filterInput===e&&this.filterInput.focus()}},u.prototype.getFocus=function(a){if(this.parent.overAllWrapper.classList.remove(Wr),this.parent.keyAction&&a.value!=="clear"&&a.value!=="focus"){this.parent.keyAction=!1;return}a.value==="focus"&&(this.filterInput.focus(),this.parent.removeFocus(),b.remove(this.parent.list,"keydown",this.parent.onKeyDown)),a.value==="clear"&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden")},u.prototype.checkSelectAll=function(a){a.value==="check"&&(this.changeState(this.checkAllParent,a.value,null,null,!1),this.setLocale(!0)),a.value==="uncheck"&&(this.changeState(this.checkAllParent,a.value,null,null,!1),this.setLocale()),a.value==="indeterminate"&&(this.changeState(this.checkAllParent,a.value,null,null,!1),this.setLocale())},u.prototype.setLocale=function(a){if(this.parent.selectAllText!=="Select All"||this.parent.unSelectAllText!=="Unselect All"){var e=a?this.parent.unSelectAllText:this.parent.selectAllText;this.selectAllSpan.textContent="";for(var t=Ie(e),i=a?"unSelectAllText":"selectAllText",s=0,n=t({},this.parent,i,null,!this.parent.isStringTemplate);s<n.length;s++){var r=n[s];this.selectAllSpan.textContent=r.textContent}}else{var l={selectAllText:"Select All",unSelectAllText:"Unselect All"},o=new St(this.parent.getLocaleName(),{},this.parent.locale);o.getConstant("selectAllText")===""&&(o=new St("dropdowns",l,this.parent.locale)),h(this.selectAllSpan)||(this.selectAllSpan.textContent=a?o.getConstant("unSelectAllText"):o.getConstant("selectAllText"))}},u.prototype.getActiveList=function(a){a.li.classList.contains("e-active")?this.activeLi.push(a.li.cloneNode(!0)):this.activeLi.splice(a.index,1)},u.prototype.setReorder=function(a){if(this.parent.enableSelectionOrder&&!h(this.parent.value)){var e=this.parent.ulElement.querySelectorAll("li.e-active").length,t=void 0,i=this.parent.createElement("ul",{className:"e-list-parent e-ul e-reorder"});if(e>0){var s=this.parent.ulElement.querySelectorAll("li.e-active");if(s.forEach(function(r){i.appendChild(r)}),t=this.parent.ulElement.querySelectorAll("li.e-active"),E(t,"e-reorder-hide"),this.parent.enableVirtualization){var n=this.parent.list.querySelector(".e-virtual-ddl-content");nt([i],n)}else nt([i],this.parent.list)}this.parent.focusAtFirstListItem()}},u}(),jl=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ye=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},Ft="e-other-month",Ua="e-other-year",Zi="e-calendar",qr="e-device",Mc="e-header",zr="e-rtl",Fc="e-content",Vc="e-calendar-content-table",Ga="e-year",Ya="e-month",jr="e-decade",Ur="e-icons",Hc="e-prev",Wc="e-next",qc="e-date-icon-prev",zc="e-date-icon-next ",jc="e-icon-container",He="e-disabled",ti="e-overlay",Uc="e-weekend",es="e-week-number",lt="e-selected",At="e-focused-date",bi="e-focused-cell",Ls="e-month-hide",Gr="e-today",Gc="e-title",Yr="e-day",Kr="e-cell",Yc="e-week-header",Ns="e-zoomin",Kc="e-footer-container",_c="e-btn",$c="e-flat",Xc="e-css",Jc="e-primary",_r="e-calendar-day-header-lg",Ka=864e5,Qc=6e4,Zc=function(u){jl(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.effect="",i.isPopupClicked=!1,i.isDateSelected=!0,i.isTodayClicked=!1,i.preventChange=!1,i.previousDates=!1,i}return a.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),this.calendarMode==="Islamic"&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new dt(this.locale),(h(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date(new Date().setHours(0,0,0,0)),this.getModuleName()==="calendar"?(this.element.classList.add(Zi),this.enableRtl&&this.element.classList.add(zr),V.isDevice&&this.element.classList.add(qr),Q(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(Zi),this.enableRtl&&this.calendarElement.classList.add(zr),V.isDevice&&this.calendarElement.classList.add(qr),Q(this.calendarElement,{"data-role":"calendar"})),!h(A(this.element,"fieldset"))&&A(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},a.prototype.rangeValidation=function(e,t){h(e)&&this.setProperties({min:new Date(1900,0,1)},!0),h(t)&&this.setProperties({max:new Date(2099,11,31)},!0)},a.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},a.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date(new Date().setHours(0,0,0,0)),!h(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},a.prototype.setOverlayIndex=function(e,t,i,s){if(s&&!h(t)&&!h(i)&&!h(e)){var n=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(n-1).toString(),e.style.zIndex=n.toString()}},a.prototype.minMaxUpdate=function(e){+this.min<=+this.max?w([this.element],ti):(this.setProperties({min:this.min},!0),E([this.element],ti)),this.min=h(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=h(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},a.prototype.createHeader=function(){var e={"aria-disabled":"false","aria-label":"previous month"},t={"aria-disabled":"false","aria-label":"next month"},i={"aria-atomic":"true","aria-live":"assertive"},s={tabindex:"0"};this.headerElement=this.createElement("div",{className:Mc});var n=this.createElement("div",{className:jc});this.previousIcon=this.createElement("button",{className:""+Hc,attrs:{type:"button"}}),Vt(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),Q(this.previousIcon,e),Q(this.previousIcon,s),this.nextIcon=this.createElement("button",{className:""+Wc,attrs:{type:"button"}}),Vt(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),this.getModuleName()==="daterangepicker"&&(Q(this.previousIcon,{tabIndex:"-1"}),Q(this.nextIcon,{tabIndex:"-1"})),Q(this.nextIcon,t),Q(this.nextIcon,s),this.headerTitleElement=this.createElement("div",{className:""+Yr+" "+Gc}),Q(this.headerTitleElement,i),Q(this.headerTitleElement,s),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:""+qc+" "+Ur})),this.nextIcon.appendChild(this.createElement("span",{className:""+zc+" "+Ur})),n.appendChild(this.previousIcon),n.appendChild(this.nextIcon),this.headerElement.appendChild(n),this.getModuleName()==="calendar"?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},a.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:Fc}),this.table=this.createElement("table",{attrs:{class:Vc,tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),this.getModuleName()==="calendar"?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter(),this.getModuleName()!=="daterangepicker"&&(b.add(this.table,"focus",this.addContentFocus,this),b.add(this.table,"blur",this.removeContentFocus,this))},a.prototype.addContentFocus=function(e){var t=this.tableBodyElement.querySelector("tr td.e-focused-date"),i=this.tableBodyElement.querySelector("tr td.e-selected");h(i)?h(t)||t.classList.add(bi):i.classList.add(bi)},a.prototype.removeContentFocus=function(e){var t=h(this.tableBodyElement)?null:this.tableBodyElement.querySelector("tr td.e-focused-date"),i=h(this.tableBodyElement)?null:this.tableBodyElement.querySelector("tr td.e-selected");h(i)?h(t)||t.classList.remove(bi):i.classList.remove(bi)},a.prototype.getCultureValues=function(){var e=[],t,i=h(this.dayHeaderFormat)?null:"days.stand-alone."+this.dayHeaderFormat.toLowerCase();if((this.locale==="en"||this.locale==="en-US")&&!h(i)?t=I(i,ro()):t=this.getCultureObjects(ul,""+this.locale),!h(t))for(var s=0,n=Object.keys(t);s<n.length;s++){var r=n[s];e.push(I(r,t))}return e},a.prototype.toCapitalize=function(e){return!h(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},a.prototype.createContentHeader=function(){this.getModuleName()==="calendar"?h(this.element.querySelectorAll(".e-content .e-week-header")[0])||G(this.element.querySelectorAll(".e-content .e-week-header")[0]):h(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||G(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var e=6,t="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:Yc}),this.weekNumber&&(t+='<th class="e-week-number" aria-hidden="true"></th>',this.getModuleName()==="calendar"?E([this.element],""+es):E([this.calendarElement],""+es));var i=this.getCultureValues().length>0&&this.getCultureValues()?this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek):null;if(!h(i))for(var s=0;s<=e;s++)t+='<th  class="">'+this.toCapitalize(i[s])+"</th>";t="<tr>"+t+"</tr>",this.tableHeadElement.innerHTML=t,this.table.appendChild(this.tableHeadElement)},a.prototype.createContentBody=function(){switch(this.getModuleName()==="calendar"?h(this.element.querySelectorAll(".e-content tbody")[0])||G(this.element.querySelectorAll(".e-content tbody")[0]):h(this.calendarElement.querySelectorAll(".e-content tbody")[0])||G(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},a.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today")),this.todayElement.setAttribute("tabindex","0")},a.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),t=new Date(+this.max),i={today:"Today"};this.globalize=new dt(this.locale),this.l10=new St(this.getModuleName(),i,this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),Vt(this.todayElement),this.updateFooter(),E([this.todayElement],[_c,Gr,$c,Jc,Xc]),(!(+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0)))||this.todayDisabled)&&E([this.todayElement],He),this.footer=this.createElement("div",{className:Kc}),this.footer.appendChild(this.todayElement),this.getModuleName()==="calendar"&&this.element.appendChild(this.footer),this.getModuleName()==="datepicker"&&this.calendarElement.appendChild(this.footer),this.getModuleName()==="datetimepicker"&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(He)||b.add(this.todayElement,"click",this.todayButtonClick,this)}},a.prototype.wireEvents=function(e,t,i,s){b.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=ae(this.defaultKeyConfigs,this.keyConfigs),this.getModuleName()==="calendar"?this.keyboardModule=new Ct(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):this.keyboardModule=new Ct(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},a.prototype.dateWireEvents=function(e,t,i,s){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=ae(this.defaultKeyConfigs,i),this.serverModuleName=s},a.prototype.todayButtonClick=function(e,t,i){this.showTodayButton&&(this.currentView()===this.depth?this.effect="":this.effect="e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(t)),i):this.navigateTo("Month",new Date(this.checkValue(t)),i))},a.prototype.resetCalendar=function(){this.calendarElement&&G(this.calendarElement),this.tableBodyElement&&G(this.tableBodyElement),this.table&&G(this.table),this.tableHeadElement&&G(this.tableHeadElement),this.nextIcon&&G(this.nextIcon),this.previousIcon&&G(this.previousIcon),this.footer&&G(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},a.prototype.keyActionHandle=function(e,t,i){if(!(this.calendarElement===null&&e.action==="escape")){var s=this.tableBodyElement.querySelector("tr td.e-focused-date"),n;i?!h(s)&&+t===parseInt(s.getAttribute("id").split("_")[0],10)?n=s:n=this.tableBodyElement.querySelector("tr td.e-selected"):n=this.tableBodyElement.querySelector("tr td.e-selected");var r=this.getViewNumber(this.currentView()),l=this.getViewNumber(this.depth),o=r===l&&this.getViewNumber(this.start)>=l;switch(this.effect="",e.action){case"moveLeft":this.getModuleName()!=="daterangepicker"&&!h(e.target)&&(this.keyboardNavigate(-1,r,e,this.max,this.min),e.preventDefault());break;case"moveRight":this.getModuleName()!=="daterangepicker"&&!h(e.target)&&(this.keyboardNavigate(1,r,e,this.max,this.min),e.preventDefault());break;case"moveUp":this.getModuleName()!=="daterangepicker"&&!h(e.target)&&(r===0?this.keyboardNavigate(-7,r,e,this.max,this.min):this.keyboardNavigate(-4,r,e,this.max,this.min),e.preventDefault());break;case"moveDown":this.getModuleName()!=="daterangepicker"&&!h(e.target)&&(r===0?this.keyboardNavigate(7,r,e,this.max,this.min):this.keyboardNavigate(4,r,e,this.max,this.min),e.preventDefault());break;case"select":if(e.target===this.headerTitleElement)this.navigateTitle(e);else if(e.target===this.previousIcon&&!e.target.className.includes(He))this.navigatePrevious(e);else if(e.target===this.nextIcon&&!e.target.className.includes(He))this.navigateNext(e);else if(e.target===this.todayElement&&!e.target.className.includes(He))this.todayButtonClick(e,t),(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&(this.isAngular?this.inputElement.focus():this.element.focus());else{var c=h(s)?n:s;if(!h(c)&&!c.classList.contains(He))if(o){var p=new Date(parseInt(""+c.id,0));this.selectDate(e,p,c),(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&(this.isAngular?this.inputElement.focus():this.element.focus())}else e.target.className.includes(He)||this.contentClick(null,--r,c,t)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":(!h(s)&&!o||!h(n)&&!o)&&this.contentClick(null,--r,s||n,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),G(this.tableBodyElement),r===0?this.renderMonths(e):r===1?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,r),G(this.tableBodyElement),r===0?this.renderMonths(e):r===1?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault();break;case"tab":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&e.target===this.todayElement&&(e.preventDefault(),this.isAngular?this.inputElement.focus():this.element.focus(),this.hide());break;case"shiftTab":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&e.target===this.headerTitleElement&&(e.preventDefault(),this.isAngular?this.inputElement.focus():this.element.focus(),this.hide());break;case"escape":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&(e.target===this.headerTitleElement||e.target===this.previousIcon||e.target===this.nextIcon||e.target===this.todayElement)&&this.hide();break}}},a.prototype.keyboardNavigate=function(e,t,i,s,n){var r=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(G(this.tableBodyElement),this.renderDecades(i)):this.currentDate=r;break;case 1:this.addMonths(this.currentDate,e),this.calendarMode==="Gregorian"?this.isMonthYearRange(this.currentDate)?(G(this.tableBodyElement),this.renderYears(i)):this.currentDate=r:this.isMonthYearRange(this.currentDate)?(G(this.tableBodyElement),this.renderYears(i)):this.currentDate=r;break;case 0:this.addDay(this.currentDate,e,i,s,n),this.isMinMaxRange(this.currentDate)?(G(this.tableBodyElement),this.renderMonths(i)):this.currentDate=r;break}},a.prototype.preRender=function(e){var t=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(i){t.triggerNavigate(i)}},a.prototype.minMaxDate=function(e){var t=new Date(new Date(+e).setHours(0,0,0,0)),i=new Date(new Date(+this.min).setHours(0,0,0,0)),s=new Date(new Date(+this.max).setHours(0,0,0,0));return(+t==+i||+t==+s)&&(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},a.prototype.renderMonths=function(e,t,i){var s=this.weekNumber?8:7,n;this.calendarMode==="Gregorian"?n=this.renderDays(this.currentDate,t,null,null,i,e):n=h(this.islamicModule)?null:this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),this.calendarMode==="Gregorian"?this.renderTemplate(n,s,Ya,e,t):h(this.islamicModule)||this.islamicModule.islamicRenderTemplate(n,s,Ya,e,t)},a.prototype.renderDays=function(e,t,i,s,n,r){var l=[],o=42,c=n?new Date(+e):this.getDate(new Date,this.timezone),p=new Date(this.checkValue(e)),d,f=p.getMonth();this.titleUpdate(e,"days");var v=p;for(p=new Date(v.getFullYear(),v.getMonth(),0,v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds());p.getDay()!==this.firstDayOfWeek;)this.setStartDate(p,-1*Ka);for(var g=0;g<o;++g){var m=this.createElement("td",{className:Kr}),C=this.createElement("span");if(g%7===0&&this.weekNumber){var k=this.weekRule==="FirstDay"?6:this.weekRule==="FirstFourDayWeek"?3:0,T=new Date(p.getFullYear(),p.getMonth(),p.getDate()+k);C.textContent=""+this.getWeek(T),m.appendChild(C),E([m],""+es),l.push(m)}d=new Date(+p),p=this.minMaxDate(p);var x={type:"dateTime",skeleton:"full"},L=this.globalize.parseDate(this.globalize.formatDate(p,x),x),N=this.dayCell(p),R=this.globalize.formatDate(p,{type:"date",skeleton:"full"}),Y=this.createElement("span");Y.textContent=this.globalize.formatDate(p,{format:"d",type:"date",skeleton:"yMd"});var Oe=this.min>p||this.max<p;Oe?(E([N],He),E([N],ti)):Y.setAttribute("title",""+R),f!==p.getMonth()&&(E([N],Ft),Y.setAttribute("aria-disabled","true")),(p.getDay()===0||p.getDay()===6)&&E([N],Uc),N.appendChild(Y),this.renderDayCellArgs={date:p,isDisabled:!1,element:N,isOutOfRange:Oe};var xe=this.renderDayCellArgs;if(this.renderDayCellEvent(xe),xe.isDisabled){var H=new Date(this.checkValue(t)),j=new Date(this.checkValue(xe.date));if(i){if(!h(s)&&s.length>0)for(var F=0;F<s.length;F++){var K=+new Date(this.globalize.formatDate(xe.date,{type:"date",skeleton:"yMd"})),ne=+new Date(this.globalize.formatDate(s[F],{type:"date",skeleton:"yMd"}));K===ne&&(s.splice(F,1),F=-1)}}else H&&+H==+j&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!N.classList.contains(lt)&&(E([N],He),E([N],ti),Y.setAttribute("aria-disabled","true"),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var J=N.classList.contains(Ft),$=N.classList.contains(He);$||b.add(N,"click",this.clickHandler,this);var U=void 0;if(!h(r)&&r.type==="click"&&(U=r.currentTarget),i&&!h(s)&&!$){for(var ie=0;ie<s.length;ie++){var ge=this.calendarMode==="Gregorian"?"gregorian":"islamic",Ce={format:null,type:"date",skeleton:"short",calendar:ge},K=this.globalize.formatDate(p,Ce),ne=this.globalize.formatDate(s[ie],Ce);if((K===ne&&this.getDateVal(p,s[ie])||this.getDateVal(p,t))&&E([N],lt),!h(U)&&U.innerText===N.innerText&&this.previousDates&&N.classList.contains(lt)&&U.classList.contains(lt)){w([N],lt),this.previousDates=!1;for(var ve=this.copyValues(s),ce=0;ce<ve.length;ce++){var me=this.calendarMode==="Gregorian"?"gregorian":"islamic",Se={format:null,type:"date",skeleton:"short",calendar:me},le=this.globalize.formatDate(L,Se),Me=this.globalize.formatDate(ve[ce],Se);if(le===Me){var F=ve.indexOf(ve[ce]);ve.splice(F,1),s.splice(F,1)}}this.setProperties({values:ve},!0)}else this.updateFocus(J,$,p,N,e)}s.length<=0&&this.updateFocus(J,$,p,N,e)}else!$&&this.getDateVal(p,t)&&E([N],lt);this.updateFocus(J,$,p,N,e),!h(L)&&L.getFullYear()===c.getFullYear()&&L.getMonth()===c.getMonth()&&L.getDate()===c.getDate()&&E([N],Gr),l.push(this.renderDayCellArgs.element),p=new Date(+d),this.addDay(p,1,null,this.max,this.min)}return l},a.prototype.updateFocus=function(e,t,i,s,n){n.getDate()===i.getDate()&&!e&&!t?E([s],At):(n>=this.max&&parseInt(s.id,0)===+this.max&&!e&&!t&&E([s],At),n<=this.min&&parseInt(s.id,0)===+this.min&&!e&&!t&&E([s],At))},a.prototype.renderYears=function(e,t){this.removeTableHeadElement();var i=4,s=[],n=h(t),r=new Date(this.checkValue(this.currentDate)),l=r.getMonth(),o=r.getFullYear(),c=r,p=c.getFullYear(),d=new Date(this.checkValue(this.min)).getFullYear(),f=new Date(this.checkValue(this.min)).getMonth(),v=new Date(this.checkValue(this.max)).getFullYear(),g=new Date(this.checkValue(this.max)).getMonth();c.setMonth(0),this.titleUpdate(this.currentDate,"months"),c.setDate(1);for(var m=0;m<12;++m){var C=this.dayCell(c),k=this.createElement("span"),T=t&&t.getMonth()===c.getMonth(),x=t&&t.getFullYear()===o&&T,L=this.globalize.formatDate(c,{type:"date",format:"MMM y"});k.textContent=this.toCapitalize(this.globalize.formatDate(c,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(p<d||m<f&&p===d)||this.max&&(p>v||m>g&&p>=v)?E([C],He):!n&&x?E([C],lt):c.getMonth()===l&&this.currentDate.getMonth()===l&&E([C],At),c.setDate(1),c.setMonth(c.getMonth()+1),C.classList.contains(He)||(b.add(C,"click",this.clickHandler,this),k.setAttribute("title",""+L)),C.appendChild(k),s.push(C)}this.renderTemplate(s,i,Ga,e,t)},a.prototype.renderDecades=function(e,t){this.removeTableHeadElement();var i=4,s=12,n=[],r=new Date(this.checkValue(this.currentDate));r.setMonth(0),r.setDate(1);var l=r.getFullYear(),o=new Date(r.setFullYear(l-l%10)),c=new Date(r.setFullYear(l-l%10+9)),p=o.getFullYear(),d=c.getFullYear(),f=this.globalize.formatDate(o,{format:null,type:"dateTime",skeleton:"y"}),v=this.globalize.formatDate(c,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=f+" - "+v;for(var g=new Date(l-l%10-1,0,1),m=g.getFullYear(),C=0;C<s;++C){var k=m+C;r.setFullYear(k);var T=this.dayCell(r),x=this.createElement("span");x.textContent=this.globalize.formatDate(r,{format:null,type:"dateTime",skeleton:"y"}),k<p||k>d?(E([T],Ua),x.setAttribute("aria-disabled","true"),!h(t)&&r.getFullYear()===t.getFullYear()&&E([T],lt),(k<new Date(this.checkValue(this.min)).getFullYear()||k>new Date(this.checkValue(this.max)).getFullYear())&&E([T],He)):k<new Date(this.checkValue(this.min)).getFullYear()||k>new Date(this.checkValue(this.max)).getFullYear()?E([T],He):!h(t)&&r.getFullYear()===t.getFullYear()?E([T],lt):r.getFullYear()===this.currentDate.getFullYear()&&!T.classList.contains(He)&&E([T],At),T.classList.contains(He)||(b.add(T,"click",this.clickHandler,this),x.setAttribute("title",""+x.textContent)),T.appendChild(x),n.push(T)}this.renderTemplate(n,i,"e-decade",e,t)},a.prototype.dayCell=function(e){var t=this.calendarMode==="Gregorian"?"gregorian":"islamic",i={skeleton:"full",type:"dateTime",calendar:t},s=this.globalize.parseDate(this.globalize.formatDate(e,i),i),n;h(s)||(n=s.valueOf());var r={className:Kr,attrs:{id:""+$e(""+n)}};return this.createElement("td",r)},a.prototype.firstDay=function(e){var t=this.currentView()!=="Decade"?this.tableBodyElement.querySelectorAll("td:not(."+Ft+"):not(."+es+")"):this.tableBodyElement.querySelectorAll("td:not(."+Ua);if(t.length){for(var i=0;i<t.length;i++)if(!t[i].classList.contains(He)){e=new Date(parseInt(t[i].id,0));break}}return e},a.prototype.lastDay=function(e,t){var i=new Date(e.getFullYear(),e.getMonth()+1,0);if(t!==2){var s=Math.abs(i.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return s&&i.setHours(this.firstDay(e).getHours()+s/60),this.findLastDay(i)}else return this.findLastDay(this.firstDay(i))},a.prototype.checkDateValue=function(e){return!h(e)&&e instanceof Date&&!isNaN(+e)?e:null},a.prototype.findLastDay=function(e){var t=this.currentView()==="Decade"?this.tableBodyElement.querySelectorAll("td:not(."+Ua):this.tableBodyElement.querySelectorAll("td:not(."+Ft+"):not(."+es+")");if(t.length){for(var i=t.length-1;i>=0;i--)if(!t[i].classList.contains(He)){e=new Date(parseInt(t[i].id,0));break}}return e},a.prototype.removeTableHeadElement=function(){this.getModuleName()==="calendar"?h(this.element.querySelectorAll(".e-content table thead")[0])||G(this.tableHeadElement):h(this.calendarElement.querySelectorAll(".e-content table thead")[0])||G(this.tableHeadElement)},a.prototype.renderTemplate=function(e,t,i,s,n){var r=this.getViewNumber(this.currentView()),l;this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),w([this.contentElement,this.headerElement],[Ya,jr,Ga]),E([this.contentElement,this.headerElement],[i]);for(var o=41,c=35,p=6,d=t,f=0,v=0;v<e.length/t;++v){for(l=this.createElement("tr"),f=0+f;f<d;f++)!e[f].classList.contains("e-week-number")&&!h(e[f].children[0])&&(E([e[f].children[0]],[Yr]),Vt(e[f].children[0],{duration:600,isCenterRipple:!0})),l.appendChild(e[f]),this.weekNumber&&f===p+1&&e[p+1].classList.contains(Ft)&&E([l],Ls),!this.weekNumber&&f===p&&e[p].classList.contains(Ft)&&E([l],Ls),this.weekNumber?f===o&&e[o].classList.contains(Ft)&&E([l],Ls):f===c&&e[c].classList.contains(Ft)&&E([l],Ls);d=d+t,f=f+0,this.tableBodyElement.appendChild(l)}this.table.querySelector("tbody").className=this.effect,this.calendarMode==="Gregorian"?this.iconHandler():this.islamicModule.islamicIconHandler(),(r!==this.getViewNumber(this.currentView())||r===0&&r!==this.getViewNumber(this.currentView()))&&this.navigateHandler(s),this.setAriaActiveDescendant()},a.prototype.clickHandler=function(e,t){this.clickEventEmitter(e);var i=e.currentTarget,s=this.getViewNumber(this.currentView());i.classList.contains(Ft)?this.contentClick(e,0,null,t):s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.contentClick(e,1,null,t):s===2?this.contentClick(e,1,null,t):!i.classList.contains(Ft)&&s===0?this.selectDate(e,this.getIdValue(e,null),null):this.contentClick(e,0,i,t),this.getModuleName()==="calendar"&&this.table.focus()},a.prototype.clickEventEmitter=function(e){e.preventDefault()},a.prototype.contentClick=function(e,t,i,s){var n=this.getViewNumber(this.currentView()),r=this.getIdValue(e,i);switch(t){case 0:n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(G(this.tableBodyElement),this.currentDate=r,this.effect=Ns,this.renderMonths(e)):(this.calendarMode==="Gregorian"?(this.currentDate.setMonth(r.getMonth()),r.getMonth()>0&&this.currentDate.getMonth()!==r.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(r.getFullYear())):this.currentDate=r,this.effect=Ns,G(this.tableBodyElement),this.renderMonths(e));break;case 1:if(n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,r,null);else{if(this.calendarMode==="Gregorian")this.currentDate.setFullYear(r.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var l=this.islamicModule.getIslamicDate(r);this.currentDate=this.islamicModule.toGregorian(l.year,l.month,1)}this.effect=Ns,G(this.tableBodyElement),this.renderYears(e)}}},a.prototype.switchView=function(e,t,i,s){switch(e){case 0:G(this.tableBodyElement),this.renderMonths(t,null,s);break;case 1:G(this.tableBodyElement),this.renderYears(t);break;case 2:G(this.tableBodyElement),this.renderDecades(t)}},a.prototype.getModuleName=function(){return"calendar"},a.prototype.requiredModules=function(){var e=[];return this.calendarMode==="Islamic"&&e.push({args:[this],member:"islamic",name:"Islamic"}),e},a.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},a.prototype.onPropertyChanged=function(e,t,i,s){this.effect="";for(var n=0,r=Object.keys(e);n<r.length;n++){var l=r[n];switch(l){case"enableRtl":e.enableRtl?this.getModuleName()==="calendar"?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):this.getModuleName()==="calendar"?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),this.getModuleName()!=="datepicker"?this.createContentHeader():this.calendarElement&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),l==="min"?this.setProperties({min:this.checkDateValue(new Date(this.checkValue(e.min)))},!0):this.setProperties({max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&G(this.tableBodyElement),this.minMaxUpdate(),i&&this.validateValues(i,s),this.getModuleName()!=="datepicker"?this.createContentBody():this.calendarElement&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(G(this.todayElement),G(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(w([this.todayElement],He),G(this.todayElement),G(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),this.getModuleName()!=="datepicker"?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody());break;case"locale":if(this.globalize=new dt(this.locale),this.getModuleName()!=="datepicker"?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody()),this.getModuleName()==="calendar"){var o={today:"Today"};this.l10=new St(this.getModuleName(),o,this.locale)}this.l10.setLocale(this.locale),this.showTodayButton&&this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():!h(this.todayElement)&&!h(this.footer)&&(G(this.todayElement),G(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0);break}}},a.prototype.validateValues=function(e,t){if(e&&!h(t)&&t.length>0){for(var i=this.copyValues(t),s=0;s<i.length;s++){var n=i[s],r=this.calendarMode==="Gregorian"?"gregorian":"islamic",l=void 0,o=void 0,c=void 0;this.calendarMode==="Gregorian"?(l={type:"date",skeleton:"yMd"},o=this.globalize.formatDate(n,l),c=this.globalize.parseDate(o,l)):(l={type:"date",skeleton:"yMd",calendar:"islamic"},o=this.globalize.formatDate(n,l),c=this.globalize.parseDate(o,l));var p={type:"date",skeleton:"yMd",calendar:r},d=this.globalize.formatDate(this.min,p),f=d,v={type:"date",skeleton:"yMd",calendar:r},g=this.globalize.formatDate(this.max,v),m=g,C=this.globalize.parseDate(f,p),k=this.globalize.parseDate(m,v);(+c<+C||+c>+k)&&(i.splice(s,1),s=-1)}this.setProperties({values:i},!0)}},a.prototype.setValueUpdate=function(){h(this.tableBodyElement)||(G(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},a.prototype.copyValues=function(e){var t=[];if(!h(e)&&e.length>0)for(var i=0;i<e.length;i++)t.push(new Date(+e[i]));return t},a.prototype.titleUpdate=function(e,t){var i=new dt(this.locale),s,n,r=this.calendarMode==="Gregorian"?"gregorian":"islamic";switch(this.calendarMode==="Gregorian"?(s=i.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:r}),n=i.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:r})):(s=i.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:r}),n=i.formatDate(e,{type:"dateTime",format:"y",calendar:r})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(s);break;case"months":this.headerTitleElement.textContent=n}},a.prototype.setActiveDescendant=function(){var e,t=this.tableBodyElement.querySelector("tr td.e-focused-date"),i=this.tableBodyElement.querySelector("tr td.e-selected"),s=this.calendarMode==="Gregorian"?"gregorian":"islamic",n,r=this.currentView();return r==="Month"?n=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"full",calendar:s}):r==="Year"?s!=="islamic"?n=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"yMMMM",calendar:s}):n=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"GyMMM",calendar:s}):n=this.globalize.formatDate(this.currentDate,{format:null,type:"date",skeleton:"y",calendar:s}),(i||t)&&(h(i)||i.setAttribute("aria-selected","true"),(t||i).setAttribute("aria-label",n),e=(t||i).getAttribute("id")),e},a.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},a.prototype.destroy=function(){this.getModuleName()==="calendar"&&this.element?w([this.element],[Zi]):this.calendarElement&&this.element&&w([this.element],[Zi]),this.getModuleName()==="calendar"&&this.element&&(h(this.headerTitleElement)||b.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&b.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),h(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),this.todayElement=null,this.tableBodyElement=null,this.todayButtonEvent=null,this.renderDayCellArgs=null,this.headerElement=null,this.nextIcon=null,this.table=null,this.tableHeadElement=null,this.previousIcon=null,this.headerTitleElement=null,this.footer=null,this.contentElement=null,u.prototype.destroy.call(this)},a.prototype.title=function(e){var t=this.getViewNumber(this.currentView());this.effect=Ns,this.switchView(++t,e)},a.prototype.getViewNumber=function(e){return e==="Month"?0:e==="Year"?1:2},a.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e)},a.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e);break}},a.prototype.navigatePrevious=function(e){!V.isDevice&&e.preventDefault(),this.calendarMode==="Gregorian"?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e)},a.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e);break}},a.prototype.navigateNext=function(e){!V.isDevice&&e.preventDefault(),this.calendarMode==="Gregorian"?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e)},a.prototype.navigateTo=function(e,t,i){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,i)},a.prototype.currentView=function(){return!h(this.contentElement)&&this.contentElement.classList.contains(Ga)?"Year":!h(this.contentElement)&&this.contentElement.classList.contains(jr)?"Decade":"Month"},a.prototype.getDateVal=function(e,t){return!h(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},a.prototype.getCultureObjects=function(e,t){var i=h(this.dayHeaderFormat)?null:".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),s=h(this.dayHeaderFormat)?null:".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase(),n="main.";return this.calendarMode==="Gregorian"?I(n+""+this.locale+i,e):I("main."+this.locale+s,e)},a.prototype.getWeek=function(e){var t=new Date(this.checkValue(e)).valueOf(),i=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((t-i+Ka)/Ka/7)},a.prototype.setStartDate=function(e,t){var i=e.getTimezoneOffset(),s=new Date(e.getTime()+t),n=s.getTimezoneOffset()-i;e.setTime(s.getTime()+n*Qc)},a.prototype.addMonths=function(e,t){if(this.calendarMode==="Gregorian"){var i=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year,s.month+t,1)}},a.prototype.addYears=function(e,t){if(this.calendarMode==="Gregorian"){var i=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year+t,s.month,1)}},a.prototype.getIdValue=function(e,t){var i;e?i=e.currentTarget:i=t;var s=this.calendarMode==="Gregorian"?"gregorian":"islamic",n={type:"dateTime",skeleton:"full",calendar:s},r=this.globalize.formatDate(new Date(parseInt(""+i.getAttribute("id"),0)),n),l=this.globalize.parseDate(r,n),o=l.valueOf()-l.valueOf()%1e3;return new Date(o)},a.prototype.adjustLongHeaderSize=function(){w([this.element],_r),this.dayHeaderFormat==="Wide"&&E([this.getModuleName()==="calendar"?this.element:this.calendarElement],_r)},a.prototype.selectDate=function(e,t,i,s,n){var r=i||e.currentTarget;if(this.isDateSelected=!1,this.currentView()==="Decade")this.setDateDecade(this.currentDate,t.getFullYear());else if(this.currentView()==="Year")this.setDateYear(this.currentDate,t);else{if(s&&!this.checkPresentDate(t,n)){var l=this.copyValues(n);!h(n)&&l.length>0?(l.push(new Date(this.checkValue(t))),this.setProperties({values:l},!0),this.setProperties({value:n[n.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}var o=A(r,"."+Zi);if(h(o)&&(o=this.tableBodyElement),!s&&!h(o.querySelector("."+lt))&&w([o.querySelector("."+lt)],lt),!s&&!h(o.querySelector("."+At))&&w([o.querySelector("."+At)],At),!s&&!h(o.querySelector("."+bi))&&w([o.querySelector("."+bi)],bi),s){for(var l=this.copyValues(n),c=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),p=0;p<c.length;p++){var d=o.querySelectorAll("td."+At)[0],f=o.querySelectorAll("td."+lt)[0];c[p]===d&&w([c[p]],At),c[p]===f&&!this.checkPresentDate(new Date(parseInt(f.getAttribute("id").split("_")[0],10)),n)&&w([c[p]],lt)}if(r.classList.contains(lt)){w([r],lt);for(var v=0;v<l.length;v++){var g=this.calendarMode==="Gregorian"?"gregorian":"islamic",m={format:null,type:"date",skeleton:"short",calendar:g},C=this.globalize.formatDate(t,m),k=this.globalize.formatDate(l[v],m);if(C===k){var p=l.indexOf(l[v]);l.splice(p,1),E([r],At)}}this.setProperties({values:l},!0)}else E([r],lt)}else E([r],lt);this.isDateSelected=!0},a.prototype.checkPresentDate=function(e,t){var i=!1;if(!h(t))for(var s=0;s<t.length;s++){var n=this.calendarMode==="Gregorian"?"gregorian":"islamic",r=this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:n}),l=this.globalize.formatDate(t[s],{format:null,type:"date",skeleton:"short",calendar:n});r===l&&(i=!0)}return i},a.prototype.setAriaActiveDescendant=function(){Q(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},a.prototype.previousIconHandler=function(e){e?h(this.previousIcon)||(b.remove(this.previousIcon,"click",this.navigatePreviousHandler),E([this.previousIcon],""+He),E([this.previousIcon],""+ti),this.previousIcon.setAttribute("aria-disabled","true")):(b.add(this.previousIcon,"click",this.navigatePreviousHandler),w([this.previousIcon],""+He),w([this.previousIcon],""+ti),this.previousIcon.setAttribute("aria-disabled","false"))},a.prototype.renderDayCellEvent=function(e){ae(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},a.prototype.navigatedEvent=function(e){ae(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},a.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},a.prototype.nextIconHandler=function(e){e?h(this.previousIcon)||(b.remove(this.nextIcon,"click",this.navigateNextHandler),E([this.nextIcon],He),E([this.nextIcon],ti),this.nextIcon.setAttribute("aria-disabled","true")):(b.add(this.nextIcon,"click",this.navigateNextHandler),w([this.nextIcon],He),w([this.nextIcon],ti),this.nextIcon.setAttribute("aria-disabled","false"))},a.prototype.compare=function(e,t,i){var s=t.getFullYear(),n,r;return n=s,r=0,i&&(s=s-s%i,n=s-s%i+i-1),e.getFullYear()>n?r=1:e.getFullYear()<s&&(r=-1),r},a.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},a.prototype.isMonthYearRange=function(e){if(this.calendarMode==="Gregorian")return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},a.prototype.compareYear=function(e,t){return this.compare(e,t,0)},a.prototype.compareDecade=function(e,t){return this.compare(e,t,10)},a.prototype.shiftArray=function(e,t){return e.slice(t).concat(e.slice(0,t))},a.prototype.addDay=function(e,t,i,s,n){var r=t,l=new Date(+e);if(!h(this.tableBodyElement)&&!h(i)){for(;this.findNextTD(new Date(+e),r,s,n);)r+=t;var o=new Date(l.setDate(l.getDate()+r));r=+o>+s||+o<+n?r===t?t-t:t:r}e.setDate(e.getDate()+r)},a.prototype.findNextTD=function(e,t,i,s){var n=new Date(e.setDate(e.getDate()+t)),r=[],l=!1;if((!h(n)&&n.getMonth())===(!h(this.currentDate)&&this.currentDate.getMonth())){var o=void 0;this.calendarMode==="Gregorian"?o=this.renderDays(n):o=this.islamicModule.islamicRenderDays(this.currentDate,n),r=o.filter(function(p){return p.classList.contains(He)})}else r=this.tableBodyElement.querySelectorAll("td."+He);if(+n<=+i&&+n>=+s&&r.length)for(var c=0;c<r.length&&(l=+n==+new Date(parseInt(r[c].id,0)),!l);c++);return l},a.prototype.getMaxDays=function(e){var t,i=new Date(this.checkValue(e));t=28;for(var s=i.getMonth();i.getMonth()===s;)++t,i.setDate(t);return t-1},a.prototype.setDateDecade=function(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)},a.prototype.setDateYear=function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)},a.prototype.compareMonth=function(e,t){var i;return e.getFullYear()>t.getFullYear()?i=1:e.getFullYear()<t.getFullYear()?i=-1:i=e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1,i},a.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},a.prototype.checkView=function(){this.start!=="Decade"&&this.start!=="Year"&&this.setProperties({start:"Month"},!0),this.depth!=="Decade"&&this.depth!=="Year"&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},a.prototype.getDate=function(e,t){return t&&(e=new Date(e.toLocaleString("en-US",{timeZone:t}))),e},Ye([y(new Date(1900,0,1))],a.prototype,"min",void 0),Ye([y(!0)],a.prototype,"enabled",void 0),Ye([y(null)],a.prototype,"cssClass",void 0),Ye([y(new Date(2099,11,31))],a.prototype,"max",void 0),Ye([y(null)],a.prototype,"firstDayOfWeek",void 0),Ye([y("Gregorian")],a.prototype,"calendarMode",void 0),Ye([y("Month")],a.prototype,"start",void 0),Ye([y("Month")],a.prototype,"depth",void 0),Ye([y(!1)],a.prototype,"weekNumber",void 0),Ye([y("FirstDay")],a.prototype,"weekRule",void 0),Ye([y(!0)],a.prototype,"showTodayButton",void 0),Ye([y("Short")],a.prototype,"dayHeaderFormat",void 0),Ye([y(!1)],a.prototype,"enablePersistence",void 0),Ye([y(null)],a.prototype,"keyConfigs",void 0),Ye([y(null)],a.prototype,"serverTimezoneOffset",void 0),Ye([q()],a.prototype,"created",void 0),Ye([q()],a.prototype,"destroyed",void 0),Ye([q()],a.prototype,"navigated",void 0),Ye([q()],a.prototype,"renderDayCell",void 0),a=Ye([ot],a),a}(Tt),ep=function(u){jl(a,u);function a(e,t){return u.call(this,e,t)||this}return a.prototype.render=function(){if(this.calendarMode==="Islamic"&&this.islamicModule===void 0&&lo("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&typeof this.values=="object"&&!h(this.values)&&this.values.length>0){for(var e=[],t=[],i=0;i<this.values.length;i++)e.indexOf(+this.values[i])===-1&&(e.push(+this.values[i]),t.push(this.values[i]));this.setProperties({values:t},!0);for(var s=0;s<this.values.length;s++)if(!this.checkDateValue(this.values[s]))if(typeof this.values[s]=="string"&&this.checkDateValue(new Date(this.checkValue(this.values[s])))){var n=new Date(this.checkValue(this.values[s]));this.values.splice(s,1),this.values.splice(s,0,n)}else this.values.splice(s,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),this.getModuleName()==="calendar"&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),u.prototype.render.call(this),this.getModuleName()==="calendar"){var r=A(this.element,"form");r&&b.add(r,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},a.prototype.setEnable=function(e){e?w([this.element],He):E([this.element],He)},a.prototype.setClass=function(e,t){h(t)||(t=t.replace(/\s+/g," ").trim()),h(e)||(e=e.replace(/\s+/g," ").trim()),!h(t)&&t!==""&&w([this.element],t.split(" ")),h(e)||E([this.element],e.split(" "))},a.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)},a.prototype.setTimeZone=function(e){if(!h(this.serverTimezoneOffset)&&this.value){var t=e,i=new Date().getTimezoneOffset()/60,s=t+i;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+s*60*60*1e3)}},a.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},a.prototype.validateDate=function(){typeof this.value=="string"&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),u.prototype.validateDate.call(this,this.value),!h(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},a.prototype.minMaxUpdate=function(){this.getModuleName()==="calendar"&&(!h(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!h(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),this.getModuleName()!=="calendar"&&!h(this.value)?!h(this.value)&&this.value<this.min&&this.min<=this.max?u.prototype.minMaxUpdate.call(this,this.min):!h(this.value)&&this.value>this.max&&this.min<=this.max&&u.prototype.minMaxUpdate.call(this,this.max):u.prototype.minMaxUpdate.call(this,this.value)},a.prototype.generateTodayVal=function(e){var t=new Date;return h(this.timezone)||(t=u.prototype.getDate.call(this,t,this.timezone)),e&&h(this.timezone)?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t},a.prototype.todayButtonClick=function(e){if(this.showTodayButton){var t=this.generateTodayVal(this.value);if(this.setProperties({value:t},!0),this.isTodayClicked=!0,this.todayButtonEvent=e,this.isMultiSelection){var i=this.copyValues(this.values);u.prototype.checkPresentDate.call(this,t,this.values)||(i.push(t),this.setProperties({values:i}))}u.prototype.todayButtonClick.call(this,e,new Date(+this.value))}},a.prototype.keyActionHandle=function(e){u.prototype.keyActionHandle.call(this,e,this.value,this.isMultiSelection)},a.prototype.preRender=function(){var e=this;this.changeHandler=function(t){e.triggerChange(t)},this.checkView(),u.prototype.preRender.call(this,this.value)},a.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,u.prototype.createContent.call(this)},a.prototype.minMaxDate=function(e){return u.prototype.minMaxDate.call(this,e)},a.prototype.renderMonths=function(e,t,i){u.prototype.renderMonths.call(this,e,this.value,i)},a.prototype.renderDays=function(e,t,i,s,n,r){var l=u.prototype.renderDays.call(this,e,this.value,this.isMultiSelection,this.values,n,r);return this.isMultiSelection&&u.prototype.validateValues.call(this,this.isMultiSelection,this.values),l},a.prototype.renderYears=function(e){this.calendarMode==="Gregorian"?u.prototype.renderYears.call(this,e,this.value):this.islamicModule.islamicRenderYears(e,this.value)},a.prototype.renderDecades=function(e){this.calendarMode==="Gregorian"?u.prototype.renderDecades.call(this,e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)},a.prototype.renderTemplate=function(e,t,i,s){this.calendarMode==="Gregorian"?u.prototype.renderTemplate.call(this,e,t,i,s,this.value):this.islamicModule.islamicRenderTemplate(e,t,i,s,this.value),this.changedArgs={value:this.value,values:this.values},s&&s.type==="click"&&s.currentTarget.classList.contains(Ft)?this.changeHandler(s):this.changeHandler()},a.prototype.clickHandler=function(e){var t=e.currentTarget;if(this.isPopupClicked=!0,t.classList.contains(Ft))if(this.isMultiSelection){var i=this.copyValues(this.values);i.toString().indexOf(this.getIdValue(e,null).toString())===-1?(i.push(this.getIdValue(e,null)),this.setProperties({values:i},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(e,null)},!0);var s=this.currentView();u.prototype.clickHandler.call(this,e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!h(this.tableBodyElement.querySelectorAll("."+At)[0])&&s==="Year"&&this.tableBodyElement.querySelectorAll("."+At)[0].classList.remove(At)},a.prototype.switchView=function(e,t,i,s){u.prototype.switchView.call(this,e,t,this.isMultiSelection,s)},a.prototype.getModuleName=function(){return u.prototype.getModuleName.call(this),"calendar"},a.prototype.getPersistData=function(){u.prototype.getPersistData.call(this);var e=["value","values"];return this.addOnPersist(e)},a.prototype.onPropertyChanged=function(e,t){this.effect="",this.rangeValidation(this.min,this.max);for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];switch(n){case"value":this.isDateSelected&&(typeof e.value=="string"?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:t.value},!0),this.update());break;case"values":if(this.isDateSelected){if(typeof e.values=="string"||typeof e.values=="number")this.setProperties({values:null},!0);else{for(var r=this.copyValues(this.values),l=0;l<r.length;l++){var o=r[l];this.checkDateValue(o)&&!u.prototype.checkPresentDate.call(this,o,r)&&r.push(o)}this.setProperties({values:r},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":this.getModuleName()==="calendar"&&this.setClass(e.cssClass,t.cssClass);break;default:u.prototype.onPropertyChanged.call(this,e,t,this.isMultiSelection,this.values)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},a.prototype.destroy=function(){if(u.prototype.destroy.call(this),this.getModuleName()==="calendar"){this.changedArgs=null;var e=A(this.element,"form");e&&b.remove(e,"reset",this.formResetHandler.bind(this))}},a.prototype.navigateTo=function(e,t,i){this.minMaxUpdate(),u.prototype.navigateTo.call(this,e,t,i)},a.prototype.currentView=function(){return u.prototype.currentView.call(this)},a.prototype.addDate=function(e){if(typeof e!="string"&&typeof e!="number"){var t=this.copyValues(this.values);if(typeof e=="object"&&e.length>0)for(var i=e,s=0;s<i.length;s++)this.checkDateValue(i[s])&&!u.prototype.checkPresentDate.call(this,i[s],t)&&(!h(t)&&t.length>0?t.push(i[s]):t=[new Date(+i[s])]);else this.checkDateValue(e)&&!u.prototype.checkPresentDate.call(this,e,t)&&(!h(t)&&t.length>0?t.push(e):t=[new Date(+e)]);this.setProperties({values:t},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,t),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},a.prototype.removeDate=function(e){if(typeof e!="string"&&typeof e!="number"&&!h(this.values)&&this.values.length>0){var t=this.copyValues(this.values);if(typeof e=="object"&&e.length>0)for(var i=e,s=0;s<i.length;s++)for(var n=0;n<t.length;n++)+t[n]==+i[s]&&t.splice(n,1);else for(var n=0;n<t.length;n++)+t[n]==+e&&t.splice(n,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},a.prototype.setTodayDate=function(e){var t=new Date(+e);this.setProperties({value:t},!0),u.prototype.todayButtonClick.call(this,null,t,!0)},a.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),u.prototype.setValueUpdate.call(this)},a.prototype.selectDate=function(e,t,i){u.prototype.selectDate.call(this,e,t,i,this.isMultiSelection,this.values),this.isMultiSelection&&!h(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)},a.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},a.prototype.triggerChange=function(e){!h(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!h(e),h(this.value)||this.setProperties({value:this.value},!0),!this.isMultiSelection&&+this.value!==Number.NaN&&(!h(this.value)&&!h(this.previousDate)||this.previousDate===null&&!isNaN(+this.value))?this.changeEvent(e):!h(this.values)&&this.previousValues!==this.values.length&&(this.changeEvent(e),this.previousValues=this.values.length)},Ye([y(null)],a.prototype,"value",void 0),Ye([y(null)],a.prototype,"values",void 0),Ye([y(!1)],a.prototype,"isMultiSelection",void 0),Ye([q()],a.prototype,"change",void 0),a=Ye([ot],a),a}(Zc),tp=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Fe=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s},ip="e-date-wrapper",Bs="e-datepicker",sp="e-lib",ap="e-control",$r="e-popup-wrapper",np="e-input-group-icon",rp="e-popup",lp="e-input-group",_a="e-input-focus",op="e-input",Xr="e-error",Ps="e-active",Jr="e-date-overflow",hp="e-date-icon",up="e-icons",cp=300,pp=4,Rs="e-selected",dp="e-focused-date",$a="e-non-edit",Qr=["title","class","style"],Ms=function(u){tp(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.isDateIconClicked=!1,i.isAltKeyPressed=!1,i.isInteracted=!0,i.invalidValueString=null,i.checkPreviousValue=null,i.maskedDateValue="",i.preventChange=!1,i.isIconClicked=!1,i.isDynamicValueChanged=!1,i.moduleName=i.getModuleName(),i.isFocused=!1,i.isBlur=!1,i.isKeyAction=!1,i.datepickerOptions=e,i}return a.prototype.render=function(){this.initialize(),this.bindEvents(),this.floatLabelType!=="Never"&&z.calculateWidth(this.inputElement,this.inputWrapper.container),!h(this.inputWrapper.buttons[0])&&!h(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!h(A(this.element,"fieldset"))&&A(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},a.prototype.setTimeZone=function(e){if(!h(this.serverTimezoneOffset)&&this.value){var t=new Date().getTimezoneOffset()/60,i=e,s=i+t;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+s*60*60*1e3),this.updateInput(),this.changeTrigger(null)}},a.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)},a.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):Q(this.inputElement,{readonly:""}),this.updateIconState()},a.prototype.updateIconState=function(){!this.allowEdit&&this.inputWrapper&&!this.readonly?this.inputElement.value===""?w([this.inputWrapper.container],[$a]):E([this.inputWrapper.container],[$a]):this.inputWrapper&&w([this.inputWrapper.container],[$a])},a.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)?(this.updateInput(!0),this.updateInputValue(this.maskedDateValue)):this.enableMask||this.updateInput(!0),this.previousElementValue=this.inputElement.value,this.previousDate=h(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},a.prototype.createInput=function(){var e={"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"};if(this.getModuleName()==="datepicker"){var t={placeholder:this.placeholder};this.globalize=new dt(this.locale),this.l10n=new St("datepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}this.fullScreenMode&&V.isDevice&&(this.cssClass+=" e-popup-expand");var i=this.cssClass;!h(this.cssClass)&&this.cssClass!==""&&(i=this.cssClass.replace(/\s+/g," ").trim());var s=!this.enableMask;this.inputWrapper=z.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:s,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:i,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[np+" "+hp+" "+up]},this.createElement),this.setWidth(this.width),this.inputElement.name!==""?this.inputElement.setAttribute("name",""+this.inputElement.getAttribute("name")):this.inputElement.setAttribute("name",""+this.element.id),Q(this.inputElement,e),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),z.addAttributes({"aria-label":"select",role:"button"},this.inputWrapper.buttons[0]),E([this.inputWrapper.container],ip)},a.prototype.updateInput=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i;if(this.value&&!this.isCalendar()&&this.disabledDates(e,t),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(u.prototype.validateDate.call(this),this.minMaxUpdates(),u.prototype.minMaxUpdate.call(this)),!h(this.value)){var s=this.value,n=void 0,r=h(this.formatString)?this.dateTimeFormat:this.formatString;if(this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?n=this.globalize.formatDate(this.value,{format:r,type:"dateTime",skeleton:"yMd"}):n=this.globalize.formatDate(this.value,{format:r,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(this.calendarMode==="Gregorian"?i={format:this.formatString,type:"dateTime",skeleton:"yMd"}:i={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n=this.globalize.formatDate(this.value,i)),+s<=+this.max&&+s>=+this.min)this.updateInputValue(n);else{var l=+s>=+this.max||!+this.value||!+this.value||+s<=+this.min;!this.strictMode&&l&&this.updateInputValue(n)}}h(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&h(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},a.prototype.minMaxUpdates=function(){!h(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!h(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},a.prototype.checkStringValue=function(e){var t=null,i=null,s=null;if(this.getModuleName()==="datetimepicker"){var n=new dt(this.locale);this.calendarMode==="Gregorian"?(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},s={format:n.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s={format:n.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else this.calendarMode==="Gregorian"?i={format:this.formatString,type:"dateTime",skeleton:"yMd"}:i={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return t=this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(e),i)),h(t)&&this.getModuleName()==="datetimepicker"&&(t=this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(e),s))),t},a.prototype.checkInvalidValue=function(e){if(!(e instanceof Date)&&!h(e)){var t=null,i=e;if(typeof e=="number"&&(i=e.toString()),this.getModuleName()==="datetimepicker"){var s=new dt(this.locale);this.calendarMode==="Gregorian"?(this.dateTimeFormat,s.getDatePattern({skeleton:"yMd"})):(this.dateTimeFormat,s.getDatePattern({skeleton:"yMd"}))}else this.calendarMode==="Gregorian"?this.formatString:this.formatString;var n=!1;if(typeof i!="string")i=null,n=!0;else if(typeof i=="string"&&(i=i.trim()),t=this.checkStringValue(i),!t){var r=null,l=null;r=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,l=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!r.test(i)&&!l.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i)))?n=!0:t=new Date(i)}n?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}},a.prototype.bindInputEvent=function(){(!h(this.formatString)||this.enableMask)&&(this.enableMask||this.formatString.indexOf("y")===-1?b.add(this.inputElement,"input",this.inputHandler,this):b.remove(this.inputElement,"input",this.inputHandler))},a.prototype.bindEvents=function(){b.add(this.inputWrapper.buttons[0],"mousedown",this.dateIconHandler,this),b.add(this.inputElement,"mouseup",this.mouseUpHandler,this),b.add(this.inputElement,"focus",this.inputFocusHandler,this),b.add(this.inputElement,"blur",this.inputBlurHandler,this),b.add(this.inputElement,"keyup",this.keyupHandler,this),this.enableMask&&b.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),b.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&b.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&b.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=ae(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new Ct(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},a.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Backspace":case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&(e.code!=="Delete"&&e.code!=="Backspace"&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}));break}},a.prototype.unBindEvents=function(){h(this.inputWrapper)||b.remove(this.inputWrapper.buttons[0],"mousedown",this.dateIconHandler),b.remove(this.inputElement,"mouseup",this.mouseUpHandler),b.remove(this.inputElement,"focus",this.inputFocusHandler),b.remove(this.inputElement,"blur",this.inputBlurHandler),b.remove(this.inputElement,"change",this.inputChangeHandler),b.remove(this.inputElement,"keyup",this.keyupHandler),this.enableMask&&b.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&b.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&b.remove(this.formElement,"reset",this.resetFormHandler)},a.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");(this.element.tagName==="EJS-DATEPICKER"||this.element.tagName==="EJS-DATETIMEPICKER")&&(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}},a.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=h(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},a.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},a.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&b.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},a.prototype.resetHandler=function(e){this.enabled&&(e.preventDefault(),this.clear(e))},a.prototype.mouseUpHandler=function(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},a.prototype.clear=function(e){this.setProperties({value:null},!0),this.enableMask||this.updateInputValue("");var t={event:e};if(this.trigger("cleared",t),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),A(this.element,"form")){var i=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),i.dispatchEvent(s)}},a.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},a.prototype.updateInputValue=function(e){z.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},a.prototype.dateIconHandler=function(e){this.enabled&&(this.isIconClicked=!0,V.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),this.getModuleName()==="datetimepicker"&&this.inputElement.focus(),this.inputElement.focus(),E([this.inputWrapper.container],[_a]),E(this.inputWrapper.buttons,Ps))),this.isIconClicked=!1)},a.prototype.updateHtmlAttributeToWrapper=function(){if(!h(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(!h(this.htmlAttributes[""+i])&&Qr.indexOf(i)>-1)if(i==="class"){var s=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();s!==""&&E([this.inputWrapper.container],s.split(" "))}else if(i==="style"){var n=this.inputWrapper.container.getAttribute(i);h(n)?n=this.htmlAttributes[""+i]:n.charAt(n.length-1)===";"?n=n+this.htmlAttributes[""+i]:n=n+";"+this.htmlAttributes[""+i],this.inputWrapper.container.setAttribute(i,n)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}},a.prototype.updateHtmlAttributeToElement=function(){if(!h(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];Qr.indexOf(i)<0&&this.inputElement.setAttribute(i,this.htmlAttributes[""+i])}},a.prototype.updateCssClass=function(e,t){h(t)||(t=t.replace(/\s+/g," ").trim()),h(e)||(e=e.replace(/\s+/g," ").trim()),z.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&z.setCssClass(e,[this.popupWrapper],t)},a.prototype.calendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value!=+this.currentDate&&!this.isCalendar()&&this.inputWrapper.container.children[this.index].focus():this.show(null,e),this.getModuleName()==="datetimepicker"&&this.inputElement.focus();break}},a.prototype.inputFocusHandler=function(){if(this.isFocused=!0,!!this.enabled){this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length),this.enableMask&&this.showClearButton&&this.inputElement&&this.inputElement.value===this.maskedDateValue&&this.inputWrapper&&this.inputWrapper.clearButton&&!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&this.inputWrapper.clearButton.classList.add("e-clear-icon-hide");var e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}},a.prototype.inputHandler=function(e){this.isPopupClicked=!1,this.enableMask&&(!h(e)&&!h(e.inputType)&&e.inputType==="insertFromPaste"?this.notify("maskPasteInputHandler",{module:"MaskedDateTime"}):this.notify("inputHandler",{module:"MaskedDateTime"}))},a.prototype.inputBlurHandler=function(e){if(this.enabled){if(this.strictModeUpdate(),this.inputElement.value===""&&h(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.isBlur=!0,this.updateInput(!1,!0),this.isBlur=!1,this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&this.floatLabelType!=="Always"&&this.inputElement.value===this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&this.updateInputValue(""),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.getModuleName()==="datepicker"){var t={model:this};this.trigger("blur",t)}this.isCalendar()&&(this.defaultKeyConfigs=ae(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new Ct(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1}},a.prototype.documentHandler=function(e){!h(this.popupObj)&&!h(this.inputWrapper)&&(this.inputWrapper.container.contains(e.target)&&e.type!=="mousedown"||this.popupObj.element&&this.popupObj.element.contains(e.target))&&e.type!=="touchstart"&&e.preventDefault();var t=e.target;!A(t,".e-datepicker.e-popup-wrapper")&&!h(this.inputWrapper)&&A(t,"."+lp)!==this.inputWrapper.container&&!t.classList.contains("e-day")&&!t.classList.contains("e-dlg-overlay")?(this.hide(e),this.focusOut()):A(t,".e-datepicker.e-popup-wrapper")&&(t.classList.contains("e-day")&&!h(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&A(t,".e-content")&&A(t,".e-content").classList.contains("e-"+this.depth.toLowerCase())?this.hide(e):A(t,".e-footer-container")&&t.classList.contains("e-today")&&t.classList.contains("e-btn")&&+new Date(+this.value)==+u.prototype.generateTodayVal.call(this,this.value)&&this.hide(e))},a.prototype.inputKeyActionHandle=function(e){var t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),this.getModuleName()==="datepicker"&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),!this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":{var i=this.inputElement.selectionStart,s=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var n=this.inputElement.value.length;(i===0&&s===n||s!==n&&e.action==="tab"||i!==0&&e.action==="shiftTab")&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}),i=this.inputElement.selectionStart,s=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=i,this.inputElement.selectionEnd=s),e.action==="tab"&&e.target===this.inputElement&&this.isCalendar()&&document.activeElement===this.inputElement&&(e.preventDefault(),this.headerTitleElement.focus()),e.action==="shiftTab"&&e.target===this.inputElement&&this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e);break}default:this.defaultAction(e),e.action==="select"&&t===this.depth&&this.hide(e)}},a.prototype.defaultAction=function(e){this.previousDate=!h(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(u.prototype.keyActionHandle.call(this,e),this.isCalendar()&&Q(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},a.prototype.popupUpdate=function(){if((h(this.value)&&!h(this.previousDate)||this.getModuleName()!=="datetimepicker"&&+this.value!=+this.previousDate||this.getModuleName()==="datetimepicker"&&+this.value!=+this.previousDateTime)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+Rs).length>0&&w(this.popupObj.element.querySelectorAll("."+Rs),[Rs]),!h(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var e=new Date(this.checkValue(this.value));u.prototype.navigateTo.call(this,"Month",e)}},a.prototype.strictModeUpdate=function(){var e,t=/^y/,i=/[^a-zA-Z]/,s;if(this.getModuleName()==="datetimepicker"?e=h(this.formatString)?this.dateTimeFormat:this.formatString:(!t.test(this.formatString)||i.test(this.formatString))&&(e=h(this.formatString)?this.formatString:this.formatString.replace("dd","d")),h(e))e=this.formatString;else{var n=e.split("M").length-1;n<3&&(e=e.replace("MM","M"))}var r;this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?r={format:h(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:h(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:(this.calendarMode==="Gregorian"?s={format:e,type:"dateTime",skeleton:"yMd"}:s={format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},r=s);var l;if(typeof this.inputElement.value=="string"&&(this.inputElement.value=this.inputElement.value.trim()),this.getModuleName()==="datetimepicker"){if(this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),r))?l=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),r):(this.calendarMode==="Gregorian"?s={format:e,type:"dateTime",skeleton:"yMd"}:s={format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},l=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),s)),(h(l)||typeof l=="object"&&isNaN(l.getTime()))&&!h(this.inputFormatsString))for(var o=0,c=this.inputFormatsString;o<c.length;o++){var p=c[o],d=void 0;if(this.calendarMode==="Gregorian"?d={format:p,type:"dateTime",skeleton:"yMd"}:d={format:p,type:"dateTime",skeleton:"yMd",calendar:"islamic"},l=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),d),!h(l)&&l instanceof Date&&!isNaN(l.getTime()))break}}else{if(l=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),r),(h(l)||typeof l=="object"&&isNaN(l.getTime()))&&!h(this.inputFormatsString))for(var f=0,v=this.inputFormatsString;f<v.length;f++){var g=v[f],d=void 0;if(this.calendarMode==="Gregorian"?d={format:g,type:"dateTime",skeleton:"yMd"}:d={format:g,type:"dateTime",skeleton:"yMd",calendar:"islamic"},l=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),d),!h(l)&&l instanceof Date&&!isNaN(l.getTime()))break}l=!h(l)&&isNaN(+l)?null:l,!h(this.formatString)&&this.inputElement.value!==""&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&this.formatString.indexOf("y")===-1&&l.setFullYear(this.value.getFullYear())}this.getModuleName()==="datepicker"&&this.value&&!isNaN(+this.value)&&l&&l.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&l?(this.updateInputValue(this.globalize.formatDate(l,r)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:l},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:l},!0),this.strictMode&&!l&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),h(this.value)&&(this.currentDate=new Date(new Date().setHours(0,0,0,0)))},a.prototype.createCalendar=function(){var e=this;this.popupWrapper=this.createElement("div",{className:""+Bs+" "+$r,id:this.inputElement.id+"_options"}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),h(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),V.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=""+Bs+" e-date-modal",document.body.className+=" "+Jr,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new Vi(this.popupWrapper,{content:this.calendarElement,relateTo:V.isDevice?document.body:this.inputWrapper.container,position:V.isDevice?{X:"center",Y:"center"}:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},offsetY:pp,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:V.isDevice?{X:"fit",Y:"fit"}:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},open:function(){V.isDevice&&e.fullScreenMode&&(e.iconRight=parseInt(window.getComputedStyle(e.calendarElement.querySelector(".e-header.e-month .e-prev")).marginRight,10)>16,e.touchModule=new is(e.calendarElement.querySelector(".e-content.e-month"),{swipe:e.CalendarSwipeHandler.bind(e)}),b.add(e.calendarElement.querySelector(".e-content.e-month"),"touchstart",e.TouchStartHandler,e)),e.getModuleName()!=="datetimepicker"&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=ae(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new Ct(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new Ct(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),e.resetCalendar(),G(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.preventArgs=null,e.calendarKeyboardModules=null,e.setAriaAttributes()},targetExitViewport:function(){V.isDevice||e.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},a.prototype.getAmPmValue=function(e){try{return typeof e=="string"&&e.trim()!==""?e.replace(/(am|pm|Am|aM|pM|Pm)/g,function(t){return t.toLocaleUpperCase()}):""}catch(t){return console.error("Error occurred while processing date:",t),""}},a.prototype.CalendarSwipeHandler=function(e){var t=0;if(this.iconRight)switch(e.swipeDirection){case"Left":t=1;break;case"Right":t=-1;break}else switch(e.swipeDirection){case"Up":t=1;break;case"Down":t=-1;break}this.touchStart&&(t===1?this.navigateNext(e):t===-1&&this.navigatePrevious(e),this.touchStart=!1)},a.prototype.TouchStartHandler=function(e){this.touchStart=!0},a.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},a.prototype.modelHeader=function(){var e,t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("h1",{className:"e-model-year"}),s=this.createElement("div"),n=this.createElement("span",{className:"e-model-day"}),r=this.createElement("span",{className:"e-model-month"});if(this.calendarMode==="Gregorian"?e={format:"y",skeleton:"dateTime"}:e={format:"y",skeleton:"dateTime",calendar:"islamic"},i.textContent=""+this.globalize.formatDate(this.value||new Date,e),this.calendarMode==="Gregorian"?e={format:"E",skeleton:"dateTime"}:e={format:"E",skeleton:"dateTime",calendar:"islamic"},n.textContent=""+this.globalize.formatDate(this.value||new Date,e)+", ",this.calendarMode==="Gregorian"?e={format:"MMM d",skeleton:"dateTime"}:e={format:"MMM d",skeleton:"dateTime",calendar:"islamic"},r.textContent=""+this.globalize.formatDate(this.value||new Date,e),this.fullScreenMode){var l=this.createElement("span",{className:"e-popup-close"});b.add(l,"mousedown touchstart",this.modelCloseHandler,this);var o=this.calendarElement.querySelector("button.e-today");s.classList.add("e-day-wrapper"),o.classList.add("e-outline"),t.appendChild(l),t.appendChild(o)}this.fullScreenMode||t.appendChild(i),s.appendChild(n),s.appendChild(r),t.appendChild(s),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)},a.prototype.modelCloseHandler=function(e){this.hide()},a.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!h(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0),this.isKeyAction=!1},a.prototype.navigatedEvent=function(e){ae(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},a.prototype.keyupHandler=function(e){this.isKeyAction=this.inputElement.value!==this.previousElementValue,this.enableMask&&this.showClearButton&&this.inputElement&&this.inputElement.value===this.maskedDateValue&&this.inputWrapper&&this.inputWrapper.clearButton&&!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&this.inputWrapper.clearButton.classList.add("e-clear-icon-hide")},a.prototype.changeEvent=function(e){!this.isIconClicked&&!(this.isBlur||this.isKeyAction)&&this.selectCalendar(e),(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())?(this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass()):e&&this.hide(e),this.isKeyAction=!1},a.prototype.requiredModules=function(){var e=[];return this.calendarMode==="Islamic"&&e.push({args:[this],member:"islamic",name:"Islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},a.prototype.selectCalendar=function(e){var t,i,s;this.getModuleName()==="datetimepicker"?i=h(this.formatString)?this.dateTimeFormat:this.formatString:i=this.formatString,this.value&&(this.getModuleName()==="datetimepicker"?(this.calendarMode==="Gregorian"?s={format:i,type:"dateTime",skeleton:"yMd"}:s={format:i,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)):(this.calendarMode==="Gregorian"?s={format:this.formatString,type:"dateTime",skeleton:"yMd"}:s={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),h(t)||(this.updateInputValue(t),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},a.prototype.isCalendar=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+$r))},a.prototype.setWidth=function(e){typeof e=="number"?this.inputWrapper.container.style.width=fe(this.width):typeof e=="string"?this.inputWrapper.container.style.width=e.match(/px|%|em/)?this.width:fe(this.width):this.inputWrapper.container.style.width="100%"},a.prototype.show=function(e,t){var i=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var s=!0,n=void 0;!h(this.value)&&!(+this.value>=+new Date(this.checkValue(this.min))&&+this.value<=+new Date(this.checkValue(this.max)))?(n=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)):n=this.value||null,this.isCalendar()||(u.prototype.render.call(this),this.setProperties({value:n||null},!0),this.previousDate=n,this.createCalendar()),V.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){s=!1},popup:this.popupObj,event:t||null,cancel:!1,appendTo:V.isDevice?this.mobilePopupWrapper:document.body};var r=this.preventArgs;this.trigger("open",r,function(l){if(i.preventArgs=l,s&&!i.preventArgs.cancel){E(i.inputWrapper.buttons,Ps),i.preventArgs.appendTo.appendChild(i.popupWrapper),i.popupObj.refreshPosition(i.inputElement);var o={name:"FadeIn",duration:V.isDevice?0:cp};if(i.zIndex===1e3?i.popupObj.show(new bt(o),i.element):i.popupObj.show(new bt(o),null),u.prototype.setOverlayIndex.call(i,i.mobilePopupWrapper,i.popupObj.element,i.modal,V.isDevice),i.setAriaAttributes(),V.isDevice){var c=i.createElement("div",{className:"e-dlg-overlay"});c.style.zIndex=(i.zIndex-1).toString(),i.mobilePopupWrapper.appendChild(c)}}else i.popupObj.destroy(),i.popupWrapper=i.popupObj=null;!h(i.inputElement)&&i.inputElement.value===""&&!h(i.tableBodyElement)&&i.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(E([i.tableBodyElement.querySelector("td.e-selected")],dp),w(i.tableBodyElement.querySelectorAll("td.e-selected"),Rs)),b.add(document,"mousedown touchstart",i.documentHandler,i)})}},a.prototype.hide=function(e){var t=this;if(h(this.popupWrapper))V.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var i=!0;this.preventArgs={preventDefault:function(){i=!1},popup:this.popupObj,event:e||null,cancel:!1},w(this.inputWrapper.buttons,Ps),w([document.body],Jr);var s=this.preventArgs;this.isCalendar()?this.trigger("close",s,function(n){t.closeEventCallback(i,n)}):this.closeEventCallback(i,s)}},a.prototype.closeEventCallback=function(e,t){this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),w(this.inputWrapper.buttons,Ps)),this.setAriaAttributes(),V.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),V.isDevice&&!h(this.mobilePopupWrapper)&&e&&(h(this.preventArgs)||!this.preventArgs.cancel)&&(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null),b.remove(document,"mousedown touchstart",this.documentHandler),V.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},a.prototype.focusIn=function(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),E([this.inputWrapper.container],[_a]))},a.prototype.focusOut=function(){document.activeElement===this.inputElement&&(w([this.inputWrapper.container],[_a]),this.inputElement.blur())},a.prototype.currentView=function(){var e;return this.calendarElement&&(e=u.prototype.currentView.call(this)),e},a.prototype.navigateTo=function(e,t){this.calendarElement&&u.prototype.navigateTo.call(this,e,t)},a.prototype.destroy=function(){this.unBindEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),u.prototype.destroy.call(this),z.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),h(this.keyboardModules)||this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains(rp)&&u.prototype.destroy.call(this);var e={"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"};this.inputElement.hasAttribute("aria-label")&&this.inputElement.removeAttribute("aria-label"),this.inputElement&&(z.removeAttributes(e,this.inputElement),h(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),b.remove(this.inputElement,"blur",this.inputBlurHandler),b.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&G(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),this.ngTag===null&&(this.inputElement&&(h(this.inputWrapper)||this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),w([this.inputElement],[op])),w([this.element],[Bs]),h(this.inputWrapper)||G(this.inputWrapper.container)),this.formElement&&b.remove(this.formElement,"reset",this.resetFormHandler),this.inputWrapper=null,this.keyboardModules=null},a.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(var t=0;t<e.length;t++)h(this.inputElementCopy.getAttribute(e[t]))?(e[t].toLowerCase()==="value"&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):(e[t].toLowerCase()==="value"&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.inputElementCopy.getAttribute(e[t])))},a.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),w([this.inputElementCopy],[Bs,ap,sp]),this.inputElement=this.element,this.formElement=A(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,(this.element.tagName==="EJS-DATEPICKER"||this.element.tagName==="EJS-DATETIMEPICKER")&&(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?this.ngTag!==null&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):this.getModuleName()==="datetimepicker"?(this.element.id=$e("ej2-datetimepicker"),this.ngTag!==null&&Q(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=$e("ej2-datepicker"),this.ngTag!==null&&Q(this.inputElement,{id:this.element.id+"_input"})),this.ngTag!==null&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.inputFormats&&this.checkInputFormats(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),u.prototype.preRender.call(this)},a.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},a.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var s=["required","aria-required","form"],n=0;n<s.length;n++)if(!h(e.getAttribute(s[n]))){var r=e.getAttribute(s[n]);t.setAttribute(s[n],r),e.removeAttribute(s[n])}},a.prototype.checkFormat=function(){var e=new dt(this.locale);if(this.format)if(typeof this.format=="string")this.formatString=this.format;else if(this.format.skeleton!==""&&!h(this.format.skeleton)){var t=this.format.skeleton;this.getModuleName()==="datetimepicker"?this.formatString=e.getDatePattern({skeleton:t,type:"dateTime"}):this.formatString=e.getDatePattern({skeleton:t,type:"date"})}else this.getModuleName()==="datetimepicker"?this.formatString=this.dateTimeFormat:this.formatString=null;else this.formatString=null},a.prototype.checkInputFormats=function(){var e=new dt(this.locale);if(this.inputFormatsString=[],this.inputFormats){for(var t=0,i=this.inputFormats;t<i.length;t++){var s=i[t],n="";if(typeof s=="string")n=s;else if(s.skeleton!==""&&!h(s.skeleton)){var r=s.skeleton;this.getModuleName()==="datetimepicker"?n=e.getDatePattern({skeleton:r,type:"dateTime"}):n=e.getDatePattern({skeleton:r,type:"date"})}n&&this.inputFormatsString.push(n)}this.inputFormatsString.length===0&&(this.inputFormatsString=null)}else this.inputFormatsString=null},a.prototype.checkHtmlAttributes=function(e){this.globalize=new dt(this.locale),this.checkFormat(),this.checkView();var t=e?h(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"],i;this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?i={format:h(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:i={format:h(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:this.calendarMode==="Gregorian"?i={format:this.formatString,type:"dateTime",skeleton:"yMd"}:i={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var s=0,n=t;s<n.length;s++){var r=n[s];if(!h(this.inputElement.getAttribute(r)))switch(r){case"disabled":if(h(this.datepickerOptions)||this.datepickerOptions.enabled===void 0||e){var l=!(this.inputElement.getAttribute(r)==="disabled"||this.inputElement.getAttribute(r)===""||this.inputElement.getAttribute(r)==="true");this.setProperties({enabled:l},!e)}break;case"readonly":if(h(this.datepickerOptions)||this.datepickerOptions.readonly===void 0||e){var o=this.inputElement.getAttribute(r)==="readonly"||this.inputElement.getAttribute(r)===""||this.inputElement.getAttribute(r)==="true";this.setProperties({readonly:o},!e)}break;case"placeholder":(h(this.datepickerOptions)||this.datepickerOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(r)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(r));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(r));break;case"value":if(h(this.datepickerOptions)||this.datepickerOptions.value===void 0||e){var c=this.inputElement.getAttribute(r);this.setProperties(Pe(r,this.globalize.parseDate(this.getAmPmValue(c),i),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var p=this.inputElement.getAttribute(r);this.setProperties(Pe(r,this.globalize.parseDate(this.getAmPmValue(p),i),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var d=this.inputElement.getAttribute(r);this.setProperties(Pe(r,this.globalize.parseDate(this.getAmPmValue(d),i),{}),!e)}break;case"type":this.inputElement.getAttribute(r)!=="text"&&this.inputElement.setAttribute("type","text");break}}},a.prototype.getModuleName=function(){return"datepicker"},a.prototype.disabledDates=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i,s,n=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),r=this.previousDate;this.minMaxUpdates(),(!e||e&&!h(this.renderDayCell))&&u.prototype.render.call(this),this.previousDate=r;var l=n&&+n,o='*[id^="/id"]'.replace("/id",""+l);this.strictMode||(typeof this.value=="string"||typeof this.value=="object"&&+this.value!=+n)&&this.setProperties({value:n},!0),!h(this.calendarElement)&&!h(this.calendarElement.querySelectorAll(o)[0])&&this.calendarElement.querySelectorAll(o)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date(new Date().setHours(0,0,0,0))));var c;this.getModuleName()==="datetimepicker"?(this.calendarMode==="Gregorian"?s=this.globalize.formatDate(n,{format:h(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}):s=this.globalize.formatDate(n,{format:h(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),c=s):(this.calendarMode==="Gregorian"?i={format:this.formatString,type:"dateTime",skeleton:"yMd"}:i={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},c=this.globalize.formatDate(n,i)),this.popupObj||(this.updateInputValue(c),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime",isBlur:t})))},a.prototype.setAriaAttributes=function(){this.isCalendar()?(z.addAttributes({"aria-expanded":"true"},this.inputElement),Q(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),Q(this.inputElement,{"aria-controls":this.inputElement.id}),this.value&&Q(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(z.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-controls"),this.inputElement.removeAttribute("aria-activedescendant"))},a.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!h(this.value)&&!h(this.min)&&!h(this.max)&&!(new Date(this.value).setMilliseconds(0)>=new Date(this.min).setMilliseconds(0)&&new Date(this.value).setMilliseconds(0)<=new Date(this.max).setMilliseconds(0))||!this.strictMode&&this.inputElement.value!==""&&this.inputElement.value!==this.maskedDateValue&&h(this.value)||t||!this.isValidTime(this.value)?(E([this.inputWrapper.container],Xr),Q(this.inputElement,{"aria-invalid":"true"})):h(this.inputWrapper)||(w([this.inputWrapper.container],Xr),Q(this.inputElement,{"aria-invalid":"false"}))},a.prototype.isValidTime=function(e){return!0},a.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i],r=["blur","change","cleared","close","created","destroyed","focus","navigated","open","renderDayCell"];switch(r.indexOf(n)>0&&this.isReact&&(this.isDynamicValueChanged=!0),n){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,h(this.value)&&(this.enableMask?this.updateInputValue(this.maskedDateValue):this.updateInputValue(""),this.currentDate=new Date(new Date().setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"inputFormats":this.checkInputFormats();break;case"allowEdit":this.setAllowEdit();break;case"placeholder":z.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":z.setReadonly(this.readonly,this.inputElement);break;case"enabled":z.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new dt(this.locale),this.l10n.setLocale(this.locale),this.datepickerOptions&&this.datepickerOptions.placeholder==null&&(this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),z.setPlaceholder(this.placeholder,this.inputElement)),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":z.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&u.prototype.onPropertyChanged.call(this,e,t);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"showClearButton":z.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),z.calculateWidth(this.inputElement,this.inputWrapper.container),!h(this.inputWrapper.buttons[0])&&!h(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=e.floatLabelType,z.removeFloating(this.inputWrapper),z.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!h(this.inputWrapper.buttons[0])&&!h(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&u.prototype.onPropertyChanged.call(this,e,t),n==="min"&&h(this.min)&&(this.min=new Date(1900,0,1)),n==="max"&&h(this.max)&&(this.max=new Date(2099,11,31));break}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},a.prototype.addDate=function(e){},Fe([y(null)],a.prototype,"width",void 0),Fe([y(null)],a.prototype,"value",void 0),Fe([y(null)],a.prototype,"cssClass",void 0),Fe([y(!1)],a.prototype,"strictMode",void 0),Fe([y(null)],a.prototype,"format",void 0),Fe([y(null)],a.prototype,"inputFormats",void 0),Fe([y(!0)],a.prototype,"enabled",void 0),Fe([y(!1)],a.prototype,"fullScreenMode",void 0),Fe([y({})],a.prototype,"htmlAttributes",void 0),Fe([y(null)],a.prototype,"values",void 0),Fe([y(!1)],a.prototype,"isMultiSelection",void 0),Fe([y(!0)],a.prototype,"showClearButton",void 0),Fe([y(!0)],a.prototype,"allowEdit",void 0),Fe([y(null)],a.prototype,"keyConfigs",void 0),Fe([y(!1)],a.prototype,"enablePersistence",void 0),Fe([y(1e3)],a.prototype,"zIndex",void 0),Fe([y(!1)],a.prototype,"readonly",void 0),Fe([y(null)],a.prototype,"placeholder",void 0),Fe([y("Never")],a.prototype,"floatLabelType",void 0),Fe([y(null)],a.prototype,"serverTimezoneOffset",void 0),Fe([y(!1)],a.prototype,"openOnFocus",void 0),Fe([y(!1)],a.prototype,"enableMask",void 0),Fe([y({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],a.prototype,"maskPlaceholder",void 0),Fe([q()],a.prototype,"open",void 0),Fe([q()],a.prototype,"cleared",void 0),Fe([q()],a.prototype,"close",void 0),Fe([q()],a.prototype,"blur",void 0),Fe([q()],a.prototype,"focus",void 0),Fe([q()],a.prototype,"created",void 0),Fe([q()],a.prototype,"destroyed",void 0),a=Fe([ot],a),a}(ep),hs=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),xt=function(){return xt=Object.assign||function(u){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(u[i]=a[i])}return u},xt.apply(this,arguments)},oe=function(u,a,e,t){var i=arguments.length,s=i<3?a:t===null?t=Object.getOwnPropertyDescriptor(a,e):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,a,e,t);else for(var r=u.length-1;r>=0;r--)(n=u[r])&&(s=(i<3?n(s):i>3?n(a,e,s):n(a,e))||s);return i>3&&s&&Object.defineProperty(a,e,s),s};(function(u){hs(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return oe([y(null)],a.prototype,"field",void 0),oe([y(null)],a.prototype,"label",void 0),oe([y(null)],a.prototype,"type",void 0),oe([y(null)],a.prototype,"values",void 0),oe([y(null)],a.prototype,"operators",void 0),oe([y()],a.prototype,"ruleTemplate",void 0),oe([y(null)],a.prototype,"template",void 0),oe([y({isRequired:!0,min:0,max:Number.MAX_VALUE})],a.prototype,"validation",void 0),oe([y(null)],a.prototype,"format",void 0),oe([y(null)],a.prototype,"step",void 0),oe([y(null)],a.prototype,"value",void 0),oe([y(null)],a.prototype,"category",void 0),oe([y(null)],a.prototype,"columns",void 0),a})(Dt);var fp=function(u){hs(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return oe([y(null)],a.prototype,"condition",void 0),oe([ol([],a)],a.prototype,"rules",void 0),oe([y(null)],a.prototype,"field",void 0),oe([y(null)],a.prototype,"label",void 0),oe([y(null)],a.prototype,"type",void 0),oe([y(null)],a.prototype,"operator",void 0),oe([y(null)],a.prototype,"value",void 0),oe([y(!1)],a.prototype,"not",void 0),oe([y(null)],a.prototype,"isLocked",void 0),a}(Dt);(function(u){hs(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return oe([y(null)],a.prototype,"numericTextBoxModel",void 0),oe([y(null)],a.prototype,"multiSelectModel",void 0),oe([y(null)],a.prototype,"datePickerModel",void 0),oe([y(null)],a.prototype,"textBoxModel",void 0),oe([y(null)],a.prototype,"radioButtonModel",void 0),a})(Dt);var vp=function(u){hs(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return oe([y(!1)],a.prototype,"cloneRule",void 0),oe([y(!1)],a.prototype,"cloneGroup",void 0),oe([y(!1)],a.prototype,"lockRule",void 0),oe([y(!1)],a.prototype,"lockGroup",void 0),oe([y(!0)],a.prototype,"ruleDelete",void 0),oe([y(!0)],a.prototype,"groupInsert",void 0),oe([y(!0)],a.prototype,"groupDelete",void 0),a}(Dt),mp=function(u){hs(a,u);function a(e,t){var i=u.call(this,e,t)||this;return i.isReadonly=!0,i.fields={text:"label",value:"field"},i.updatedRule={not:!1,condition:"and",isLocked:!1},i.isLocale=!1,i.isRefreshed=!1,i.isNotified=!1,i.isAddSuccess=!1,i.isNotValueChange=!1,i.isFieldChange=!1,i.isFieldClose=!1,i.isDestroy=!1,i.isGetNestedData=!1,i.isCustomOprCols=[],i.groupCounter=0,i.lockItems=[],i.groupIndex=-1,i.ruleIndex=-1,i.isLastGroup=!1,i.cloneGrpBtnClick=!1,i.isMiddleGroup=!1,i.cloneRuleBtnClick=!1,i.isValueEmpty=!1,za.Inject(Rc),i}return a.prototype.getPersistData=function(){return this.addOnPersist(["rule"])},a.prototype.reset=function(){this.isImportRules=!1;for(var e=this.element.querySelector(".e-group-body"),t=this.element.querySelectorAll("input.e-control"),i=0,s=t.length;i<s;i++)t[i].className.indexOf("e-tooltip")>-1?Z(t[i],"tooltip").destroy():t[i].parentElement.className.indexOf("e-tooltip")>-1&&Z(t[i].parentElement,"tooltip").destroy();if(e)e.innerHTML="";else{var n=this.createElement("div",{attrs:{class:"e-group-container"}}),r=this.createElement("div",{attrs:{class:"e-group-header"}}),l=this.createElement("div",{attrs:{class:"e-group-body"}});n.appendChild(r).appendChild(l),this.element.appendChild(n),e=this.element.querySelector(".e-group-body")}this.headerTemplate&&this.isRoot&&(this.element.innerHTML="",this.isRoot=!1),this.enableNotCondition&&w(this.element.querySelectorAll(".e-qb-toggle"),"e-active-toggle"),e.appendChild(this.createElement("div",{attrs:{class:"e-rule-list"}})),this.levelColl[this.element.id+"_group0"]=[0],this.setProperties({rule:{condition:"and",not:!1,rules:[]}},!0),this.disableRuleCondition(e.parentElement)},a.prototype.getWrapper=function(){return this.element},a.prototype.getModuleName=function(){return"query-builder"},a.prototype.requiredModules=function(){var e=[];return e.push({member:"query-library",args:[this]}),e},a.prototype.GetRootColumnName=function(e){return h(e)?"":this.separator?e.split(this.separator)[0]:e},a.prototype.initialize=function(){if(this.dataColl.length){var e=Object.keys(this.dataColl[0]),t=[],i=[],s=void 0,n=!1,r=!1,l=void 0,o={isRequired:!0,min:0,max:Number.MAX_VALUE};if(this.columns.length){this.columnSort();for(var c=this.columns,p=0,d=c.length;p<d;p++)this.updateCustomOperator(c[p],"initial"),c[p].type||(e.indexOf(c[p].field)>-1&&(l=this.dataColl[0][c[p].field],s=typeof l,s==="string"?r=!isNaN(Date.parse(l)):s==="object"&&(r=l instanceof Date&&!isNaN(l.getTime()),s="string"),c[p].type=s,r=!1),s="string"),c[p].validation||(c[p].validation=o),c[p].category?n=!0:c[p].category=this.l10n.getConstant("OtherFields"),i.indexOf(c[p].category)<0&&i.push(c[p].category),(!c[p].operators||this.isLocale&&this.isCustomOprCols.indexOf(c[p].field)===-1)&&(c[p].operators=this.customOperators[c[p].type+"Operator"]);n&&(i.length>1||i[0]!==this.l10n.getConstant("OtherFields"))&&(this.fields={text:"label",value:"field",groupBy:"category"}),this.updateSubFieldsFromColumns(this.columns)}else{for(var p=0,d=e.length;p<d;p++)l=this.dataColl[0][e[p]],s=typeof l,s==="string"?r=!isNaN(Date.parse(l)):s==="object"&&!Object.keys(l).length&&(r=l instanceof Date&&!isNaN(l.getTime()),s="string"),t[p]={field:e[p],label:e[p],type:r?"date":s,validation:o},r=!1,t[p].operators=this.customOperators[t[p].type+"Operator"],s==="object"&&this.updateSubFields(l,t[p]);this.columns=t}}else if(this.columns&&this.columns.length){for(var c=this.columns,p=0,d=c.length;p<d;p++)c[p].category?this.fields={text:"label",value:"field",groupBy:"category"}:c[p].category=this.l10n.getConstant("OtherFields"),this.updateCustomOperator(c[p],"initial"),(!c[p].operators||this.isLocale&&this.isCustomOprCols.indexOf(c[p].field)===-1)&&(c[p].operators=this.customOperators[c[p].type+"Operator"]);this.updateSubFieldsFromColumns(this.columns)}this.trigger("dataBound",{type:"dataBound"})},a.prototype.updateSubFieldsFromColumns=function(e,t){for(var i=0;i<e.length;i++)this.separator!==""&&e[i].field.indexOf(this.separator)<0&&(e[i].field=t?t+this.separator+e[i].field:e[i].field),e[i].operators?this.updateCustomOperator(e[i]):e[i].type&&e[i].type!=="object"&&(e[i].operators=this.customOperators[e[i].type+"Operator"]),e[i].columns&&(e[i].type="object",this.updateSubFieldsFromColumns(e[i].columns,e[i].field))},a.prototype.updateSubFields=function(e,t,i){var s;t.columns=[];var n=Object.keys(e),r,l,o,c;i=i||this.dataColl[0];for(var p=0,d=n.length;p<d;p++){var f=t.field.split(".");i?c=i[f[f.length-1]][n[p]]:c=this.dataColl[0][t.field][n[p]];var v=i[t.field.split(this.separator)[t.field.split(this.separator).length-1]];o=typeof c,r=t.field+this.separator+n[p],l=n[p],o=o==="object"&&!isNaN(Date.parse(c))?"date":o,s={field:r,label:l,type:o},o!=="object"&&(s.operators=this.customOperators[o+"Operator"]),t.columns.push(s),o==="object"&&this.updateSubFields(c,s,v)}},a.prototype.updateCustomOperator=function(e,t){if(e.operators){!this.isLocale&&t==="initial"&&!h(this.isCustomOprCols)&&this.isCustomOprCols.push(e.field);for(var i=function(r){var l=Object.keys(e.operators[r]).indexOf("sqlOperator");if(l>-1){var o=e.operators[r],c=Object.keys(o),p=c.map(function(f){return o[""+f]}).join(",").split(","),d=c.indexOf("value");s.operators[p[d]]=p[l]}},s=this,n=0;n<e.operators.length;n++)i(n)}},a.prototype.focusEventHandler=function(e){this.target=e.target},a.prototype.clickEventHandler=function(e){var t=this,i=e.target,s;this.isImportRules=!1;var n;if(i.tagName==="SPAN"&&(i=i.parentElement),typeof i.className=="string"&&i.className.indexOf("e-collapse-rule")>-1){var r=new bt({duration:1e3,delay:0});this.element.querySelectorAll(".e-summary-content").length<1&&this.renderSummary();var l=document.getElementById(this.element.id+"_summary_content"),o=l.querySelector(".e-summary-text");r.animate(".e-query-builder",{name:"SlideLeftIn"});var c=this.element.querySelector(".e-group-container");c.style.display="none",o.textContent=this.getSqlFromRules(this.rule),l.style.display="block",o.style.height=o.scrollHeight+"px"}if(i.tagName==="BUTTON"&&typeof i.className=="string"&&i.className.indexOf("e-qb-toggle")<0){var r=new bt({duration:1e3,delay:0});switch(!0){case i.className.indexOf("e-removerule")>-1:this.actionButton=i,this.deleteRule(i);break;case i.className.indexOf("e-clone-rule-btn")>-1:this.actionButton=i,this.cloneRuleBtnClick=!0,this.ruleClone(i);break;case i.className.indexOf("e-lock-rule-btn")>-1:this.actionButton=i,this.ruleLock(i);break;case i.className.indexOf("e-lock-grp-btn")>-1:this.actionButton=i,this.groupLock(i);break;case i.className.indexOf("e-clone-grp-btn")>-1:this.actionButton=i,this.cloneGrpBtnClick=!0,this.groupClone(A(i,".e-group-container"));break;case i.className.indexOf("e-deletegroup")>-1:this.actionButton=i,this.deleteGroup(A(i,".e-group-container"));break;case i.className.indexOf("e-edit-rule")>-1:if(r.animate(".e-query-builder",{name:"SlideLeftIn"}),document.getElementById(this.element.id+"_summary_content").style.display="none",this.element.querySelectorAll(".e-group-container").length<1){this.addGroupElement(!1,this.element,this.rule.condition,!1,this.rule.not);var p=ae({},this.rule,{},!0);this.setGroupRules(p),this.renderSummaryCollapse()}else{var c=this.element.querySelector(".e-group-container");c.querySelectorAll(".e-collapse-rule").length<1&&this.renderSummaryCollapse(),c.style.display="block"}break}}else if(i.tagName==="LABEL"&&i.parentElement.className.indexOf("e-btn-group")>-1||typeof i.className=="string"&&i.className.indexOf("e-qb-toggle")>-1){var d=A(i,".e-group-container");if(!this.headerTemplate){var f=i.getAttribute("for"),v=void 0;f?v=document.getElementById(f).getAttribute("value"):this.enableSeparateConnector&&(v=i.textContent),n=d.id.replace(this.element.id+"_","");var g=this.getGroup(n),m=void 0;if(this.enableNotCondition)if(i.className.indexOf("e-qb-toggle")>-1){var C=d.getElementsByClassName("e-qb-toggle")[0];C.className.indexOf("e-active-toggle")>-1?(w([C],"e-active-toggle"),m=!1):(E([C],"e-active-toggle"),m=!0),v=g.condition}else m=g.not;s={groupID:n,cancel:!1,type:"condition",value:v.toLowerCase()},this.enableNotCondition&&(s={groupID:n,cancel:!1,type:"condition",value:v.toLowerCase(),not:m})}this.isImportRules?this.beforeSuccessCallBack(s,i):this.trigger("beforeChange",s,function(k){t.beforeSuccessCallBack(k,i)}),this.target=i}},a.prototype.beforeSuccessCallBack=function(e,t){if(e&&!e.cancel){var i=A(t,".e-group-container"),s=i.id.replace(this.element.id+"_",""),n=this.getValidRules(this.rule),r=this.getParentGroup(i);if(this.enableSeparateConnector){h(A(t,".e-rule-container"))&&i.classList.contains("e-group-container")?i=t.parentElement.previousElementSibling!==null?t.parentElement.previousElementSibling:i:i=A(t,".e-rule-container");var l=i.id.replace(this.element.id+"_","");i.classList.contains("e-rule-container")?(r=this.getRule(i),r.condition=e.value):i.classList.contains("e-group-container")&&(r=this.getGroup(i),r.condition=e.value),this.enableNotCondition&&(r.not=e.not),this.isImportRules||this.trigger("change",{groupID:s,ruleID:l,type:"condition",value:r.condition})}else r.condition=e.value,this.enableNotCondition&&(r.not=e.not),this.isImportRules||this.trigger("change",{groupID:s,type:"condition",value:r.condition});if(this.filterRules(n,this.getValidRules(this.rule),"condition"),this.enableSeparateConnector){var o=t.parentElement.querySelector(".e-btngroup-and"),c=t.parentElement.querySelector(".e-btngroup-or");o&&c&&(e.value==="and"?(o.checked=!0,c.checked=!1):e.value==="or"&&(c.checked=!0,o.checked=!1))}}},a.prototype.selectBtn=function(e,t){t.name==="beforeOpen"?this.showButtons.groupInsert||h(this.showButtons.groupInsert)?(this.element.querySelectorAll(".e-group-container").length>=this.maxGroupCount+1?E([t.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide"):w([t.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide"),this.enableRtl&&E([t.element.querySelector("li").parentElement],"e-rtl")):E([t.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide"):t.element.children[0].className.indexOf("e-addrule")>-1?this.addRuleElement(A(e,".e-group-container"),{}):t.element.children[0].className.indexOf("e-addgroup")>-1&&this.addGroupElement(!0,A(e,".e-group-container"),"",!0)},a.prototype.appendRuleElem=function(e,t,i,s,n,r){var l,o,c=e.querySelector(".e-rule-list"),p;if(i==="change")l=M("#"+s,e);else{if(l=this.createElement("div",{attrs:{class:"e-rule-container"}}),l.setAttribute("id",e.id+"_rule"+this.ruleIdCounter),this.showButtons.cloneRule&&this.cloneRuleBtnClick){if(this.ruleIndex<0)c.appendChild(l);else if(this.enableSeparateConnector){for(var d=-1,f=this.ruleIndex+1,v=0;v<f&&v!==c.children.length;v++)c.children[v].classList.contains("e-rule-container")&&(f++,d++);c.insertBefore(l,c.children[this.ruleIndex+d+1])}else c.insertBefore(l,c.children[this.ruleIndex+1]);this.cloneRuleBtnClick=!1}else c.appendChild(l);this.ruleIdCounter++}if(t&&t.ruleTemplate&&r){p={requestType:"template-initialize",ruleID:l.id,action:n,fields:this.fields,rule:r},this.trigger("actionBegin",p),this.ruleTemplateFn=this.templateParser(t.ruleTemplate);var g=this.element.id+t.field,m=void 0;if(p.fields=this.fields,p.columns=this.columns,r.field===""&&(r.field=t.field),p.operators=this.getOperators(r.field),p.operatorFields={text:"key",value:"value"},this.isReact)m=this.ruleTemplateFn(p,this,l.id,g)[0],o=m,o.className+=" e-rule-field",l.appendChild(o);else if(this.isAngular){var C=this.ruleTemplateFn(p,this,l.id,g);m=C[0].nodeType===3?C[1]:C[0],o=m,o.className+=" e-rule-field",l.appendChild(o)}else this.isVue3?(m=this.ruleTemplateFn(p,this,"Template",g),o=m,ye(o,l),l.children.length&&(l.children[l.children.length-1].className+=" e-rule-field")):(m=this.ruleTemplateFn(p,this,"Template",g)[0],o=m,o.className+=" e-rule-field",l.appendChild(o))}else o=this.ruleElem.querySelector(".e-rule-field").cloneNode(!0),l.appendChild(o);return this.showButtons.lockGroup&&w(l.querySelectorAll(".e-lock-grp-btn"),"e-button-hide"),this.showButtons.lockRule&&w(l.querySelectorAll(".e-lock-rule-btn"),"e-button-hide"),this.showButtons.cloneGroup&&w(l.querySelectorAll(".e-clone-grp-btn"),"e-button-hide"),this.showButtons.cloneRule&&w(l.querySelectorAll(".e-clone-rule-btn"),"e-button-hide"),this.showButtons.ruleDelete&&w(l.querySelectorAll(".e-lock-grp-btn"),"e-button-hide"),this.allowDragAndDrop&&w(l.querySelectorAll(".e-drag-qb-rule"),"e-hidden"),t&&t.ruleTemplate&&r&&this.renderReactTemplates(),l},a.prototype.addRuleElement=function(e,t,i,s,n,r){var l=this;if(e){var o={groupID:e.id.replace(this.element.id+"_",""),cancel:!1,type:"insertRule"};!this.isImportRules&&!this.isInitialLoad&&!this.prvtEvtTgrDaD?this.trigger("beforeChange",o,function(c){l.addRuleSuccessCallBack(c,e,t,i,s,n,r)}):(this.isInitialLoad=!1,this.addRuleSuccessCallBack(o,e,t,i,s,n,r))}},a.prototype.addRuleSuccessCallBack=function(e,t,i,s,n,r,l){var o=this.element.className.indexOf("e-device")>-1?"250px":"200px",c,p=i&&i.field?this.getColumn(i.field):s||this.columns[0],d,f,v,g={label:"",field:"",type:"",operator:""};if(!e.cancel){if(p&&p.ruleTemplate&&i.field){this.selectedColumn=p,d=this.selectedColumn.operators,g={label:p.label,field:p.field,type:p.type,operator:d[0].value};var m=Object.keys(i).length?i:g;v=this.appendRuleElem(t,p,n,r,"field",m);var C={requestType:"template-create",action:"insert-rule",ruleID:v.id,fields:this.fields,rule:m};this.trigger("actionBegin",C)}else{v=this.appendRuleElem(t,p,n,r,"field"),v.querySelector(".e-filter-input").setAttribute("id",v.id+"_filterkey");var k=v.querySelector(".e-rule-delete");if(this.element.className.indexOf("e-device")>-1||this.displayMode==="Vertical")k.textContent=this.l10n.getConstant("Remove"),E([k],"e-flat"),E([k],"e-primary");else{E([k],"e-round"),E([k],"e-icon-btn"),k.setAttribute("title",this.l10n.getConstant("DeleteRule"));var T=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-delete-icon"}});v.querySelector(".e-rule-delete").appendChild(T)}this.showButtons.ruleDelete||k.classList.add("e-button-hide")}this.displayMode==="Vertical"||this.element.className.indexOf("e-device")>-1?v.className="e-rule-container e-vertical-mode":v.className="e-rule-container e-horizontal-mode";var x=v.previousElementSibling;if(this.enableSeparateConnector){var L=void 0,N=void 0;if(x&&x.classList.contains("e-group-container")&&(N=x.querySelectorAll(".e-rule-container"),x=N[N.length-1]),x&&x.classList.contains("e-rule-container")&&(L=this.getRule(x)),this.headerTemplate&&x&&L)this.headerTemplateFn(x,!1,L.condition,L,x.id);else if(h(x)&&v.id!==this.element.id+"_group0_rule0"){var R=v.closest(".e-group-container");if(R&&R.previousElementSibling){var Y=R.previousElementSibling,Oe=Y.querySelectorAll(".e-rule-container");if(Y.classList.contains("e-group-container")&&(Y=Oe[Oe.length-1]),Y.classList.contains("e-rule-container")){var xe=this.getRule(Y);this.headerTemplateFn(Y,!1,xe.condition,xe,Y.id,!0)}}else this.headerTemplateFn(v,!1,i.condition,i,v.id,!0)}}else x&&x.className.indexOf("e-rule-container")>-1&&(v.className.indexOf("e-joined-rule")<0&&(v.className+=" e-joined-rule"),x.className.indexOf("e-prev-joined-rule")<0&&(x.className+=" e-prev-joined-rule"));if(x&&x.className.indexOf("e-group-container")>-1&&v.className.indexOf("e-separate-rule")<0&&(v.className+=" e-separate-rule"),this.isImportRules||this.updateAddedRule(t,i,g,l,r,this.enableSeparateConnector?!0:null),!p||p&&!p.ruleTemplate||!i.field)if(this.fieldMode==="Default"){var H=void 0,j=void 0;this.separator&&i.field?j=this.GetRootColumnName(i.field):this.autoSelectField?j=this.GetRootColumnName(i.field):j=this.isImportRules?this.GetRootColumnName(i.field):i.field,H={dataSource:this.columns,fields:this.fields,placeholder:this.l10n.getConstant("SelectField"),popupHeight:this.columns.length>5?o:"auto",close:this.fieldClose.bind(this,v.id+"_filterkey"),change:this.changeField.bind(this),value:i?j:null,open:this.popupOpen.bind(this,!0),cssClass:"qb-dropdownlist"},this.fieldModel&&(H=xt({},H,this.fieldModel)),f=new ms(H),f.appendTo("#"+v.id+"_filterkey");var F=void 0;this.separator&&i.field?F=this.GetRootColumnName(i.field):F=this.isImportRules?this.GetRootColumnName(i.field):f.value,this.selectedColumn=f.getDataByValue(F),Object.keys(i).length&&this.changeRule(i,{element:f.element,itemData:this.selectedColumn})}else{var H=void 0,j=(this.isImportRules,i.field);this.dummyDropdownTreeDs=ae([],this.columns,[],!0),this.updateDropdowntreeDS(this.dummyDropdownTreeDs),H={fields:{dataSource:this.dummyDropdownTreeDs,value:"field",text:"label",child:"columns",expanded:"expanded",selectable:"selectable"},placeholder:this.l10n.getConstant("SelectField"),showClearButton:!1,popupHeight:this.columns.length>5?o:"auto",changeOnBlur:!1,change:this.changeField.bind(this),value:h(j)?null:[j],open:this.popupOpen.bind(this,!1),treeSettings:{expandOn:"Click"},cssClass:"e-qb-ddt",filtering:this.dropdownTreeFiltering.bind(this),close:this.dropdownTreeClose.bind(this)},this.fieldModel&&(H=xt({},H,this.fieldModel));var K=new ac(H);if(K.appendTo("#"+v.id+"_filterkey"),!h(K.value)){var ne=this.getLabelFromColumn(K.value[0]);K.element.value=ne}var F=h(i.field)?K.value:this.GetRootColumnName(i.field);this.selectedColumn=this.getColumn(F),Object.keys(i).length&&this.changeRule(i,{element:K.element,itemData:this.selectedColumn})}if(c=v.id.replace(this.element.id+"_",""),i&&i.isLocked){var J=v.querySelector(".e-lock-rule-btn");this.ruleLock(J)}!this.isImportRules&&!this.prvtEvtTgrDaD&&this.trigger("change",{groupID:t.id.replace(this.element.id+"_",""),ruleID:c,type:"insertRule"})}if(this.enableSeparateConnector&&h(i.condition)&&c&&(i=this.getRule(c)),this.enableSeparateConnector){for(var Y=v.previousElementSibling,N=void 0;Y&&!Y.classList.contains("e-rule-container");){if(Y.classList.contains("e-group-container")){N=Y.querySelectorAll(".e-rule-container"),Y=N[N.length-1];break}Y=Y.previousElementSibling}if(this.headerTemplate&&Y){var L=this.getRule(Y),$={requestType:"rule-template-create",ruleID:Y.id,condition:L.condition,notCondition:this.enableNotCondition?!0:void 0};this.trigger("actionBegin",$)}else if(h(Y)&&v.id!==this.element.id+"_group0_rule0"){var R=v.closest(".e-group-container");if(R&&R.previousElementSibling&&R.previousElementSibling.previousElementSibling){var U=R.previousElementSibling.previousElementSibling;if(U.classList.contains("e-group-container")){var ie=U.querySelectorAll(".e-rule-container");U=ie[ie.length-1]}if(U.classList.contains("e-rule-container")){var L=this.getRule(U),ge={requestType:"rule-template-create",ruleID:U.id,condition:L.condition,notCondition:this.enableNotCondition?!0:void 0};this.trigger("actionBegin",ge)}}}this.setMultiConnector(v)}},a.prototype.dropdownTreeFiltering=function(e){var t=this,i=this,s="",n=e.event.srcElement,r=n.classList.contains("e-clear-icon"),l=r?n.parentElement.querySelector(".e-textbox"):n;s=l.id.split("_filterkey")[0];var o=document.getElementById(s);this.ddTree=Z(o.querySelector("input.e-dropdowntree"),"dropdowntree");var c=ae([],this.columns,[],!0);if(e.cancel=!0,e.text==="")this.changeDataSource(c);else{var p=c.map(function(d){return t.nestedChildFilter(e.text,d)}).filter(function(d){return d!==null});this.changeDataSource(p),setTimeout(function(){!h(i.ddTree)&&!h(i.ddTree.treeObj)&&i.ddTree.treeObj.expandAll()},100)}},a.prototype.changeDataSource=function(e){this.updateDropdowntreeDS(e),this.ddTree.treeObj.fields={dataSource:e,value:"field",text:"label",child:"columns",expanded:"expanded"},this.ddTree.treeObj.refresh()},a.prototype.nestedChildFilter=function(e,t){var i=this,s=t[this.ddTree.fields.child];if(!s)return this.isMatchedNode(e,t)?t:null;var n=s.map(function(r){return i.nestedChildFilter(e,r)}).filter(function(r){return r!==null});return n.length?(t[this.ddTree.fields.child]=n,t):(t[this.ddTree.fields.child]=s,this.isMatchedNode(e,t)?t:null)},a.prototype.isMatchedNode=function(e,t){var i=t[this.ddTree.fields.text].toLowerCase();return e=e?e.toLowerCase():"",i.indexOf(e)!==-1},a.prototype.dropdownTreeClose=function(){this.ddTree&&this.changeDataSource(ae([],this.columns,[],!0)),this.ddTree=null},a.prototype.updateDropdowntreeDS=function(e){for(var t=0;t<e.length;t++)e[parseInt(t.toString(),10)].type==="object"?(this.isAngular&&e[parseInt(t.toString(),10)].template&&delete e[parseInt(t.toString(),10)].template,e[parseInt(t.toString(),10)].selectable=!1,this.updateDropdowntreeDS(e[parseInt(t.toString(),10)].columns)):this.isAngular&&e[parseInt(t.toString(),10)].template&&delete e[parseInt(t.toString(),10)].template},a.prototype.updateAddedRule=function(e,t,i,s,n,r){var l,o=0,c,p;if(s){for(l=M("#"+n,e),c=A(e,".e-group-container"),p=this.getParentGroup(c);l&&l.previousElementSibling!==null;){l=l.previousElementSibling;var d=this.enableSeparateConnector&&(!this.headerTemplate&&!l.classList.contains("e-btn-group")||this.headerTemplate&&(l.classList.contains("e-rule-container")||l.classList.contains("e-group-container")));(!this.enableSeparateConnector||d)&&o++}p.rules[o]=t}else{c=A(e,".e-group-container"),p=this.getParentGroup(c);var f=t.custom;Object.keys(t).length?this.ruleIndex<0?(p.rules.push({field:t.field,type:t.type,label:t.label,operator:t.operator,value:t.value}),f&&(p.rules[p.rules.length-1].custom=f),this.enableSeparateConnector&&(p.rules[p.rules.length-1].condition=t.condition?t.condition:i.condition)):(p.rules.splice(this.ruleIndex+1,0,{field:t.field,type:t.type,label:t.label,operator:t.operator,value:t.value}),f&&(p.rules[this.ruleIndex+1].custom=f),this.enableSeparateConnector&&(p.rules[this.ruleIndex+1].condition=t.condition?t.condition:i.condition)):(f&&(i.custom=f),this.autoSelectField&&(t.field=i.field=this.rule.rules[0].field),p.rules.push(i))}this.disableRuleCondition(e,p,r)},a.prototype.changeRuleTemplate=function(e,t){var i=this.selectedColumn.operators;if(!e.ruleTemplate){var s=A(t,".e-group-container"),n=A(t,".e-rule-container").id;if(this.previousColumn&&this.previousColumn.ruleTemplate&&(G(t.closest('[id="'+n+'"]').querySelector(".e-rule-field")),this.clearQBTemplate([n])),e){var r={field:e.field,label:e.label,operator:i[0].value,value:""};this.addRuleElement(s,r,e,"change",n,!0)}}},a.prototype.renderToolTip=function(e){var t=new ph({content:this.l10n.getConstant("ValidationMessage"),isSticky:!0,position:"BottomCenter",cssClass:"e-querybuilder-error",afterClose:function(){t.destroy()},beforeOpen:function(i){var s=i.element.querySelector(".e-tooltip-close");s&&(s.style.display="none")}});t.appendTo(e),t.open(e)},a.prototype.validateFields=function(){var e=!0,t;if(this.allowValidation){var i=["isnull","isnotnull","isempty","isnotempty"],s=void 0,n=void 0,r=void 0,l=void 0,o=[],c=void 0,p=void 0,d=void 0,f=void 0,v=void 0,g=this.element.querySelectorAll(".e-rule-container");for(s=0,n=g.length;s<n;s++){var m=void 0;if(c=A(g[s],".e-group-container"),v=this.getParentGroup(c),p=0,l=f=g[s],this.fieldMode==="DropdownTree"?(t=Z(g[s].querySelector(".e-rule-filter input.e-dropdowntree"),"dropdowntree"),t&&t.value&&t.value.length&&(this.selectedColumn=this.getColumn(t.value[0]),m=this.selectedColumn.validation)):(d=Z(g[s].querySelector(".e-rule-filter input.e-dropdownlist"),"dropdownlist"),d&&d.value&&(this.selectedColumn=d.getDataByValue(d.value),m=!h(d.value)&&this.selectedColumn.validation)),r=f.querySelector(".e-rule-field input.e-control"),m&&m.isRequired){for(;l&&l.previousElementSibling!==null;){l=l.previousElementSibling;var C=this.enableSeparateConnector&&(!this.headerTemplate&&!l.classList.contains("e-btn-group")||this.headerTemplate&&(l.classList.contains("e-rule-container")||l.classList.contains("e-group-container")));(!this.enableSeparateConnector||C)&&p++}if(r=f.querySelector(".e-rule-operator .e-control"),v.rules[p].operator||(r.parentElement.className.indexOf("e-tooltip")<0&&r.className.indexOf("e-tooltip")<0&&this.renderToolTip(r.parentElement),e=!1),v.rules[p].value instanceof Array&&(o=v.rules[p].value),i.indexOf(v.rules[p].operator)<-1&&h(v.rules[p].value)&&v.rules[p].type!=="date"||v.rules[p].value===""||v.rules[p].value===null||v.rules[p].value instanceof Array&&o.length<1){var k=f.querySelectorAll(".e-rule-value .e-control");i.indexOf(v.rules[p].operator)<0&&(e=!1);for(var T=0,x=k.length;T<x;T++){var L=k[T],N=void 0;L.parentElement.className.indexOf("e-searcher")>-1?(N=A(L,".e-multi-select-wrapper"),N.className.indexOf("e-tooltip")<0&&this.renderToolTip(N)):k[T].parentElement.className.indexOf("e-tooltip")<0&&k[T].className.indexOf("e-tooltip")<0&&this.renderToolTip(k[T].parentElement),T++}}else if(v.rules[p].type==="date"&&(v.rules[p].value===null||v.rules[p].value.indexOf(null)>-1)){var k=f.querySelectorAll(".e-rule-value .e-control");i.indexOf(v.rules[p].operator)<0&&(e=!1);for(var T=0,x=k.length;T<x;T++)k[T].parentElement.className.indexOf("e-tooltip")<0&&k[T].className.indexOf("e-tooltip")<0&&(h(v.rules[p].value)||v.rules[p].value[T]==null)&&this.renderToolTip(k[T].parentElement)}}else(d&&d.element&&h(d.value)||t&&t.element&&(h(t.value)||t.value.length<1))&&(r.parentElement.className.indexOf("e-tooltip")<0&&this.renderToolTip(r.parentElement),e=!1)}}return e},a.prototype.refreshLevelColl=function(){this.levelColl={};var e=this.element.querySelector(".e-group-container");if(e){this.levelColl[e.id]=[0];var t={groupElement:e,level:[0]};this.refreshLevel(t)}},a.prototype.refreshLevel=function(e){var t=e.groupElement.querySelector(".e-rule-list").children,i,s=e.groupElement,n,r=t.length,l=0;for(n=0;n<r;n++)i=t[n],i.className.indexOf("e-group-container")>-1&&(e.level.push(l),this.levelColl[i.id]=e.level.slice(),l++,e.groupElement=i,e=this.refreshLevel(e));var o=A(s,".e-rule-list");return e.groupElement=o?A(o,".e-group-container"):s,e.level=this.levelColl[e.groupElement.id].slice(),e},a.prototype.groupTemplate=function(e){var t,i,s,n,r,l,o=this.createElement("div",{attrs:{class:"e-group-container"}}),c=this.createElement("div",{attrs:{class:"e-group-header"}}),p=this.createElement("div",{attrs:{class:"e-group-body"}}),d=this.createElement("div",{attrs:{class:"e-rule-list"}});if(o.appendChild(c),p.appendChild(d),o.appendChild(p),!this.headerTemplate){this.allowDragAndDrop?s="e-icons e-drag-qb-rule":s="e-icons e-drag-qb-rule e-hidden";var f=this.createElement("span",{attrs:{class:s,"aria-lable":"drag handle",title:"drag handle"}});c.appendChild(f);var v=this.enableSeparateConnector&&!e?"e-lib e-btn-group e-qb-toggle-btn":"e-lib e-btn-group";t=this.createElement("div",{attrs:{class:v,role:"group"}}),this.enableSeparateConnector&&t.classList.add("e-multi-connector"),this.enableNotCondition&&(this.enableSeparateConnector?i=this.createElement("input",{attrs:{type:"checkbox",class:"e-qb-toggle"}}):i=this.createElement("button",{attrs:{type:"button",class:"e-qb-toggle"}}),t.appendChild(i)),i=this.createElement("input",{attrs:{type:"radio",class:"e-btngroup-and",value:"AND"}}),t.appendChild(i),n=this.createElement("label",{attrs:{class:"e-lib e-btn e-btngroup-and-lbl e-small"},innerHTML:this.l10n.getConstant("AND")}),t.appendChild(n),i=this.createElement("input",{attrs:{type:"radio",class:"e-btngroup-or",value:"OR"}}),t.appendChild(i),n=this.createElement("label",{attrs:{class:"e-lib e-btn e-btngroup-or-lbl e-small"},innerHTML:this.l10n.getConstant("OR")}),t.appendChild(n),c.appendChild(t),r=this.createElement("div",{attrs:{class:"e-group-action"}}),this.enableSeparateConnector?(l=this.createElement("button",{attrs:{type:"button",class:"e-add-condition-btn"}}),r.appendChild(l),l=this.createElement("button",{attrs:{type:"button",class:"e-add-group-btn"}}),r.appendChild(l)):(l=this.createElement("button",{attrs:{type:"button",class:"e-add-btn"}}),r.appendChild(l)),c.appendChild(r)}return o},a.prototype.ruleTemplate=function(){var e,t,i,s,n,r=this.createElement("div"),l=this.createElement("div",{attrs:{class:"e-rule-field"}});e=this.createElement("div",{attrs:{class:"e-rule-filter"}}),this.allowDragAndDrop?n="e-icons e-drag-qb-rule":n="e-icons e-drag-qb-rule e-hidden";var o=this.createElement("span",{attrs:{class:n,"aria-lable":"drag handle",title:"drag handle"}});l.appendChild(o);var c=this.createElement("input",{attrs:{type:"text",class:"e-filter-input"}});e.appendChild(c),l.appendChild(e),e=this.createElement("div",{attrs:{class:"e-rule-operator"}}),l.appendChild(e),e=this.createElement("div",{attrs:{class:"e-rule-value"}}),l.appendChild(e),e=this.createElement("div",{attrs:{class:"e-rule-value-delete"}}),this.showButtons.cloneRule?i="e-clone-rule-btn e-clone-rule e-css e-btn e-small e-round e-icon-btn":i="e-clone-rule-btn e-clone-rule e-css e-btn e-small e-round e-icon-btn e-button-hide",this.showButtons.lockRule?s="e-lock-rule-btn e-lock-rule e-css e-btn e-small e-round e-icons e-icon-btn":s="e-lock-rule-btn e-lock-rule e-css e-btn e-small e-round e-icons e-icon-btn e-button-hide";var p=this.createElement("button",{attrs:{title:this.l10n.getConstant("CloneRule"),type:"button",class:i}}),d=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-copy"}});p.appendChild(d);var f=this.createElement("button",{attrs:{title:this.l10n.getConstant("LockRule"),type:"button",class:s}});d=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-unlock"}}),f.appendChild(d),this.showButtons.ruleDelete||h(this.showButtons.ruleDelete)?t="e-removerule e-rule-delete e-css e-btn e-small":t="e-removerule e-rule-delete e-css e-btn e-small e-button-hide";var v=this.createElement("button",{attrs:{type:"button",class:t}});return e.appendChild(p),e.appendChild(f),e.appendChild(v),l.appendChild(e),r.appendChild(l),r},a.prototype.addGroupElement=function(e,t,i,s,n,r,l){var o=this,c={groupID:t.id.replace(this.element.id+"_",""),cancel:!1,type:"insertGroup"};!this.isImportRules&&!this.isInitialLoad&&!this.prvtEvtTgrDaD?this.trigger("beforeChange",c,function(p){o.addGroupSuccess(p,e,t,i,s,n,r,l)}):(this.isInitialLoad=!1,this.addGroupSuccess(c,e,t,i,s,n,r,l))},a.prototype.addGroupSuccess=function(e,t,i,s,n,r,l,o){var c=this;if(!e.cancel&&this.element.querySelectorAll(".e-group-container").length<=this.maxGroupCount){var p=i,d=void 0,f="";p.className.indexOf("e-group-container")<0?f=p.querySelector(".e-group-container")&&p.querySelector(".e-group-container").id:f=p.id,this.enableSeparateConnector&&(this.groupElem=this.groupTemplate());var v=this.groupElem.cloneNode(!0);if(v.setAttribute("id",this.element.id+"_group"+this.groupIdCounter),this.groupIdCounter===0&&this.allowDragAndDrop&&v.querySelector(".e-drag-qb-rule")&&(v&&v.children[0]&&v.children[0].classList.add("e-parent-header"),E([v.querySelector(".e-drag-qb-rule")],"e-hidden")),this.headerTemplate&&(l?(t=!1,v.setAttribute("id",this.element.id+"_group0"),this.headerTemplateFn(v,r,s,o,f),this.groupIdCounter=0):this.headerTemplateFn(v,r,s,o,f)),this.groupIdCounter++,!this.headerTemplate){var g=v.querySelector(".e-btngroup-and"),m=v.querySelector(".e-btngroup-or"),C=v.querySelector(".e-btngroup-and-lbl"),k=v.querySelector(".e-btngroup-or-lbl");g.setAttribute("id",this.element.id+"_and"+this.btnGroupId),m.setAttribute("id",this.element.id+"_or"+this.btnGroupId),g.setAttribute("name",this.element.id+"_and"+this.btnGroupId),m.setAttribute("name",this.element.id+"_and"+this.btnGroupId),C.setAttribute("for",this.element.id+"_and"+this.btnGroupId),k.setAttribute("for",this.element.id+"_or"+this.btnGroupId),this.btnGroupId++}if(t){var T=void 0;this.showButtons.groupDelete||h(this.showButtons.groupDelete)?T="e-deletegroup":T="e-deletegroup e-button-hide",d=this.createElement("button",{attrs:{type:"button",class:T}});var x=new ts({iconCss:"e-icons e-delete-icon",cssClass:"e-small e-round"});x.appendTo(d),d.setAttribute("title",this.l10n.getConstant("DeleteGroup")),Vt(d,{selector:".deletegroup"});for(var L=p.querySelector(".e-rule-list"),N=L.children,R=0,Y=0,Oe=N.length;Y<Oe;Y++)N[Y].className.indexOf("e-group-container")>-1&&(R+=1);if(this.showButtons.cloneGroup&&this.cloneGrpBtnClick)if(this.groupIndex===N.length-1)L.appendChild(v),this.isLastGroup=!0;else{if(this.enableSeparateConnector){for(var xe=0,H=this.groupIndex+1,j=0;j<H;j++)N[j].classList.contains("e-rule-container")&&(H++,xe++);xe>0&&xe--;var F=this.groupIndex+xe+1;N[F].parentNode.insertBefore(v,N[F])}else{var F=this.groupIndex+1;N[F].parentNode.insertBefore(v,N[F])}this.isMiddleGroup=!0}else L.appendChild(v);var K=this.levelColl[p.id].slice(0);if(K.push(R),this.levelColl[v.id]=K,this.groupIndex>-1&&this.refreshLevelColl(),this.isImportRules||(this.isAddSuccess=!0,this.addGroups([],p.id.replace(this.element.id+"_","")),this.isAddSuccess=!1,n&&this.addRuleToNewGroups&&this.addRuleElement(v,{})),!this.headerTemplate){var ne="";this.showButtons.cloneGroup?ne="e-clone-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn":ne="e-clone-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn e-button-hide";var J=this.createElement("button",{attrs:{title:this.l10n.getConstant("CloneGroup"),type:"button",class:ne}}),$=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-copy"}});J.appendChild($),v.querySelector(".e-group-action").appendChild(J),this.showButtons.lockGroup?ne="e-lock-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn":ne="e-lock-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn e-button-hide";var U=this.createElement("button",{attrs:{title:this.l10n.getConstant("LockGroup"),type:"button",class:ne}}),ie=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-unlock"}});U.appendChild(ie),v.querySelector(".e-group-action").appendChild(U),v.querySelector(".e-group-action").appendChild(d)}}else{if(!this.headerTemplate){var ne="";this.showButtons.lockGroup?ne="e-lock-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn":ne="e-lock-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn e-button-hide";var U=this.createElement("button",{attrs:{title:this.l10n.getConstant("LockGroup"),type:"button",class:ne}}),$=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-unlock"}});U.appendChild($),v.querySelector(".e-group-action").appendChild(U)}p.appendChild(v),this.levelColl[v.id]=[0]}if(this.enableNotCondition&&!this.headerTemplate){var ge=v.querySelector(".e-qb-toggle"),Ce=void 0;this.enableSeparateConnector?Ce=new zo({label:this.l10n.getConstant("NOT"),cssClass:"e-qb-toggle"}):Ce=new ts({content:this.l10n.getConstant("NOT"),cssClass:"e-btn e-small"}),Ce.appendTo(ge),v.querySelector(".e-btngroup-and-lbl").classList.add("e-not"),this.updatedRule&&this.updatedRule.not&&E([ge],"e-active-toggle")}if(this.enableSeparateConnector&&!this.headerTemplate){for(var ve=v.querySelector(".e-btngroup-and"),ce=v.querySelector(".e-btngroup-or"),me=v.querySelector(".e-btn-group"),j=0;j<me.childNodes.length;j++)v.querySelector(".e-btn-group").childNodes[j].textContent.toLowerCase()==="not"&&this.enableNotCondition?me.childNodes[j].classList.add("e-multiconnector"):me.childNodes[j].style.display="none";var Se=v.previousElementSibling;if(Se){if(h(this.headerTemplate)){v.parentElement.insertBefore(this.groupTemplate(!0).querySelector(".e-btn-group"),v);var ge=v.previousElementSibling.childNodes[0];ge.classList.contains("e-qb-toggle")&&(ge.style.display="none")}if(!this.isImportRules){var le=v.previousElementSibling,Me=le.querySelector(".e-btngroup-and"),ht=le.querySelector(".e-btngroup-or");if(!ve.checked&&!ce.checked){var Ue=v.nextElementSibling;Ue&&Ue.classList.contains("e-btn-group")&&(ve=Ue.querySelector(".e-btngroup-and"),ce=Ue.querySelector(".e-btngroup-or"),Me.checked=ve.checked,ht.checked=ce.checked)}else this.enableSeparateConnector&&(ve.checked&&(Me.checked=!0),ce.checked&&(ht.checked=!0))}}}if(this.updatedRule=null,this.headerTemplate){var _e={requestType:"header-template-create",ruleID:v.id,condition:s,notCondition:this.enableNotCondition?r:void 0};this.trigger("actionBegin",_e)}else if(this.enableSeparateConnector){var ct=v.querySelector(".e-add-condition-btn"),rt=new ts({cssClass:this.element.id+"_addConditionbtn",content:this.l10n.getConstant("AddCondition")});rt.appendTo(ct),rt.element.onclick=function(){c.addRuleElement(A(ct,".e-group-container"),{})};var oi=v.querySelector(".e-add-group-btn");rt=new ts({cssClass:this.element.id+"_addGroupbtn",content:this.l10n.getConstant("AddGroup")}),rt.appendTo(oi),rt.element.onclick=function(){c.addGroupElement(!0,A(oi,".e-group-container"),"",!0)}}else{var Kt=v.querySelector(".e-add-btn"),rt=new xu({items:this.items,cssClass:"e-round e-small e-caret-hide e-addrulegroup",iconCss:"e-icons e-add-icon",beforeOpen:this.selectBtn.bind(this,Kt),select:this.selectBtn.bind(this,Kt)});rt.appendTo(Kt),Kt.setAttribute("title",this.l10n.getConstant("AddButton"))}if(!this.isImportRules&&!this.prvtEvtTgrDaD){var hi=p.id.replace(this.element.id+"_",""),us=v.id.replace(this.element.id+"_","");this.trigger("change",{groupID:hi,type:"insertGroup",childGroupID:us})}}},a.prototype.setMultiConnector=function(e){if(this.enableSeparateConnector&&!this.headerTemplate&&e.previousElementSibling&&this.groupElem.querySelector(".e-btn-group")){e.parentElement.insertBefore(this.groupTemplate(!0).querySelector(".e-btn-group"),e);var t=e.previousElementSibling.childNodes[0];t.classList.contains("e-qb-toggle")&&(t.style.display="none"),this.addHeaderDiv(e)}},a.prototype.addHeaderDiv=function(e){var t,i=e.previousElementSibling.previousElementSibling;if(i){i.id.indexOf("rule")>-1?t=this.getRule(i):t=this.getGroup(i),h(t.condition)&&(t.condition="and");var s=e.previousElementSibling.querySelector(".e-btngroup-or"),n=e.previousElementSibling.querySelector(".e-btngroup-and");s.disabled=!1,n.disabled=!1,t.condition==="or"?s.checked=!0:n.checked=!0}},a.prototype.headerTemplateFn=function(e,t,i,s,n,r){var l,o=this.element.id+"_header",c,p=e.querySelector(".e-group-header");if(this.enableSeparateConnector&&e.id.indexOf("rule")!==-1&&(p=e),this.headerTemplate){if(c={requestType:"header-template-initialize",ruleID:e.id,notCondition:this.enableNotCondition?t:void 0,condition:i,rule:this.getRuleCollection(s,!1),groupID:n},this.trigger("actionBegin",c),this.enableSeparateConnector&&e.id.indexOf("rule")!==-1&&(c.requestType="rule-template-create"),this.headerFn=this.templateParser(this.headerTemplate),this.isReact)l=this.headerFn(c,this,e.id,o)[0],this.enableSeparateConnector&&r?this.enableSeparateConnectorInitialRule(e,l):this.enableSeparateConnector&&e.id.indexOf("rule")!==-1?p.parentElement.insertBefore(l,p.nextElementSibling):p.appendChild(l);else if(this.isAngular){var d=this.headerFn(c,this,e.id,o);l=d[0].nodeType===3?d[1]:d[0],this.enableSeparateConnector&&r?this.enableSeparateConnectorInitialRule(e,l):this.enableSeparateConnector&&e.id.indexOf("rule")!==-1?p.parentElement.insertBefore(l,p.nextElementSibling):p.appendChild(l)}else if(this.isVue3){if(l=this.headerFn(c,this,e.id,o),this.enableSeparateConnector&&(r||e.id.indexOf("rule")!==-1)){for(var f=0;f<l.length;f++)if(l[f].nodeName==="DIV"){l=l[f];break}}this.enableSeparateConnector&&r?this.enableSeparateConnectorInitialRule(e,l):this.enableSeparateConnector&&e.id.indexOf("rule")!==-1?p.parentElement.insertBefore(l,p.nextElementSibling):ye(l,p)}else l=this.headerFn(c,this,"Template",o)[0],this.enableSeparateConnector&&r?this.enableSeparateConnectorInitialRule(e,l):this.enableSeparateConnector&&e.id.indexOf("rule")!==-1?p.parentElement.insertBefore(l,p.nextElementSibling):p.appendChild(l);this.renderReactTemplates()}return e},a.prototype.enableSeparateConnectorInitialRule=function(e,t){var i=e.nextElementSibling?e.nextElementSibling:e,s=i.closest(".e-group-container");!e.nextElementSibling&&s&&(s=s.nextElementSibling?s.nextElementSibling:s),s&&s.parentElement.insertBefore(t,s)},a.prototype.notifyChange=function(e,t,i){var s=A(t,".e-group-container"),n=this.getParentGroup(s),r=A(t,".e-rule-container"),l=0;if(i==="not"){n.not=e;return}if(i==="condition"){this.enableSeparateConnector&&(r=t.parentElement.previousElementSibling,r&&r.classList.contains("e-group-container")&&(r=r.querySelectorAll(".e-rule-container")[r.querySelectorAll(".e-rule-container").length-1]),r&&r.classList.contains("e-rule-container")&&(n=this.getRule(r))),n.condition=e;return}for(;r&&r.previousElementSibling!==null;)r=r.previousElementSibling,(!this.enableSeparateConnector||this.enableSeparateConnector&&(!this.headerTemplate&&!r.classList.contains("e-btn-group")||this.headerTemplate&&(r.classList.contains("e-rule-container")||r.classList.contains("e-group-container"))))&&l++;var o=n.rules[l],c=this.getColumn(o.field),p=this.getFormat(c.format);if(c.type==="date"){if(e instanceof Date)e=this.intl.formatDate(e,p);else if(e instanceof Array)for(var d=0;d<e.length;d++)e[d]&&e[d]instanceof Date&&(e[d]=this.intl.formatDate(e[d],p))}c.ruleTemplate?this.templateChange(t,e,i):(this.isNotified=!0,this.updateRules(t,e),this.isNotified=!1)},a.prototype.templateChange=function(e,t,i){var s=A(e,".e-group-container"),n,r=this.getParentGroup(s),l=A(e,".e-rule-container"),o=0;for(this.allowValidation&&this.validateValue(r,l);l&&l.previousElementSibling!==null;)l=l.previousElementSibling,(!this.enableSeparateConnector||this.enableSeparateConnector&&(!this.headerTemplate&&!l.classList.contains("e-btn-group")||this.headerTemplate&&(l.classList.contains("e-rule-container")||l.classList.contains("e-group-container"))))&&o++;var c=r.rules[o];i==="field"?this.selectedColumn=this.getColumn(t):c&&(this.selectedColumn=this.getColumn(c.field));var p;this.previousColumn=this.getColumn(c.field);var d=this.getValidRules(this.rule);this.selectedColumn&&(this.selectedColumn.operators?p=this.selectedColumn.operators:p=this.customOperators[this.selectedColumn.type+"Operator"]);var f=["in","notin","between","notbetween"],v;switch(i){case"field":c.field=t,c.label=this.selectedColumn.label,c.type=this.selectedColumn.type,c.value="",c.operator=p[0].value;break;case"operator":v=c.operator,c.operator=t,f.indexOf(c.operator)>-1?c.value=[]:f.indexOf(v)>-1&&(c.value="");break;case"value":c.value=t}if(this.changeRuleTemplate(this.selectedColumn,e),this.filterRules(d,this.getValidRules(this.rule),i),this.selectedColumn&&this.selectedColumn.ruleTemplate&&(i==="field"||i==="operator")){var g=A(e,".e-rule-container");this.destroyControls(g,!0),G(g.querySelector(".e-rule-field"));var m=this.appendRuleElem(A(g,".e-group-container"),this.selectedColumn,"change",g.id,i,c);this.displayMode==="Vertical"||this.element.className.indexOf("e-device")>-1?m.className="e-rule-container e-vertical-mode":m.className="e-rule-container e-horizontal-mode",this.enableSeparateConnector||m.previousElementSibling&&m.previousElementSibling.className.indexOf("e-rule-container")>-1&&(m.className.indexOf("e-joined-rule")<0&&(m.className+=" e-joined-rule"),m.previousElementSibling.className.indexOf("e-prev-joined-rule")<0&&(m.previousElementSibling.className+=" e-prev-joined-rule")),m.previousElementSibling&&m.previousElementSibling.className.indexOf("e-group-container")>-1&&m.className.indexOf("e-separate-rule")<0&&(m.className+=" e-separate-rule");var C={requestType:"template-create",action:i,ruleID:g.id,fields:this.fields,rule:c};n={groupID:s.id.replace(this.element.id+"_",""),ruleID:g.id.replace(this.element.id+"_",""),value:c.field,type:"field"},this.trigger("actionBegin",C),this.trigger("change",n)}},a.prototype.changeValue=function(e,t){var i=this,s;if(this.isNumInput&&typeof t.value=="number"||t.type==="input"&&t.target&&t.target.classList.contains("e-numerictextbox")&&this.selectedColumn.validation&&(this.selectedColumn.validation.max!==Number.MAX_VALUE||this.selectedColumn.validation.min>0)){this.isNumInput=!1;return}if(t.element&&t.element.classList.contains("e-multiselect")){var n=t;s=n.element}else t.event?s=t.event.target:t.type==="input"&&t.target&&t.target.classList.contains("e-numerictextbox")?s=t.currentTarget:s=t.element;if(s){if(s.className.indexOf("e-day")>-1||s.className.indexOf("e-today")>-1||s.className.indexOf("e-cell")>-1){var r=t;s=r.element}var l=A(s,".e-group-container"),o=A(s,".e-rule-container"),c=l&&l.id.replace(this.element.id+"_",""),p=o.id.replace(this.element.id+"_",""),d=t,f;d.element&&d.element.className.indexOf("e-datepicker")>-1&&(s=d.element,f=Z(A(s,".e-rule-container").querySelector(".e-filter-input"),"dropdownlist"),f&&(this.selectedColumn=f.getDataByValue(f.value)),f=Z(A(s,".e-rule-container").querySelector(".e-filter-input"),"dropdowntree"),f&&(this.selectedColumn=this.getColumn(f.value[0])));var v,g;if(s.className.indexOf("e-radio")>-1)if(g=parseInt(s.id.split("valuekey")[1],10),this.fieldMode==="Default"?(f=Z(A(s,".e-rule-container").querySelector(".e-filter-input"),"dropdownlist"),this.selectedColumn=f.getDataByValue(f.value),this.selectedColumn.columns&&(f=Z(A(s,".e-rule-container").querySelector(".e-rule-sub-filter .e-dropdownlist"),"dropdownlist"),this.selectedColumn=this.getColumn(f.value))):(f=Z(A(s,".e-rule-container").querySelector(".e-filter-input"),"dropdowntree"),this.selectedColumn=this.getColumn(f.value[0])),this.selectedColumn.values)v=this.selectedColumn.values[g];else{var m=[!0,!1];v=m[g]}else if(s.className.indexOf("e-multiselect")>-1)v=Z(s,"multiselect").value;else if(v=t.value,t.type==="input"&&t.target&&t.target.classList.contains("e-numerictextbox")){v=Number(t.currentTarget.value);var C=t.currentTarget,k=ii(C,Da),T=I("decimal",Pi(this.locale));isNaN(v)&&C.value.indexOf(T)!==-1&&(v=this.intl.getNumberParser({format:"n"})(C.value)),isNaN(v)||(k.value=v),this.isNumInput=!0}t.name==="input"&&this.immediateModeDelay?(window.clearInterval(this.timer),this.timer=window.setInterval(function(){i.filterValue(c,p,v,e,s)},this.immediateModeDelay)):this.filterValue(c,p,v,e,s)}},a.prototype.filterValue=function(e,t,i,s,n){var r=this,l={groupID:e,ruleID:t,value:i,cancel:!1,type:"value"};window.clearInterval(this.timer),this.isImportRules?this.changeValueSuccessCallBack(l,n,s,e,t):this.trigger("beforeChange",l,function(o){r.changeValueSuccessCallBack(o,n,s,e,t)})},a.prototype.changeValueSuccessCallBack=function(e,t,i,s,n){e.cancel||(this.updateRules(t,e.value,i),this.isImportRules||this.trigger("change",{groupID:s,ruleID:n,value:e.value,cancel:!1,type:"value"}))},a.prototype.fieldClose=function(e){if(!(this.isFieldChange||this.isDestroy)){this.isFieldClose=!0;var t=Z(e,"dropdownlist"),i=t.popupObj&&t.popupObj.element.querySelector(".e-active"),s=t.getItemData();t.value=s.value;var n={element:t.element,value:s.value,isInteracted:!0,previousItemData:this.prevItemData,previousItem:null,item:i,itemData:s,event:null,e:null};t.previousValue!==t.value&&this.changeField(n),this.isFieldChange=!1}},a.prototype.changeField=function(e){if(e.isInteracted){if(h(e.value))return;this.isFieldChange=!0,this.prevItemData=e.itemData;var t=A(e.element,".e-rule-filter")||A(e.element,".e-rule-sub-filter"),i=this.fieldMode==="DropdownTree"?this.getColumn(e.value[0]):this.getColumn(e.value);if(this.fieldMode==="DropdownTree"&&t!==null){var s=t.querySelector(".e-dropdowntree.e-control"),n=Z(s,"dropdowntree");if(i){if(i.type==="object"){if(n.value=e.oldValue,n.dataBind(),h(e.oldValue))s.value="";else{var r=this.getLabelFromColumn(e.oldValue[0]);s.value=r}return}else if(!h(e.value[0])){n.value=e.value[0],n.dataBind();var r=this.getLabelFromColumn(e.value[0]);s.value=r}}else return}if(this.destroySubFields(t),this.subFieldElem=null,this.isNotValueChange=!0,i&&i.ruleTemplate)this.templateChange(e.element,i.field,"field");else if(i&&i.columns&&i.columns[0].ruleTemplate)this.templateChange(e.element,i.columns[0].field,"field");else{for(var l=A(e.element,".e-group-container"),o=this.getParentGroup(l),c=A(e.element,".e-rule-container"),p=0;c&&c.previousElementSibling!==null;)c=c.previousElementSibling,(!this.enableSeparateConnector||this.enableSeparateConnector&&(!this.headerTemplate&&!c.classList.contains("e-btn-group")||this.headerTemplate&&(c.classList.contains("e-rule-container")||c.classList.contains("e-group-container"))))&&p++;o.rules[p].value="",this.changeRule(o.rules[p],e)}}},a.prototype.changeRule=function(e,t){if(!t.itemData)if(this.fieldMode==="DropdownTree"){var i=Z(t.element,"dropdowntree");if(i.value==null)return}else return;var s={},n=A(t.element,".e-rule-filter");n=n||A(t.element,".e-rule-sub-filter");var r=Z(t.element,"dropdownlist");this.fieldMode==="DropdownTree"&&n!==null&&(r=Z(t.element,"dropdowntree"));var l=A(t.element,".e-group-container"),o=l.id.replace(this.element.id+"_","");this.changeFilter(n,r,o,e,s,t)},a.prototype.changeFilter=function(e,t,i,s,n,r){var l=this;if(e){var o=void 0;this.fieldMode==="DropdownTree"?o=t.value[0]:o=this.isImportRules?this.GetRootColumnName(t.value):t.value,this.selectedColumn=this.getColumn(o);var c=A(e,".e-rule-container"),p=c.id.replace(this.element.id+"_",""),d={groupID:i,ruleID:p,selectedField:this.fieldMode==="DropdownTree"?t.value[0]:t.value,cancel:!1,type:"field"};!this.isImportRules&&!this.prvtEvtTgrDaD?this.trigger("beforeChange",d,function(v){l.fieldChangeSuccess(v,n,e,s,r)}):this.fieldChangeSuccess(d,n,e,s,r)}else{var f=A(r.element,".e-rule-operator");this.changeOperator(e,f,t,i,s,n,r)}},a.prototype.changeOperator=function(e,t,i,s,n,r,l){var o=this,c,p,d;t?(c=A(t,".e-rule-container"),p=c.id.replace(this.element.id+"_",""),d={groupID:s,ruleID:p,selectedIndex:i.index,cancel:!1,type:"operator"},this.isImportRules?this.operatorChangeSuccess(d,e,r,n,l):this.trigger("beforeChange",d,function(f){o.operatorChangeSuccess(f,e,r,n,l)})):this.changeRuleValues(e,n,r,l)},a.prototype.fieldChangeSuccess=function(e,t,i,s,n){for(var r=A(i,".e-rule-container"),l=A(n.element,".e-rule-operator"),o=A(n.element,".e-group-container"),c=o.id.replace(this.element.id+"_",""),p=Z(n.element,"dropdownlist"),d=r.querySelectorAll(".e-tooltip.e-input-group"),f=0;f<d.length;f++)Z(d[f],"tooltip").destroy();if(e.cancel)this.changeOperator(i,l,p,c,s,t,n);else{if(h(this.selectedColumn))return;if(t.type=this.selectedColumn.type,r.querySelector(".e-template")&&(s.value=""),this.selectedColumn.type==="object"&&this.fieldMode==="Default")for(t.type=this.selectedColumn.columns[0].type;this.selectedColumn.columns;)this.createSubFields(i,s,t,n);else this.destroySubFields(i),this.changeOperator(i,l,p,c,s,t,n)}},a.prototype.destroySubFields=function(e){for(;e&&e.nextElementSibling.classList.contains("e-rule-sub-filter");)this.destroyControls(e),e.nextElementSibling.remove()},a.prototype.createSubFields=function(e,t,i,s){var n=!1,r=A(e,".e-rule-field"),l=this.createElement("div",{attrs:{class:"e-rule-sub-filter",id:"subfilter"+this.subFilterCounter}});r.insertBefore(l,r.querySelector(".e-rule-operator"));var o=A(l,".e-rule-container").id,c=this.createElement("input",{attrs:{type:"text",id:o+"_subfilterkey"+this.subFilterCounter}});l.appendChild(c);var p=this.element.className.indexOf("e-device")>-1?"250px":"200px",d;d={dataSource:this.selectedColumn.columns,fields:this.fields,placeholder:this.l10n.getConstant("SelectField"),popupHeight:this.selectedColumn.columns.length>5?p:"auto",change:this.changeField.bind(this),index:0,open:this.popupOpen.bind(this,!1)},this.fieldModel&&(d=xt({},d,this.fieldModel));var f=new ms(d);if(f.appendTo("#"+o+"_subfilterkey"+this.subFilterCounter),this.isImportRules||this.previousColumn&&this.previousColumn.ruleTemplate&&this.GetRootColumnName(t.field)===this.GetRootColumnName(this.previousColumn.field)){for(var v=this.selectedColumn.columns,g=0;g<v.length;g++)if(t.field===v[g].field||t.field.indexOf(v[g].field+this.separator)>-1){f.value=v[g].field,this.selectedColumn=v[g],n=!0;break}}this.subFilterCounter++,this.subFieldElem=c,s.itemData=s.itemData,!n&&this.selectedColumn.columns&&(!n&&this.isImportRules&&(f.value=null),this.selectedColumn=this.selectedColumn.columns[0]),this.previousColumn=this.selectedColumn,this.selectedColumn.columns||this.changeRuleValues(l,t,i,s)},a.prototype.operatorChangeSuccess=function(e,t,i,s,n){if(!e.cancel){var r=A(n.element,".e-rule-operator"),l=r.nextElementSibling,o=Z(n.element,"dropdownlist"),c=s.operator?s.operator.toString().toLowerCase():"";i.operator=o.value.toString();var p=i.operator.toLowerCase();if(i.operator.toLowerCase().indexOf("between")>-1||i.operator.toLowerCase().indexOf("in")>-1&&i.operator.toLowerCase().indexOf("contains")<0?(t=r.previousElementSibling,i.type=s.type,(i.operator.toLowerCase().indexOf("in")<0||c.indexOf("in")<0)&&(s.value=[])):typeof s.value=="object"&&s.value!==null&&(s.value=s.value.length>0?s.value[0]:s.type==="number"?0:""),n.previousItemData){var d=n.previousItemData.value.toString().toLowerCase();(d.indexOf("between")>-1||(d.indexOf("in")>-1||d.indexOf("null")>-1||d.indexOf("empty")>-1)&&d.indexOf("contains")<0)&&(t=r.previousElementSibling,i.type=s.type)}if(c.indexOf("in")>-1&&c.indexOf("in")<5&&p.indexOf("in")>-1&&p.indexOf("in")<5&&(t=null),i.operator.indexOf("null")>-1||i.operator.indexOf("empty")>-1){var f=r.parentElement.querySelector(".e-rule-value"),v=f.querySelector(".e-tooltip.e-input-group");v&&Z(v,"tooltip").destroy(),w([f],"e-show"),E([f],"e-hide")}l&&this.getColumn(s.field).template&&(t=r.previousElementSibling),l.children.length===0&&(t=r.previousElementSibling),this.changeRuleValues(t,s,i,n)}},a.prototype.changeRuleValues=function(e,t,i,s){var n=A(s.element,".e-rule-operator"),r,l,o,c;if(e)if(n=e.nextElementSibling,e.classList.contains("e-rule-sub-filter")&&(i.type=this.selectedColumn.type,r=n.classList.contains("e-rule-sub-filter"),n=r?n.nextElementSibling:n),E([n],"e-operator"),n.childElementCount){l=Z(n.querySelector(".e-dropdownlist"),"dropdownlist"),i.operator=l.value;var p=void 0;this.fieldMode==="DropdownTree"?p=Z(e.querySelector(".e-dropdowntree"),"dropdowntree"):p=Z(e.querySelector(".e-dropdownlist"),"dropdownlist"),i.type=this.fieldMode==="DropdownTree"?this.getColumn(p.value[0]).type:this.getColumn(p.value).type;var d=s.itemData;l.value!==""&&this.renderValues(n,d,s.previousItemData,!0,t,i,s.element)}else{var f=A(n,".e-rule-container").id;c=this.createElement("input",{attrs:{type:"text",id:f+"_operatorkey"}}),n.appendChild(c),this.selectedColumn.operators?o=this.selectedColumn.operators:s.itemData&&(o=this.customOperators[this.selectedColumn.type+"Operator"]);var v=this.element.className.indexOf("e-device")>-1?"250px":"200px",g;t.operator&&o.forEach(function(x){"value"in x&&typeof x.value=="string"&&x.value.toLowerCase()===t.operator.toLowerCase()&&(g=x.value)});var m=g||o[0].value,C=0;this.autoSelectOperator||(m="",C=-1),(this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1||this.prvtEvtTgrDaD)&&(m=t&&t.operator?t.operator:m);var k=void 0;k={dataSource:o,fields:{text:"key",value:"value"},placeholder:this.l10n.getConstant("SelectOperator"),popupHeight:o.length>5?v:"auto",change:this.changeField.bind(this),index:C,value:m,open:this.popupOpen.bind(this,!1)},this.operatorModel&&(k=xt({},k,this.operatorModel));var T=new ms(k);T.appendTo("#"+f+"_operatorkey"),i.operator=t&&t.operator!==""&&!h(t.operator)?t.operator:o[0].value,this.isImportRules&&(i.type=this.selectedColumn.type,i.operator=t.operator),!h(m)&&m!==""?this.renderValues(n,this.selectedColumn,s.previousItemData,!1,t,i,s.element):this.autoSelectField&&this.autoSelectOperator&&this.renderValues(n,this.selectedColumn,s.previousItemData,!1,t,i,s.element)}this.isImportRules||this.updateRules(s.element,s.item)},a.prototype.popupOpen=function(e,t){this.enableRtl&&E([t.popup.element],"e-rtl"),e&&(this.isFieldClose=!1)},a.prototype.destroyControls=function(e,t){for(var i=t?e:e.nextElementSibling,s=i.querySelectorAll("input.e-control"),n=i.querySelectorAll("div.e-control:not(.e-handle)"),r=this.columns,l=0,o=s.length;l<o;l++){if(s[l].classList.contains("e-textbox"))Z(s[l],"textbox").destroy(),G(M("input#"+s[l].id,i));else if(s[l].classList.contains("e-dropdownlist"))this.allowValidation&&s[l].parentElement.className.indexOf("e-tooltip")>-1&&Z(s[l].parentElement,"tooltip").destroy(),Z(s[l],"dropdownlist").destroy();else if(s[l].classList.contains("e-radio"))Z(s[l],"radio").destroy();else if(s[l].classList.contains("e-numerictextbox"))Z(s[l],"numerictextbox").destroy(),G(M("input#"+s[l].id,i));else if(s[l].classList.contains("e-datepicker"))Z(s[l],"datepicker").destroy();else if(s[l].classList.contains("e-multiselect"))Z(s[l],"multiselect").destroy();else if(s[l].className.indexOf("e-template")>-1){for(var c=s[l].className,p=0,d=r.length;p<d;p++)if(r[p].template&&c.indexOf(r[p].field)>-1){this.templateDestroy(r[p],s[l].id);break}}document.getElementById(s[l].id)&&G(s[l])}for(var l=0,o=n.length;l<o;l++){if(n[l].className.indexOf("e-template")>-1){for(var c=n[l].className,p=0,d=r.length;p<d;p++)if(r[p].template&&c.indexOf(r[p].field)>-1){this.templateDestroy(r[p],n[l].id);break}}G(n[l])}for(var f=i.querySelectorAll(".e-template:not(.e-control)"),l=0,o=f.length;l<o;l++)G(f[l])},a.prototype.templateDestroy=function(e,t){var i;if(typeof e.template!="string"||e.template.destroy===void 0)i=e.template;else return;var s=i.destroy;if(i.destroy){var n=void 0;document.getElementById(t)&&(n=A(document.getElementById(t),".e-rule-field").querySelectorAll(".e-template")),typeof s=="string"?(s=I(s,window),s({field:e.field,elementId:t,elements:n})):i.destroy({field:e.field,elementId:t,elements:n})}},a.prototype.getValues=function(e){var t={},i=[],s,n=[];this.separator.length>0&&(n=e.split(this.separator));var r=this.dataColl;if(this.dataColl[1])for(var l=0,o=r.length;l<o;l++){var c={};if(n.length>1)for(var p=r[l],d=void 0,f=0,v=n.length;f<v;f++)d=n[f],n.length===f+1?(s=p[""+d],Number(p[""+d])===p[""+d]&&p[""+d]%1!==0&&(s=p[""+d].toString())):p=p[""+d];else s=r[l][""+e],Number(r[l][""+e])===r[l][""+e]&&r[l][""+e]%1!==0&&(s=r[l][""+e].toString());s in t||(t[""+s]=1,n.length>1?this.createNestedObject(c,n,s):c[""+e]=s,i.push(c))}return i},a.prototype.createNestedObject=function(e,t,i){for(var s,n=t.length-1,r=0;r<n;++r)s=t[r],s in e||(e[""+s]={}),e=e[""+s];e[t[n]]=i},a.prototype.getDistinctValues=function(e,t){for(var i={},s=[],n=[],r="",l=t.indexOf(this.separator),o=function(f,v){r="",l===0?r=e[f][""+t]:(n=t.split(c.separator),n.forEach(function(m){r?r=r[""+m]:r=e[f][""+m]})),Number(e[f][""+t])===e[f][""+t]&&e[f][""+t]%1!==0&&(r=e[f][""+t].toString());var g={};r in i||(i[""+r]=1,l===0?g[""+t]=r:g[n[n.length-1]]=r,s.push(g))},c=this,p=0,d=e.length;p<d;p++)o(p);return s},a.prototype.renderMultiSelect=function(e,t,i,s,n){var r=!1,l,o=!1;this.isGetNestedData=!1,this.dataColl[1]&&Object.keys(this.dataColl[1]).indexOf(e.field)>-1&&(r=!0,l=this.getDistinctValues(this.dataColl,e.field)),r=e.columns?!1:r,!this.dataColl.length&&n.length&&(o=!0);var c;c={dataSource:o?n:r?l:this.dataManager,query:new ee([e.field]),fields:{text:this.selectedRule.field,value:this.selectedRule.field},placeholder:this.l10n.getConstant("SelectValue"),value:s,mode:"CheckBox",width:"100%",change:this.changeValue.bind(this,i),close:this.closePopup.bind(this,i),actionBegin:this.multiSelectOpen.bind(this,t+"_valuekey"+i),open:this.popupOpen.bind(this,!1)},this.valueModel&&this.valueModel.multiSelectModel&&(c=xt({},c,this.valueModel.multiSelectModel));var p=new za(c);p.appendTo("#"+t+"_valuekey"+i),this.updateRules(p.element,s,0)},a.prototype.multiSelectOpen=function(e,t){if(this.dataSource instanceof P){var i=document.getElementById(e),s=Z(A(i,".e-rule-container").querySelector(".e-filter-input"),this.fieldMode==="DropdownTree"?"dropdowntree":"dropdownlist");this.fieldMode==="DropdownTree"?this.selectedColumn=this.getColumn(s.value[0]):this.selectedColumn=s.getDataByValue(s.value);var n=this.selectedColumn.field,r=!1;if(this.dataColl[1]){Object.keys(this.dataColl[1]).indexOf(n)>-1&&(r=!0);var l=n.indexOf(this.separator);l!==0&&this.isGetNestedData&&(r=!0)}r||(t.cancel=!0,this.bindMultiSelectData(i,n))}},a.prototype.bindMultiSelectData=function(e,t){this.getMultiSelectData(e,t)},a.prototype.getMultiSelectData=function(e,t){var i=this,s,n=new si,r=this.dataManager.executeQuery(new ee().select(t)),l=Z(e,"multiselect");l.hideSpinner(),this.createSpinner(A(e,".e-multi-select-wrapper").parentElement),Js(A(e,".e-multi-select-wrapper").parentElement),r.then(function(o){o.actual&&o.actual.result?s=o.actual.result:s=o.result,i.dataColl=ae(i.dataColl,s,[],!0),l.dataSource=i.getDistinctValues(i.dataColl,t),i.isGetNestedData=!0,Qs(A(e,".e-multi-select-wrapper").parentElement)}).catch(function(o){n.reject(o)})},a.prototype.createSpinner=function(e){var t=this.createElement("span",{attrs:{class:"e-qb-spinner"}});e.appendChild(t),Xs({target:t,width:V.isDevice?"16px":"14px"})},a.prototype.closePopup=function(e,t){var i=document.getElementById(t.popup.element.id.replace("_popup",""));if(i){var s=Z(i,"multiselect");if(s){var n=s.value;this.updateRules(i,n,e)}}},a.prototype.processTemplate=function(e,t,i,s){var n=A(e,".e-rule-container"),r=n.querySelectorAll(".e-template"),l=n.querySelector(".e-rule-filter .e-filter-input"),o=this.fieldMode==="DropdownTree"?Z(l,"dropdowntree"):Z(n.querySelector(".e-rule-filter .e-filter-input"),"dropdownlist"),c=this.fieldMode==="DropdownTree"?this.getColumn(o.value[0]):this.getColumn(o.value);if(typeof t.template=="string"||t.template.write===void 0){var p={rule:i,ruleID:n.id,operator:s.operator,field:c.field,requestType:"value-template-create"};this.trigger("actionBegin",p)}else{var d=t.template;typeof d.write=="string"?I(d.write,window)({elements:r.length>1?r:r[0],values:i.value,operator:s.operator,field:c.field,dataSource:c.values}):typeof t.template!="function"&&t.template.write({elements:r.length>1?r:r[0],values:i.value,operator:s.operator,field:c.field,dataSource:c.values})}},a.prototype.getItemData=function(e){var t=Z(document.getElementById(e+"_filterkey"),"dropdownlist"),i=this.element.querySelector("#"+e);if(this.fieldMode==="DropdownTree")t=Z(document.getElementById(e+"_filterkey"),"dropdowntree");else if(i){var s=i.querySelectorAll(".e-rule-sub-filter");if(s.length>0){var n=s[s.length-1].querySelector(".e-dropdownlist");t=Z(n,"dropdownlist")}}return this.fieldMode==="DropdownTree"?this.getColumn(t.value[0]):this.getColumn(t.value)},a.prototype.setDefaultValue=function(e,t,i){var s=this.getItemData(e);if(h(s.value))return i?t?[0,0]:0:t?[]:"";if(t){if(!(s.value instanceof Array))return[s.value]}else if(s.value instanceof Array)return s.value[0];return s.value},a.prototype.renderStringValue=function(e,t,i,s,n){var r,l=this.getItemData(e),o,c=typeof l.template=="string";if(this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1||this.isPublic||c||t.value!==""?o=t.value:o=this.setDefaultValue(e,!1,!1),(i==="in"||i==="notin")&&(this.dataColl.length||l.values))r=this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1||this.isPublic?t.value:this.setDefaultValue(e,!0,!1),this.renderMultiSelect(l,e,s,r,l.values),this.displayMode==="Vertical"||this.element.className.indexOf("e-device")>-1?n.style.width="100%":(n.style.width=null,n.style.minWidth="200px");else{(i==="in"||i==="notin")&&(r=this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1?t.value:this.setDefaultValue(e,!0,!1),o=r.join(",")),(i==="between"||i==="notbetween")&&o.length>1&&(o=o[s]);var p=void 0;p={placeholder:this.l10n.getConstant("SelectValue"),input:this.changeValue.bind(this,s)},this.valueModel&&this.valueModel.textBoxModel&&(p=xt({},p,this.valueModel.textBoxModel));var d=new qs(p);d.appendTo("#"+e+"_valuekey"+s),d.value=o,d.dataBind()}},a.prototype.renderNumberValue=function(e,t,i,s,n,r,l){var o=this.getItemData(e),c=typeof o.template=="string",p=this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1||this.isPublic||c||typeof t.value=="number"?t.value:this.setDefaultValue(e,!1,!0);if((i==="in"||i==="notin")&&(this.dataColl.length||o.values))p=this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1||this.isPublic?t.value:this.setDefaultValue(e,!0,!1),this.renderMultiSelect(o,e,s,p,o.values),this.element.className.indexOf("e-device")>-1||this.displayMode==="Vertical"?n.style.width="100%":(n.style.minWidth="200px",n.style.width=null);else if(i==="in"||i==="notin"){p=this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1?t.value:this.setDefaultValue(e,!0,!1);var d=p.join(","),f=void 0;f={placeholder:this.l10n.getConstant("SelectValue"),input:this.changeValue.bind(this,s)},this.valueModel&&this.valueModel.textBoxModel&&(f=xt({},f,this.valueModel.textBoxModel));var v=new qs(f);v.appendTo("#"+e+"_valuekey"+s),v.value=d,v.dataBind()}else{r=o;var g=r.validation&&r.validation.min?r.validation.min:0,m=r.validation&&r.validation.max?r.validation.max:Number.MAX_VALUE,C=r.format?r.format:"n";l>1&&t&&(p=t.value[s]?t.value[s]:this.setDefaultValue(e,!0,!0));var k=void 0;k={value:p instanceof Array?p[s]:p,format:C,min:g,max:m,width:"100%",step:r.step?r.step:1,change:this.changeValue.bind(this,s)},this.valueModel&&this.valueModel.numericTextBoxModel&&(k=xt({},k,this.valueModel.numericTextBoxModel));var T=new Da(k);T.appendTo("#"+e+"_valuekey"+s),T.element.setAttribute("aria-label",r.label+" Value"),T.element.oninput=this.changeValue.bind(this,s)}},a.prototype.processValueString=function(e,t){var i=[],s=e.split(",");if(t==="string")return s;for(var n=0,r=s.length;n<r;n++)i.push(Number(s[n]));return i},a.prototype.parseDate=function(e,t){var i,s;if(t){var n=this.intl.getDateParser({skeleton:"full",type:"dateTime"});i=this.getFormat(t),s=n(e),h(s)&&(s=this.intl.parseDate(e,i))}else s=new Date(e);return s},a.prototype.renderControls=function(e,t,i,s,n){if(E([e.parentElement.querySelector(".e-rule-value")],"e-value"),w([e.parentElement.querySelector(".e-rule-value")],"e-hide"),E([e.parentElement.querySelector(".e-rule-value")],"e-show"),t.template&&(t.template.create||n))this.processTemplate(e,t,i,s);else{var r;s.type==="boolean"?r=this.selectedColumn.values?this.selectedColumn.values.length:2:r=s.operator&&s.operator.toString().toLowerCase().indexOf("between")>-1?2:1;var l=A(e,".e-rule-container").id,o=void 0,c=s.operator.toString();if(e.className.indexOf("e-rule-operator")>-1||e.className.indexOf("e-rule-filter")>-1){o=e.parentElement.querySelector(".e-rule-value"),this.element.className.indexOf("e-device")>-1||this.displayMode==="Vertical"?o.style.width="100%":c!=="in"&&c!=="notin"?E([o],"e-custom-value"):w([o],"e-custom-value");for(var p=0;p<r;p++)switch(s.type){case"string":this.renderStringValue(l,i,c,p,o);break;case"number":this.renderNumberValue(l,i,c,p,o,t,r);break;case"boolean":this.processBoolValues(t,i,l,p);break;case"date":{var d=new Date,f=void 0,v=void 0,g=t.format,m=void 0,C=void 0,k=this.l10n.getConstant("SelectValue"),T=typeof t.template=="string";if(i.value&&!h(g)&&(f=r>1?i.value[p]:i.value,d=this.parseDate(f,g)||new Date),!t.field&&!t.key&&t.value&&(t.value instanceof Date?d=t.value:d=this.parseDate(t.value,t.format)),!t.format&&i&&i.field!==""&&(v=this.getColumn(i.field),g=v.format),(this.isImportRules||this.isPublic||T)&&i&&(v=this.getColumn(i.field),g=v.format,i.value?(f=r>1?i.value[p]:i.value,d=this.parseDate(f,v.format)):d=i.value),g){var x=this.getFormat(g);x.skeleton?(C={locale:this.getLocale(),value:d,placeholder:k,format:x,change:this.changeValue.bind(this,p)},this.valueModel&&this.valueModel.datePickerModel&&(C=xt({},C,this.valueModel.datePickerModel)),m=new Ms(C)):(C={value:d,locale:this.getLocale(),placeholder:k,format:x.format,change:this.changeValue.bind(this,p)},this.valueModel&&this.valueModel.datePickerModel&&(C=xt({},C,this.valueModel.datePickerModel)),m=new Ms(C))}else C={locale:this.getLocale(),value:d,placeholder:k,change:this.changeValue.bind(this,p)},this.valueModel&&this.valueModel.datePickerModel&&(C=xt({},C,this.valueModel.datePickerModel)),m=new Ms(C);if(m.appendTo("#"+l+"_valuekey"+p),!i.value){var L=document.getElementById(l+"_valuekey"+p);this.updateRules(L,d,null,this.isNotValueChange),this.isNotValueChange=!1}}break}}}},a.prototype.processBoolValues=function(e,t,i,s){var n=!1,r,l;h(t.type)&&e&&(t.type=e.type);var o;if(e.values){var c=e.values;t.type==="boolean"&&!h(t.value)?n=c[s].toLowerCase()===t.value.toString().toLowerCase():e.value?n=c[s].toLowerCase()===e.value.toString().toLowerCase():s===0&&(n=!0),l=r=o=c[s]}else{var c=[!0,!1];t.type==="boolean"&&!h(t.value)?n=c[s].toString().toLowerCase()===t.value.toString().toLowerCase():e.value?n=c[s].toString().toLowerCase()===e.value.toString().toLowerCase():s===0&&(typeof t.value=="boolean"?n=!!t.value:n=!0),typeof t.value=="boolean"&&s===1&&(n=!t.value),r=c[s].toString(),l=c[s],o=this.l10n.getConstant(["True","False"][s])}var p;p={label:o,name:i+"default",checked:n,value:r,change:this.changeValue.bind(this,s)},this.valueModel&&this.valueModel.radioButtonModel&&(p=xt({},p,this.valueModel.radioButtonModel));var d=new xn(p);d.appendTo("#"+i+"_valuekey"+s),n&&this.updateRules(d.element,l,0,!0)},a.prototype.getOperatorIndex=function(e,t){var i,s=e.dataSource,n=s.length;for(i=0;i<n;i++)if(t.operator===e.dataSource[i].value)return i;return 0},a.prototype.getPreviousItemData=function(e,t){return this.isFieldClose&&e&&(e=this.getColumn(e.value?e.value:e.field)),t&&t.template&&e&&Object.keys(e).length<4&&(e.template=t.template),e},a.prototype.renderValues=function(e,t,i,s,n,r,l){var o=e.previousElementSibling,c=o.getElementsByTagName("input")[0],p=this.fieldMode==="DropdownTree"?Z(c,"dropdowntree"):Z(c,"dropdownlist"),d=this.fieldMode==="DropdownTree"?this.getColumn(p.value[0]):this.getColumn(p.value);this.selectedRule=d;var f=Z(e.querySelector("input"),"dropdownlist");s&&(t=l.id.indexOf("operator")>-1?t:this.selectedRule,t.operators&&(f.value=null,f.dataBind(),f.dataSource=t.operators,f.index=this.getOperatorIndex(f,n),f.value=r.operator=f.dataSource[f.index].value,this.autoSelectOperator?f.dataBind():(f.index=-1,r.operator=f.value="")));var v=r.operator.toString(),g=!1;if(v.indexOf("null")>-1||v.indexOf("isempty")>-1||v.indexOf("isnotempty")>-1){var k=e.parentElement.querySelector(".e-rule-value");k&&(w([k],"e-show"),E([k],"e-hide"))}else{var m=A(e,".e-rule-container").id;if(i=this.getPreviousItemData(i,d),i&&i.template===void 0?i.columns&&(i=this.getColumn(n.field)):this.fieldMode==="DropdownTree"&&i===void 0&&(i=this.getColumn(n.field)),i&&i.template){this.templateDestroy(i,m+"_valuekey0");var C=M("#"+m+"_valuekey0",e.nextElementSibling);C&&!C.classList.contains("e-control")&&G(M("#"+m+"_valuekey0",e.nextElementSibling)),(typeof i.template=="string"||i.template.create===void 0)&&(e.nextElementSibling.classList.contains("e-template-value")&&this.clearQBTemplate([m]),e.nextElementSibling.innerHTML=""),this.isAngular&&!h(i.key)&&this.fieldMode==="DropdownTree"&&delete i.template}if(s&&(this.validateValue(n,A(e,".e-rule-container")),this.destroyControls(e)),this.isImportRules||f&&f.value!==""){if(d&&(t.template=d.template),t.template&&(E([e.nextElementSibling],"e-template-value"),t.template=d.template,g=this.setColumnTemplate(t,m,d.field,t.value||v,e,n)),g){var k=e.parentElement.querySelector(".e-rule-value");this.element.className.indexOf("e-device")>-1||this.displayMode==="Vertical"?k.style.width="100%":k.style.width="200px"}else{w([e.nextElementSibling],"e-template-value");var T=1;r.type==="boolean"?T=this.selectedColumn.values?this.selectedColumn.values.length:2:T=v&&v.toLowerCase().indexOf("between")>-1?2:1;for(var x=0;x<T;x++){var L=this.createElement("input",{attrs:{type:"text",id:m+"_valuekey"+x}});e.nextElementSibling.appendChild(L)}}this.renderControls(e,t,n,r,g),this.isAngular&&!h(t.key)&&t.template&&this.fieldMode==="DropdownTree"&&delete t.template}}},a.prototype.setColumnTemplate=function(e,t,i,s,n,r){var l=this,o,c=!0;if(e.template){if(typeof e.template=="string"||e.template.create===void 0)return o={requestType:"value-template-initialize",ruleID:t,field:i,operator:s,rule:r,renderTemplate:!0},this.trigger("actionBegin",o,function(g){c=l.actionBeginSuccessCallBack(g,e,t,i,n)}),c;var p=void 0,d=e.template;if(typeof d.create=="string"?p=I(d.create,window)({field:i,operator:s}):p=d.create({field:i,operator:s}),p instanceof Element)p.id=t+"_valuekey0",E([p],"e-template"),n.nextElementSibling.appendChild(p),i.indexOf(" ")<0&&E([p],"e-"+i);else if(p instanceof Array){E(p,"e-template");for(var f=0,v=p.length;f<v;f++)p[f].id=t+"_valuekey"+f,n.nextElementSibling.appendChild(p[f])}return E([n.nextElementSibling],"e-template-value"),!0}else return!0},a.prototype.actionBeginSuccessCallBack=function(e,t,i,s,n){if(e.renderTemplate){var r=void 0;this.columnTemplateFn=this.templateParser((typeof t.template=="function",t.template));var l=this.element.id+s;if(this.isReact)r=this.columnTemplateFn(e,this,i,l)[0],n.nextElementSibling.appendChild(r);else if(this.isAngular){var o=this.columnTemplateFn(e,this,i,l);r=o[0].nodeType===3?o[1]:o[0],n.nextElementSibling.appendChild(r)}else this.isVue3?(r=this.columnTemplateFn(e,this,"Template",l),ye(r,n.nextElementSibling)):(r=this.columnTemplateFn(e,this,"Template",l)[0],n.nextElementSibling.appendChild(r));return E([n.nextElementSibling],"e-template-value"),this.renderReactTemplates(),!0}else return!1},a.prototype.updateValues=function(e,t){var i=1;e.className.indexOf("e-template")>-1&&(i=3);var s=e.className.split(" e-")[i],n=parseInt(e.id.slice(-1),2),r,l,o,c,p,d;switch(s){case"checkbox":c=Z(e,s).value,t.value=c!==""?c:void 0;break;case"textbox":d=Z(e,s).value,t.operator.indexOf("between")>-1?(typeof t.value=="string"&&(t.value=[]),t.value[n]=d):t.value=d;break;case"dropdownlist":t.value=Z(e,s).value;break;case"radio":p=Z(e,s),p.checked&&(typeof t.value=="boolean"?t.value=p.value==="true":this.getColumn(t.field).values?t.value=p.value:t.value=p.value==="true"),p.refresh();break;case"numerictextbox":t.operator.indexOf("between")>-1?(typeof t.value=="string"&&(t.value=[]),t.value[n]=Z(e,s).value):t.value=Z(e,s).value;break;case"datepicker":r=this.getColumn(t.field),l=this.getFormat(r.format),o=Z(e,s).value,t.operator.indexOf("between")>-1?(typeof t.value=="string"&&(t.value=[]),t.value[n]=this.intl.formatDate(o,l)):h(l.format)&&o?t.value=this.intl.formatDate(o):o?t.value=this.intl.formatDate(o,l):t.value=o;break;case"multiselect":t.value=Z(e,s).value;break}},a.prototype.updateRules=function(e,t,i,s){for(var n=A(e,".e-group-container"),r=this.getParentGroup(n),l=A(e,".e-rule-container"),o=0,c,p,d=n.id.replace(this.element.id+"_",""),f=this.getValidRules(this.rule);l&&l.previousElementSibling!==null;)l=l.previousElementSibling,(!this.enableSeparateConnector||this.enableSeparateConnector&&(!this.headerTemplate&&!l.classList.contains("e-btn-group")||this.headerTemplate&&(l.classList.contains("e-rule-container")||l.classList.contains("e-group-container"))))&&o++;var v=r.rules[o].operator?r.rules[o].operator.toString():"";l=A(e,".e-rule-container");var g=l.id.replace(this.element.id+"_","");if(A(e,".e-rule-filter")||A(e,".e-rule-sub-filter")){this.subFieldElem&&(e=this.subFieldElem),c=this.fieldMode==="DropdownTree"?Z(e,"dropdowntree"):Z(e,"dropdownlist");var m=this.fieldMode==="DropdownTree"?this.getColumn(c.value[0]):this.getColumn(c.value);!this.isImportRules&&r.rules[o].field&&r.rules[o].field.toLowerCase()!==m.field.toLowerCase()&&(!l.querySelectorAll(".e-template")&&!(v.indexOf("null")>-1)||v.indexOf("empty")>-1)&&(r.rules[o].value=""),this.selectedColumn=this.getColumn(this.selectedColumn.field),r.rules[o].field=this.selectedColumn.field,r.rules[o].type=this.selectedColumn.type,r.rules[o].label=this.selectedColumn.label;var C=A(e,".e-rule-filter");C=C||A(e,".e-rule-sub-filter");var k=C.nextElementSibling.querySelector("input.e-control");k=k||C.nextElementSibling.nextElementSibling.querySelector("input.e-control"),v=Z(k,"dropdownlist").value.toString(),r.rules[o].operator=v;var T=C.nextElementSibling.nextElementSibling,x=T.querySelectorAll("input.e-control");x.length<1&&(x=T.querySelectorAll("div.e-control")),x.length<1&&(x=T.querySelectorAll(".e-template")),p={groupID:d,ruleID:g,value:r.rules[o].field,type:"field"};for(var L=0;L<x.length;L++){if(v.indexOf("null")>-1||v.indexOf("empty")>-1){r.rules[o].value=null;continue}this.updateValues(x[L],r.rules[o])}!this.isImportRules&&!this.prvtEvtTgrDaD&&this.trigger("change",p),this.allowValidation&&r.rules[o].field&&e.parentElement.className.indexOf("e-tooltip")>-1&&Z(e.parentElement,"tooltip").destroy(),this.filterRules(f,this.getValidRules(this.rule),"field")}else if(A(e,".e-rule-operator")){c=Z(e,"dropdownlist"),r.rules[o].operator=c.value.toString();var N=l.querySelectorAll(".e-rule-value input.e-control");p={groupID:d,ruleID:g,value:c.value,type:"operator"},this.allowValidation&&r.rules[o].operator&&e.parentElement.className.indexOf("e-tooltip")>-1&&Z(e.parentElement,"tooltip").destroy(),N.length>1&&!(N[0].className.indexOf("e-template")>-1)&&(r.rules[o].value=[]);for(var R=0;R<N.length;R++){if(r.rules[o].operator.indexOf("null")>-1||r.rules[o].operator.indexOf("empty")>-1){r.rules[o].value=null;continue}else if(N[R].classList.contains("e-template"))continue;this.updateValues(N[R],r.rules[o])}this.isImportRules||this.trigger("change",p),this.filterRules(f,this.getValidRules(this.rule),"operator")}else A(e,".e-rule-value")&&(this.ruleValueUpdate(e,t,r,o,n,l,i),s||this.filterRules(f,this.getValidRules(this.rule),"value"))},a.prototype.filterRules=function(e,t,i){var s=JSON.stringify({condition:e.condition,not:e.not,rule:e.rules}),n=JSON.stringify({condition:t.condition,not:t.not,rule:t.rules});s!==n&&!this.isImportRules&&!this.prvtEvtTgrDaD&&this.trigger("ruleChange",{previousRule:e,rule:t,type:i})},a.prototype.ruleValueUpdate=function(e,t,i,s,n,r,l){var o,c,p=["in","between","notin","notbetween"];if(i.rules[s].operator&&(c=i.rules[s].operator.toString().toLowerCase()),t!==null){if(e.className.indexOf("e-multiselect")>-1&&i.rules[s].type==="number"&&!this.isNotified){for(var d=[],f=t,v=0,g=f.length;v<g;v++)typeof f[v]=="string"&&d.push(parseFloat(f[v]));d.length&&(t=d)}if(this.isNotified)i.rules[s].value=t,o={groupID:n.id,ruleID:r.id,value:i.rules[s].value,type:"value"},this.isImportRules||this.trigger("change",o);else if(e.className.indexOf("e-spin")>-1||e.className.indexOf("e-numeric")>-1)p.indexOf(c)>-1?i.rules[s].value[l]=t:i.rules[s].value=t;else if(e.className.indexOf("e-radio")>-1)i.rules[s].value=t;else if(e.className.indexOf("e-multiselect")>-1)i.rules[s].value=t;else if(e.className.indexOf("e-textbox")>-1)c==="in"||c==="notin"?i.rules[s].type==="string"?i.rules[s].value=this.processValueString(t,i.rules[s].type):i.rules[s].value=this.processValueString(t,i.rules[s].type):c==="between"||c==="notbetween"?(typeof i.rules[s].value=="string"&&(i.rules[s].value=[]),i.rules[s].value[l]=t):i.rules[s].value=t;else if(e.className.indexOf("e-datepicker")>-1){var m=this.getFormat(this.getColumn(this.selectedColumn.field).format);m.type&&(p.indexOf(c)>-1?(typeof i.rules[s].value=="string"&&(i.rules[s].value=[]),i.rules[s].value[l]=this.intl.formatDate(t,m)):i.rules[s].value=this.intl.formatDate(t,m))}this.validateValue(i,r,s)}else e.className.indexOf("e-datepicker")>-1&&p.indexOf(c)>-1?(typeof i.rules[s].value=="string"&&(i.rules[s].value=[]),i.rules[s].value[l]=t):i.rules[s].value=t},a.prototype.validateValue=function(e,t,i){h(i)||(e=e.rules[i]);var s=typeof e.value=="object";if(this.allowValidation&&(h(i)||(s?e.value.length>0:e.value))){var n=t.querySelectorAll(".e-rule-value .e-control");n.length>0&&(n[0].className.indexOf("e-tooltip")>-1?Z(n[0],"tooltip").destroy():n[0].parentElement.className.indexOf("e-tooltip")>-1&&Z(n[0].parentElement,"tooltip").destroy(),n[1]&&n[1].parentElement.className.indexOf("e-tooltip")>-1&&Z(n[1].parentElement,"tooltip").destroy(),n[2]&&n[2].parentElement.className.indexOf("e-tooltip")>-1&&Z(n[2].parentElement,"tooltip").destroy())}},a.prototype.getFormat=function(e){var t;return e?typeof e=="string"?(t={type:"dateTime"},e==="short"||e==="yMd"?(t.type="date",t.skeleton=e):t.format=e):t={type:"dateTime",skeleton:e.skeleton}:t={type:"date",skeleton:"yMd"},t},a.prototype.findGroupByIdx=function(e,t,i){var s=t.rules,n=[];if(!i){for(var r=0,l=s.length;r<l;r++)t=s[r],t.rules&&n.push(t);return n[e]}return t},a.prototype.destroy=function(){this.isDestroy=!0;var e=this.element;if(e){var t,i,s,n;for(u.prototype.destroy.call(this),t=this.element.querySelectorAll(".e-addrulegroup"),s=t.length,i=0;i<s;i++)Z(t[i],"dropdown-btn").destroy(),G(t[i]);for(n=this.element.querySelectorAll(".e-rule-filter .e-control.e-tooltip"),i=0;i<n.length;i++)Z(n[i],"tooltip").destroy();for(t=this.element.querySelectorAll(".e-rule-filter .e-control:not(.e-tooltip)"),s=t.length,i=0;i<s;i++)Z(t[i],"dropdownlist")?Z(t[i],"dropdownlist").destroy():Z(t[i],"dropdowntree").destroy(),G(t[i]);for(n=this.element.querySelectorAll(".e-rule-operator .e-control.e-tooltip"),i=0;i<n.length;i++)Z(n[i],"tooltip").destroy();for(t=this.element.querySelectorAll(".e-rule-operator .e-control:not(.e-tooltip)"),s=t.length,i=0;i<s;i++)Z(t[i],"dropdownlist")&&(Z(t[i],"dropdownlist").destroy(),G(t[i]));for(n=this.element.querySelectorAll(".e-rule-value .e-control.e-tooltip"),i=0;i<n.length;i++)Z(n[i],"tooltip").destroy();this.isImportRules=!1,this.unWireEvents(),this.levelColl[this.element.id+"_group0"]=[0],this.element.innerHTML="",this.portals&&this.portals.length&&this.clearQBTemplate();var r=document.querySelectorAll(".qb-dropdownlist.e-popup");if(r)for(i=0;i<r.length;i++)r[i].remove();ri(this.element,[],["e-rtl","e-responsive","e-device"]),this.isDestroy=!1}},a.prototype.addRules=function(e,t){t=this.element.id+"_"+t,this.isPublic=!0;for(var i=0,s=e.length;i<s;i++)this.addRuleElement(document.getElementById(t),e[i]);this.isPublic=!1},a.prototype.addGroups=function(e,t){if(this.isAddSuccess||this.element.querySelectorAll(".e-group-container").length<=this.maxGroupCount){t=this.element.id+"_"+t;var i=document.getElementById(t),s=this.getParentGroup(i),n=e.length;if(n){this.isPublic=!0;for(var r=0,l=e.length;r<l;r++)this.updatedRule={isLocked:e[r].isLocked,condition:e[r].condition,not:e[r].not},this.importRules(e[r],i,!1,e[r].not);this.isPublic=!1}else{var o="and",c=!1,p=!1;this.updatedRule&&(o=this.updatedRule.condition,c=this.updatedRule.not,p=this.updatedRule.isLocked),this.groupIndex<0?this.enableNotCondition?s.rules.push({condition:o,not:c,rules:[]}):s.rules.push({condition:o,rules:[]}):this.enableNotCondition?s.rules.splice(this.groupIndex+1,0,{condition:o,not:c,rules:[],isLocked:p}):s.rules.splice(this.groupIndex+1,0,{condition:o,rules:[],isLocked:p})}this.headerTemplate||this.disableRuleCondition(i,s,null,this.enableSeparateConnector?!0:null)}},a.prototype.initWrapper=function(){if(this.isInitialLoad=!0,this.cssClass&&E([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableSeparateConnector&&E([this.element],"e-multi-connector"),this.enableRtl&&E([this.element],"e-rtl"),this.width&&(this.element.style.width=this.width),this.height&&(this.element.style.height=this.height),this.rule.rules.length?this.isImportRules=!0:this.addGroupElement(!1,this.element),V.isDevice||this.displayMode==="Vertical"?(V.isDevice&&(this.element.style.width="100%",this.element.classList.add("e-device")),w(this.element.querySelectorAll(".e-rule-container"),"e-horizontal-mode"),E(this.element.querySelectorAll(".e-rule-container"),"e-vertical-mode"),this.displayMode="Vertical"):this.displayMode="Horizontal",this.summaryView)this.isImportRules?this.renderSummary():this.renderSummaryCollapse();else{if(this.columns&&this.columns.length&&this.isImportRules){this.addGroupElement(!1,this.element,this.rule.condition,!1,this.rule.not,!1,this.rule);var e=ae({},this.rule,{},!0);this.isRefreshed=!0,this.setGroupRules(e),this.isRefreshed=!1}else this.columns&&this.columns.length&&this.addRuleElement(this.element.querySelector(".e-group-container"),{});this.notGroupRtl(),this.readonly&&this.enableReadonly();for(var t=this.element.querySelectorAll("label.e-btn"),i=void 0,s=0;s<t.length;s++)i=t.item(s),Vt(i,{selector:".e-btn"})}},a.prototype.renderSummary=function(){var e=this.createElement("div",{attrs:{class:"e-summary-content",id:this.element.id+"_summary_content"}}),t=this.createElement("textarea",{attrs:{class:"e-summary-text",readonly:"true"},styles:"max-height:500px"}),i=this.createElement("button",{attrs:{type:"button",class:"e-edit-rule e-css e-btn e-small e-flat e-primary"}}),s=this.createElement("div",{attrs:{class:"e-summary-btndiv"}});e.appendChild(t),t.textContent=this.getSqlFromRules(this.rule),i.textContent=this.l10n.getConstant("Edit"),s.appendChild(i),e.appendChild(s),this.element.appendChild(e)},a.prototype.renderSummaryCollapse=function(){var e=this.createElement("div",{attrs:{class:"e-collapse-rule e-icons",title:this.l10n.getConstant("SummaryViewTitle")}});this.element.querySelector(".e-group-header").appendChild(e)},a.prototype.columnSort=function(){this.sortDirection.toLowerCase()==="descending"?this.columns=new P(this.columns).executeLocal(new ee().sortByDesc("field")):this.sortDirection.toLowerCase()==="ascending"&&(this.columns=new P(this.columns).executeLocal(new ee().sortBy("field")))},a.prototype.onChangeNotGroup=function(){if(this.element.innerHTML="",this.groupIdCounter=0,!this.headerTemplate)if(this.enableNotCondition){var e=this.createElement("button",{attrs:{type:"button",class:"e-qb-toggle"}});this.groupElem.querySelector(".e-btn-group")&&this.groupElem.querySelector(".e-btn-group").insertBefore(e,this.groupElem.querySelector(".e-btngroup-and"))}else this.groupElem.querySelector(".e-qb-toggle").remove();this.setProperties({rule:this.checkNotGroup(this.rule)},!0),this.initWrapper()},a.prototype.notGroupRtl=function(){this.enableRtl?E(this.element.querySelectorAll(".e-btn-group"),"e-rtl"):w(this.element.querySelectorAll(".e-btn-group"),"e-rtl")},a.prototype.checkNotGroup=function(e){var t;if(e.rules)for(var i=0;i<e.rules.length;i++)t=e.rules[i],t=this.checkNotGroup(t),e.rules[i]=t;return h(e.not)?this.enableNotCondition&&!h(e.condition)&&(e.not=!1):(this.enableNotCondition&&(e.not=!1),delete e.not),e},a.prototype.onPropertyChanged=function(e,t){for(var i=Object.keys(e),s=this.element.querySelector(".e-group-container"),n=this.element.querySelector(".e-summary-content"),r=0,l=i;r<l.length;r++){var o=l[r];switch(o){case"summaryView":e.summaryView?(s.style.display="none",this.element.querySelectorAll(".e-summary-content").length<1?(this.renderSummary(),n=this.element.querySelector(".e-summary-content")):this.element.querySelector(".e-summary-text").textContent=this.getSqlFromRules(this.rule),n.style.display="block"):(s.querySelectorAll(".e-collapse-rule").length>-1&&this.renderSummaryCollapse(),s.style.display="block",n.style.display="none");break;case"displayMode":this.refresh();break;case"showButtons":h(e.showButtons.lockGroup)||(e.showButtons.lockGroup?w(this.element.querySelectorAll(".e-lock-grp-btn"),"e-button-hide"):E(this.element.querySelectorAll(".e-lock-grp-btn"),"e-button-hide")),h(e.showButtons.lockRule)||(e.showButtons.lockRule?w(this.element.querySelectorAll(".e-lock-rule-btn"),"e-button-hide"):E(this.element.querySelectorAll(".e-lock-rule-btn"),"e-button-hide")),h(e.showButtons.cloneGroup)||(e.showButtons.cloneGroup?w(this.element.querySelectorAll(".e-clone-grp-btn"),"e-button-hide"):E(this.element.querySelectorAll(".e-clone-grp-btn"),"e-button-hide")),h(e.showButtons.cloneRule)||(e.showButtons.cloneRule?w(this.element.querySelectorAll(".e-clone-rule-btn"),"e-button-hide"):E(this.element.querySelectorAll(".e-clone-rule-btn"),"e-button-hide")),h(e.showButtons.ruleDelete)||(e.showButtons.ruleDelete?w(this.element.querySelectorAll(".e-rule-delete"),"e-button-hide"):E(this.element.querySelectorAll(".e-rule-delete"),"e-button-hide")),h(e.showButtons.groupDelete)||(e.showButtons.groupDelete?w(this.element.querySelectorAll(".e-deletegroup"),"e-button-hide"):E(this.element.querySelectorAll(".e-deletegroup"),"e-button-hide"));break;case"cssClass":t.cssClass&&w([this.element],t.cssClass.split(" ")),e.cssClass&&E([this.element],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?(E([this.element],"e-rtl"),this.notGroupRtl()):(w([this.element],"e-rtl"),this.notGroupRtl());break;case"enablePersistence":this.enablePersistence=e.enablePersistence;break;case"dataSource":this.dataSource=e.dataSource,this.refresh();break;case"columns":this.columns=e.columns,this.columnSort(),this.updateSubFieldsFromColumns(this.columns);break;case"sortDirection":this.sortDirection=e.sortDirection,this.columnSort();break;case"maxGroupCount":this.maxGroupCount=e.maxGroupCount;break;case"height":this.height=e.height,this.element.style.height=this.height;break;case"rule":this.rule.rules.length===0&&!h(this.rule)&&this.reset(),this.setProperties({rule:e.rule},!0),e.rule=this.getRuleCollection(this.rule,!1),this.setRules(this.rule);break;case"width":this.width=e.width,this.element.style.width=this.width;break;case"locale":this.locale=e.locale,this.intl=new dt(this.locale),this.isLocale=!0,this.refresh(),this.isLocale=!1;break;case"enableNotCondition":this.onChangeNotGroup();break;case"readonly":this.isReadonly=e.readonly,this.enableReadonly();break;case"allowDragAndDrop":this.allowDragAndDrop=e.allowDragAndDrop,this.refresh();break;case"enableSeparateConnector":this.enableSeparateConnector=e.enableSeparateConnector,this.refresh();break}}},a.prototype.preRender=function(){this.element.id=this.element.id||$e("ej2-querybuilder"),this.defaultLocale={StartsWith:"Starts With",DoesNotStartWith:"Does Not Start With",EndsWith:"Ends With",DoesNotEndWith:"Does Not End With",Contains:"Contains",DoesNotContain:"Does Not Contain",NotLike:"Not Like",Like:"Like",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",Between:"Between",NotBetween:"Not Between",In:"In",NotIn:"Not In",Remove:"REMOVE",SelectField:"Select a field",SelectOperator:"Select operator",DeleteRule:"Remove this condition",DeleteGroup:"Delete group",AddGroup:"Add Group",AddCondition:"Add Condition",Edit:"EDIT",ValidationMessage:"This field is required",SummaryViewTitle:"Summary View",OtherFields:"Other Fields",AND:"AND",OR:"OR",NOT:"NOT",SelectValue:"Enter Value",IsEmpty:"Is Empty",IsNotEmpty:"Is Not Empty",IsNull:"Is Null",IsNotNull:"Is Not Null",True:"true",False:"false",AddButton:"Add Group/Condition",CloneGroup:"Clone Group",LockGroup:"Lock Group",CloneRule:"Clone Rule",LockRule:"Lock Rule",UnlockRule:"Unlock Rule",UnlockGroup:"Unlock Group"},this.l10n=new St("querybuilder",this.defaultLocale,this.locale),this.intl=new dt(this.locale),this.groupIdCounter=0,this.subFilterCounter=0,this.ruleIdCounter=0,this.btnGroupId=0,this.isImportRules=!1,this.parser=[],this.customOperators={stringOperator:[{value:"startswith",key:this.l10n.getConstant("StartsWith")},{value:"notstartswith",key:this.l10n.getConstant("DoesNotStartWith")},{value:"endswith",key:this.l10n.getConstant("EndsWith")},{value:"notendswith",key:this.l10n.getConstant("DoesNotEndWith")},{value:"contains",key:this.l10n.getConstant("Contains")},{value:"notcontains",key:this.l10n.getConstant("DoesNotContain")},{value:"equal",key:this.l10n.getConstant("Equal")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"in",key:this.l10n.getConstant("In")},{value:"notin",key:this.l10n.getConstant("NotIn")},{value:"isempty",key:this.l10n.getConstant("IsEmpty")},{value:"isnotempty",key:this.l10n.getConstant("IsNotEmpty")}],dateOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"greaterthan",key:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",key:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",key:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",key:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"between",key:this.l10n.getConstant("Between")},{value:"notbetween",key:this.l10n.getConstant("NotBetween")}],booleanOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"notequal",key:this.l10n.getConstant("NotEqual")}],numberOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"greaterthanorequal",key:this.l10n.getConstant("GreaterThanOrEqual")},{value:"greaterthan",key:this.l10n.getConstant("GreaterThan")},{value:"between",key:this.l10n.getConstant("Between")},{value:"lessthan",key:this.l10n.getConstant("LessThan")},{value:"notbetween",key:this.l10n.getConstant("NotBetween")},{value:"lessthanorequal",key:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"in",key:this.l10n.getConstant("In")},{value:"notin",key:this.l10n.getConstant("NotIn")}]},this.operators={equal:"=",notequal:"!=",greaterthan:">",greaterthanorequal:">=",lessthan:"<",in:"IN",notin:"NOT IN",lessthanorequal:"<=",startswith:"LIKE",endswith:"LIKE",between:"BETWEEN",notbetween:"NOT BETWEEN",contains:"LIKE",isnull:"IS NULL",isnotnull:"IS NOT NULL",isempty:"IS EMPTY",isnotempty:"IS NOT EMPTY",notstartswith:"NOT LIKE",notendswith:"NOT LIKE",notcontains:"NOT LIKE"},this.sqlOperators={equal:"=",notequal:"!=",greaterthan:">",greaterthanorequal:">=",lessthan:"<",in:this.l10n.getConstant("In").toUpperCase(),notin:this.l10n.getConstant("NotIn").toUpperCase(),lessthanorequal:"<=",startswith:this.l10n.getConstant("Like").toUpperCase(),endswith:this.l10n.getConstant("Like").toUpperCase(),between:this.l10n.getConstant("Between").toUpperCase(),notbetween:this.l10n.getConstant("NotBetween").toUpperCase(),contains:this.l10n.getConstant("Like").toUpperCase(),isnull:this.l10n.getConstant("IsNull").toUpperCase(),isnotnull:this.l10n.getConstant("IsNotNull").toUpperCase(),isempty:this.l10n.getConstant("IsEmpty").toUpperCase(),isnotempty:this.l10n.getConstant("IsNotEmpty").toUpperCase(),notstartswith:this.l10n.getConstant("NotLike").toUpperCase(),notendswith:this.l10n.getConstant("NotLike").toUpperCase(),notcontains:this.l10n.getConstant("NotLike").toUpperCase()},this.fields||(this.fields={text:"label",value:"field"})},a.prototype.render=function(){this.levelColl={},this.items=[{text:this.l10n.getConstant("AddGroup"),iconCss:"e-icons e-add-icon e-addgroup"},{text:this.l10n.getConstant("AddCondition"),iconCss:"e-icons e-add-icon e-addrule"}],this.ruleElem=this.ruleTemplate(),this.groupElem=this.groupTemplate();var e=[{value:"isnull",key:this.l10n.getConstant("IsNull")},{value:"isnotnull",key:this.l10n.getConstant("IsNotNull")}],t=[{value:"isnull",key:this.l10n.getConstant("IsNull")},{value:"isnotnull",key:this.l10n.getConstant("IsNotNull")}];this.customOperators.stringOperator=this.customOperators.stringOperator.concat(e),this.customOperators.numberOperator=this.customOperators.numberOperator.concat(t),this.dataSource instanceof P?(this.dataManager=this.dataSource,this.executeDataManager(new ee().take(1))):(this.dataManager=new P(this.dataSource),this.dataColl=this.dataManager.executeLocal(new ee),this.initControl()),this.renderComplete(),this.allowDragAndDrop&&this.initializeDrag()},a.prototype.initializeDrag=function(){this.draggable=new hl(this.element,{dragTarget:".e-drag-qb-rule",distance:5,helper:this.helper.bind(this),dragStart:this.dragStartHandler.bind(this),drag:this.dragHandler.bind(this),dragStop:this.dragStopHandler.bind(this),isReplaceDragEle:!0,isPreventSelect:!1,abort:".e-parent-header",isDragScroll:!0})},a.prototype.helper=function(e){var t=this.draggable.currentStateTarget;if(!t.classList.contains("e-drag-qb-rule")||t.classList.contains("e-drag-qb-rule")&&A(t,".e-disable"))return!1;var i=this.createElement("div",{className:"e-cloneproperties e-draganddrop e-dragclone",styles:'height:"auto", z-index:2, width:'+this.element.offsetWidth}),s;if(this.draggable.currentStateTarget.parentElement.classList.contains("e-group-header"))s=A(t,".e-group-container").cloneNode(!0),A(t,".e-group-container").classList.add("e-qb-dragging-rule");else{i.classList.add("e-group-body"),s=this.createElement("div",{className:"e-rule-container"});var n=A(t,".e-rule-field").cloneNode(!0);s.appendChild(n),A(t,".e-rule-field").classList.add("e-qb-dragging-rule")}i.appendChild(s);var r=i.querySelectorAll("*");return r.forEach(function(l){l.removeAttribute("id")}),this.element.appendChild(i),i},a.prototype.dragStartHandler=function(e){this.draggedRule=e.target,this.isDragEventPrevent=!1,document.body.classList.add("e-prevent-select"),this.dragElement=e.dragElement;var t=A(e.target,".e-rule-container"),i=A(e.target,".e-group-container"),s={dragRuleID:t!==null?t.id:i.id,dragGroupID:i.id,cancel:!1};this.trigger("dragStart",s),this.isDragEventPrevent=s.cancel},a.prototype.dragHandler=function(e){if(!this.isDragEventPrevent){var t=this.element.querySelectorAll(".e-drag-rule-bottom-line");if(t.forEach(function(d){d.classList.remove("e-drag-rule-bottom-line")}),t=this.element.querySelectorAll(".e-drag-rule-top-line"),t.forEach(function(d){d.classList.remove("e-drag-rule-top-line")}),!h(e.target)){if(e.target.nodeName==="HTML"||A(e.target,".e-qb-dragging-rule")||A(e.target,".e-group-header")||!A(e.target,"#"+this.element.id)||A(e.target,".e-disable")||e.target.parentElement&&e.target.parentElement.classList.contains("e-btn-group")&&this.enableSeparateConnector){this.dragElement.classList.add("e-notallowedcur");return}else this.dragElement.classList.remove("e-notallowedcur");var i=A(e.target,".e-rule-container"),s=A(e.target,".e-group-container");if(i){var n=i.getBoundingClientRect(),r=e.event.clientY||e.event.changedTouches[0].clientY,l=r-n.top,o=n.bottom-r,c=20;l<c?i.classList.add("e-drag-rule-top-line"):o<c&&i.classList.add("e-drag-rule-bottom-line")}else if(e.target.classList.contains("e-rule-list")&&e.target.children.length===0)e.target.classList.add("e-drag-rule-bottom-line");else if(e.target.classList.contains("e-rule-list")&&e.target.children[0].classList.contains("e-group-container")){var n=e.target.children[0].getBoundingClientRect(),r=e.event.clientY||e.event.changedTouches[0].clientY,l=r-n.top,c=20;l<c&&e.target.classList.add("e-drag-rule-top-line")}else if((A(e.target,".e-group-container")||e.target.classList.contains("e-group-container"))&&(s||(s=e.target),s.id.indexOf("group0")>-1)){var n=e.target.getBoundingClientRect(),r=e.event.clientY||e.event.changedTouches[0].clientY,o=n.bottom-r,c=20;o<c&&e.target.classList.add("e-drag-rule-bottom-line")}var p={dragRuleID:i!==null?i.id:s!==null?s.id:null,dragGroupID:s!==null?s.id:null,cancel:!1};this.trigger("drag",p),this.isDragEventPrevent=p.cancel}}},a.prototype.dragStopHandler=function(e){var t=this;if(!this.isDragEventPrevent){var i=A(e.target,".e-rule-container");h(i)&&e.target.parentElement&&e.target.parentElement.classList.contains("e-btn-group")&&this.enableSeparateConnector&&(i=A(e.target.parentElement.previousElementSibling,".e-rule-container"));var s;h(e.helper)||(s=A(e.helper,".e-notallowedcur"));var n;if(!s){var r=A(e.target,".e-group-container"),l={cancel:!1,dropRuleID:i!==null?i.id:r!==null?r.id:null,dropGroupID:r!==null?r.id:null};this.trigger("drop",l),l.cancel&&(s=!0),n=this.getValidRules()}this.prvtEvtTgrDaD=!0;var o=this.enableSeparateConnector&&e.target.parentElement&&e.target.parentElement.classList.contains("e-btn-group")?e.target.parentElement.previousElementSibling:e.target;if(i&&!s){var c=i.id.split(this.element.id+"_")[1].split("_")[0];if(this.draggable.currentStateTarget.parentElement.classList.contains("e-rule-field")||this.draggable.currentStateTarget.parentElement.classList.contains("e-group-header")){var p=void 0;this.draggable.currentStateTarget.parentElement.classList.contains("e-group-header")?(p=this.getGroup(this.draggedRule),this.deleteGroup(A(this.draggedRule,".e-group-container"))):(p=this.getRule(this.draggedRule),this.deleteRule(this.draggedRule));var d=ae([],this.getGroup(i),[],!0);d.properties&&(d=d.properties);var f=A(i,".e-group-container"),v=f.querySelectorAll(".e-group-container");v.forEach(function(R){t.element.querySelector("#"+R.id)&&t.deleteGroup(R)});for(var g=f.querySelectorAll(".e-rule-container"),m=[],C=void 0,k=0;k<g.length;k++)(g[k].classList.contains("e-drag-rule-top-line")||g[k].classList.contains("e-drag-rule-bottom-line"))&&(C=k),m.push(g[k].id.split(this.element.id+"_")[1]);this.deleteRules(m),i.classList.contains("e-drag-rule-top-line")?d.rules.splice(C,0,p):d.rules.splice(C+1,0,p),d.rules.forEach(function(R){t.enableSeparateConnector?R.rules?t.addGroups([R],c):t.addRules([R],c):R.condition?t.addGroups([R],c):t.addRules([R],c)})}}else if(o.classList.contains("e-rule-list")&&o.children.length===0&&!s){var f=A(o,".e-group-container"),T=f.id.split(this.element.id+"_")[1].split("_")[0],p=void 0;this.draggable.currentStateTarget.parentElement.classList.contains("e-group-header")?(p=this.getGroup(this.draggedRule),this.deleteGroup(A(this.draggedRule,".e-group-container"))):(p=this.getRule(this.draggedRule),this.deleteRule(this.draggedRule)),this.enableSeparateConnector?p.rules?this.addGroups([p],T):this.addRules([p],T):p.condition?this.addGroups([p],T):this.addRules([p],T)}else if(o.classList.contains("e-rule-list")&&o.children[0].classList.contains("e-group-container")&&!s){var f=A(o,".e-group-container"),x=f.id.split(this.element.id+"_")[1].split("_")[0],p=void 0;this.draggable.currentStateTarget.parentElement.classList.contains("e-group-header")?(p=this.getGroup(this.draggedRule),this.deleteGroup(A(this.draggedRule,".e-group-container"))):(p=this.getRule(this.draggedRule),this.deleteRule(this.draggedRule));var d=ae([],this.getGroup(o),[],!0);d.properties&&(d=d.properties);var L=o.querySelectorAll(".e-group-container");L.forEach(function(H){t.element.querySelector("#"+H.id)&&t.deleteGroup(H)});var g=f.querySelectorAll(".e-rule-container");g.forEach(function(H){t.element.querySelector("#"+H.id)&&t.deleteRule(H)}),this.draggable.currentStateTarget.parentElement.classList.contains("e-group-header")?this.addGroups([p],x):this.addRules([p],x),d.rules.forEach(function(H){t.enableSeparateConnector?H.rules?t.addGroups([H],x):t.addRules([H],x):H.condition?t.addGroups([H],x):t.addRules([H],x)})}else if((A(e.target,".e-group-container")||e.target.classList.contains("e-group-container"))&&!s){var p=void 0;i=A(e.target,".e-group-container"),!i&&e.target.classList.contains("e-group-container")&&(i=e.target);var T=i.id.split(this.element.id+"_")[1].split("_")[0];T==="group0"&&(this.draggable.currentStateTarget.parentElement.classList.contains("e-group-header")?(p=this.getGroup(this.draggedRule),this.deleteGroup(A(this.draggedRule,".e-group-container"))):(p=this.getRule(this.draggedRule),this.deleteRule(this.draggedRule)),this.enableSeparateConnector?p.rules?this.addGroups([p],T):this.addRules([p],T):p.condition?this.addGroups([p],T):this.addRules([p],T))}s||this.trigger("ruleChange",{previousRule:n,rule:this.getValidRules(),type:"drag-and-drop"}),this.prvtEvtTgrDaD=!1,document.body.classList.remove("e-prevent-select");var N=this.element.querySelectorAll(".e-drag-rule-bottom-line");N.forEach(function(R){R.classList.remove("e-drag-rule-bottom-line")}),N=this.element.querySelectorAll(".e-drag-rule-top-line"),N.forEach(function(R){R.classList.remove("e-drag-rule-top-line")}),N=this.element.querySelectorAll(".e-qb-dragging-rule"),N.forEach(function(R){R.classList.remove("e-qb-dragging-rule")}),e.helper&&e.helper.classList.contains("e-cloneproperties")&&document.querySelector("."+e.helper.classList[0])&&ft(e.helper),this.enableSeparateConnector&&this.refresh()}},a.prototype.templateParser=function(e){if(e)try{return typeof e!="function"&&document.querySelectorAll(e).length?Ie(document.querySelector(e).innerHTML.trim()):Ie(e)}catch(t){return Ie(e)}},a.prototype.executeDataManager=function(e){var t=this,i=this.dataManager.executeQuery(e),s=new si;i.then(function(n){n.actual&&n.actual.result?t.dataColl=n.actual.result:t.dataColl=n.result,t.initControl()}).catch(function(n){s.reject(n)})},a.prototype.initControl=function(){this.initialize(),this.initWrapper(),this.wireEvents()},a.prototype.wireEvents=function(){var e=this.getWrapper();b.add(e,"click",this.clickEventHandler,this),b.add(e,"focusout",this.focusEventHandler,this),b.add(e,"focusin",this.focusEventHandler,this),b.add(this.element,"keydown",this.keyBoardHandler,this),b.add(document,"keydown",this.keyBoardHandler,this)},a.prototype.unWireEvents=function(){var e=this.getWrapper();b.remove(e,"click",this.clickEventHandler),b.remove(e,"focusout",this.focusEventHandler),b.remove(e,"focusin",this.focusEventHandler),b.remove(this.element,"keydown",this.keyBoardHandler),b.remove(document,"keydown",this.keyBoardHandler)},a.prototype.getParentGroup=function(e,t){for(var i=e instanceof Element?this.levelColl[e.id]:this.levelColl[""+e],s=t?i.length-1:i.length,n=this.rule,r=0;r<s;r++)n=this.findGroupByIdx(i[r],n,r===0);return n},a.prototype.deleteGroup=function(e){var t=this,i=e,s;if(typeof e=="string"?(s=this.element.id+"_"+e,e=document.getElementById(s),s=s.replace(this.element.id+"_","")):s=i.id.replace(this.element.id+"_",""),!(s==="group0"||!e)){var n={groupID:s,cancel:!1,type:"deleteGroup"};!this.isImportRules&&!this.prvtEvtTgrDaD?this.trigger("beforeChange",n,function(r){t.deleteGroupSuccessCallBack(r,e)}):this.deleteGroupSuccessCallBack(n,e)}},a.prototype.deleteGroupSuccessCallBack=function(e,t){if(!e.cancel){var i=t,s=this.getParentGroup(i,!0),n=0,r=void 0,l=void 0,o=this.getValidRules(this.rule),c=i.nextElementSibling,p=i.previousElementSibling,d=i.querySelectorAll(".e-group-container"),f=i.querySelectorAll(".e-tooltip");for(l=f.length,r=0;r<l;r++)Z(f[r],"tooltip").destroy();for(r=0,l=d.length;r<l;r++)delete this.levelColl[d[r].id];for(;i.previousElementSibling!==null;)i=i.previousElementSibling,(!this.enableSeparateConnector||this.enableSeparateConnector&&(!this.headerTemplate&&!i.classList.contains("e-btn-group")||this.headerTemplate&&(i.classList.contains("e-rule-container")||i.classList.contains("e-group-container"))))&&n++;this.enableSeparateConnector||c&&c.className.indexOf("e-separate-rule")>-1&&(w([c],"e-separate-rule"),E([c],"e-joined-rule"),p&&p.className.indexOf("e-rule-container")>-1&&E([p],"e-prev-joined-rule"));var v=i.parentElement.parentElement.parentElement,g=[];if(this.isReact||this.isAngular){var m=s.rules[n],C=t.querySelectorAll(".e-rule-container");if(m&&m.rules)for(var k=0;k<m.rules.length;k++){var T=this.getColumn(m.rules[k].field);if(C[k]){var x=C[k].querySelector(".e-template-value");T&&(T.ruleTemplate||this.isPlatformTemplate(T)&&x)&&g.push(C[k].id)}}}G(t),this.headerTemplate&&this.clearQBTemplate([t.id]),g.length&&this.clearQBTemplate(g),s.rules.splice(n,1),delete this.levelColl[e.groupID],this.refreshLevelColl(),this.disableRuleCondition(v,s),this.enableSeparateConnector&&p&&(!this.headerTemplate&&p.classList.contains("e-btn-group")||this.headerTemplate&&p.classList.contains("e-custom-group-btn"))&&G(p),!this.isImportRules&&!this.prvtEvtTgrDaD&&this.trigger("change",e),this.filterRules(o,this.getValidRules(this.rule),"deleteGroup")}},a.prototype.isPlatformTemplate=function(e){var t=!1;return t=e.template&&(typeof e.template=="string"||e.template.create===void 0),t},a.prototype.deleteRule=function(e){var t=this,i=A(e,".e-group-container"),s=i.id.replace(this.element.id+"_",""),n=A(e,".e-rule-container").id.replace(this.element.id+"_",""),r={groupID:s,ruleID:n,cancel:!1,type:"deleteRule"};!this.isImportRules&&!this.prvtEvtTgrDaD?this.trigger("beforeChange",r,function(l){t.deleteRuleSuccessCallBack(l,e)}):this.deleteRuleSuccessCallBack(r,e)},a.prototype.deleteRuleSuccessCallBack=function(e,t){if(!e.cancel){var i=A(t,".e-group-container"),s=this.getParentGroup(i),n=A(t,".e-rule-container"),r=this.getValidRules(this.rule),l=n.previousElementSibling,o=0,c=n,p=n.nextElementSibling,d=n.querySelectorAll(".e-tooltip"),f=void 0,v=d.length;for(f=0;f<v;f++)Z(d[f],"tooltip").destroy();for(;n.previousElementSibling!==null;)n=n.previousElementSibling,(!this.enableSeparateConnector||this.enableSeparateConnector&&(!this.headerTemplate&&!n.classList.contains("e-btn-group")||this.headerTemplate&&(n.classList.contains("e-rule-container")||n.classList.contains("e-group-container"))))&&o++;var g=this.getColumn(s.rules[o].field);g&&g.template&&c.querySelector(".e-template")&&this.templateDestroy(g,c.querySelector(".e-template").id),(!l||l.className.indexOf("e-rule-container")<0)&&p&&w([p],"e-joined-rule"),(!p||p.className.indexOf("e-rule-container")<0)&&l&&w([l],"e-prev-joined-rule");var m=c.querySelector(".e-template-value");try{if(this.enableSeparateConnector&&(c.previousElementSibling||c.nextElementSibling)){var C=c.previousElementSibling,k=c.nextElementSibling;if(h(k)&&(!this.headerTemplate&&C.classList.contains("e-btn-group")||this.headerTemplate&&C.classList.contains("e-custom-group-btn"))){if(C&&C.previousElementSibling&&C.previousElementSibling.classList.contains("e-rule-container")){var T=this.getRule(C.previousElementSibling);T.condition=null}G(C)}else(!this.headerTemplate&&k.classList.contains("e-btn-group")||this.headerTemplate&&k.classList.contains("e-custom-group-btn"))&&G(k)}G(c)}catch(N){return}g&&g.ruleTemplate&&this.clearQBTemplate([c.id]),g&&this.isPlatformTemplate(g)&&m&&this.clearQBTemplate([c.id]),s.rules.splice(o,1),s.rules[0]&&s.rules[0].rules||this.disableRuleCondition(i,s,!!this.enableSeparateConnector);for(var x=this.element.querySelectorAll(".e-tooltip"),L=0;L<x.length;L++)Z(x[L],"tooltip").refresh(x[L]);!this.isImportRules&&!this.prvtEvtTgrDaD&&this.trigger("change",e),this.filterRules(r,this.getValidRules(this.rule),"deleteRule")}},a.prototype.setGroupRules=function(e,t){if(this.headerTemplate&&t&&(this.isRoot=!0),this.reset(),this.groupIdCounter=1,this.ruleIdCounter=0,this.isImportRules=!0,this.setProperties({rule:e},!0),e=this.getRuleCollection(this.rule,!1),this.importRules(this.rule,this.element.querySelector(".e-group-container"),!0,this.rule.not,t),e.isLocked){var i=this.element.querySelector(".e-group-container").querySelector(".e-lock-grp-btn");this.groupLock(i)}this.isImportRules=!1},a.prototype.keyBoardHandler=function(e){if(e.currentTarget===this.element&&this.readonly&&(e.keyCode===38||e.keyCode===40||e.keyCode===13))e.preventDefault();else if(e.code==="Escape"&&this.allowDragAndDrop){this.isDragEventPrevent=!0,document.body.classList.remove("e-prevent-select");var t=this.element.querySelectorAll(".e-drag-rule-bottom-line");t.forEach(function(s){s.classList.remove("e-drag-rule-bottom-line")}),t=this.element.querySelectorAll(".e-drag-rule-top-line"),t.forEach(function(s){s.classList.remove("e-drag-rule-top-line")}),t=this.element.querySelectorAll(".e-qb-dragging-rule"),t.forEach(function(s){s.classList.remove("e-qb-dragging-rule")});var i=this.element.querySelector(".e-cloneproperties");i&&ft(i),this.enableSeparateConnector&&this.refresh()}},a.prototype.clearQBTemplate=function(e){(this.isReact||this.isAngular)&&this.clearTemplate(e)},a.prototype.disableRuleCondition=function(e,t,i,s){if(!this.headerTemplate){if(this.readonly)return;var n=e.querySelector(".e-rule-list").childElementCount,r=e.querySelector(".e-btngroup-and"),l=e.querySelector(".e-btngroup-or");if(n>1)if(r.disabled=!1,l.disabled=!1,(l.nextElementSibling.classList.contains("e-btn-disable")||r.nextElementSibling.classList.contains("e-btn-disable"))&&(l.nextElementSibling.classList.remove("e-btn-disable"),r.nextElementSibling.classList.remove("e-btn-disable")),this.enableSeparateConnector&&!i){for(var o=0,c=void 0;;){var p=e.parentElement.querySelectorAll(".e-btngroup-and"),d=e.parentElement.querySelectorAll(".e-btngroup-or");if(r=p[p.length-(1+o)],l=d[d.length-(1+o)],c=p[p.length-(1+o)],c&&c.parentElement&&c.parentElement.style.display==="none")o++;else break}for(var f=e.previousElementSibling;f&&!f.classList.contains("e-rule-container");){if(f.classList.contains("e-group-container")){f=f.querySelectorAll(".e-rule-container")[f.querySelectorAll(".e-rule-container").length-1];break}f=f.previousElementSibling}if(s&&e.classList.contains("e-group-container")){f=e;var v=this.getGroup(f);v.condition==="or"?l.checked=!0:r.checked=!0}else if(f&&f.classList.contains("e-rule-container")){var g=f.id.replace(this.element.id+"_",""),v=this.getRule(g);v.condition==="or"?l.checked=!0:r.checked=!0}}else i||(t&&t.condition==="or"?l.checked=!0:r.checked=!0);else if(this.enableSeparateConnector&&!i){for(var o=0,c=void 0;;){var p=e.parentElement.querySelectorAll(".e-btngroup-and"),d=e.parentElement.querySelectorAll(".e-btngroup-or");if(r=p[p.length-(1+o)],l=d[d.length-(1+o)],c=p[p.length-(1+o)],c&&c.parentElement&&c.parentElement.style.display==="none")o++;else break}for(var f=void 0,m=e.previousElementSibling;m;){if(m.classList.contains("e-group-container")&&(m=m.querySelectorAll(".e-rule-container")[m.querySelectorAll(".e-rule-container").length-1]),m.classList.contains("e-rule-container")){f=m;break}m=m.previousElementSibling}if(h(f)&&e.querySelectorAll(".e-rule-container")[e.querySelectorAll(".e-rule-container").length-1]&&(f=e.querySelectorAll(".e-rule-container")[e.querySelectorAll(".e-rule-container").length-1]),s&&e.classList.contains("e-group-container")){f=e;var v=this.getGroup(f);v.condition==="or"?l.checked=!0:r.checked=!0}else if(f){var g=f.id.replace(this.element.id+"_",""),v=this.getRule(g);v.condition==="or"&&l?l.checked=!0:r&&(r.checked=!0)}}else!i&&!h(r)&&(r.checked=!1,r.disabled=!0,l.checked=!1,l.disabled=!0,t&&(l.nextElementSibling.classList.add("e-btn-disable"),r.nextElementSibling.classList.add("e-btn-disable")))}},a.prototype.getValidRules=function(e){this.isValueEmpty=!0,e||(e=this.getRules());var t=e.condition,i=e.not,s=ae([],e.rules,[],!0),n=h(e.isLocked)?this.getRuleCollection({condition:t,rules:s,not:i},!0):this.getRuleCollection({condition:t,rules:s,not:i,isLocked:e.isLocked},!0);return this.isValueEmpty=!1,n},a.prototype.getRuleCollection=function(e,t){if(h(e))return null;var i;if(e.rules&&e.rules.length&&(Object.keys(e.rules[0]).length>6||t))for(var s=e.rules.length,n=0;n<s;n++)i=e.rules[n],i=this.getRuleCollection(i,t),e.rules[n]=i,Object.keys(i).length<1&&t&&(e.rules.splice(n,1),n--,s--);var r=e.custom;if(e.field&&e.field!==""&&(h(r)||r&&r.type!=="question"&&r.type!=="answer"))if(e.operator&&(e.operator.toString().indexOf("null")>-1||e.operator.toString().indexOf("empty")>-1)&&(e.value=null),this.isRefreshed&&this.enablePersistence||e.field!==""&&e.operator!==""&&(this.isValueEmpty?e.value!==""&&e.value!==void 0:e.value!==void 0)||r&&r.isQuestion){var l=e.condition,o=e.isLocked;e={label:e.label,field:e.field,operator:e.operator,type:e.type,value:e.value},h(o)||(e.isLocked=o),l&&(e.condition=l),r&&(e.custom=r),(e.operator==="in"||e.operator==="notin")&&e.value&&e.value.length===0&&(e={}),(e.operator==="between"||e.operator==="notbetween")&&Array.isArray(e.value)&&(e.value.length<2||e.value.some(function(d){return d===""||d===null}))&&(e={})}else e={};else if(r&&(r.type==="question"||r.type==="answer")){var c=e.not;e={label:e.label,field:e.field,operator:e.operator,type:e.type,value:e.value,condition:e.condition,rules:e.rules},e.custom=r,this.enableNotCondition&&(e.not=c)}else if(h(e.condition)&&h(e.rules))e={};else{var p=e.isLocked;this.enableNotCondition?e={condition:e.condition,rules:e.rules,not:e.not}:e={condition:e.condition,rules:e.rules},h(p)||(e.isLocked=p),r&&(e.custom=r),e.rules&&e.rules.length===0&&(e={})}return e},a.prototype.setRules=function(e){var t=ae({},e,{},!0);this.headerTemplate?this.setGroupRules(t,!0):this.setGroupRules(t)},a.prototype.getRules=function(){var e;return this.enableNotCondition?e={condition:this.rule.condition,rules:this.rule.rules,not:this.rule.not}:e={condition:this.rule.condition,rules:this.rule.rules},h(this.rule.isLocked)||(e.isLocked=this.rule.isLocked),this.rule.custom&&(e.custom=this.rule.custom),e},a.prototype.getRule=function(e){var t,i,s=0;if(e instanceof HTMLElement?t=A(e,".e-rule-container"):(i=this.element.id+"_"+e,t=document.getElementById(i)),h(t))return null;for(var n=A(t,".e-group-container"),r=this.getParentGroup(n);t.previousElementSibling!==null;)t=t.previousElementSibling,(!this.enableSeparateConnector||this.enableSeparateConnector&&(!this.headerTemplate&&!t.classList.contains("e-btn-group")||this.headerTemplate&&(t.classList.contains("e-rule-container")||t.classList.contains("e-group-container"))))&&s++;return r.rules[s]},a.prototype.getGroup=function(e){e instanceof Element&&e.className.indexOf("e-group-container")<1&&(e=A(e,".e-group-container"));var t=e instanceof Element?e.id:this.element.id+"_"+e,i=this.getParentGroup(t);return i},a.prototype.deleteGroups=function(e){var t,i=e.length,s;for(t=0;t<i;t++)e[t]!=="group0"&&(s=this.element.id+"_"+e[t],this.deleteGroup(document.getElementById(s)))},a.prototype.getFilteredRecords=function(){var e=this.getPredicate(this.getValidRules(this.rule)),t=h(e)?new ee:new ee().where(e);return this.dataManager.executeQuery(t)},a.prototype.deleteRules=function(e){var t,i=e.length,s;for(t=0;t<i;t++)s=this.element.id+"_"+e[t],this.deleteRule(document.getElementById(s))},a.prototype.getDataManagerQuery=function(e){for(var t=this.getPredicate(e),i,s=[],n=0,r=Object.keys(this.columns);n<r.length;n++)s.push(this.columns[n].field);return e.rules.length?i=new ee().select(s).where(t):i=new ee().select(s),i},a.prototype.getPredicate=function(e){var t=e.rules,i,s,n,r=!1,l;if(!t)return i;for(var o=0,c=t.length;o<c;o++){var p=t[o].operator;p==="notstartswith"?p="doesnotstartwith":p==="notendswith"?p="doesnotendwith":p==="notcontains"&&(p="doesnotcontain");var d=Object.keys(t[o]);if(r=!1,d.indexOf("rules")>-1&&t[o].rules)s=this.getPredicate(t[o]),s&&(i?e.condition==="and"?i=i.and(s):i=i.or(s):i=s);else if(!h(p)&&!h(p.length)){var f=t[o].operator.toLowerCase(),v=!1,g=["equal","notequal","greaterthan","greaterthanorequal","lessthan","lessthanorequal"];if(t[o].type==="string"&&(r=!this.matchCase),t[o].type==="date"&&g.indexOf(f)>-1&&(r=!0),l=this.getColumn(t[o].field),f.indexOf("null")>-1||f.indexOf("empty")>-1)t[o].value=null;else if(t[o].type==="date"&&!(t[o].value instanceof Array)){var m=this.getFormat(l.format);h(t[o].value)?n=null:(n=this.getDate(t[o].value,m),g.indexOf(f)>-1&&!this.isTime(t[o].value)&&(v=!0))}else n=t[o].value;if(o===0)if(v||(f.indexOf("in")>-1||f.indexOf("between")>-1||f.indexOf("null")>-1||f.indexOf("empty")>-1)&&f.indexOf("contain")<0)i=v?this.datePredicate(t[o],n):this.arrayPredicate(t[o]);else{var C=n;C!==""&&(i=new be(t[o].field,p,n,r))}else if(v||(f.indexOf("in")>-1||f.indexOf("between")>-1||f.indexOf("null")>-1||f.indexOf("empty")>-1)&&f.indexOf("contain")<0)i=v?this.datePredicate(t[o],n,i,e.condition):this.arrayPredicate(t[o],i,e.condition);else if(e.condition==="and"){var C=n;i&&C!==""?i=i.and(t[o].field,p,n,r):C!==""&&(i=new be(t[o].field,p,n,r))}else{var C=n;i&&C!==""?i=i.or(t[o].field,p,n,r):C!==""&&(i=new be(t[o].field,p,n,r))}}}return this.dataSource instanceof P&&!h(i)&&(i.operator==="isnull"||i.operator==="isnotnull")&&(i.operator=i.operator==="isnull"?"equal":"notequal"),i},a.prototype.getLocale=function(){var e=".dates.calendars.gregorian.days.format.short",t=this.locale,i="main.",s=I(i+""+this.locale+e,ul);return s||(t="en"),t},a.prototype.getColumn=function(e,t){var i=this.columns,s;i=t||i;for(var n=0,r=i.length;n<r;n++)if(i[n].field===e){s=i[n];break}else if(i[n].columns){if(s=this.getColumn(e,i[n].columns),s)break}else if(e&&e.indexOf(this.separator)>-1&&this.separator!==""&&i[n].field===e.split(this.separator)[0]){s=i[n];break}return s},a.prototype.getOperators=function(e){var t=this.getColumn(e);return t.operators},a.prototype.setTime=function(e,t){return t?e.setHours(0,0,0):e.setHours(23,59,59),e},a.prototype.datePredicate=function(e,t,i,s){var n,r=this.setTime(new Date(t.getTime()),!0),l=this.setTime(t);switch(e.operator){case"equal":n=new be(e.field,"greaterthanorequal",r),n=n.and(e.field,"lessthanorequal",l);break;case"notequal":n=new be(e.field,"lessthan",r),n=n.or(e.field,"greaterthan",l);break;case"greaterthan":n=new be(e.field,"greaterthan",l);break;case"greaterthanorequal":n=new be(e.field,"greaterthanorequal",r);break;case"lessthan":n=new be(e.field,"lessthan",r);break;case"lessthanorequal":n=new be(e.field,"lessthanorequal",l);break}return n&&(i?s==="and"?i=i.and(n):s==="or"&&(i=i.or(n)):i=n),i},a.prototype.arrayPredicate=function(e,t,i){var s=e.value,n=e.operator.toString(),r=e.value,l,o=this.getColumn(e.field),c=this.getFormat(o.format);if(n.indexOf("null")>-1||n.indexOf("empty")>-1)switch(n){case"isnull":l=new be(e.field,"isnull",r);break;case"isnotnull":l=new be(e.field,"isnotnull",r);break;case"isempty":l=new be(e.field,"equal","");break;case"isnotempty":l=new be(e.field,"notequal","");break}if(!(n.indexOf("null")>-1||n.indexOf("empty")>-1)){for(var p=0,d=s.length;p<d;p++)if(s[p]!==""||(n==="in"||n==="notin")&&o.type==="string")if(p===0){var f="greaterthanorequal";switch(n){case"between":o.type!=="date"?l=new be(e.field,f,s[p]):l=new be(e.field,f,s[p]?this.isTime(s[p])?this.getDate(s[p],c):this.setTime(this.getDate(s[p],c),!0):null);break;case"notbetween":o.type==="date"?l=new be(e.field,"lessthan",s[p]?this.isTime(s[p])?this.getDate(s[p],c):this.setTime(this.getDate(s[p],c),!0):null):l=new be(e.field,"lessthan",s[p]);break;case"in":l=new be(e.field,"equal",s[p]);break;case"notin":l=new be(e.field,"notequal",s[p]);break}}else{var v="greaterthan";switch(e.operator){case"between":o.type==="date"?l=l.and(e.field,"lessthanorequal",s[p]?this.isTime(s[p])?this.getDate(s[p],c):this.setTime(this.getDate(s[p],c)):s[p]):l=l.and(e.field,"lessthanorequal",s[p]);break;case"notbetween":o.type==="date"?l=l.or(e.field,v,s[p]?this.isTime(s[p])?this.getDate(s[p],c):this.setTime(this.getDate(s[p],c)):s[p]):l=l.or(e.field,"greaterthan",s[p]);break;case"in":l=l.or(e.field,"equal",s[p]);break;case"notin":l=l.and(e.field,"notequal",s[p]);break}}}return l&&(t?i==="and"?t=t.and(l):i==="or"&&(t=t.or(l)):t=l),t},a.prototype.getDate=function(e,t){var i=this.intl.parseDate(e,t);return e.indexOf(":")>-1&&e.indexOf("/")<0&&e.indexOf(",")<0&&e.indexOf("-")<0&&(i=new Date,i.setHours(parseInt(e.split(":")[0],10)),i.setMinutes(parseInt(e.split(":")[1],10)),e.split(":")[2]&&i.setSeconds(parseInt(e.split(":")[2],10))),i},a.prototype.isTime=function(e){return!!(e&&e.indexOf(":")>-1)},a.prototype.importRules=function(e,t,i,s,n){if(!i)t=this.renderGroup(e,e.condition,t,s);else{if(e.rules&&e.rules.length>1&&!this.headerTemplate){var r=t.querySelector(".e-btngroup-or"),l=t.querySelector(".e-btngroup-and");if(this.enableSeparateConnector&&t.previousElementSibling&&(r=t.previousElementSibling.querySelector(".e-btngroup-or"),l=t.previousElementSibling.querySelector(".e-btngroup-and")),r.disabled=!1,l.disabled=!1,this.enableSeparateConnector){for(var o=t.previousElementSibling;o&&!o.classList.contains("e-rule-container");){if(o.classList.contains("e-group-container")){o=o.querySelectorAll(".e-rule-container")[o.querySelectorAll(".e-rule-container").length-1];break}o=o.previousElementSibling}if(o&&o.classList.contains("e-rule-container")){var c=o.id.replace(this.element.id+"_",""),p=this.getRule(c);p.condition==="or"?r.checked=!0:l.checked=!0}}else e.condition==="or"?r.checked=!0:l.checked=!0}else this.disableRuleCondition(t);if(this.headerTemplate&&n&&(t=this.renderGroup(e,e.condition,this.element,e.not,n)),this.enableNotCondition&&!this.headerTemplate){var d=t.querySelector(".e-qb-toggle");e.not?E([d],"e-active-toggle"):w([d],"e-active-toggle")}}e.rules&&e.rules.length===0&&this.headerTemplate&&(e.rules[0]={label:"",field:"",operator:"",type:"",value:""});var f=e.rules;if(!h(f))for(var v=0,g=f.length;v<g;v++){var m=Object.keys(f[v]);if(!h(f[v].rules)&&m.indexOf("rules")>-1&&f[v].rules.length!==0){if(this.element.querySelectorAll(".e-group-container").length>this.maxGroupCount)return null;t=this.renderGroup(f[v],f[v].condition,t,f[v].not),t=this.importRules(f[v],t,!0)}else this.renderRule(f[v],t);if(!h(f[v].rules)&&f[v].isLocked){var C=t.querySelector(".e-rule-list").children[v].querySelector(".e-lock-grp-btn");this.groupLock(C)}}return t&&(t=A(t,".e-rule-list")),t&&(t=A(t,".e-group-container")),t},a.prototype.renderGroup=function(e,t,i,s,n){this.addGroupElement(!0,i,t,!1,s,n,e);var r=i.querySelectorAll(".e-group-container"),l=i.querySelector(".e-rule-list").children;if(this.showButtons.cloneGroup&&this.cloneGrpBtnClick&&this.isMiddleGroup){this.isMiddleGroup=!1,this.cloneGrpBtnClick=!1;var o=0,c=this.groupIndex+1;if(this.enableSeparateConnector)for(var p=0;p<c;p++)l[p].classList.contains("e-rule-container")&&(c++,o++);return l[this.groupIndex+o+1]}else return this.showButtons.cloneGroup&&this.cloneGrpBtnClick&&this.isLastGroup?(this.isLastGroup=!1,this.cloneGrpBtnClick=!1,l[l.length-1]):r[r.length-1]},a.prototype.renderRule=function(e,t){t.className.indexOf("e-group-container")>-1?this.addRuleElement(t,e):this.addRuleElement(t.querySelector(".e-group-container"),e)},a.prototype.enableReadonly=function(){for(var e=this.element,t=e.querySelectorAll(".e-dropdownlist, .e-dropdowntree, .e-numerictextbox, .e-textbox, .e-datepicker, .e-multiselect .e-lib, .e-radio"),i=0;i<t.length;i++)if(t[i].classList.contains("e-dropdownlist")){var s=ii(t[i],ms);s.readonly=this.isReadonly}else if(t[i].classList.contains("e-dropdowntree")){var n=Z(t[i],"dropdowntree");n.readonly=this.isReadonly}else if(t[i].classList.contains("e-numerictextbox")){var r=ii(t[i],Da);r.readonly=this.isReadonly}else if(t[i].classList.contains("e-textbox")){var l=ii(t[i],qs);l.readonly=this.isReadonly}else if(t[i].classList.contains("e-datepicker")){var o=ii(t[i],Ms);o.readonly=this.isReadonly}else if(t[i].classList.contains("e-multiselect")){var c=ii(t[i],za);c.readonly=this.isReadonly}else if(t[i].classList.contains("e-radio")){var p=ii(t[i],xn);p.checked||(this.isReadonly?t[i].parentElement.style.display="none":t[i].parentElement.style.display="inherit")}var d=this.element.querySelectorAll(".e-deletegroup"),f=this.element.querySelectorAll(".e-addrulegroup"),v=this.element.querySelectorAll(".e-removerule");!this.isReadonly&&this.ruleElem.classList.contains("e-readonly")&&this.ruleElem.classList.remove("e-readonly");for(var g=[d,f,v],i=0;i<g.length;i++)g[i].forEach(function(C){C.classList.contains("e-readonly")?C.classList.remove("e-readonly"):C.classList.add("e-readonly")});this.enableBtnGroup()},a.prototype.enableBtnGroup=function(){var e=this,t=this.element.querySelectorAll(".e-btngroup-and-lbl, .e-btngroup-or-lbl, .e-qb-toggle"),i=!1;t.forEach(function(s){s.classList.contains("e-qb-toggle")&&!s.classList.contains("e-active-toggle")&&!s.classList.contains("e-readonly")?(s.classList.add("e-readonly"),i=!1):s.classList.contains("e-qb-toggle")&&s.classList.contains("e-not-readonly")?s.classList.remove("e-not-readonly"):s.classList.contains("e-qb-toggle")&&s.classList.contains("e-readonly")?s.classList.remove("e-readonly"):s.classList.contains("e-active-toggle")?(s.classList.add("e-not-readonly"),i=!0):s.previousElementSibling.checked||s.classList.contains("e-readonly")?(s.classList.remove("e-readonly"),i?s.textContent==="AND"?s.classList.add("e-readonly-and"):s.classList.add("e-readonly-or"):(s.textContent==="AND"&&e.isReadonly?(s.classList.remove("e-not"),s.classList.add("e-readonly-and")):(e.enableNotCondition&&s.classList.add("e-not"),s.classList.remove("e-readonly-and")),s.textContent==="OR"&&e.isReadonly?s.classList.add("e-readonly-or-not"):s.classList.remove("e-readonly-or-not"))):s.classList.contains("e-btn-disable")||s.classList.add("e-readonly")})},a.prototype.isDateFunction=function(e){for(var t=["date","time","day","week","month","year","hour","minute","second","now","quarter","period","extract"],i=0,s=t.length;i<s;i++)if(e.toLowerCase().indexOf(t[i])>-1)return!0;return!1},a.prototype.getSqlString=function(e,t,i,s){var n=!1;!i&&i!==""?(i="",n=!0):i+="(";var r=e.condition;if(e.not){var l=void 0;n?(l=s?this.l10n.getConstant("NOT").toUpperCase()+" (":"NOT (",i+=l):(l=s?" "+this.l10n.getConstant("NOT").toUpperCase()+" (":" NOT (",i+=l)}if(e.rules)for(var o=0,c=e.rules.length;o<c;o++){if(e.rules[o].rules)i=this.getSqlString(e.rules[o],t,i,s),this.enableSeparateConnector&&(r=e.rules[o].condition);else{var p=e.rules[o],d="",f=s?this.sqlOperators[p.operator]:this.operators[p.operator];if(p.value instanceof Array)if(p.operator.toString().indexOf("between")>-1){var v=s?" "+this.l10n.getConstant("AND").toUpperCase()+" ":" AND ";p.type==="date"&&!this.isDateFunction(p.value[0])?d+='"'+p.value[0]+'"'+v+'"'+p.value[1]+'"':d+=p.value[0]+v+p.value[1]}else if(typeof p.value[0]=="string"&&p.value!==null){d+='("'+p.value[0]+'"';for(var g=1,m=p.value.length;g<m;g++)d+=',"'+p.value[g]+'"';d+=")"}else d+="("+p.value+")";else p.operator.toString().indexOf("startswith")>-1?d+=p.value?'("'+p.value+'%")':"("+p.value+")":p.operator.toString().indexOf("endswith")>-1?d+=p.value?'("%'+p.value+'")':"("+p.value+")":p.operator.toString().indexOf("contains")>-1?d+=p.value?'("%'+p.value+'%")':"("+p.value+")":p.type==="number"||typeof p.value=="boolean"||p.value===null&&p.operator.toString().indexOf("empty")<-1?d+=p.value:p.operator.toString().indexOf("empty")>-1?d+='""':d+='"'+p.value+'"';if(p.operator.toString().indexOf("null")>-1)t?p.field="`"+p.field+"`":p.field.indexOf(" ")>-1&&(p.field='"'+p.field+'"'),i+=p.field+" "+f;else{var C=f;p.operator==="isempty"?C="=":p.operator==="isnotempty"&&(C="!="),t?p.field="`"+p.field+"`":p.field.indexOf(" ")>-1&&(p.field='"'+p.field+'"'),i+=p.field+" "+C+" "+d}p.condition&&p.condition!==""&&(r=p.condition)}if(o!==c-1){var p=e.rules[o];(r===""||p&&p.condition!==""&&p.custom&&p.custom.isCustom)&&(r=p.condition),r&&(r=s?this.l10n.getConstant(r.toUpperCase()).toUpperCase():r.toUpperCase(),i+=" "+r+" ")}}return n||(i+=")"),e.not&&(i+=")"),i},a.prototype.setRulesFromSql=function(e,t){e=e.replace(/`/g,"");var i=this.getRulesFromSql(e,t);this.setRules({condition:i.condition,not:i.not,rules:i.rules})},a.prototype.getRulesFromSql=function(e,t){this.parser=[],this.sqlParser(e,t),this.setProperties({rule:{condition:"and",not:!1,rules:[]}},!0);var i=this.processParser(this.parser,this.rule,[0],t);return this.enableNotCondition?{condition:i.condition,not:i.not,rules:i.rules}:{condition:i.condition,rules:i.rules}},a.prototype.getSqlFromRules=function(e,t,i){e||(e=this.getValidRules()),e=this.getRuleCollection(e,!1);var s=this.getSqlString(this.getValidRules(e),t,null,i).replace(/"/g,"'");return s},a.prototype.getParameterizedSql=function(e){if(this.moduleLoader.loadedModules.length){e||(e=this.getValidRules());var t={sql:null};return this.notify("query-library",{prop:"getParameterSql",onPropertyChange:!1,value:{rule:e,obj:t}}),t.sql}else console.warn('[WARNING] :: Module "query-library" is not available in QueryBuilder component! You either misspelled the module name or forgot to load it.');return null},a.prototype.setParameterizedSql=function(e){if(this.moduleLoader.loadedModules.length){var t={sql:null};this.notify("query-library",{prop:"convertParamSqlToSql",onPropertyChange:!1,value:{sql:e,obj:t}});var i=t.sql;if(i){i=i.replace(/`/g,"");var s=this.getRulesFromSql(i);this.setRules({condition:s.condition,not:s.not,rules:s.rules})}}else console.warn('[WARNING] :: Module "query-library" is not available in QueryBuilder component! You either misspelled the module name or forgot to load it.')},a.prototype.getParameterizedNamedSql=function(e){if(this.moduleLoader.loadedModules.length){e||(e=this.getValidRules());var t={sql:null};return this.notify("query-library",{prop:"getNamedParameterSql",onPropertyChange:!1,value:{rule:e,obj:t}}),t.sql}else console.warn('[WARNING] :: Module "query-library" is not available in QueryBuilder component! You either misspelled the module name or forgot to load it.');return null},a.prototype.setParameterizedNamedSql=function(e){if(this.moduleLoader.loadedModules.length){var t={sql:null};this.notify("query-library",{prop:"convertNamedParamSqlToSql",onPropertyChange:!1,value:{sql:e,obj:t}});var i=t.sql;if(i){i=i.replace(/`/g,"");var s=this.getRulesFromSql(i);this.setRules({condition:s.condition,not:s.not,rules:s.rules})}}else console.warn('[WARNING] :: Module "query-library" is not available in QueryBuilder component! You either misspelled the module name or forgot to load it.')},a.prototype.setMongoQuery=function(e,t){this.moduleLoader.loadedModules.length?(this.rule={condition:"and",not:!1,rules:[]},this.notify("query-library",{prop:"mongoParser",onPropertyChange:!1,value:{mongoQuery:JSON.parse(e),rule:this.rule,mongoLocale:t}})):console.warn('[WARNING] :: Module "query-library" is not available in QueryBuilder component! You either misspelled the module name or forgot to load it.')},a.prototype.getMongoQuery=function(e){if(this.moduleLoader.loadedModules.length){e||(e=this.getValidRules());var t={mongoQuery:null};return this.notify("query-library",{prop:"getMongoFromRules",onPropertyChange:!1,value:{rule:e,mongoQuery:"",obj:t}}),t.mongoQuery}else console.warn('[WARNING] :: Module "query-library" is not available in QueryBuilder component! You either misspelled the module name or forgot to load it.');return""},a.prototype.cloneRule=function(e,t,i){var s=this.getRule(e.replace(this.element.id+"_","")),n=this.showButtons.cloneRule;t=t.replace(this.element.id+"_",""),this.ruleIndex=i,this.cloneRuleBtnClick=!0,this.showButtons.cloneRule=!0,this.addRules([{label:s.label,field:s.field,type:s.type,operator:s.operator,value:s.value,condition:s.condition}],t),this.ruleIndex=-1,this.cloneRuleBtnClick=!1,this.showButtons.cloneRule=n,n=!1},a.prototype.cloneGroup=function(e,t,i){t=t.replace(this.element.id+"_","");var s=this.getGroup(t),n=this.showButtons.cloneGroup;e=e.replace(this.element.id+"_",""),this.groupIndex=i,this.cloneGrpBtnClick=!0,this.showButtons.cloneGroup=!0,this.addGroups([{condition:s.condition,not:s.not,rules:s.rules}],e),this.groupIndex=-1,this.cloneGrpBtnClick=!1,this.showButtons.cloneGroup=n,n=!1},a.prototype.lockRule=function(e){e.indexOf(this.element.id)<0&&(e=this.element.id+"_"+e);var t=document.getElementById(e).querySelectorAll(".e-lock-rule-btn")[0];this.ruleLock(t)},a.prototype.lockGroup=function(e){e.indexOf(this.element.id)<0&&(e=this.element.id+"_"+e);var t=document.getElementById(e).querySelectorAll(".e-lock-grp-btn")[0];this.groupLock(t)},a.prototype.sqlParser=function(e,t){var i=0,s;do s=e.slice(i),i+=this.parseSqlStrings(s,t);while(s!=="");return this.parser},a.prototype.parseSqlStrings=function(e,t){var i=["=","!=","<=",">=","<",">"],s;t?s=[this.l10n.getConstant("AND").toUpperCase(),this.l10n.getConstant("OR").toUpperCase(),this.l10n.getConstant("NOT").toUpperCase()]:s=["AND","OR","NOT"];var n;t?n=[this.l10n.getConstant("In").toUpperCase(),this.l10n.getConstant("NotIn").toUpperCase(),this.l10n.getConstant("Like").toUpperCase(),this.l10n.getConstant("NotLike").toUpperCase(),this.l10n.getConstant("Between").toUpperCase(),this.l10n.getConstant("NotBetween").toUpperCase(),this.l10n.getConstant("IsNull").toUpperCase(),this.l10n.getConstant("IsNotNull").toUpperCase(),this.l10n.getConstant("IsEmpty").toUpperCase(),this.l10n.getConstant("IsNotEmpty").toUpperCase()]:n=["IN","NOT IN","LIKE","NOT LIKE","BETWEEN","NOT BETWEEN","IS NULL","IS NOT NULL","IS EMPTY","IS NOT EMPTY"];for(var r,l,o,c=0,p=i.length;c<p;c++){r=/^\w+$/.test(i[c])?"\\b":"";var d=RegExp;if(l=new d("^("+i[c]+")"+r,"ig"),l.exec(e))return this.parser.push(["Operators",i[c].toLowerCase()]),i[c].length}var f=this.parser[this.parser.length-1];if(!f||f&&f[0]!=="Literal")for(var c=0,p=s.length;c<p;c++){r=/^\w+$/.test(s[c])?"\\b":"";var d=RegExp;if(l=new d("^("+s[c]+")"+r,"ig"),l.exec(e))return this.parser.push(["Conditions",s[c].toLowerCase()]),s[c].length}for(var c=0,p=n.length;c<p;c++){r=/^\w+$/.test(n[c])?"\\b":"";var d=RegExp;if(l=new d("^("+n[c]+")"+r,"ig"),l.exec(e))return this.parser.push(["SubOperators",n[c].toLowerCase()]),n[c].length}if(/^\(/.exec(e))return this.parser.push(["Left","("]),1;if(/^\)/.exec(e))return this.parser.push(["Right",")"]),1;if(/^(true|false)/.exec(e))return o=/^(true|false)/.exec(e)[0],this.parser.push(["String",o]),o.length;if(/^null/.exec(e))return o=/^null/.exec(e)[0],this.parser.push(["String",null]),o.length;if(/^`?([a-z_][a-z0-9_.\\[\]\\(\\)]{0,}(\\:(number|float|string|date|boolean))?)`?/i.exec(e))return o=/^`?([a-z_][a-z0-9_.\\[\]\\(\\)]{0,}(\\:(number|float|string|date|boolean))?)`?/i.exec(e)[1],this.parser.push(["Literal",o]),o.length;if(this.checkLiteral()&&/^'?([a-z_][a-z0-9 _.\\[\]\\(\\)-]{0,}(\\:(number|float|string|date|boolean))?)'?/i.exec(e))return o=/^'?([a-z_][a-z0-9 _.\\[\]\\(\\)-]{0,}(\\:(number|float|string|date|boolean))?)'?/i.exec(e)[1],this.parser.push(["Literal",o]),o.length+2;if(this.checkNumberLiteral(e,t)){var v=/^[0-9]+(\.[0-9]+)$/.exec(e);if(v)return o=v[0],this.parser.push(["Literal",o]),o.length}var g=this.getSingleQuoteString(e);if(g!==""){if(o=g,o[o.length-2]==="(")for(var m=!1,C=o.length;C<e.length&&(o+=e[C],e[C]===")"&&(m=!0),!(m&&e[C]==="'"));C++);else e[o.length]&&e[o.length]!==")"&&!this.checkCondition(e,o)&&(o=this.combineSingleQuoteString(e,o));return this.parser.push(["String",o]),o.length}var k=this.getDoubleQuoteString(e);return k!==""?(o=k,this.parser.push(["DoubleString",o]),o.length):/^\d*\.?\d+/.exec(e)?(o=/^\d*\.?\d+/.exec(e)[0],this.parser.push(["Number",o]),o.length):/^-?\d*\.?\d+/.exec(e)?(o=/^-?\d*\.?\d+/.exec(e)[0],this.parser.push(["Number",o]),o.length):1},a.prototype.getDoubleQuoteString=function(e){var t=e.indexOf('"');if(t===0){var i=e.indexOf('"',t+1);if(i!==-1)return e.substring(t,i+1)}return""},a.prototype.checkCondition=function(e,t){return e.slice(t.length+1,t.length+4)==="AND"||e.slice(t.length+1,t.length+3)==="OR"},a.prototype.getSingleQuoteString=function(e,t){var i=e.indexOf("'");if(i!==-1&&t||i===0&&!t){var s=e.indexOf("'",i+1);if(s!==-1)return e.substring(i,s+1)}return""},a.prototype.combineSingleQuoteString=function(e,t){if(e[t.length]&&e[t.length]!==")"&&!this.checkCondition(e,t)&&e[t.length]!==","){var i=t.substring(0,t.length-1),s=e.replace(i,""),n=this.getSingleQuoteString(s,!0);if(n!==""){var r=n.substring(1,n.length);t+=r,t=this.combineSingleQuoteString(e,t)}}return t},a.prototype.checkLiteral=function(){var e=this.parser[this.parser.length-1];if(e){var t=this.parser[this.parser.length-2],i=this.parser[this.parser.length-3];if(e[0]==="Left"&&t&&t[0]==="Conditions")return!0;var s="between";if(e[0]==="Conditions"&&i&&i[1].indexOf(s)<0)return!0}else return!0;return!1},a.prototype.checkNumberLiteral=function(e,t){var i=this.parser[this.parser.length-1];if(i){if(/^[0-9]+(?:\.[0-9]+)$/.exec(e)){var s=this.parser[this.parser.length-2],n=this.parser[this.parser.length-3];if(i[0]==="Left"&&s&&s[0]==="Conditions")return!0;var r=t?this.l10n.getConstant("Between").toLowerCase():"between";if(i[0]==="Conditions"&&n&&n[1].indexOf(r)<0)return!0}}else return!0;return!1},a.prototype.getOperator=function(e,t,i){var s={"=":"equal","!=":"notequal","<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal",in:"in","not in":"notin",between:"between","not between":"notbetween","is empty":"isempty","is null":"isnull","is not null":"isnotnull","is not empty":"isnotempty"};if(i){for(var n=Object.keys(this.sqlOperators),r=0;r<n.length;r++)if(this.sqlOperators[n[r]]===t.toUpperCase())return e&&e.indexOf("%")===0&&e[e.length-1]==="%"?t.toUpperCase()==="NOT LIKE"?"notcontains":"contains":e&&e.indexOf("%")!==0&&e.indexOf("%")===e.length-1?t.toUpperCase()==="NOT LIKE"?"notstartswith":"startswith":e&&e.indexOf("%")===0&&e.indexOf("%")!==e.length-1?t.toUpperCase()==="NOT LIKE"?"notendswith":"endswith":n[r];return null}if(e){if(e.indexOf("%")===0&&e[e.length-1]==="%")return t==="not like"?"notcontains":"contains";if(e.indexOf("%")!==0&&e.indexOf("%")===e.length-1)return t==="not like"?"notstartswith":"startswith";if(e.indexOf("%")===0&&e.indexOf("%")!==e.length-1)return t==="not like"?"notendswith":"endswith"}else{if(t==="not like")return"notequal";if(t==="like")return"equal"}return s[""+t]},a.prototype.getTypeFromColumn=function(e){var t=this.getColumn(e.field);return h(t)?null:t.type},a.prototype.getLabelFromColumn=function(e){var t="",i=0;if(this.separator!==""){for(var s=e.split(this.separator),n=0;n<s.length;n++)t+=this.getLabelFromField(s,n+1),i++,i<s.length&&(t+=this.separator);return t}else{var r=this.getColumn(e).label;return r}},a.prototype.getLabelFromField=function(e,t){for(var i="",s=0,n=0;n<t;n++)i+=e[n],s++,s<t&&(i+=this.separator);return this.getColumn(i).label},a.prototype.processParser=function(e,t,i,s){for(var n,r,l,o,c=[],p=[],d,f,v,g,m,C,k=!1,T=!1,x=0,L=e.length;x<L;x++)if(e[x][0]==="Literal"){var N=this.getColumn(e[x][1]);if(l={label:N&&N.label?N.label:e[x][1],field:e[x][1]},e[x+1][0]==="SubOperators"){if(e[x+1][1].indexOf("null")>-1||e[x+1][1].indexOf("empty")>-1)l.operator=this.getOperator(" ",e[x+1][1],s),l.value=null,l.type=this.getTypeFromColumn(l);else{var R=e[x+3][1]?e[x+3][1].replace(/'/g,""):e[x+3][1];l.operator=this.getOperator(R,e[x+1][1],s)}for(C=e[x+1][1],x++,n=x+1,r=L,s&&l.operator==="contains"||l.operator==="startswith"||l.operator==="endswith"?C="like":s&&l.operator==="notcontains"||l.operator==="notstartswith"||l.operator==="notendswith"?C="not like":s&&(C=l.operator),n=x+1;n<r;n++)if(C.indexOf("between")<0&&e[n][0]==="Left")k=!0;else if(e[n][0]==="Right"&&k){x=n,k=!1;break}else{if(C.indexOf("null")>-1||C.indexOf("empty")>-1)break;if(C.indexOf("like")>-1&&e[n][0]==="String"){var Y=e[n][1];e[n][1]&&e[n][1][0]==="'"&&(Y=e[n][1].substring(1,e[n][1].length-1)),Y=Y?Y.replace(/%/g,""):e[n][1],l.value=Y,l.type="string"}else if(C.indexOf("between")>-1){if(e[n][0]==="Literal"||e[n][0]==="Left")break;if(e[n][0]==="Number")c.push(Number(e[n][1]));else if(e[n][0]==="String"){var Y=e[n][1];e[n][1]&&e[n][1][0]==="'"&&(Y=e[n][1].substring(1,e[n][1].length-1)),p.push(Y)}}else if(e[n][0]==="Number")c.push(Number(e[n][1]));else if(e[n][0]==="String"){var Y=e[n][1];e[n][1]&&e[n][1][0]==="'"&&(Y=e[n][1].substring(1,e[n][1].length-1)),p.push(Y)}l.type=this.getTypeFromColumn(l)}C.indexOf("like")<0&&(e[n-1][0]==="Number"?(l.value=c,l.type="number"):e[n-1][0]==="String"?(l.value=p,l.type="string"):C.indexOf("between")>-1&&e[n-1][0]==="Conditions"&&(p.length!==0?(l.value=p,l.type="string"):(l.value=c,l.type="number")),c=[],p=[],l.type=this.getTypeFromColumn(l)),this.enableSeparateConnector&&e[x+1][0]==="Conditions"&&(l.condition=e[x+1][1])}else if(e[x+1][0]==="Operators"){if(l.operator=this.getOperator(e[x+2][1],e[x+1][1],s),l.operator==="equal"&&e[x+2][0]==="String"&&e[x+2][1]==="''"?l.operator="isempty":l.operator==="notequal"&&e[x+2][0]==="String"&&e[x+2][1]==="''"&&(l.operator="isnotempty"),e[x+2][0]==="Number")l.type="number",l.value=Number(e[x+2][1]);else{l.type="string";var Y=e[x+2][1];Y&&Y[0]==="'"&&(Y=Y.substring(1,Y.length-1)),l.value=Y}this.enableSeparateConnector&&e[x+3][0]==="Conditions"&&(l.condition=e[x+3][1]),l.type=this.getTypeFromColumn(l)}t.rules.push(l)}else if(e[x][0]==="Left"){if(e[0][0]!=="Left"&&(e[x-1][1]==="not"||s&&this.l10n.getConstant("NOT").toLowerCase()===e[x-1][1])){T=!0;continue}for(this.parser=e.splice(x+1,L-(x+1)),this.enableNotCondition?o={condition:"and",rules:[],not:!1}:o={condition:"and",rules:[]},m=0,f=t.rules.length,d=0;d<f;d++)t.rules[d].rules&&m++;return i.push(m),t.rules.push(o),o=this.processParser(this.parser,o,i,s),t}else if(e[x][0]==="Conditions"&&!this.enableSeparateConnector)e[x][1]==="not"||s&&this.l10n.getConstant("NOT").toLowerCase()===e[x][1]?t.not=!0:t.condition=e[x][1];else if(e[x][0]==="Right"){if(T&&e[x+1][0]==="Right"){T=!1;continue}for(this.parser=e.splice(x+1,L-(x+1)),i.pop(),t=this.rule,g=i.length,v=0;v<g;v++)t=this.findGroupByIdx(i[v],t,v===0);return this.processParser(this.parser,t,i,s)}return t},a.prototype.groupClone=function(e){var t=e.closest(".e-rule-list").closest(".e-group-container"),i=e.id.replace(this.element.id+"_",""),s=t.id.replace(this.element.id+"_",""),n=this.getGroup(i);this.groupIndex=Array.prototype.indexOf.call(e.closest(".e-rule-list").children,e.closest(".e-group-container")),this.addGroups([{condition:n.condition,not:n.not,rules:n.rules}],s),this.groupIndex=-1},a.prototype.ruleClone=function(e){for(var t=A(e,".e-rule-container"),i=e.closest(".e-rule-list").closest(".e-group-container"),s=this.getRule(e),n=i.id.replace(this.element.id+"_",""),r=i.querySelectorAll(".e-rule-container"),l=0,o=r.length;l<o;l++)t.id===r[l].id&&(this.ruleIndex=l);this.enableSeparateConnector?this.addRules([{label:s.label,field:s.field,type:s.type,operator:s.operator,value:s.value,condition:s.condition}],n):this.addRules([{label:s.label,field:s.field,type:s.type,operator:s.operator,value:s.value}],n),this.ruleIndex=-1},a.prototype.ruleLock=function(e){var t=A(e,".e-rule-container"),i=this.getRule(t.id.replace(this.element.id+"_",""));t.classList.contains("e-disable")?(i.isLocked=!1,this.lockItems=this.lockItems.filter(function(s){return s!==t.id}),t.classList.remove("e-disable"),this.disableRuleControls(e,t,!1),e.children[0].classList.add("e-unlock"),e.children[0].classList.remove("e-lock"),e.setAttribute("title",this.l10n.getConstant("LockRule"))):(i.isLocked=!0,this.lockItems.indexOf(t.id)<0&&this.lockItems.splice(this.lockItems.length-1,0,t.id),t.classList.add("e-disable"),this.disableRuleControls(e,t,!0),e.children[0].classList.add("e-lock"),e.children[0].classList.remove("e-unlock"),e.setAttribute("title",this.l10n.getConstant("UnlockRule")))},a.prototype.groupLock=function(e){var t=A(e,".e-group-container"),i=this.getGroup(t.id.replace(this.element.id+"_","")),s=t.id.indexOf("group0")>-1;if(t.classList.contains("e-disable")){if(s){var n={};n.condition=i.condition,n.not=i.not,n.isLocked=!1,this.setProperties({rule:n},!0)}else i.isLocked=!1;this.lockItems=this.lockItems.filter(function(r){return r!==t.id}),t.classList.remove("e-disable"),this.disableHeaderControls(e,t,!1),e.children[0].classList.add("e-unlock"),e.children[0].classList.remove("e-lock"),e.setAttribute("title",this.l10n.getConstant("LockGroup")),this.updateLockItems()}else{if(s){var n={};n.condition=i.condition,n.not=i.not,n.isLocked=!0,this.setProperties({rule:n},!0)}else i.isLocked=!0;this.lockItems.indexOf(t.id)<0&&this.lockItems.splice(this.lockItems.length-1,0,t.id),t.classList.add("e-disable"),this.disableHeaderControls(e,t,!0),e.children[0].classList.add("e-lock"),e.children[0].classList.remove("e-unlock"),e.setAttribute("title",this.l10n.getConstant("UnlockGroup"))}},a.prototype.updateLockItems=function(){for(var e=0;e<this.lockItems.length;e++){var t=this.lockItems[e].split("_");if(t.length>2){var i=this.element.querySelector("#"+this.lockItems[e]),s=i.querySelector(".e-lock-rule-btn");i=A(s,".e-rule-container"),i.classList.contains("e-disable")||this.ruleLock(s)}else{var n=this.element.querySelector("#"+this.lockItems[e]),s=n.querySelector(".e-lock-grp-btn");n=A(s,".e-group-container"),n.classList.contains("e-disable")||this.groupLock(s)}}},a.prototype.disableHeaderControls=function(e,t,i){for(var s=t.querySelectorAll(".e-btngroup-and"),n=t.querySelectorAll(".e-btngroup-or"),r=t.querySelectorAll(".e-qb-toggle"),l=t.querySelectorAll(".e-add-btn"),o=t.querySelectorAll(".e-deletegroup"),c=t.querySelectorAll(".e-lock-grp-btn"),p=t.querySelectorAll(".e-clone-grp-btn"),d=t.querySelectorAll(".e-group-container"),f=t.querySelectorAll(".e-add-condition-btn"),v=t.querySelectorAll(".e-add-group-btn"),g=0;g<s.length;g++)i?(d[g]&&d[g].classList.contains("e-disable")&&d[g].classList.add("e-disable"),s[g].disabled=!0,n[g].disabled=!0,l[g]&&(l[g].disabled=!0),f[g]&&(f[g].disabled=!0),v[g]&&(v[g].disabled=!0),r[g]&&(r[g].disabled=!0),o[g]&&(o[g].disabled=!0),p[g]&&(p[g].disabled=!0),s[g].parentElement.classList.add("e-disabled"),c[g]&&c[g]!==e&&(c[g].disabled=!0,c[g].children[0].classList.remove("e-unlock"),c[g].children[0].classList.add("e-lock"))):(d[g]&&d[g].classList.remove("e-disable"),s[g].disabled=!1,n[g].disabled=!1,l[g]&&(l[g].disabled=!1),f[g]&&(f[g].disabled=!1),v[g]&&(v[g].disabled=!1),c[g]&&(c[g].disabled=!1),r[g]&&(r[g].disabled=!1),o[g]&&(o[g].disabled=!1),p[g]&&(p[g].disabled=!1),s[g].parentElement.classList.remove("e-disabled"),c[g]&&c[g].children[0].classList.remove("e-lock"),c[g]&&c[g].children[0].classList.add("e-unlock"));this.disableRuleControls(e,t,i)},a.prototype.disableRuleControls=function(e,t,i){for(var s=t.querySelectorAll(".e-control.e-dropdownlist"),n=t.querySelectorAll(".e-control.e-numerictextbox"),r=t.querySelectorAll(".e-control.e-textbox"),l=t.querySelectorAll(".e-control.e-datepicker"),o=t.querySelectorAll(".e-control.e-checkbox"),c=t.querySelectorAll(".e-control.e-radio"),p=t.querySelectorAll(".e-control.e-multiselect"),d=t.querySelectorAll(".e-rule-delete"),f=t.querySelectorAll(".e-lock-rule"),v=t.querySelectorAll(".e-clone-rule"),g=t.querySelectorAll(".e-rule-container"),m=0;m<d.length;m++)i?(g[m]&&g[m].classList.contains("e-disable")&&g[m].classList.add("e-disable"),d[m].disabled=!0,v[m]&&(v[m].disabled=!0),f[m]!==e&&(f[m].disabled=!0,f[m].children[0].classList.remove("e-unlock"),f[m].children[0].classList.add("e-lock"))):(g[m]&&g[m].classList.remove("e-disable"),v[m]&&(v[m].disabled=!1),d[m].disabled=!1,f[m].disabled=!1,f[m].children[0].classList.remove("e-lock"),f[m].children[0].classList.add("e-unlock"));for(var C,k,T,x,L,N,R,m=0;m<s.length;m++)C=Z(s[m],"dropdownlist"),i?C.enabled=!1:C.enabled=!0;for(var m=0;m<n.length;m++)k=Z(n[m],"numerictextbox"),i?k.enabled=!1:k.enabled=!0;for(var m=0;m<r.length;m++)T=Z(r[m],"textbox"),i?T.enabled=!1:T.enabled=!0;for(var m=0;m<l.length;m++)x=Z(l[m],"datepicker"),i?x.enabled=!1:x.enabled=!0;for(var m=0;m<o.length;m++)L=Z(o[m],"checkbox"),i?L.disabled=!0:L.disabled=!1;for(var m=0;m<c.length;m++)N=Z(c[m],"radio"),i?N.disabled=!0:N.disabled=!1;for(var m=0;m<p.length;m++)R=Z(p[m],"multiselect"),i?R.enabled=!1:R.enabled=!0},oe([q()],a.prototype,"created",void 0),oe([q()],a.prototype,"actionBegin",void 0),oe([q()],a.prototype,"beforeChange",void 0),oe([q()],a.prototype,"change",void 0),oe([q()],a.prototype,"dataBound",void 0),oe([q()],a.prototype,"ruleChange",void 0),oe([q()],a.prototype,"dragStart",void 0),oe([q()],a.prototype,"drag",void 0),oe([q()],a.prototype,"drop",void 0),oe([Nt({},vp)],a.prototype,"showButtons",void 0),oe([y(!1)],a.prototype,"summaryView",void 0),oe([y(!1)],a.prototype,"allowValidation",void 0),oe([y("Default")],a.prototype,"fieldMode",void 0),oe([y([])],a.prototype,"columns",void 0),oe([y(null)],a.prototype,"fieldModel",void 0),oe([y(null)],a.prototype,"operatorModel",void 0),oe([y(null)],a.prototype,"valueModel",void 0),oe([y()],a.prototype,"headerTemplate",void 0),oe([y("")],a.prototype,"cssClass",void 0),oe([y([])],a.prototype,"dataSource",void 0),oe([y("Horizontal")],a.prototype,"displayMode",void 0),oe([y(!1)],a.prototype,"enablePersistence",void 0),oe([y("Default")],a.prototype,"sortDirection",void 0),oe([y(5)],a.prototype,"maxGroupCount",void 0),oe([y("auto")],a.prototype,"height",void 0),oe([y("auto")],a.prototype,"width",void 0),oe([y(!1)],a.prototype,"matchCase",void 0),oe([y(0)],a.prototype,"immediateModeDelay",void 0),oe([y(!1)],a.prototype,"enableNotCondition",void 0),oe([y(!1)],a.prototype,"readonly",void 0),oe([y(!0)],a.prototype,"addRuleToNewGroups",void 0),oe([y(!1)],a.prototype,"autoSelectField",void 0),oe([y(!0)],a.prototype,"autoSelectOperator",void 0),oe([y("")],a.prototype,"separator",void 0),oe([y(!1)],a.prototype,"enableSeparateConnector",void 0),oe([Nt({condition:"and",rules:[]},fp)],a.prototype,"rule",void 0),oe([y(!1)],a.prototype,"allowDragAndDrop",void 0),a=oe([ot],a),a}(Tt),gp=function(){var u=function(a,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},u(a,e)};return function(a,e){u(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ul=function(u){gp(a,u);function a(e){var t=u.call(this,e)||this;return t.initRenderCalled=!1,t.checkInjectedModules=!0,t.directivekeys={columns:"column"},t.statelessTemplateProps=null,t.templateProps=null,t.immediateRender=!1,t.isReactMock=!0,t.portals=[],t}return a.prototype.render=function(){if(this.isReactMock=!1,(this.element&&!this.initRenderCalled||this.refreshing)&&!this.isReactForeceUpdate)u.prototype.render.call(this),this.initRenderCalled=!0;else return Re.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals))},a}(mp);No(Ul,[Lo,Re.Component]);const yp=({data:u,setOpen:a,setFilteredData:e})=>{const t=Re.useRef(null),i=[{field:"name",label:"name",type:"string"},{field:"length",label:"length",type:"number"},{field:"width",label:"width",type:"number"},{field:"thickness",label:"thickness",type:"number"}],s={condition:"and",rules:[{field:"length",label:"length",operator:"equal",type:"number",value:819}]},n=()=>{const l=t.current;if(l){try{const o=l.getRules(),c=l.getPredicate(o),p=new P(u),d=c?p.executeLocal(new ee().where(c)):u;e(d,o,c!=null?c:null)}catch(o){console.error("Invalid query rules:",o),e(u,{},null)}a(!1)}},r=()=>{a(!1)};return je.jsxs(je.Fragment,{children:[je.jsx(cl,{variant:"h2",children:"Filter"}),je.jsx(Ul,{width:"100%",columns:i,ref:t,rule:s}),je.jsxs(pl,{direction:"row",gap:2,sx:{mt:1},children:[je.jsx(bn,{variant:"outlined",onClick:n,children:"Apply"}),je.jsx(bn,{variant:"outlined",onClick:r,children:"Cancel"})]})]})},bp=(u,a)=>{const e=new Map;for(const t of u){const i=Cp(t,a.toString());e.has(i)||e.set(i,[]),e.get(i).push(t)}return e},Cp=(u,a)=>a.split(".").reduce((e,t)=>e==null?void 0:e[t],u),Sp=(u,a)=>a?u.filter(e=>Object.values(e).some(t=>typeof t=="string"||typeof t=="number"?t.toString().toLowerCase().includes(a):!1)):u,Ep=(u,a,e)=>{let t=Sp(u,a);return e&&(t=new P(t).executeLocal(new ee().where(e))),t};window.XLSX=po;const xp={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%",bgcolor:"background.paper",boxShadow:24,p:4},Dp=({data:u,settings:a,title:e,header:t,groupBy:i})=>{const[s,n]=Re.useState(!1),[r,l]=Re.useState(""),[o,c]=Re.useState(null),[p,d]=Re.useState(null),[f,v]=Re.useState(u),g=Re.useCallback(L=>oo(l,300)(L),[l]),[,m]=Re.useState(null),[C,k]=Re.useState(null);Re.useEffect(()=>{const L=Ep(u,r,C);v(L),d(o?bp(L,o):null)},[u,r,C,o]);const T=()=>n(!1),x=L=>{c(L)};return je.jsxs(je.Fragment,{children:[e&&je.jsx(cl,{variant:"h2",className:"SectionTitle no-print",sx:{marginBottom:2},children:e}),je.jsxs(pl,{direction:"row",mb:1,className:"no-print",children:[je.jsx(vo,{setFilter:g}),i&&je.jsx(wo,{groupBy:i!=null?i:[],handleToggle:L=>x(L)})]}),je.jsx(ho,{open:s,onClose:T,className:"no-print",children:je.jsx(uo,{sx:xp,children:je.jsx(yp,{setOpen:n,data:u,setFilteredData:(L,N,R)=>{m(N),k(R)}})})}),!p&&je.jsx(Cn,{data:f,settings:a,header:t,search:!1,displayResults:!0}),p&&Array.from(p.entries()).map(([L,N])=>je.jsxs(co.Fragment,{children:[je.jsx(Cn,{data:N,settings:a,header:L?L.toString():"",displayResults:!0},L?L.toString():""),je.jsx("br",{})]},fo()))]})};export{Dp as T};
